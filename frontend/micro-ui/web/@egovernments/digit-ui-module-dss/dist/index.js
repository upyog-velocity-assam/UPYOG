function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),l=e(t),n=require("react-i18next"),a=require("@egovernments/digit-ui-react-components"),i=require("react-router-dom"),r=require("react-date-range"),o=require("recharts"),s=e(require("react-tooltip")),d=require("react-simple-maps"),u=require("lodash");function c(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function m(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function v(e){m(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function g(e,t){m(2,arguments);var l=v(e),n=c(t);if(isNaN(n))return new Date(NaN);if(!n)return l;var a=l.getDate(),i=new Date(l.getTime());i.setMonth(l.getMonth()+n+1,0);var r=i.getDate();return a>=r?i:(l.setFullYear(i.getFullYear(),i.getMonth(),a),l)}function h(e,t){m(2,arguments);var l=v(e).getTime(),n=c(t);return new Date(l+n)}function p(e,t){m(1,arguments);var l=t||{},n=l.locale,a=n&&n.options&&n.options.weekStartsOn,i=null==a?0:c(a),r=null==l.weekStartsOn?i:c(l.weekStartsOn);if(!(r>=0&&r<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var o=v(e),s=o.getDay(),d=(s<r?7:0)+s-r;return o.setDate(o.getDate()-d),o.setHours(0,0,0,0),o}function f(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function D(e){m(1,arguments);var t=v(e);return t.setHours(0,0,0,0),t}function E(e,t){m(2,arguments);var l=D(e),n=D(t),a=l.getTime()-f(l),i=n.getTime()-f(n);return Math.round((a-i)/864e5)}function S(e,t){m(2,arguments);var l=c(t);return h(e,1e3*l)}function y(e,t){m(2,arguments);var l=c(t);return g(e,12*l)}function b(e){return m(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function w(e){if(m(1,arguments),!b(e)&&"number"!=typeof e)return!1;var t=v(e);return!isNaN(Number(t))}function T(e,t){var l=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return l<0?-1:l>0?1:l}function C(e,t){m(2,arguments);var l=v(e),n=v(t),a=T(l,n),i=Math.abs(E(l,n));l.setDate(l.getDate()-a*i);var r=Number(T(l,n)===-a),o=a*(i-r);return 0===o?0:o}function _(e){m(1,arguments);var t=v(e);return t.setHours(23,59,59,999),t}function L(e){m(1,arguments);var t=v(e),l=t.getMonth(),n=l-l%3;return t.setMonth(n,1),t.setHours(0,0,0,0),t}function x(e){m(1,arguments);var t=v(e);return t.setDate(1),t.setHours(0,0,0,0),t}function k(e){m(1,arguments);var t=v(e),l=new Date(0);return l.setFullYear(t.getFullYear(),0,1),l.setHours(0,0,0,0),l}function N(e){m(1,arguments);var t=v(e),l=t.getFullYear();return t.setFullYear(l+1,0,0),t.setHours(23,59,59,999),t}function A(){return _(Date.now())}function M(){var e=new Date,t=e.getFullYear(),l=e.getMonth(),n=e.getDate(),a=new Date(0);return a.setFullYear(t,l,n-1),a.setHours(23,59,59,999),a}var I={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function U(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=t.width?String(t.width):e.defaultWidth,n=e.formats[l]||e.formats[e.defaultWidth];return n}}var O={date:U({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:U({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:U({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},R={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function F(e){return function(t,l){var n,a=l||{};if("formatting"===(a.context?String(a.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,r=a.width?String(a.width):i;n=e.formattingValues[r]||e.formattingValues[i]}else{var o=e.defaultWidth,s=a.width?String(a.width):e.defaultWidth;n=e.values[s]||e.values[o]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function B(e){return function(t){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var r,o=i[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(s)?P(s,function(e){return e.test(o)}):H(s,function(e){return e.test(o)});r=e.valueCallback?e.valueCallback(d):d,r=l.valueCallback?l.valueCallback(r):r;var u=t.slice(o.length);return{value:r,rest:u}}}function H(e,t){for(var l in e)if(e.hasOwnProperty(l)&&t(e[l]))return l}function P(e,t){for(var l=0;l<e.length;l++)if(t(e[l]))return l}var z,j={code:"en-US",formatDistance:function(e,t,l){var n,a=I[e];return n="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=l&&l.addSuffix?l.comparison&&l.comparison>0?"in "+n:n+" ago":n},formatLong:O,formatRelative:function(e,t,l,n){return R[e]},localize:{ordinalNumber:function(e,t){var l=Number(e),n=l%100;if(n>20||n<10)switch(n%10){case 1:return l+"st";case 2:return l+"nd";case 3:return l+"rd"}return l+"th"},era:F({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:F({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:F({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:F({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:F({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(z={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=e.match(z.matchPattern);if(!l)return null;var n=l[0],a=e.match(z.parsePattern);if(!a)return null;var i=z.valueCallback?z.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;var r=e.slice(n.length);return{value:i,rest:r}}),era:B({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:B({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:B({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:B({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:B({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function W(e,t){m(2,arguments);var l=c(t);return h(e,-l)}function V(e){m(1,arguments);var t=1,l=v(e),n=l.getUTCDay(),a=(n<t?7:0)+n-t;return l.setUTCDate(l.getUTCDate()-a),l.setUTCHours(0,0,0,0),l}function K(e){m(1,arguments);var t=v(e),l=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(l+1,0,4),n.setUTCHours(0,0,0,0);var a=V(n),i=new Date(0);i.setUTCFullYear(l,0,4),i.setUTCHours(0,0,0,0);var r=V(i);return t.getTime()>=a.getTime()?l+1:t.getTime()>=r.getTime()?l:l-1}function Y(e){m(1,arguments);var t=K(e),l=new Date(0);l.setUTCFullYear(t,0,4),l.setUTCHours(0,0,0,0);var n=V(l);return n}function q(e,t){m(1,arguments);var l=t||{},n=l.locale,a=n&&n.options&&n.options.weekStartsOn,i=null==a?0:c(a),r=null==l.weekStartsOn?i:c(l.weekStartsOn);if(!(r>=0&&r<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var o=v(e),s=o.getUTCDay(),d=(s<r?7:0)+s-r;return o.setUTCDate(o.getUTCDate()-d),o.setUTCHours(0,0,0,0),o}function G(e,t){m(1,arguments);var l=v(e),n=l.getUTCFullYear(),a=t||{},i=a.locale,r=i&&i.options&&i.options.firstWeekContainsDate,o=null==r?1:c(r),s=null==a.firstWeekContainsDate?o:c(a.firstWeekContainsDate);if(!(s>=1&&s<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(n+1,0,s),d.setUTCHours(0,0,0,0);var u=q(d,t),g=new Date(0);g.setUTCFullYear(n,0,s),g.setUTCHours(0,0,0,0);var h=q(g,t);return l.getTime()>=u.getTime()?n+1:l.getTime()>=h.getTime()?n:n-1}function Q(e,t){m(1,arguments);var l=t||{},n=l.locale,a=n&&n.options&&n.options.firstWeekContainsDate,i=null==a?1:c(a),r=null==l.firstWeekContainsDate?i:c(l.firstWeekContainsDate),o=G(e,t),s=new Date(0);s.setUTCFullYear(o,0,r),s.setUTCHours(0,0,0,0);var d=q(s,t);return d}function X(e,t){for(var l=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return l+n}var J={G:function(e,t,l){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return l.era(n,{width:"abbreviated"});case"GGGGG":return l.era(n,{width:"narrow"});case"GGGG":default:return l.era(n,{width:"wide"})}},y:function(e,t,l){if("yo"===t){var n=e.getUTCFullYear();return l.ordinalNumber(n>0?n:1-n,{unit:"year"})}return function(e,t){var l=e.getUTCFullYear(),n=l>0?l:1-l;return X("yy"===t?n%100:n,t.length)}(e,t)},Y:function(e,t,l,n){var a=G(e,n),i=a>0?a:1-a;return"YY"===t?X(i%100,2):"Yo"===t?l.ordinalNumber(i,{unit:"year"}):X(i,t.length)},R:function(e,t){return X(K(e),t.length)},u:function(e,t){return X(e.getUTCFullYear(),t.length)},Q:function(e,t,l){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return X(n,2);case"Qo":return l.ordinalNumber(n,{unit:"quarter"});case"QQQ":return l.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return l.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return l.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,l){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return X(n,2);case"qo":return l.ordinalNumber(n,{unit:"quarter"});case"qqq":return l.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return l.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return l.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,l){var n=e.getUTCMonth();switch(t){case"M":case"MM":return function(e,t){var l=e.getUTCMonth();return"M"===t?String(l+1):X(l+1,2)}(e,t);case"Mo":return l.ordinalNumber(n+1,{unit:"month"});case"MMM":return l.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return l.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return l.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,l){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return X(n+1,2);case"Lo":return l.ordinalNumber(n+1,{unit:"month"});case"LLL":return l.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return l.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return l.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,l,n){var a=function(e,t){m(1,arguments);var l=v(e),n=q(l,t).getTime()-Q(l,t).getTime();return Math.round(n/6048e5)+1}(e,n);return"wo"===t?l.ordinalNumber(a,{unit:"week"}):X(a,t.length)},I:function(e,t,l){var n=function(e){m(1,arguments);var t=v(e),l=V(t).getTime()-Y(t).getTime();return Math.round(l/6048e5)+1}(e);return"Io"===t?l.ordinalNumber(n,{unit:"week"}):X(n,t.length)},d:function(e,t,l){return"do"===t?l.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,t){return X(e.getUTCDate(),t.length)}(e,t)},D:function(e,t,l){var n=function(e){m(1,arguments);var t=v(e),l=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),a=l-n;return Math.floor(a/864e5)+1}(e);return"Do"===t?l.ordinalNumber(n,{unit:"dayOfYear"}):X(n,t.length)},E:function(e,t,l){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return l.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return l.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return l.day(n,{width:"short",context:"formatting"});case"EEEE":default:return l.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,l,n){var a=e.getUTCDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return X(i,2);case"eo":return l.ordinalNumber(i,{unit:"day"});case"eee":return l.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return l.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return l.day(a,{width:"short",context:"formatting"});case"eeee":default:return l.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,l,n){var a=e.getUTCDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return X(i,t.length);case"co":return l.ordinalNumber(i,{unit:"day"});case"ccc":return l.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return l.day(a,{width:"narrow",context:"standalone"});case"cccccc":return l.day(a,{width:"short",context:"standalone"});case"cccc":default:return l.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,l){var n=e.getUTCDay(),a=0===n?7:n;switch(t){case"i":return String(a);case"ii":return X(a,t.length);case"io":return l.ordinalNumber(a,{unit:"day"});case"iii":return l.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return l.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return l.day(n,{width:"short",context:"formatting"});case"iiii":default:return l.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,l){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,l){var n,a=e.getUTCHours();switch(n=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,l){var n,a=e.getUTCHours();switch(n=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,l){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),l.ordinalNumber(n,{unit:"hour"})}return function(e,t){return X(e.getUTCHours()%12||12,t.length)}(e,t)},H:function(e,t,l){return"Ho"===t?l.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,t){return X(e.getUTCHours(),t.length)}(e,t)},K:function(e,t,l){var n=e.getUTCHours()%12;return"Ko"===t?l.ordinalNumber(n,{unit:"hour"}):X(n,t.length)},k:function(e,t,l){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?l.ordinalNumber(n,{unit:"hour"}):X(n,t.length)},m:function(e,t,l){return"mo"===t?l.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,t){return X(e.getUTCMinutes(),t.length)}(e,t)},s:function(e,t,l){return"so"===t?l.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,t){return X(e.getUTCSeconds(),t.length)}(e,t)},S:function(e,t){return function(e,t){var l=t.length,n=e.getUTCMilliseconds();return X(Math.floor(n*Math.pow(10,l-3)),t.length)}(e,t)},X:function(e,t,l,n){var a=(n._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return $(a);case"XXXX":case"XX":return ee(a);case"XXXXX":case"XXX":default:return ee(a,":")}},x:function(e,t,l,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return $(a);case"xxxx":case"xx":return ee(a);case"xxxxx":case"xxx":default:return ee(a,":")}},O:function(e,t,l,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Z(a,":");case"OOOO":default:return"GMT"+ee(a,":")}},z:function(e,t,l,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Z(a,":");case"zzzz":default:return"GMT"+ee(a,":")}},t:function(e,t,l,n){return X(Math.floor((n._originalDate||e).getTime()/1e3),t.length)},T:function(e,t,l,n){return X((n._originalDate||e).getTime(),t.length)}};function Z(e,t){var l=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),i=n%60;if(0===i)return l+String(a);var r=t||"";return l+String(a)+r+X(i,2)}function $(e,t){return e%60==0?(e>0?"-":"+")+X(Math.abs(e)/60,2):ee(e,t)}function ee(e,t){var l=t||"",n=e>0?"-":"+",a=Math.abs(e);return n+X(Math.floor(a/60),2)+l+X(a%60,2)}function te(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function le(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var ne={p:le,P:function(e,t){var l,n=e.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return te(e,t);switch(a){case"P":l=t.dateTime({width:"short"});break;case"PP":l=t.dateTime({width:"medium"});break;case"PPP":l=t.dateTime({width:"long"});break;case"PPPP":default:l=t.dateTime({width:"full"})}return l.replace("{{date}}",te(a,t)).replace("{{time}}",le(i,t))}},ae=["D","DD"],ie=["YY","YYYY"];function re(e){return-1!==ae.indexOf(e)}function oe(e){return-1!==ie.indexOf(e)}function se(e,t,l){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(l,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(l,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(l,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(l,"`; see: https://git.io/fxCyr"))}var de=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ce=/^'([^]*?)'?$/,me=/''/g,ve=/[a-zA-Z]/;function ge(e,t,l){m(2,arguments);var n=String(t),a=l||{},i=a.locale||j,r=i.options&&i.options.firstWeekContainsDate,o=null==r?1:c(r),s=null==a.firstWeekContainsDate?o:c(a.firstWeekContainsDate);if(!(s>=1&&s<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=i.options&&i.options.weekStartsOn,u=null==d?0:c(d),g=null==a.weekStartsOn?u:c(a.weekStartsOn);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var h=v(e);if(!w(h))throw new RangeError("Invalid time value");var p=f(h),D=W(h,p),E={firstWeekContainsDate:s,weekStartsOn:g,locale:i,_originalDate:h},S=n.match(ue).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,ne[t])(e,i.formatLong,E):e}).join("").match(de).map(function(l){if("''"===l)return"'";var n=l[0];if("'"===n)return he(l);var r=J[n];if(r)return!a.useAdditionalWeekYearTokens&&oe(l)&&se(l,t,e),!a.useAdditionalDayOfYearTokens&&re(l)&&se(l,t,e),r(D,l,i.localize,E);if(n.match(ve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");return l}).join("");return S}function he(e){return e.match(ce)[1].replace(me,"'")}function pe(e,t){m(2,arguments);var l=c(t);return S(e,-l)}function fe(e,t){m(2,arguments);var l=c(t);return y(e,-l)}function De(){return(De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}const Ee={overview:{key:"national-overview",stateKey:"overview",label:"NURT_OVERVIEW",active:!0,nActive:!0},propertytax:{key:"national-propertytax",stateKey:"propertytax",label:"NURT_PROPERTY_TAX",active:!0,nActive:!0},tradelicense:{key:"national-tradelicense",stateKey:"tradelicense",label:"NURT_TRADE_LICENCE",active:!0,nActive:!0},pgr:{key:"national-pgr",stateKey:"pgr",label:"NURT_COMPLAINS",active:!0,nActive:!0},fsm:{key:"fsm",stateKey:"fsm",label:"CS_HOME_FSM_SERVICES",active:!0,nActive:!1},mCollect:{key:"national-mcollect",stateKey:"mCollect",label:"NURT_MCOLLECT",active:!0,nActive:!0},ws:{key:"national-ws",stateKey:"ws",label:"NURT_WATER_SEWERAGE",active:!0,nActive:!0},obps:{key:"nss-obps",stateKey:"obps",label:"DSS_BUILDING_PERMISSION",active:!0,nActive:!0},noc:{key:"national-firenoc",stateKey:"noc",label:"NURT_FIRENOC",active:!0,nActive:!0},bnd:{key:"nss-birth-death",stateKey:"birth-death",label:"BIRTH_AND_DEATH",active:!0,nActive:!0},faqs:{key:"national-faqs",stateKey:"national-faqs",label:"DSS_FAQS",active:!1,nActive:!0,others:!0},finance:{key:"national-finance",stateKey:"finance",label:"DSS_FINANCE",active:!0,nActive:!1},about:{key:"national-about",stateKey:"national-about",label:"DSS_ABOUT_DASHBOARD",active:!1,nActive:!0,others:!0}},Se=()=>{const e=Digit.Utils.dss.getCurrentModuleName();return Object.keys(Ee).map(e=>Ee[e].key).filter(e=>"fsm"!==e).some(t=>null==e?void 0:e.includes(t))},ye=l.createContext({}),be=e=>{let{values:n,onFilterChange:i,t:o}=e;const[s,d]=t.useState(!1),[u,c]=t.useState([0,0]),[m,v]=t.useState(n),h=t.useRef(null);t.useEffect(()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[h]),t.useEffect(()=>{if(!s){const e=null==m?void 0:m.startDate,t=null==m?void 0:m.endDate,l=E(null==m?void 0:m.startDate,null==m?void 0:m.endDate),n=ge(null==m?void 0:m.startDate,"MMM d, yyyy")+" - "+ge(null==m?void 0:m.endDate,"MMM d, yyyy");i({range:{startDate:e,endDate:t,interval:l,title:n},requestDate:{startDate:e,endDate:t,interval:l,title:n}})}},[m,s]);const f=t.useMemo(()=>r.createStaticRanges([{label:o("DSS_TODAY"),range:()=>({startDate:D(Date.now()),endDate:A()})},{label:o("DSS_YESTERDAY"),range:()=>{return{startDate:(e=new Date,t=e.getFullYear(),l=e.getMonth(),n=e.getDate(),a=new Date(0),a.setFullYear(t,l,n-1),a.setHours(0,0,0,0),a),endDate:pe(M(),1)};var e,t,l,n,a}},{label:o("DSS_THIS_WEEK"),range:()=>({startDate:p(new Date),endDate:A()})},{label:o("DSS_THIS_MONTH"),range:()=>({startDate:x(new Date),endDate:A()})},{label:o("DSS_THIS_QUARTER"),range:()=>({startDate:L(new Date),endDate:pe(A(),1)})},{label:o("DSS_PREVIOUS_YEAR"),range:()=>(new Date).getMonth()<3?{startDate:fe(g(k(new Date),3),2),endDate:pe(fe(g(N(new Date),3),2),1)}:{startDate:fe(g(k(new Date),3),1),endDate:pe(fe(g(N(new Date),3),1),1)}},{label:o("DSS_THIS_YEAR"),range:()=>({startDate:Digit.Utils.dss.getDefaultFinacialYear().startDate,endDate:Digit.Utils.dss.getDefaultFinacialYear().endDate})}]),[]),E=(e,t)=>{let l=(new Date(t).getTime()-new Date(e).getTime())/864e5;return l>91?"month":l<90&&l>=14?"week":l<=14?"day":void 0};return l.createElement(t.Fragment,null,l.createElement("div",{className:"mbsm"},o("ES_DSS_DATE_RANGE")),l.createElement("div",{className:"employee-select-wrap",ref:h},l.createElement("div",{className:"select "+(s?"dss-input-active-border":"")},l.createElement("input",{className:"employee-select-wrap--elipses",type:"text",value:null!=n&&n.title?""+(null==n?void 0:n.title):"",readOnly:!0,onClick:()=>d(e=>!e)}),l.createElement(a.Calender,{className:"cursorPointer",onClick:()=>d(e=>!e)})),s&&l.createElement("div",{className:"options-card",style:{overflow:"visible",width:"unset",maxWidth:"unset"}},l.createElement(r.DateRangePicker,{className:"pickerShadow",focusedRange:u,ranges:[m],rangeColors:["#9E9E9E"],onChange:(e,t)=>{var l;let{range1:n}=e;n={...n,endDate:_(null===(l=n)||void 0===l?void 0:l.endDate)};const{startDate:a,endDate:i,title:r,interval:o}=n;f.some(e=>{let t=e.range();return 0===C(t.startDate,a)&&0===C(t.endDate,i)})?(v(n),d(!1)):0===u[1]?v(n):function(e){return 1===e}(u[1])&&(v({title:r,interval:o,startDate:a,endDate:i}),d(!1))},onRangeFocusChange:c,retainEndDateOnFirstSelection:!0,showSelectionPreview:!0,staticRanges:f,inputRanges:[]}))))},we=["Cr","Lac","Unit"],Te=e=>{let{onSelect:n,t:a}=e;const{value:i}=t.useContext(ye);return l.createElement(t.Fragment,null,l.createElement("div",{className:"mbsm"},a("ES_DSS_DENOMINATION")),l.createElement("div",{className:"switch-wrapper"},we.map((e,t)=>l.createElement("div",{key:t},l.createElement("input",{type:"radio",id:e,className:"radio-switch",name:"unit",checked:e===(null==i?void 0:i.denomination),onClick:()=>n({denomination:e})}),l.createElement("label",{className:"cursorPointer",htmlFor:e},a(Digit.Utils.locale.getTransformedLocale("ES_DSS_"+e)))))))},Ce=e=>{var n,i,r;let{t:o,ulbTenants:s,services:d,isOpen:u,closeFilters:c,showDateRange:m=!0,showDDR:v=!0,showUlb:g=!0,showDenomination:h=!0,showModuleFilter:p=!0,isNational:f=!1}=e;const{value:D,setValue:E}=t.useContext(ye),[S,y]=t.useState(()=>null==s?void 0:s.ulb.filter(e=>{var t,l;return null==D||null===(t=D.filters)||void 0===t||null===(l=t.tenantId)||void 0===l?void 0:l.find(t=>t===(null==e?void 0:e.code))}));t.useEffect(()=>{var e;y(null==s||null===(e=s.ulb)||void 0===e?void 0:e.filter(e=>{var t,l;return null==D||null===(t=D.filters)||void 0===t||null===(l=t.tenantId)||void 0===l?void 0:l.find(t=>t===(null==e?void 0:e.code))}))},[null==D||null===(n=D.filters)||void 0===n?void 0:n.tenantId]);const[b,w]=t.useState(()=>null==d?void 0:d.filter(e=>(null==D?void 0:D.moduleLevel)===(null==e?void 0:e.code)));t.useEffect(()=>{w(null==d?void 0:d.filter(e=>(null==D?void 0:D.moduleLevel)===(null==e?void 0:e.code)))},[null==D?void 0:D.moduleLevel]);const T=e=>{E({...D,...e})},C=t.useMemo(()=>S.map(e=>s.ulb.filter(t=>t.code===e.code)[0]).filter((e,t,l)=>t===l.findIndex(t=>t.ddrKey===e.ddrKey)),[S,s]);return l.createElement("div",{className:"filters-wrapper "+(u?"filters-modal":""),style:{justifyContent:window.location.href.includes("dss/dashboard/finance")&&!u?"space-between":"unset",paddingRight:window.location.href.includes("dss/dashboard/finance")&&!u?"24px":"0px",paddingBottom:window.location.href.includes("dss/dashboard/finance")&&!u?"20px":"unset"}},l.createElement("span",{className:"filter-close",onClick:()=>c()},l.createElement(a.CloseSvg,null)),u&&l.createElement("div",{className:"filter-header"},l.createElement(a.FilterIcon,null),l.createElement("p",null,o("DSS_FILTERS")),l.createElement("span",{onClick:()=>{E({denomination:"Unit",range:Digit.Utils.dss.getInitialRange()})}},l.createElement(a.RefreshIcon,null))),m&&l.createElement("div",{className:"filters-input"},l.createElement(be,{onFilterChange:T,values:null==D?void 0:D.range,t:o})),v&&l.createElement("div",{className:"filters-input"},l.createElement("div",{className:"mbsm"},o(f?"ES_DSS_STATE":"ES_DSS_DDR")),l.createElement(a.MultiSelectDropdown,{options:(null==s?void 0:s.ddr)&&(null===(i=s.ddr)||void 0===i?void 0:i.sort((e,t)=>{var l;return null==e||null===(l=e.ddrKey)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.ddrKey)})),optionsKey:"ddrKey",onSelect:(e,t)=>{const l=s.ulb.filter(t=>!!e.find(e=>t.ddrKey===(null==e?void 0:e[1].ddrKey)));E({...D,filters:{tenantId:l.map(e=>null==e?void 0:e.code)}})},selected:C,defaultLabel:o(f?"ES_DSS_ALL_STATE_SELECTED":"ES_DSS_ALL_DDR_SELECTED"),defaultUnit:o(f?"ES_DSS_STATE_SELECTED":"ES_DSS_DDR_SELECTED")})),g&&l.createElement("div",{className:"filters-input"},l.createElement("div",{className:"mbsm"},o("ES_DSS_ULB")),l.createElement(a.MultiSelectDropdown,{options:null==s||null===(r=s.ulb)||void 0===r?void 0:r.sort((e,t)=>{var l;return null==e||null===(l=e.ulbKey)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.ulbKey)}),optionsKey:"ulbKey",onSelect:(e,t)=>{E({...D,filters:{tenantId:e.map(e=>{var t;return null==e||null===(t=e[1])||void 0===t?void 0:t.code})}})},selected:S,defaultLabel:o("ES_DSS_ALL_ULB_SELECTED"),defaultUnit:o("ES_DSS_DDR_SELECTED")})),!f&&p&&l.createElement("div",{className:"filters-input"},l.createElement("div",{className:"mbsm"},o("ES_DSS_SERVICES")),l.createElement(a.Dropdown,{option:d,optionKey:"name",select:(e,t)=>{E({...D,moduleLevel:null==e?void 0:e.code})},selected:b,placeholder:o("ES_DSS_ALL_SERVICES_SELECTED")})),h&&l.createElement("div",{className:"filters-input",style:{flexBasis:"16%"}},l.createElement(Te,{onSelect:T,t:o})))},_e=e=>{var n,i,r,o;let{t:s,ulbTenants:d,isOpen:u,closeFilters:c,showDateRange:m=!0,showDDR:v=!0,showUlb:g=!0,showDenomination:h=!0,isNational:p=!1}=e;const{value:f,setValue:D}=t.useContext(ye),[E,S]=t.useState(()=>{var e;return null==d||null===(e=d.ulb)||void 0===e?void 0:e.filter(e=>{var t,l;return null==f||null===(t=f.filters)||void 0===t||null===(l=t.ulb)||void 0===l?void 0:l.find(t=>t===(null==e?void 0:e.code))})}),[y,b]=t.useState(()=>{var e;return null==d||null===(e=d.ddr)||void 0===e?void 0:e.filter(e=>{var t,l;return null==f||null===(t=f.filters)||void 0===t||null===(l=t.state)||void 0===l?void 0:l.find(t=>t===(null==e?void 0:e.code))})});t.useEffect(()=>{var e,t;S(null==d||null===(e=d.ulb)||void 0===e?void 0:e.filter(e=>{var t,l;return null==f||null===(t=f.filters)||void 0===t||null===(l=t.ulb)||void 0===l?void 0:l.find(t=>t===(null==e?void 0:e.code))})),b(null==d||null===(t=d.ddr)||void 0===t?void 0:t.filter(e=>{var t,l;return null==f||null===(t=f.filters)||void 0===t||null===(l=t.state)||void 0===l?void 0:l.find(t=>t===(null==e?void 0:e.code))}))},[f]);const w=e=>{D({...f,...e})};return l.createElement("div",{className:"filters-wrapper "+(u?"filters-modal":"")},l.createElement("span",{className:"filter-close",onClick:()=>c()},l.createElement(a.CloseSvg,null)),u&&l.createElement("div",{className:"filter-header"},l.createElement(a.FilterIcon,null),l.createElement("p",null,s("DSS_FILTERS")),l.createElement("span",{onClick:()=>{D({denomination:"Unit",range:Digit.Utils.dss.getInitialRange()})}},l.createElement(a.RefreshIcon,null))),m&&l.createElement("div",{className:"filters-input"},l.createElement(be,{onFilterChange:w,values:null==f?void 0:f.range,t:s})),l.createElement("div",{className:"filters-input"},l.createElement("div",{className:"mbsm"},s(p?"ES_DSS_STATE":"ES_DSS_DDR")),l.createElement(a.MultiSelectDropdown,{options:(null==d?void 0:d.ddr)&&(null===(n=d.ddr)||void 0===n||null===(i=n.sort((e,t)=>{var l;return null==e||null===(l=e.ddrKey)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.ddrKey)}))||void 0===i?void 0:i.map(e=>({...e,i18Key:"DSS_TB_"+Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.ddrKey)}))),optionsKey:"i18Key",onSelect:(e,t)=>{D({...f,filters:{...f.filters,state:e.map(e=>{var t;return null==e||null===(t=e[1])||void 0===t?void 0:t.code})}})},selected:null==y?void 0:y.map(e=>({...e,i18Key:"DSS_TB_"+Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.ddrKey)})),defaultLabel:s(p?"ES_DSS_ALL_STATE_SELECTED":"ES_DSS_ALL_DDR_SELECTED"),defaultUnit:s(p?"ES_DSS_STATE_SELECTED":"ES_DSS_DDR_SELECTED")})),l.createElement("div",{className:"filters-input"},l.createElement("div",{className:"mbsm"},s("ES_DSS_ULB")),l.createElement(a.MultiSelectDropdown,{options:null==d||null===(r=d.ulb)||void 0===r||null===(o=r.filter(e=>Digit.Utils.dss.checkSelected(e,y)).sort((e,t)=>{var l;return null==e||null===(l=e.ulbKey)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.ulbKey)}))||void 0===o?void 0:o.map(e=>({...e,i18Key:"DSS_TB_"+Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.ulbKey)})),optionsKey:"i18Key",onSelect:(e,t)=>{var l,n;let a=e.map(e=>{var t;return null==e||null===(t=e[1])||void 0===t?void 0:t.code}),i=null==d?void 0:d.ulb.filter(e=>a.includes(e.code)).map(e=>e.ddrKey),r=null==d?void 0:d.ddr.filter(e=>i.includes(e.ddrKey)).map(e=>e.code);var o;(null==f||null===(l=f.filters)||void 0===l||null===(n=l.state)||void 0===n?void 0:n.length)>0&&(null==f||null===(o=f.filters)||void 0===o||o.state.map(e=>{r.includes(e)||r.push(e)})),D({...f,filters:{...f.filters,ulb:a,state:r}})},selected:null==E?void 0:E.map(e=>({...e,i18Key:"DSS_TB_"+Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.ulbKey)})),defaultLabel:s("ES_DSS_ALL_ULB_SELECTED"),defaultUnit:s("ES_DSS_DDR_SELECTED")})),h&&l.createElement("div",{className:"filters-input",style:{flexBasis:"16%"}},l.createElement(Te,{onSelect:w,t:s})))},Le=e=>{let{t:t}=e;return l.createElement("div",{className:"no-data"},l.createElement("p",null,t("DSS_NO_DATA")))},xe=["#048BD0","#FBC02D","#8E29BF","#EA8A3B","#0BABDE","#6E8459","#D4351C","#0CF7E4","#F80BF4","#22F80B"],ke=["nssOBPSTotalPermitsVsTotalOCSubmittedVsTotalOCIssued","nssNOCApplicationVsProvisionalVsActual","nocApplicationVsProvisionalVsActual","permitsandOCissued"],Ne=function(e){return void 0===e&&(e=0),xe[e=xe.length>e?e:0]},Ae=(e,t)=>{switch(e){case"Unit":return t;case"Lac":return Number((t/1e5).toFixed(2));case"Cr":return Number((t/1e7).toFixed(2));default:return""}},Me=e=>e.value,Ie=e=>{var i,r,s,d;let{xDataKey:u="name",yDataKey:c=Me,data:g,setChartDenomination:h}=e;const{t:p}=n.useTranslation(),{id:f}=g,D=Digit.ULBService.getCurrentTenantId(),{value:E}=t.useContext(ye),[S,y]=t.useState(0),[b,w]=t.useState(0),[T,C]=t.useState([]),[_,L]=t.useState("Area"),x=Digit.ULBService.getStateId(),{data:k}=Digit.Hooks.useCommonMDMS(x,"FSM","FSTPPlantInfo",{enabled:"fsmCapacityUtilization"===f}),{isLoading:N,data:A}=Digit.Hooks.dss.useGetChart({key:f,type:"metric",tenantId:D,requestDate:{...null==E?void 0:E.requestDate,startDate:null==E||null===(i=E.range)||void 0===i||null===(r=i.startDate)||void 0===r?void 0:r.getTime(),endDate:null==E||null===(s=E.range)||void 0===s||null===(d=s.endDate)||void 0===d?void 0:d.getTime()},filters:null==E?void 0:E.filters});t.useEffect(()=>{if(k){var e,t;let l=k;(null==E||null===(e=E.filters)||void 0===e||null===(t=e.tenantId)||void 0===t?void 0:t.length)>0&&(l=k.filter(e=>{var t,l;return null==E||null===(t=E.filters)||void 0===t||null===(l=t.tenantId)||void 0===l?void 0:l.some(t=>null==e?void 0:e.ULBS.includes(t))}));const n=l.reduce((e,t)=>e+Number(null==t?void 0:t.PlantOperationalCapacityKLD),0);y(n)}},[k,E]),t.useEffect(()=>{if(A){var e,t,l,n,a,i,r,o,s,d;const u=Math.round(null==A||null===(e=A.responseData)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t[0])||void 0===l||null===(n=l.plots[(null==A||null===(a=A.responseData)||void 0===a||null===(i=a.data)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.plots.length)-1])||void 0===n?void 0:n.value);w(u),h(null==A||null===(o=A.responseData)||void 0===o||null===(s=o.data)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.headerSymbol)}},[A]);const M=t.useMemo(()=>{var e,t,l,n,a,i,r,o,s,d;if(1==(null==A||null===(e=A.responseData)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length))return L("Area"),"fsmCapacityUtilization"!==f?null==A||null===(o=A.responseData)||void 0===o||null===(s=o.data)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.plots.map((e,t)=>{var l,n,a;return 0===t?{...e,difference:0}:{...e,difference:e.value-(null==A||null===(l=A.responseData)||void 0===l||null===(n=l.data)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.plots[t-1].value)}}):null==A||null===(a=A.responseData)||void 0===a||null===(i=a.data)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.plots.map(e=>{const[t,l]=null==e?void 0:e.name.split("-"),n=function(e){m(1,arguments);var t=v(e),l=t.getFullYear(),n=t.getMonth(),a=new Date(0);return a.setFullYear(l,n+1,0),a.setHours(0,0,0,0),a.getDate()}(Date.parse(t+" 1, "+l)),a=Math.round((null==e?void 0:e.value)/(S*n)*100);return{...e,value:a}});if((null==A||null===(l=A.responseData)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.length)>1){var u,c,g;L("Line");let e={};const t=null==A||null===(u=A.responseData)||void 0===u||null===(c=u.data)||void 0===c||null===(g=c[0])||void 0===g?void 0:g.plots.map((t,l)=>{var n,a,i,r,o,s,d;let u={};return null==A||null===(n=A.responseData)||void 0===n||n.data.map(t=>{e[p(Digit.Utils.locale.getTransformedLocale(t.headerName))]=p(Digit.Utils.locale.getTransformedLocale(t.headerName)),u[p(Digit.Utils.locale.getTransformedLocale(t.headerName))]=null==t?void 0:t.plots[l].value}),{label:null,name:null==A||null===(a=A.responseData)||void 0===a||null===(i=a.data)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.plots[l].name,strValue:null,symbol:null==A||null===(o=A.responseData)||void 0===o||null===(s=o.data)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.plots[l].symbol,...u}});return C(Object.values(e)),t}},[A,S]),I=(e,t)=>{var l,n;const a=t?null==e?void 0:e[t]:(null==e?void 0:e.value)||0;if("fsmCapacityUtilization"===f)return Number(a.toFixed(1));if("amount"===(null==e||null===(l=e.symbol)||void 0===l?void 0:l.toLowerCase())){const{denomination:e}=E;return Ae(e,a)}return"number"===(null==e||null===(n=e.symbol)||void 0===n?void 0:n.toLowerCase())?Number(a.toFixed(1)):a},U=e=>"string"==typeof e?e.replace("-",", "):e;return N?l.createElement(a.Loader,null):l.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},"fsmCapacityUtilization"===f&&l.createElement("p",null,p("DSS_FSM_TOTAL_SLUDGE_TREATED")," - ",b," ",p("DSS_KL")),l.createElement(o.ResponsiveContainer,{width:"94%",height:ke.includes(f)?700:450},M&&0!==(null==M?void 0:M.length)?"Area"==_?l.createElement(o.AreaChart,{width:"100%",height:"100%",data:M,margin:{left:30,top:10}},l.createElement("defs",null,l.createElement("linearGradient",{id:"colorUv",x1:".5",x2:".5",y2:"1"},l.createElement("stop",{stopColor:"#048BD0",stopOpacity:.5}),l.createElement("stop",{offset:"1",stopColor:"#048BD0",stopOpacity:0}))),l.createElement(o.CartesianGrid,{strokeDasharray:"3 3"}),l.createElement(o.Tooltip,{content:e=>{var t,n,a,i,r,o,s,d,u;let{payload:c,label:m}=e,v=U(m),g=(null==c?void 0:c[0])||{};const h=0!==Object.keys(g).length?Ae(E.denomination,g.payload.difference):"";return l.createElement("div",{style:{margin:"0px",padding:"10px",backgroundColor:"rgb(255, 255, 255)",border:"1px solid rgb(204, 204, 204)",whiteSpace:"nowrap"}},"amount"===(null==g||null===(t=g.payload)||void 0===t||null===(n=t.symbol)||void 0===n?void 0:n.toLowerCase())&&l.createElement("p",null,v+" : "+("Unit"===(null==E?void 0:E.denomination)?" ₹":"")+" "+(null==g?void 0:g.value)+("Unit"!==(null==E?void 0:E.denomination)?p(Digit.Utils.locale.getTransformedLocale("ES_DSS_"+(null==E?void 0:E.denomination))):"")),"amount"===(null==g||null===(a=g.payload)||void 0===a||null===(i=a.symbol)||void 0===i?void 0:i.toLowerCase())&&l.createElement("p",null,"Collection Increased: "+("Unit"===(null==E?void 0:E.denomination)?" ₹":"")+" "+h+("Unit"!==(null==E?void 0:E.denomination)?p(Digit.Utils.locale.getTransformedLocale("ES_DSS_"+(null==E?void 0:E.denomination))):"")),"percentage"===(null==g||null===(r=g.payload)||void 0===r||null===(o=r.symbol)||void 0===o?void 0:o.toLowerCase())&&l.createElement("p",null,v+" : "+(null==g?void 0:g.value)+" %"),"number"===(null==g||null===(s=g.payload)||void 0===s||null===(d=s.symbol)||void 0===d?void 0:d.toLowerCase())&&l.createElement("p",null,v+" : "+(null==g?void 0:g.value)+" "),!(null!=g&&null!==(u=g.payload)&&void 0!==u&&u.symbol)&&l.createElement("p",null,v+" : "+(null==g?void 0:g.value)+" "))}}),l.createElement(o.XAxis,{dataKey:u,tick:{fontSize:"14px",fill:"#505A5F"},tickFormatter:U}),l.createElement(o.YAxis,{tick:{fontSize:"14px",fill:"#505A5F"}}),l.createElement(o.Legend,{formatter:()=>l.createElement("span",{style:{fontSize:"14px",color:"#505A5F"}},p("DSS_"+Digit.Utils.locale.getTransformedLocale(f))),iconType:"circle"}),l.createElement(o.Area,{type:"monotone",dataKey:I,stroke:"#048BD0",fill:"url(#colorUv)",dot:!0})):l.createElement(o.LineChart,{width:500,height:300,data:M,margin:{top:15,right:5,left:20,bottom:5}},l.createElement(o.CartesianGrid,{strokeDasharray:"3 3"}),l.createElement(o.XAxis,{dataKey:"name"}),l.createElement(o.YAxis,null),l.createElement(o.Tooltip,{content:e=>{var t,n,a,i,r,o;let{payload:s}=e,d=(null==s?void 0:s[0])||{},u="amount"===(null==d||null===(t=d.payload)||void 0===t||null===(n=t.symbol)||void 0===n?void 0:n.toLowerCase())&&"Unit"===(null==E?void 0:E.denomination)?" ₹":" ",c="percentage"===(null==d||null===(a=d.payload)||void 0===a||null===(i=a.symbol)||void 0===i?void 0:i.toLowerCase())?" %":"amount"===(null==d||null===(r=d.payload)||void 0===r||null===(o=r.symbol)||void 0===o?void 0:o.toLowerCase())&&"Unit"!==(null==E?void 0:E.denomination)?p(Digit.Utils.locale.getTransformedLocale("ES_DSS_"+(null==E?void 0:E.denomination))):"",m={...null==d?void 0:d.payload};null==m||delete m.label,null==m||delete m.strValue,null==m||delete m.symbol;let v=[null==m?void 0:m.name];return null==m||delete m.name,Object.keys(m).map(e=>{var t,l;v.push(e+" -"+u+("amount"===(null==d||null===(t=d.payload)||void 0===t||null===(l=t.symbol)||void 0===l?void 0:l.toLowerCase())?Ae(null==E?void 0:E.denomination,null==m?void 0:m[e])+": Diiference ":null==m?void 0:m[e])+" "+c)}),l.createElement("div",{style:{margin:"0px",padding:"10px",backgroundColor:"rgb(255, 255, 255)",border:"1px solid rgb(204, 204, 204)",whiteSpace:"nowrap"}},v.map((e,t)=>l.createElement("p",{key:t},e)))}}),l.createElement(o.Legend,{layout:"horizontal",formatter:(e,t,n)=>l.createElement("span",{style:{fontSize:"14px",color:"#505A5F"}},null==T?void 0:T[n]),verticalAlign:"bottom",align:"center",iconType:"circle",className:{margin:"10px"}}),null==T?void 0:T.map((e,t)=>l.createElement(o.Line,{type:"monotone",dataKey:t=>I(t,e),stroke:Ne(t),activeDot:{r:8},strokeWidth:2,key:t,dot:{stroke:Ne(t),strokeWidth:1,r:2,fill:Ne(t)}}))):l.createElement(Le,{t:p})))},Ue=(e,t)=>"percentage"===(null==t?void 0:t.toLowerCase())?""+Number(e).toFixed():e,Oe=e=>{let{x:a,y:i,name:r,stroke:o,maxValue:s}=e;const{t:d}=n.useTranslation();return l.createElement(t.Fragment,null,l.createElement("text",{x:a,y:i,dx:-55,dy:10,fill:o,width:"35",style:{fontSize:"medium",textAlign:"right",fontVariantNumeric:"proportional-nums"}},(null==s?void 0:s[d(r)])+"%"),l.createElement("text",{x:a,y:i,dx:-200,dy:10},d("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(r))))},Re={RED:"#00703C",GREEN:"#D4351C",default:"#00703C"},Fe=e=>{var r,s,d,u;let{xDataKey:c="value",xAxisType:m="number",yAxisType:v="category",yDataKey:g="name",hideAxis:h=!0,layout:p="vertical",fillColor:f="default",showGrid:D=!1,showDrillDown:E=!1,data:S,title:y,setChartDenomination:b,moduleCode:w}=e;const{id:T}=S,{t:C}=n.useTranslation(),_=i.useHistory(),{value:L}=t.useContext(ye),[x,k]=t.useState({}),N=Digit.ULBService.getCurrentTenantId(),{isLoading:A,data:M}=Digit.Hooks.dss.useGetChart({key:T,type:"metric",tenantId:N,requestDate:{...null==L?void 0:L.requestDate,startDate:null==L||null===(r=L.range)||void 0===r||null===(s=r.startDate)||void 0===s?void 0:s.getTime(),endDate:null==L||null===(d=L.range)||void 0===d||null===(u=d.endDate)||void 0===u?void 0:u.getTime()},filters:null==L?void 0:L.filters,moduleLevel:(null==L?void 0:L.moduleLevel)||w}),I=t.useMemo(()=>{var e,t,l,n,a;if(!M)return null;b(null==M||null===(e=M.responseData)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.headerSymbol);const i=null==M||null===(n=M.responseData)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.map(e=>{var t,l,n;let a=(null==e||null===(t=e.plots)||void 0===t?void 0:t[0].value)||0;return{name:C(null==e||null===(l=e.plots)||void 0===l?void 0:l[0].name),value:Ue(a,null==e||null===(n=e.plots)||void 0===n?void 0:n[0].symbol)}});let r=Math.max(...i.map(e=>Number(e.value))),o={},s=i.map(e=>(o[e.name]=e.value,{...e,value:Number(e.value)/r*100}));return k(o),s},[M]);return A?l.createElement(a.Loader,null):0!==(null==I?void 0:I.length)&&I?l.createElement(t.Fragment,null,l.createElement(o.ResponsiveContainer,{width:"98%",height:320},l.createElement(o.BarChart,{width:"70%",height:"100%",data:E?null==I?void 0:I.slice(0,3):I,layout:p,maxBarSize:8,margin:{left:200},barGap:50},D&&l.createElement(o.CartesianGrid,null),l.createElement(o.XAxis,{hide:h,dataKey:c,type:m,domain:[0,90]}),l.createElement(o.YAxis,{dataKey:g,hide:h,type:v,padding:{right:60}}),l.createElement(o.Bar,{dataKey:c,fill:Re[f],background:{fill:"#D6D5D4",radius:8},label:l.createElement(Oe,{stroke:Re[f],maxValue:x}),radius:[8,8,8,8],isAnimationActive:!1}))),(null==I?void 0:I.length)>3&&E&&l.createElement("p",{className:"showMore",onClick:()=>{var e,t;_.push("/digit-ui/employee/dss/drilldown?chart="+(null==M||null===(e=M.responseData)||void 0===e?void 0:e.visualizationCode)+"&ulb="+(null==L||null===(t=L.filters)||void 0===t?void 0:t.tenantId)+"&title="+y+"&fromModule="+Digit.Utils.dss.getCurrentModuleName()+"&type=performing-metric&fillColor="+f+"&isNational="+(Se()?"YES":"NO"))}},C("DSS_SHOW_MORE"))):l.createElement(Le,{t:C})},Be=["#048BD0","#FBC02D","#8E29BF","#EA8A3B","#0BABDE","#6E8459","#D4351C","#0CF7E4","#F80BF4","#22F80B"],He=(e,t,l)=>{var n,a;const i=t?null==e?void 0:e[t]:(null==e?void 0:e.value)||0;if("amount"!==(null==e||null===(n=e.symbol)||void 0===n?void 0:n.toLowerCase()))return"number"===(null==e||null===(a=e.symbol)||void 0===a?void 0:a.toLowerCase())?Number(i.toFixed(1)):i;switch(l){case"Unit":return i;case"Lac":return Number((i/1e5).toFixed(2));case"Cr":return Number((i/1e7).toFixed(2));default:return""}},Pe=e=>{var r,s,d,u,c,m;let{data:v,xAxisType:g="category",yAxisType:h="number",xDataKey:p="name",yDataKey:f="",xAxisLabel:D="",yAxisLabel:E="",layout:S="horizontal",title:y,showDrillDown:b=!1,setChartDenomination:w,moduleCode:T}=e;const{id:C}=v,{t:_}=n.useTranslation(),L=i.useHistory(),{value:x}=t.useContext(ye),k=Digit.ULBService.getCurrentTenantId(),{isLoading:N,data:A}=Digit.Hooks.dss.useGetChart({key:C,type:"metric",tenantId:k,requestDate:{...null==x?void 0:x.requestDate,startDate:null==x||null===(r=x.range)||void 0===r||null===(s=r.startDate)||void 0===s?void 0:s.getTime(),endDate:null==x||null===(d=x.range)||void 0===d||null===(u=d.endDate)||void 0===u?void 0:u.getTime()},filters:null==x?void 0:x.filters,moduleLevel:(null==x?void 0:x.moduleLevel)||T});t.useEffect(()=>{var e,t,l;A&&w(null==A||null===(e=A.responseData)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.headerSymbol)},[A]);const M=t.useMemo(()=>{var e;return((e,t)=>{let l={};for(let n=0;n<(null==e?void 0:e.length);n++){const a=e[n];for(let e=0;e<a.plots.length;e++){const n=a.plots[e];l[n.name]={...l[n.name],[_(a.headerName)]:He(n,"value",t),name:_(n.name)}}}return Object.keys(l).map(e=>({name:e,...l[e]}))})(null==A||null===(e=A.responseData)||void 0===e?void 0:e.data,null==x?void 0:x.denomination)},[A,null==x?void 0:x.denomination]),I=e=>"string"==typeof e?e.replace("-",", "):"number"==typeof e?Digit.Utils.dss.formatter(e,"number",null==e?void 0:e.denomination,!0,_):e;if(N)return l.createElement(a.Loader,null);const U=null==A||null===(c=A.responseData)||void 0===c||null===(m=c.data)||void 0===m?void 0:m.map(e=>null==e?void 0:e.headerName);return l.createElement(t.Fragment,null,l.createElement(o.ResponsiveContainer,{width:"94%",height:450,margin:{top:5,right:5,left:5,bottom:5}},0!==(null==M?void 0:M.length)&&M?l.createElement(o.BarChart,{width:"100%",height:"100%",margin:{top:5,right:5,left:5,bottom:5},layout:S,data:M,barGap:12,barSize:12},l.createElement(o.CartesianGrid,{strokeDasharray:"2 2"}),l.createElement(o.YAxis,{dataKey:f,type:h,tick:{fontSize:"12px",fill:"#505A5F"},label:{value:E,angle:-90,position:"insideLeft",dy:50,fontSize:"12px",fill:"#505A5F"},tickCount:10,tickFormatter:I,unit:"fsmCapacityUtilization"===C?"%":"",width:(e=>{var t;return null!==(t=window)&&void 0!==t&&t.location.href.includes("dss/dashboard/pgr")?"vertical"===e?150:60:"vertical"===e?120:60})(S)}),l.createElement(o.XAxis,{dataKey:p,type:g,tick:{fontSize:"14px",fill:"#505A5F"},tickCount:10,tickFormatter:I}),null==U?void 0:U.map((e,t)=>l.createElement(o.Bar,{key:t,dataKey:_(e),fill:Be[t],stackId:(null==U?void 0:U.length)>2?1:t})),l.createElement(o.Legend,{formatter:e=>l.createElement("span",{style:{fontSize:"14px",color:"#505A5F"}},e),iconType:"circle"}),l.createElement(o.Tooltip,{cursor:!1,formatter:(e,t)=>"fsmMonthlyWasteCal"===C?[Digit.Utils.dss.formatter(Math.round(100*(e+Number.EPSILON))/100,"number",null==e?void 0:e.denomination,!0,_)+" "+_("DSS_KL"),t]:[Digit.Utils.dss.formatter(Math.round(100*(e+Number.EPSILON))/100,"number",null==e?void 0:e.denomination,!0,_),t]})):l.createElement(Le,{t:_})),b&&l.createElement("p",{className:"showMore",onClick:()=>{var e,t;L.push("/digit-ui/employee/dss/drilldown?chart="+(null==A||null===(e=A.responseData)||void 0===e?void 0:e.drillDownChartId)+"&ulb="+(null==x||null===(t=x.filters)||void 0===t?void 0:t.tenantId)+"&title="+y)}},_("DSS_SHOW_MORE")))},ze=["#048BD0","#FBC02D","#8E29BF","#EA8A3B","#0BABDE","#6E8459","#D4351C","#0CF7E4","#F80BF4","#22F80B"],je=innerWidth<=640,We=e=>{var i,r,s,d,u,c,m,v,g,h,p,f;let{dataKey:D="value",data:E,setChartDenomination:S,moduleCode:y}=e;const{id:b}=E,w=Digit.ULBService.getCurrentTenantId(),{t:T}=n.useTranslation(),{value:C}=t.useContext(ye),[_,L]=t.useState(!1),[x,k]=t.useState(null),[N,A]=t.useState(null),{isLoading:M,data:I}=Digit.Hooks.dss.useGetChart({key:_?N:b,type:"metric",tenantId:w,requestDate:{...null==C?void 0:C.requestDate,startDate:null==C||null===(i=C.range)||void 0===i||null===(r=i.startDate)||void 0===r?void 0:r.getTime(),endDate:null==C||null===(s=C.range)||void 0===s||null===(d=s.endDate)||void 0===d?void 0:d.getTime()},filters:_?{...null==C?void 0:C.filters,selectedType:x}:null==C?void 0:C.filters,moduleLevel:(null==C?void 0:C.moduleLevel)||y}),U=t.useMemo(()=>{var e,t,l,n,a,i,r,o,s,d;return I?(S(null==I||null===(e=I.responseData)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.headerSymbol),"deathByCategoryDrilldownAge"===N||"nssNumberOfDeathsByAge"===(null==I||null===(n=I.responseData)||void 0===n?void 0:n.visualizationCode)?null==I||null===(a=I.responseData)||void 0===a||null===(i=a.data)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.plots.reduce((e,t,l)=>e.concat(t),[]):null==I||null===(o=I.responseData)||void 0===o||null===(s=o.data)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.plots.sort((e,t)=>t.value-e.value).reduce((e,t,l)=>e.concat(t),[])):null},[I]),O=["mcCollectionByPaymentModev2","mcRceiptsByPaymentModev2","nssWsCollectionByChannel","nssWsCollectionByUsage","nssOBPSPermitIssuedByOccupancyType","nssOBPSPermitIssuedByRiskType","mcCollectionByPaymentType","mcReceiptsByPaymentMode","wscollectionByUsage","wscollectionByChannel","permitIssuedByOccupancyType","permitIssuedByRiskType"],R=e=>O.includes(e);return t.useEffect(()=>{L(!1),A(null),k(null)},[b]),M?l.createElement(a.Loader,null):l.createElement(t.Fragment,null,"deathByCategory"===b&&l.createElement("span",{className:"dss-pie-subheader",style:{position:"sticky",left:0}},T("DSS_CMN_PIE_INFO")),_&&l.createElement("div",null,l.createElement("div",{className:"tag-container",style:{marginBottom:"unset"}},l.createElement("span",{style:{marginTop:"20px"}},T("DSS_FILTERS_APPLIED"),": "),l.createElement(a.RemoveableTag,{key:b,text:""+T("COMMON_MASTERS_"+Digit.Utils.locale.getTransformedLocale(x)),onClick:()=>{L(!1)}}))),0!==(null==U?void 0:U.length)&&U?l.createElement(o.ResponsiveContainer,{width:"99%",height:340},l.createElement(o.PieChart,{cy:100},l.createElement(o.Pie,{data:U,dataKey:D,cy:150,style:{cursor:"none"!==(null==I||null===(u=I.responseData)||void 0===u?void 0:u.drillDownChartId)?"pointer":"default"},innerRadius:R(b)&&!je?90:70,outerRadius:R(b)&&!je?110:90,margin:{top:_?0:5},fill:"#8884d8",labelLine:!1,isAnimationActive:!1,onClick:"none"!==(null==I||null===(c=I.responseData)||void 0===c?void 0:c.drillDownChartId)?e=>{var t;let{payload:l}=e;L(!0),A(null==I||null===(t=I.responseData)||void 0===t?void 0:t.drillDownChartId),k(l.name)}:null},null==I||null===(m=I.responseData)||void 0===m||null===(v=m.data)||void 0===v||null===(g=v[0])||void 0===g?void 0:g.plots.map((e,t)=>l.createElement(o.Cell,{key:"cell-",fill:ze[t%ze.length]}))),l.createElement(o.Tooltip,{content:e=>{var t,n,a,i,r,o,s,d,u,c;let{payload:m}=e;return l.createElement("div",{style:{margin:"0px",padding:"10px",backgroundColor:"rgb(255, 255, 255)",border:"1px solid rgb(204, 204, 204)",whiteSpace:"nowrap"}},l.createElement("p",{className:"recharts-tooltip-label"},T("COMMON_MASTERS_"+((null==m||null===(t=m[0])||void 0===t?void 0:t.name)&&Digit.Utils.locale.getTransformedLocale(null==m||null===(n=m[0])||void 0===n?void 0:n.name)))+": "+Digit.Utils.dss.formatter(null==m||null===(a=m[0])||void 0===a?void 0:a.value,null==m||null===(i=m[0])||void 0===i||null===(r=i.payload)||void 0===r||null===(o=r.payload)||void 0===o?void 0:o.symbol,null==C?void 0:C.denomination,!0,T)),l.createElement("p",null,"("+Number((null==m||null===(s=m[0])||void 0===s?void 0:s.value)/(null==I||null===(d=I.responseData)||void 0===d||null===(u=d.data)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.headerValue)*100).toFixed(1)+"%)"))}}),l.createElement(o.Legend,{layout:"vertical",verticalAlign:"middle",align:"right",iconType:"circle",formatter:e=>l.createElement("span",{style:{fontSize:"14px",color:"#505A5F"}},T("COMMON_MASTERS_"+(e&&Digit.Utils.locale.getTransformedLocale(e)))),iconSize:10,wrapperStyle:(null==U?void 0:U.length)>6?{paddingRight:R(b)&&!je?60:0,overflowY:"scroll",height:250,width:"35%",overflowX:"auto",paddingTop:-20}:{paddingRight:R(b)&&!je?60:0,width:"27%",overflowX:"auto",paddingTop:-20}}))):l.createElement(Le,{t:T}),_&&l.createElement("div",{style:{marginTop:"-4%",position:"absolute",width:"30%",textAlign:"center"}},T(Digit.Utils.locale.getTransformedLocale((null==I||null===(h=I.responseData)||void 0===h||null===(p=h.data)||void 0===p||null===(f=p[0])||void 0===f?void 0:f.headerName)+"_"+x))))};var Ve,Ke;function Ye(){return(Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function qe(e){return t.createElement("svg",Ye({width:16,height:16,xmlns:"http://www.w3.org/2000/svg"},e),Ve||(Ve=t.createElement("g",{fill:"none",fillRule:"evenodd"},t.createElement("path",{d:"M20 20H-4V-4h24z"}),t.createElement("path",{fill:"#E54D42",fillRule:"nonzero",d:"M16 8l-1.41-1.41L9 12.17V0H7v12.17L1.42 6.58 0 8l8 8z"}))))}function Ge(e,t){return l.createElement(qe,{style:{display:"inline-block",verticalAlign:"baseline",marginRight:e||"0px",marginLeft:t||"0px"}})}function Qe(){return(Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function Xe(e){return t.createElement("svg",Qe({width:16,height:16,xmlns:"http://www.w3.org/2000/svg"},e),Ke||(Ke=t.createElement("g",{fill:"none",fillRule:"evenodd"},t.createElement("path",{d:"M-4-4h24v24H-4z"}),t.createElement("path",{fill:"#259B24",fillRule:"nonzero",d:"M0 8l1.41 1.41L7 3.83V16h2V3.83l5.58 5.59L16 8 8 0z"}))))}function Je(e,t){return l.createElement(Xe,{style:{display:"inline-block",verticalAlign:"baseline",marginRight:e||"0px",marginLeft:t||"0px"}})}const Ze=["Department","","Usage Type","Ward","Wards","City Name"],$e=e=>{let{rowValue:t,insight:n,t:a,isFinance:i}=e;return l.createElement("span",null,t,!i&&l.createElement("div",null," ",n>=0?Je():Ge()," ",isNaN(n)?"0%":Digit.Utils.dss.formatter(Math.abs(n),"number","Lac",!0,a)+"%"))},et=function(e,t,l){return void 0===l&&(l=1),void 0===e?e:Math.round(e/(t*l)*100)},tt=e=>{var i,r,o,d,u,c,m,v,g,h,p,f,D;let{data:S={},onSearch:y,setChartData:b,setChartDenomination:w,moduleCode:T}=e;const{id:C}=S,[_,L]=t.useState(C),[x,k]=t.useState([{id:_}]),{t:N}=n.useTranslation(),{value:A,fstpMdmsData:M}=t.useContext(ye),I=Digit.ULBService.getCurrentTenantId(),U=Digit.SessionStorage.get("DSS_TENANTS");let O=window.location.href.includes("/employee/dss/dashboard/finance");const R={startDate:fe(null==A||null===(i=A.range)||void 0===i?void 0:i.startDate,1).getTime(),endDate:fe(null==A||null===(r=A.range)||void 0===r?void 0:r.endDate,1).getTime(),interval:"month",title:""},{isLoading:F,data:B}=Digit.Hooks.dss.useGetChart({key:_,type:"metric",tenantId:I,requestDate:{...R},filters:C===_?null==A?void 0:A.filters:{...null==A?void 0:A.filters,[null===(o=x[x.length-1])||void 0===o?void 0:o.filterKey]:null===(d=x[x.length-1])||void 0===d?void 0:d.filterValue},addlFilter:null===(u=x[x.length-1])||void 0===u?void 0:u.addlFilter,moduleLevel:(null==A?void 0:A.moduleLevel)||T}),{isLoading:H,data:P}=Digit.Hooks.dss.useGetChart({key:_,type:"metric",tenantId:I,requestDate:{...null==A?void 0:A.requestDate,startDate:null==A||null===(c=A.range)||void 0===c||null===(m=c.startDate)||void 0===m?void 0:m.getTime(),endDate:null==A||null===(v=A.range)||void 0===v||null===(g=v.endDate)||void 0===g?void 0:g.getTime()},filters:C===_?null==A?void 0:A.filters:{...null==A?void 0:A.filters,[null===(h=x[x.length-1])||void 0===h?void 0:h.filterKey]:null===(p=x[x.length-1])||void 0===p?void 0:p.filterValue},addlFilter:null===(f=x[x.length-1])||void 0===f?void 0:f.addlFilter,moduleLevel:(null==A?void 0:A.moduleLevel)||T});t.useEffect(()=>{const{id:e}=S;L(e),k([{id:e}])},[S,A]);const z=t.useMemo(()=>{var e,t,l,n,a;if(P&&B)return w(null==P||null===(e=P.responseData)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.headerSymbol),null==P||null===(n=P.responseData)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.map((e,t)=>{var l,n,a;const i=null==B||null===(l=B.responseData)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.find(t=>(null==t?void 0:t.headerName)===(null==e?void 0:e.headerName));return null==e||null===(a=e.plots)||void 0===a?void 0:a.reduce((l,n,a)=>{var r,o;let s=null!==(null==n?void 0:n.value)?null==n?void 0:n.value:(null==n?void 0:n.label)||"";null==n||!n.strValue||"string"!==(null==n?void 0:n.symbol)||null!=n&&n.label||(s=null==n?void 0:n.strValue);let d=null==i||null===(r=i.plots)||void 0===r||null===(o=r[a])||void 0===o?void 0:o.value,u=null;if("CapacityUtilization"===(null==n?void 0:n.name)&&"fsmVehicleLogReportByVehicleNo"!==_){const{range:t}=A,{startDate:l,endDate:n}=t,a=E(n,l)+1,i=U.filter(t=>{var l;return(null==t||null===(l=t.city)||void 0===l?void 0:l.ddrName)===(null==e?void 0:e.headerName)||(null==t?void 0:t.code)===(null==e?void 0:e.headerName)}).map(e=>null==e?void 0:e.code),r=null==M?void 0:M.filter(e=>i.find(t=>{var l;return null==e||null===(l=e.ULBS)||void 0===l?void 0:l.includes(t)})).reduce((e,t)=>e+Number(null==t?void 0:t.PlantOperationalCapacityKLD),0);s=et(s,r,a),d=et(d,r,a)}if("CapacityUtilization"===(null==n?void 0:n.name)&&"fsmVehicleLogReportByVehicleNo"===_){const t=null==e?void 0:e.plots.find(e=>"TankCapacity"===(null==e?void 0:e.name));s=et(s,null==t?void 0:t.value),d=et(d,null==t?void 0:t.value)}return"number"!==(null==n?void 0:n.symbol)&&"percentage"!==(null==n?void 0:n.symbol)&&"amount"!==(null==n?void 0:n.symbol)||"CitizenAverageRating"===(null==n?void 0:n.name)||"TankCapacity"===(null==n?void 0:n.name)||void 0===i||(u=d===s?0:0===d?100:Math.round((s-d)/d*100)),"number"!=typeof s||Number.isInteger(s)||(s=Math.round(100*(s+Number.EPSILON))/100),"string"==typeof s&&null!=Ze&&Ze.includes(n.name)&&(s=N("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(s))),l[N("DSS_HEADER_"+Digit.Utils.locale.getTransformedLocale(null==n?void 0:n.name))]=null!==u?{value:s,insight:u}:"S.N."===(null==n?void 0:n.name)?t+1:s,l.key=null==e?void 0:e.headerName,l},{})})},[P,B]);t.useEffect(()=>{if(z){const e=null==z?void 0:z.map(e=>Object.keys(e).reduce((t,l)=>{var n;return"key"===l||(t[l]="object"==typeof(null==e?void 0:e[l])?null==e||null===(n=e[l])||void 0===n?void 0:n.value:null==e?void 0:e[l]),t},{}));b(e)}else b([])},[z]);const j=t.useCallback(function(e,t,l){return void 0===l&&(l=""),e.filter(e=>Object.keys(null==e?void 0:e.values).find(t=>{var n,a,i,r,o,s,d,u;return"object"==typeof(null==e||null===(n=e.values)||void 0===n?void 0:n[t])?Object.keys(null==e||null===(u=e.values)||void 0===u?void 0:u[t]).find(n=>{var a,i,r,o,s,d,u;return"insight"===n?String(Math.abs(null==e||null===(s=e.values)||void 0===s||null===(d=s[t])||void 0===d?void 0:d[n])+"%").toLowerCase().startsWith(null===(u=l)||void 0===u?void 0:u.toLowerCase()):null===(a=String(null==e||null===(i=e.values)||void 0===i||null===(r=i[t])||void 0===r?void 0:r[n]))||void 0===a?void 0:a.toLowerCase().includes(null===(o=l)||void 0===o?void 0:o.toLowerCase())}):(null===(a=String(null==e||null===(i=e.values)||void 0===i?void 0:i[t]).toLowerCase())||void 0===a?void 0:a.includes(null===(r=l)||void 0===r?void 0:r.toLowerCase()))||(null===(o=String(N(null==e||null===(s=e.values)||void 0===s?void 0:s[t])).toLowerCase())||void 0===o?void 0:o.includes(null===(d=l)||void 0===d?void 0:d.toLowerCase()))}))},[]),W=e=>{const t="DSS_HEADER_"+Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.name);return"amount"===(null==e?void 0:e.symbol)?N(t)+" "+(e=>{switch(e){case"Unit":case"Lac":case"Cr":return"("+N("DSS_"+Digit.Utils.locale.getTransformedLocale(e))+")";default:return""}})(null==A?void 0:A.denomination):N(t)},V=t.useCallback((e,t,l)=>{var n,a;const i=null==e||null===(n=e.values)||void 0===n?void 0:n[l],r=null==t||null===(a=t.values)||void 0===a?void 0:a[l];let o,s;return o="object"==typeof i?null==i?void 0:i.value:i,s="object"==typeof r?null==r?void 0:r.value:r,String(o).localeCompare(String(s),void 0,{numeric:!0})},[]),K=e=>{const t=N("DSS_HEADER_"+Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.name));return(l,n,a)=>{const i=null==l?void 0:l[t];return"amount"===(null==e?void 0:e.symbol)?"object"==typeof i?{value:Digit.Utils.dss.formatter(q(null==i?void 0:i.value),"number","Lac",!0,N,!!O),insight:null==i?void 0:i.insight}:String(Digit.Utils.dss.formatter(q(i),"number","Lac",!0,N,!!O)):"number"===(null==e?void 0:e.symbol)||"percentage"===(null==e?void 0:e.symbol)?"object"==typeof i?{value:Digit.Utils.dss.formatter(null==i?void 0:i.value,"number","Lac",!0,N),insight:null==i?void 0:i.insight}:String(Digit.Utils.dss.formatter(i,"number","Lac",!0,N)):l[t]}},Y=(window.Digit.Utils.browser.isMobile(),t.useMemo(()=>{var e,t,n;const i=null==P||null===(e=P.responseData)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.find(e=>!!e);return null==i||null===(n=i.plots)||void 0===n?void 0:n.filter(e=>"TankCapacity"!==(null==e?void 0:e.name)).map((e,t)=>{var n;return{Header:l.createElement("span",{className:"tooltip","data-tip":"React-tooltip","data-for":"jk-table-"+t},W(e),l.createElement(s,{textColor:"#fff",backgroundColor:"#555",place:"bottom",type:"info",effect:"solid",id:"jk-table-"+t},N("TIP_DSS_HEADER_"+Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.name)))),accessor:K(e),id:null==e||null===(n=e.name)||void 0===n?void 0:n.replaceAll("."," "),symbol:null==e?void 0:e.symbol,sortType:V,Cell:t=>{var n,i,r;const{value:o,column:s,row:d}=t;if("object"==typeof o)return l.createElement($e,{insight:null==o?void 0:o.insight,rowValue:null==o?void 0:o.value,t:N,isFinance:O});const u=null==P||null===(n=P.responseData)||void 0===n||null===(i=n.filter)||void 0===i?void 0:i.find(e=>(null==e?void 0:e.column)===(null==s?void 0:s.id));return"none"!==(null==P||null===(r=P.responseData)||void 0===r?void 0:r.drillDownChartId)&&void 0!==u?l.createElement("span",{style:{color:"#a82227",cursor:"pointer"},onClick:()=>{var t,l;return function(e,t,l,n){var a,i;if(void 0===n&&(n=[]),null!=P&&null!==(a=P.responseData)&&void 0!==a&&a.drillDownChartId&&"none"!==(null==P||null===(i=P.responseData)||void 0===i?void 0:i.drillDownChartId)){var r,o;let a=e;var s;if("tenantId"===t&&(a=null==U?void 0:U.filter(t=>{var l;return(null==t||null===(l=t.city)||void 0===l?void 0:l.ddrName)===e||(null==t?void 0:t.code)===e||(null==t?void 0:t.description)===e}).map(e=>null==e?void 0:e.code),0==(null===(s=a)||void 0===s?void 0:s.length)&&e&&(a=[e]),void 0===a))return;let i={id:null==P||null===(r=P.responseData)||void 0===r?void 0:r.drillDownChartId,name:e,filterKey:t,filterValue:a,label:l};if(n.length>1){var d,u;let e=n.filter(e=>e.key!=t);i.addlFilter={[null==e||null===(d=e[0])||void 0===d?void 0:d.key]:null==x||null===(u=x[(null==x?void 0:x.length)-1])||void 0===u?void 0:u.filterValue},e.map(e=>{var t,l,n,a;i.addlFilter[null==e?void 0:e.key]=(null==x||null===(t=x.filter(t=>t.filterKey==(null==e?void 0:e.key)))||void 0===t||null===(l=t[0])||void 0===l?void 0:l.filterValue)||(null==x||null===(n=x.filter(e=>"tenantId"==e.filterKey))||void 0===n||null===(a=n[0])||void 0===a?void 0:a.filterValue)})}k([...x,i]),L(null==P||null===(o=P.responseData)||void 0===o?void 0:o.drillDownChartId)}}(null!=o&&o.includes("DSS_TB_")?null==d||null===(t=d.original)||void 0===t?void 0:t.key:o,null==u?void 0:u.key,N("DSS_HEADER_"+Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.name)),null==P||null===(l=P.responseData)||void 0===l?void 0:l.filter)}},N("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(o))):"CitizenAverageRating"===(null==s?void 0:s.id)?l.createElement(a.Rating,{id:null==d?void 0:d.id,currentRating:Math.round(10*o)/10,styles:{width:"unset",marginBottom:0},starStyles:{width:"25px"}}):String(N(o))}}})},[P,null==A?void 0:A.denomination,null==A?void 0:A.range])),q=e=>{const{denomination:t}=A;switch(t){case"Unit":return e;case"Lac":return Number((e/1e5).toFixed(2));case"Cr":return Number((e/1e7).toFixed(2));default:return e}};return H||F?l.createElement(a.Loader,null):l.createElement("div",{style:{width:"100%"}},!O&&l.createElement("span",{className:"dss-table-subheader",style:{position:"sticky",left:0}},N("DSS_CMN_TABLE_INFO")),(null==x?void 0:x.length)>1&&l.createElement("div",{className:"tag-container"},l.createElement("span",{style:{marginTop:"20px"}},N("DSS_FILTERS_APPLIED"),": "),x.map((e,t)=>t>0?l.createElement(a.RemoveableTag,{key:t,text:(null==e?void 0:e.label)+": "+N("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(null==e?void 0:e.name)),onClick:()=>(e=>{var t;const l=null==x?void 0:x.filter((t,l)=>l<e);k(l),L(null===(t=l[(null==l?void 0:l.length)-1])||void 0===t?void 0:t.id)})(t)}):null)),Y&&z?l.createElement(a.Table,{className:"customTable ",t:N,customTableWrapperClassName:"dss-table-wrapper",disableSort:!1,autoSort:!0,manualPagination:!1,globalSearch:j,initSortId:"S N ",onSearch:y,data:(null==z?void 0:z.filter(e=>e))||[],totalRecords:null==z?void 0:z.length,columns:null==Y||null===(D=Y.filter(e=>e))||void 0===D?void 0:D.slice(1),showAutoSerialNo:"DSS_HEADER_S_N_",styles:{overflow:"hidden"},getCellProps:e=>({style:{}})}):l.createElement(Le,{t:N}))},lt=()=>l.createElement(a.SearchIconSvg,{className:"signature-img"}),nt=e=>{let{header:i,subHeader:r,className:o,caption:s,children:d,showHeader:u=!0,showSearch:c=!1,showDownload:m=!1,onChange:v,chip:g=[],updateChip:h,value:p={}}=e;const{t:f}=n.useTranslation(),D=Digit.ULBService.getCurrentTenantId(),[E,S]=t.useState(null),[y,b]=t.useState(null),w=window.Digit.Utils.browser.isMobile(),T=t.useRef(),C=[{code:"image",i18nKey:f("ES_COMMON_DOWNLOAD_IMAGE"),icon:l.createElement(a.DownloadIcon,null)},{code:"shareImage",i18nKey:f("ES_DSS_SHARE_IMAGE"),target:"mail",icon:l.createElement(a.EmailIcon,null)},{code:"shareImage",i18nKey:f("ES_DSS_SHARE_IMAGE"),target:"whatsapp",icon:l.createElement(a.WhatsappIcon,null)}];let _=f(Digit.Utils.locale.getTransformedLocale(i));return l.createElement(a.Card,{className:"chart-item "+o,ReactRef:T},l.createElement("div",{className:"chartHeader "+(c&&"column-direction"),style:{flexDirection:"column"}},l.createElement("div",null,u&&l.createElement(a.CardLabel,{className:"dss-header-label"},l.createElement("span",{className:"tooltip "+((null==_?void 0:_.length)<(w?20:30)?"dss-white-pre":"dss-white-pre-line")},_,"amount"===(null==y?void 0:y.toLowerCase())&&l.createElement("span",{style:{whiteSpace:"pre"}}," (",f("DSS_"+Digit.Utils.locale.getTransformedLocale(null==p?void 0:p.denomination)),")"),l.createElement("span",{className:"tooltiptext",style:{whiteSpace:w?"normal":"nowrap",fontSize:"medium",marginLeft:f("TIP_"+Digit.Utils.locale.getTransformedLocale(i)).length>30?-120:-60}},f("TIP_"+Digit.Utils.locale.getTransformedLocale(i))))),g.length<2&&r&&l.createElement("p",{style:{color:"#505A5F",fontWeight:700}},r)),l.createElement("div",{className:"sideContent"},g&&g.length>1&&l.createElement(at,{items:g,onClick:h,t:f}),l.createElement("span",{className:"table-search-wrapper"},c&&l.createElement(a.TextInput,{className:"searchInput",placeholder:"Search",signature:!0,signatureImg:l.createElement(lt,null),onChange:v}),m&&l.createElement(a.DownloadIcon,{className:"mrlg cursorPointer",onClick:()=>Digit.Download.Excel(E,f(i))})),!m&&l.createElement(a.EllipsisMenu,{menuItems:C,displayKey:"i18nKey",onSelect:e=>function(e){setTimeout(()=>{switch(e.code){case"pdf":return Digit.Download.PDF(T,f(i));case"image":return Digit.Download.IndividualChartImage(T,f(i));case"sharePdf":return Digit.ShareFiles.PDF(D,T,f(i),e.target);case"shareImage":return Digit.ShareFiles.IndividualChartImage(D,T,f(i),e.target);default:return null}},500)}(e)}))),s&&l.createElement(a.CardCaption,null,s),l.cloneElement(d,{setChartData:S,setChartDenomination:b}))},at=e=>{const[n,a]=t.useState(1);return l.createElement("div",{className:"table-switch-card-chip"},e.items.map((t,i)=>{var r;return l.createElement("div",{className:t.active&&n?"table-switch-card-active":"table-switch-card-inactive",onClick:()=>{e.onClick&&e.onClick(t.index),a(e=>e+1)}},e.t("DSS_TAB_"+(null==t||null===(r=t.tabName)||void 0===r?void 0:r.toUpperCase())))}))},it=e=>{var n,i,r,o;let{t:s,data:d,code:u,indexValuesWithStar:c}=e;const{value:m}=t.useContext(ye),v=null==d||null===(n=d.insight)||void 0===n||null===(i=n.value)||void 0===i||null===(r=i.replace(/[+-]/g,""))||void 0===r?void 0:r.split("%");return l.createElement("div",null,l.createElement("p",{className:"heading-m",style:{textAlign:"right",paddingTop:"0px",whiteSpace:"nowrap"}},null!=c&&c.includes(u)?l.createElement(a.Rating,{toolTipText:s("COMMON_RATING_LABEL"),currentRating:Math.round(10*(null==d?void 0:d.headerValue))/10,styles:{width:"unset",marginBottom:"unset"},starStyles:{width:"25px"}}):null!=d&&d.headerName.includes("AVG")?Digit.Utils.dss.formatter(null==d?void 0:d.headerValue,null==d?void 0:d.headerSymbol,"Unit",!0)+" "+("totalSludgeTreated"===u?s("DSS_KL"):""):Digit.Utils.dss.formatter(null==d?void 0:d.headerValue,null==d?void 0:d.headerSymbol,null==m?void 0:m.denomination,!0,s)+" "+("totalSludgeTreated"===u?s("DSS_KL"):"")),(null==d?void 0:d.insight)&&l.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"end"}},"upper_green"===(null==d||null===(o=d.insight)||void 0===o?void 0:o.indicator)?Je("10px"):Ge("10px"),l.createElement("p",{className:""+(null==d?void 0:d.insight.colorCode),style:{whiteSpace:"pre"}},(null==v?void 0:v[0])&&Digit.Utils.dss.formatter(v[0],"number",null==m?void 0:m.denomination,!0,s)+"% "+s(Digit.Utils.locale.getTransformedLocale("DSS"+(null==v?void 0:v[1])||"")))))},rt=e=>{var a,i,r,o,s,d,u,c,m,v;let{data:g,setChartDenomination:h,index:p,moduleCode:f,indexValuesWithStar:D}=e;const{id:E,chartType:S}=g,y=Digit.ULBService.getCurrentTenantId(),{t:b}=n.useTranslation(),{value:w}=t.useContext(ye),[T,C]=t.useState({}),_=window.Digit.Utils.browser.isMobile(),{isLoading:L,data:x}=Digit.Hooks.dss.useGetChart({key:E,type:S,tenantId:y,requestDate:{...null==w?void 0:w.requestDate,startDate:null==w||null===(a=w.range)||void 0===a||null===(i=a.startDate)||void 0===i?void 0:i.getTime(),endDate:null==w||null===(r=w.range)||void 0===r||null===(o=r.endDate)||void 0===o?void 0:o.getTime()},filters:null==w?void 0:w.filters,moduleLevel:(null==w?void 0:w.moduleLevel)||f});if(t.useEffect(()=>{if(x){var e,t,l,n,a,i,r;let o=(null==x||null===(e=x.responseData)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.plots)||null;if(o&&Array.isArray(o)&&o.length>0&&null!=o&&o.every(e=>e.value)&&C(e=>{var t,l;return{...e,[E]:{todaysDate:Digit.DateUtils.ConvertEpochToDate(null==o||null===(t=o[0])||void 0===t?void 0:t.value),lastUpdatedTime:Digit.DateUtils.ConvertEpochToTimeInHours(null==o||null===(l=o[1])||void 0===l?void 0:l.value)}}}),0===p&&h(null==x||null===(n=x.responseData)||void 0===n||null===(a=n.data)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.headerSymbol),"todaysLastYearCollectionv3"===(null==x||null===(r=x.responseData)||void 0===r?void 0:r.visualizationCode)){const e=new Date,t=new Date(e.getFullYear()-1,e.getMonth(),e.getDate()),l=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),i=(a<10?"0"+a:a)+"/"+(n<10?"0"+n:n)+"/"+l;C(e=>({...e,[E]:{todaysDate:i,lastUpdatedTime:""}}))}}else C({})},[x]),L)return!1;if(!x)return l.createElement("div",{className:"row"},l.createElement("div",{className:"tooltip"},b(g.name),l.createElement("span",{className:"tooltiptext",style:{fontSize:"medium",width:b("TIP_"+g.name).length<50?"fit-content":400,height:50,whiteSpace:"normal"}},l.createElement("span",{style:{fontWeight:"500",color:"white"}},b("TIP_"+g.name)))),l.createElement("span",{style:{whiteSpace:"pre"}},b("DSS_NO_DATA")));let k=b(null==g?void 0:g.name)||"";return l.createElement("div",{className:"row"},l.createElement("div",{className:"tooltip"},"string"==typeof k&&k,Array.isArray(k)&&(null==k||null===(s=k.filter(e=>e))||void 0===s?void 0:s.map(e=>l.createElement("div",{style:{whiteSpace:"pre"}},e))),l.createElement("span",{className:"dss-white-pre",style:{display:"block"}}," ",null==T||null===(d=T[E])||void 0===d?void 0:d.todaysDate),l.createElement("span",{className:"tooltiptext",style:{fontSize:"medium",width:(e=>_?"auto":b("TIP_"+e.name).length<50?"fit-content":400)(g),height:_?"auto":50,whiteSpace:"normal"}},l.createElement("span",{style:{fontWeight:"500",color:"white"}},b("TIP_"+g.name)),l.createElement("span",{style:{color:"white"}}," ",null==T||null===(u=T[E])||void 0===u?void 0:u.lastUpdatedTime))),l.createElement(it,{t:b,data:null==x||null===(c=x.responseData)||void 0===c||null===(m=c.data)||void 0===m?void 0:m[0],code:null==x||null===(v=x.responseData)||void 0===v?void 0:v.visualizationCode,indexValuesWithStar:D}))},ot=e=>{let{data:n,setChartDenomination:a,moduleCode:i}=e;const{charts:r}=n,o=["citizenAvgRating","nssOverviewCitizenFeedbackScore","nssPtCitizenFeedbackScore","sdssPtCitizenFeedbackScore","sdssOverviewCitizenFeedbackScore"];return l.createElement(t.Fragment,null,l.createElement("span",{className:"chart-metric-wrapper"},r.map((e,t)=>l.createElement(rt,{data:e,key:t,index:t,moduleCode:i,setChartDenomination:a,indexValuesWithStar:o}))))},st=e=>{var n,a,i,r;let{t:o,data:s}=e;const{value:d}=t.useContext(ye),u=null==s||null===(n=s.insight)||void 0===n||null===(a=n.value)||void 0===a||null===(i=a.replace(/[+-]/g,""))||void 0===i?void 0:i.split("%");return l.createElement("div",null,l.createElement("p",{className:"heading-m",style:{paddingTop:"0px",whiteSpace:"nowrap",marginLeft:"0px"}},""+Digit.Utils.dss.formatter(null==s?void 0:s.headerValue,null==s?void 0:s.headerSymbol,null==d?void 0:d.denomination,!0,o)),(null==s?void 0:s.insight)&&l.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"end"}},"upper_green"===(null==s||null===(r=s.insight)||void 0===r?void 0:r.indicator)?Je("10px"):Ge("10px"),l.createElement("p",{className:""+(null==s?void 0:s.insight.colorCode),style:{whiteSpace:"pre"}},(null==u?void 0:u[0])&&Digit.Utils.dss.formatter(u[0],"number",null==d?void 0:d.denomination,!0,o)+"% "+o(Digit.Utils.locale.getTransformedLocale("DSS"+(null==u?void 0:u[1])||"")))))},dt=e=>{var i,r,o,s,d,u,c,m,v;let{data:g}=e;const{id:h,chartType:p}=g,f=Digit.ULBService.getCurrentTenantId(),{t:D}=n.useTranslation(),{value:E}=t.useContext(ye),[S,y]=t.useState({}),b=window.Digit.Utils.browser.isMobile(),{isLoading:w,data:T}=Digit.Hooks.dss.useGetChart({key:h,type:p,tenantId:f,requestDate:{...null==E?void 0:E.requestDate,startDate:null==E||null===(i=E.range)||void 0===i||null===(r=i.startDate)||void 0===r?void 0:r.getTime(),endDate:null==E||null===(o=E.range)||void 0===o||null===(s=o.endDate)||void 0===s?void 0:s.getTime()},filters:null==E?void 0:E.filters});if(w)return l.createElement(a.Loader,null);let C=D(null==g?void 0:g.name)||"";return l.createElement("div",{className:"blocks cursorPointer",style:{flexDirection:"column"}},l.createElement("div",{className:"tooltip"},"string"==typeof C&&C,Array.isArray(C)&&(null==C||null===(d=C.filter(e=>e))||void 0===d?void 0:d.map(e=>l.createElement("div",{style:{whiteSpace:"pre"}},e))),l.createElement("span",{className:"dss-white-pre",style:{display:"block"}}," ",null==S||null===(u=S[h])||void 0===u?void 0:u.todaysDate),l.createElement("span",{className:"tooltiptext",style:{fontSize:"medium",width:(e=>b?"auto":D("TIP_"+e.name).length<50?"fit-content":400)(g),height:b?"auto":50,whiteSpace:"normal"}},l.createElement("span",{style:{fontWeight:"500",color:"white"}},D("TIP_"+g.name)),l.createElement("span",{style:{color:"white"}}," ",null==S||null===(c=S[h])||void 0===c?void 0:c.lastUpdatedTime))),l.createElement(st,{t:D,data:null==T||null===(m=T.responseData)||void 0===m||null===(v=m.data)||void 0===v?void 0:v[0]}))},ut=e=>{let{data:i}=e;const{t:r}=n.useTranslation(),{value:o}=t.useContext(ye);return l.createElement(a.Card,{style:{flexBasis:"100%"},className:"summary-card-margin"},l.createElement("div",{className:"summary-wrapper"},l.createElement("div",{className:"wrapper-child fullWidth"},l.createElement("div",{className:"blocks"},l.createElement("p",null,r(null==i?void 0:i.name)," ",l.createElement("span",{style:{whiteSpace:"pre"}}," (",r("DSS_"+Digit.Utils.locale.getTransformedLocale(null==o?void 0:o.denomination)),")"))),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.charts.map((e,t)=>{var n;return l.createElement(dt,{data:e,key:t,url:null==i||null===(n=i.ref)||void 0===n?void 0:n.url})})))))};let ct=1;const mt=(e,t)=>{switch(e){case"DSS_FSM_MONTHLY_WASTE_CAL":return t("DSS_WASTE_RECIEVED")+" "+t("DSS_WASTE_UNIT");default:return""}},vt=e=>{var a,i;let{rowData:r,forHome:o=!1,services:s,configName:d}=e;const{t:u}=n.useTranslation(),{value:c}=t.useContext(ye),[m,v]=t.useState(""),[g,h]=t.useState({}),p=null===(a=s.filter(e=>null==d?void 0:d.includes(e.name)))||void 0===a||null===(i=a[0])||void 0===i?void 0:i.code,f=(e,t,n)=>{switch(e.chartType){case"table":return l.createElement(tt,{data:e,onSearch:m,chip:g,title:t,moduleCode:n});case"donut":return l.createElement(We,{data:e,title:t,moduleCode:n});case"line":return l.createElement(Ie,{data:e,title:t,moduleCode:n});case"horizontalBar":return l.createElement(Pe,{data:e,xAxisType:"number",yAxisType:"category",layout:"vertical",yDataKey:"name",xDataKey:"",showDrillDown:!1,title:t,moduleCode:n});case"bar":return l.createElement(Pe,{data:e,title:t,yAxisLabel:mt(t,u),moduleCode:n});default:return null}},D=function(e,t,n,a,i){var r,o,s,d,m,g,h,p,D,E,S,y,b,w,T,C,_,L,x,k;switch(void 0===i&&(i=""),e.vizType){case"metric-collection":return l.createElement(nt,{header:e.name,className:"metricsTable",key:t,value:c},l.createElement(ot,{data:e,moduleCode:i}));case"chart":return 0!==(null==c||null===(r=c.filters)||void 0===r||null===(o=r.tenantId)||void 0===o?void 0:o.length)||"fsmTopDsoByPerformance"!==(null==e||null===(s=e.charts)||void 0===s?void 0:s[0].id)&&"fsmBottomDsoByPerformance"!==(null==e||null===(d=e.charts)||void 0===d?void 0:d[0].id)?l.createElement(nt,{key:t,value:c,header:"line"===(null==e||null===(m=e.charts)||void 0===m?void 0:m[n?null===(g=n.filter(e=>e.active))||void 0===g||null===(h=g[0])||void 0===h?void 0:h.index:0].chartType)?""+e.name:e.name,chip:n,updateChip:a,showDownload:"table"===(null==e||null===(p=e.charts)||void 0===p?void 0:p[0].chartType),showSearch:"table"===(null==e||null===(D=e.charts)||void 0===D?void 0:D[0].chartType),className:"table"===(null==e||null===(E=e.charts)||void 0===E?void 0:E[0].chartType)&&"fullWidth",onChange:e=>v(e.target.value)},f(null==e||null===(S=e.charts)||void 0===S?void 0:S[n?null===(y=n.filter(e=>e.active))||void 0===y||null===(b=y[0])||void 0===b?void 0:b.index:0],e.name,i)):null;case"performing-metric":return(null==c||null===(w=c.filters)||void 0===w||null===(T=w.tenantId)||void 0===T?void 0:T.length)>0&&("fsmTopUlbByPerformance"===(null==e||null===(C=e.charts)||void 0===C?void 0:C[0].id)||"fsmBottomUlbByPerformance"===(null==e||null===(_=e.charts)||void 0===_?void 0:_[0].id))?null:l.createElement(nt,{value:c,header:e.name,subHeader:"("+u("SUB_"+e.name)+")",key:t,chip:n,updateChip:a},l.createElement(Fe,{moduleCode:i,data:null==e||null===(L=e.charts)||void 0===L?void 0:L[n?null===(x=n.filter(e=>e.active))||void 0===x||null===(k=x[0])||void 0===k?void 0:k.index:0],fillColor:ct++%2?"RED":"GREEN",title:e.name,showDrillDown:!0}));case"collection":case"module":return l.createElement(ut,{header:e.name,className:"metricsTable",key:t,value:c,data:e});default:return null}};return t.useEffect(()=>{let e={};r.vizArray.map(t=>{var l;(null==t||null===(l=t.charts)||void 0===l?void 0:l.length)>1&&(e[t.name]=t.charts.map((e,t)=>({tabName:e.tabName,active:0===t,index:t})))}),h({...e})},[]),l.createElement("div",{className:"chart-row"},r.vizArray.map(t.useCallback((e,t)=>D(e,t,null==g?void 0:g[e.name],t=>h(l=>(l[e.name]=l[e.name].map(e=>({...e,active:e.index===t})),{...l})),p),[D,g])))},gt="DSS_FILTERS",ht=e=>{var r,o,s,d,u,c,m,v,g,h,p,f,D,E,S,y,b,w,T,C,_,L;let{stateCode:x}=e;const k=Digit.ULBService.getCurrentTenantId(),{t:N}=n.useTranslation(),[A,M]=t.useState(()=>{const{startDate:e,endDate:t,title:l,interval:n,denomination:a,tenantId:i,moduleLevel:r}=(()=>{var e,t,l,n,a;const i=Digit.SessionStorage.get(gt),r=null!=i&&null!==(e=i.range)&&void 0!==e&&e.startDate?new Date(null==i||null===(t=i.range)||void 0===t?void 0:t.startDate):Digit.Utils.dss.getDefaultFinacialYear().startDate,o=null!=i&&null!==(l=i.range)&&void 0!==l&&l.endDate?new Date(null==i||null===(n=i.range)||void 0===n?void 0:n.endDate):Digit.Utils.dss.getDefaultFinacialYear().endDate;return{startDate:r,endDate:o,title:ge(r,"MMM d, yyyy")+" - "+ge(o,"MMM d, yyyy"),interval:Digit.Utils.dss.getDuration(r,o),denomination:(null==i?void 0:i.denomination)||"Lac",tenantId:(null==i||null===(a=i.filters)||void 0===a?void 0:a.tenantId)||[],moduleLevel:(null==i?void 0:i.moduleLevel)||""}})();return{denomination:a,range:{startDate:e,endDate:t,title:l,interval:n},requestDate:{startDate:e.getTime(),endDate:t.getTime(),interval:n,title:l},filters:{tenantId:i},moduleLevel:r}}),[I,U]=t.useState(!1),O=Se(),{moduleCode:R}=i.useParams(),F=Digit.StoreData.getCurrentLanguage(),{isLoading:B}=Digit.Services.useStore({stateCode:x,moduleCode:R,language:F}),{data:H,isLoading:P}=Digit.Hooks.dss.useMDMS(x,"dss-dashboard","DssDashboard",{select:e=>{let t=null==e?void 0:e["dss-dashboard"]["dashboard-config"][0].MODULE_LEVEL,l=[];for(let e=0;e<t.length;e++)null!==t[e].dashboard&&l.push(t[e]);return l.map((e,t)=>({code:e[Object.keys(e)[0]].filterKey,name:Digit.Utils.locale.getTransformedLocale("DSS_"+e[Object.keys(e)[0]].services_name)}))}}),{data:z,isLoadingNAT:j}=Digit.Hooks.dss.useMDMS(x,"tenant",["nationalInfo"],{select:e=>{var t;let l=((null==e||null===(t=e.tenant)||void 0===t?void 0:t.nationalInfo)||[]).reduce((e,t)=>(e[t.stateCode]?e[t.stateCode].push(t):e[t.stateCode]=[t],{...e}),{}),n={ddr:[],ulb:[]};return Object.keys(l).map(e=>{var t;let a=null===(t=l[e])||void 0===t?void 0:t[0].stateName;n.ddr.push({code:e,ddrKey:a,ulbKey:a}),n.ulb.push(...l[e].map(e=>({code:e.code,ulbKey:e.name,ddrKey:e.stateName})))}),n},enabled:O}),{data:W,isLoading:V}=Digit.Hooks.dss.useDashboardConfig(R),{data:K,isLoading:Y}=Digit.Hooks.useModuleTenants("DSS"),{isLoading:q,data:G}=Digit.Hooks.useCommonMDMS(x,"FSM","FSTPPlantInfo"),[Q,X]=t.useState(!1),[J,Z]=t.useState(!1),[$,ee]=t.useState(""),te=e=>{Digit.SessionStorage.set(gt,e),M(e)},le=t.useRef(),ne=t.useMemo(()=>({value:A,setValue:te,ulbTenants:O?z:K,fstpMdmsData:G,screenConfig:H}),[A,Y,q,P]),ae=window.Digit.Utils.browser.isMobile(),ie=()=>{var e;return Digit.Download.PDF(le,N(null==de||null===(e=de[0])||void 0===e?void 0:e.name))},re=e=>{var t;te({...A,filters:{...null==A?void 0:A.filters,tenantId:[...null==A||null===(t=A.filters)||void 0===t?void 0:t.tenantId].filter((t,l)=>l!==e)}})},oe=e=>{var t,l;let n=[...null==A||null===(t=A.filters)||void 0===t?void 0:t.state].filter((t,l)=>l!==e),a=(null==A||null===(l=A.filters)||void 0===l?void 0:l.ulb)||[];if(0==(null==n?void 0:n.length))a=[];else{var i,r;let e=null==z||null===(i=z.ulb)||void 0===i||null===(r=i.filter(e=>Digit.Utils.dss.getCitiesAvailable(e,n)))||void 0===r?void 0:r.map(e=>null==e?void 0:e.code);a=a.filter(t=>e.includes(t))}te({...A,filters:{...null==A?void 0:A.filters,state:n,ulb:a}})},se=e=>{var t;te({...A,filters:{...null==A?void 0:A.filters,ulb:[...null==A||null===(t=A.filters)||void 0===t?void 0:t.ulb].filter((t,l)=>l!==e)}})},de=null==W?void 0:W.responseData;let ue=(null==de||null===(r=de[0])||void 0===r||null===(o=r.visualizations)||void 0===o?void 0:o.reduce((e,t)=>(e[t.name]=0,{...e}),{}))||{},ce=Object.keys(ue).map(e=>e);t.useEffect(()=>{(null==ce?void 0:ce.length)>0&&""==$&&ee(ce[0])},[ce]);const me=[{icon:l.createElement(a.EmailIcon,null),label:N("ES_DSS_SHARE_IMAGE"),onClick:()=>{X(!Q),setTimeout(()=>{var e;return Digit.ShareFiles.DownloadImage(k,le,N(null==de||null===(e=de[0])||void 0===e?void 0:e.name),"mail")},500)}},{icon:l.createElement(a.WhatsappIcon,null),label:N("ES_DSS_SHARE_IMAGE"),onClick:()=>{X(!Q),setTimeout(()=>{var e;return Digit.ShareFiles.DownloadImage(k,le,N(null==de||null===(e=de[0])||void 0===e?void 0:e.name),"whatsapp")},500)}}];return V||Y||B||q||j||P?l.createElement(a.Loader,null):l.createElement(ye.Provider,{value:ne},l.createElement("div",{ref:le,id:"divToPrint"},l.createElement("div",{className:"options"},l.createElement(a.Header,{styles:ae?{marginLeft:"0px",whiteSpace:"pre-line"}:{marginBottom:"0px",whiteSpace:"pre"}},N(null==de||null===(s=de[0])||void 0===s?void 0:s.name)),ae?null:l.createElement("div",{className:"divToBeHidden"},l.createElement("div",{className:"mrlg divToBeHidden"},l.createElement(a.MultiLink,{className:"multilink-block-wrapper divToBeHidden",label:N("ES_DSS_SHARE"),icon:l.createElement(a.ShareIcon,{className:"mrsm"}),onHeadClick:e=>{X(!Q)},displayOptions:Q,options:me})),l.createElement("div",{className:"mrsm divToBeHidden",onClick:ie},l.createElement(a.DownloadIcon,{className:"mrsm divToBeHidden"}),N("ES_DSS_DOWNLOAD")))),O?l.createElement(_e,{t:N,ulbTenants:z,isOpen:I,closeFilters:()=>U(!1),isNational:O}):l.createElement(Ce,{t:N,showModuleFilter:!(O||null==de||null===(d=de[0])||void 0===d||!d.name.includes("OVERVIEW")),services:H,ulbTenants:O?z:K,isOpen:I,closeFilters:()=>U(!1),isNational:O,showDateRange:null==de||null===(u=de[0])||void 0===u||!u.name.includes("DSS_FINANCE_DASHBOARD")}),(null==A||null===(c=A.filters)||void 0===c||null===(m=c.tenantId)||void 0===m?void 0:m.length)>0&&l.createElement("div",{className:"tag-container"},!J&&(null==A||null===(v=A.filters)||void 0===v?void 0:v.tenantId)&&A.filters.tenantId.slice(0,5).map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:N("DSS_HEADER_ULB")+": "+N(e),onClick:()=>re(t)})),(null==A||null===(g=A.filters)||void 0===g||null===(h=g.tenantId)||void 0===h?void 0:h.length)>6&&l.createElement(t.Fragment,null,J&&A.filters.tenantId.map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:N("DSS_HEADER_ULB")+": "+N(e),onClick:()=>re(t)})),!J&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>Z(!0)},N("DSS_FILTER_SHOWALL")),J&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>Z(!1)},N("DSS_FILTER_SHOWLESS"))),l.createElement("p",{className:"clearText cursorPointer",onClick:()=>{te({...A,filters:{...null==A?void 0:A.filters,tenantId:[]}})}},N("DSS_FILTER_CLEAR"))),(null==A||null===(p=A.filters)||void 0===p||null===(f=p.state)||void 0===f?void 0:f.length)>0&&l.createElement("div",{className:"tag-container"},!J&&(null==A||null===(D=A.filters)||void 0===D?void 0:D.state)&&A.filters.state.slice(0,5).map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:N("DSS_HEADER_STATE")+": "+N("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(e)),onClick:()=>oe(t)})),(null==A||null===(E=A.filters)||void 0===E||null===(S=E.state)||void 0===S?void 0:S.length)>6&&l.createElement(t.Fragment,null,J&&A.filters.state.map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:N("DSS_HEADER_STATE")+": "+N("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(e)),onClick:()=>oe(t)})),!J&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>Z(!0)},N("DSS_FILTER_SHOWALL")),J&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>Z(!1)},N("DSS_FILTER_SHOWLESS"))),l.createElement("p",{className:"clearText cursorPointer",onClick:()=>{te({...A,filters:{...null==A?void 0:A.filters,state:[],ulb:[]}})}},N("DSS_FILTER_CLEAR_ST"))),(null==A||null===(y=A.filters)||void 0===y||null===(b=y.ulb)||void 0===b?void 0:b.length)>0&&l.createElement("div",{className:"tag-container"},!J&&(null==A||null===(w=A.filters)||void 0===w?void 0:w.ulb)&&A.filters.ulb.slice(0,5).map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:N("DSS_HEADER_ULB")+": "+N("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(e)),onClick:()=>se(t)})),(null==A||null===(T=A.filters)||void 0===T||null===(C=T.ulb)||void 0===C?void 0:C.length)>6&&l.createElement(t.Fragment,null,J&&A.filters.ulb.map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:N("DSS_HEADER_ULB")+": "+N("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(e)),onClick:()=>se(t)})),!J&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>Z(!0)},N("DSS_FILTER_SHOWALL")),J&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>Z(!1)},N("DSS_FILTER_SHOWLESS"))),l.createElement("p",{className:"clearText cursorPointer",onClick:()=>{te({...A,filters:{...null==A?void 0:A.filters,ulb:[]}})}},N("DSS_FILTER_CLEAR_TN"))),(null==A||null===(_=A.moduleLevel)||void 0===_?void 0:_.length)>0&&l.createElement("div",{className:"tag-container"},!J&&(null==A?void 0:A.moduleLevel)&&l.createElement(a.RemoveableTag,{key:null==A?void 0:A.moduleLevel,text:N("DSS_HEADER_SERVICE")+": "+N(null==A?void 0:A.moduleLevel),onClick:()=>{te({...A,moduleLevel:""})}}),l.createElement("p",{className:"clearText cursorPointer",onClick:()=>{te({...A,moduleLevel:""})}},N("DSS_FILTER_CLEAR"))),ae?l.createElement("div",{className:"options-m"},l.createElement("div",null,l.createElement(a.FilterIcon,{onClick:()=>U(!I),style:!0})),l.createElement("div",{className:"divToBeHidden"},l.createElement(a.MultiLink,{className:"multilink-block-wrapper",label:N("ES_DSS_SHARE"),icon:l.createElement(a.ShareIcon,{className:"mrsm"}),onHeadClick:e=>{X(!Q)},displayOptions:Q,options:me})),l.createElement("div",{onClick:ie,className:"divToBeHidden"},l.createElement(a.DownloadIcon,null),N("ES_DSS_DOWNLOAD"))):null,l.createElement("div",null,ce&&(null==ce?void 0:ce.length)>1&&l.createElement("div",{className:"dss-switch-tabs chart-row"},l.createElement("div",{className:"dss-switch-tab-wrapper"},null==ce?void 0:ce.map(e=>l.createElement("div",{className:$===e?"dss-switch-tab-selected":"dss-switch-tab-unselected",onClick:()=>ee(e)},N(e)))))),null==de||null===(L=de[0])||void 0===L?void 0:L.visualizations.filter(e=>e.name===$).map((e,t)=>{var n;return l.createElement(vt,{rowData:e,key:t,services:H,configName:null==de||null===(n=de[0])||void 0===n?void 0:n.name})})))};var pt,ft,Dt,Et,St,yt,bt,wt,Tt,Ct,_t,Lt,xt,kt;function Nt(){return(Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function At(e){return t.createElement("svg",Nt({width:41,height:35,viewBox:"-5 -2 51 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),pt||(pt=t.createElement("path",{d:"M16.4 34.85v-12.3h8.2v12.3h10.25v-16.4H41L20.5 0 0 18.45h6.15v16.4H16.4z",fill:"#fff"})))}function Mt(){return(Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function It(e){return t.createElement("svg",Mt({width:64,height:64,viewBox:"0 0 64 54",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ft||(ft=t.createElement("g",{filter:"url(#dashboards_svg__filter0_d_28723_79449)"},t.createElement("path",{d:"M4 4a4 4 0 014-4h48a4 4 0 014 4v48a4 4 0 01-4 4H8a4 4 0 01-4-4V4z",fill:"#a82227"}),t.createElement("path",{d:"M48.333 7H15.667A4.68 4.68 0 0011 11.667v32.666A4.68 4.68 0 0015.667 49h32.666A4.68 4.68 0 0053 44.333V11.667A4.68 4.68 0 0048.333 7zM25 39.667h-4.667V23.333H25v16.334zm9.333 0h-4.666V16.333h4.666v23.334zm9.334 0H39v-9.334h4.667v9.334z",fill:"#fff"}))),Dt||(Dt=t.createElement("defs",null,t.createElement("filter",{id:"dashboards_svg__filter0_d_28723_79449",x:0,y:0,width:64,height:64,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},t.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),t.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),t.createElement("feOffset",{dy:4}),t.createElement("feGaussianBlur",{stdDeviation:2}),t.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),t.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),t.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_28723_79449"}),t.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_28723_79449",result:"shape"})))))}function Ut(){return(Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function Ot(e){return t.createElement("svg",Ut({width:41,height:35,viewBox:"-8 -2 51 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Et||(Et=t.createElement("path",{d:"M31.168.75H3.835c-1.88 0-3.4 1.688-3.4 3.75L.418 38.25l6.833-7.5h23.917c1.88 0 3.417-1.688 3.417-3.75V4.5c0-2.063-1.538-3.75-3.417-3.75zM19.21 17.625h-3.417V6.375h3.417v11.25zm0 7.5h-3.417v-3.75h3.417v3.75z",fill:"#fff"})))}function Rt(){return(Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function Ft(e){return t.createElement("svg",Rt({width:41,height:35,viewBox:"-10 -2 51 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),St||(St=t.createElement("path",{d:"M23.992 11L14.457.406 4.922 11C2.294 13.925.98 17.825.98 21.575c0 3.75 1.314 7.706 3.942 10.631s6.082 4.406 9.535 4.406c3.454 0 6.907-1.48 9.535-4.406 2.628-2.925 3.942-6.881 3.942-10.631S26.62 13.925 23.992 11zM4.35 22.25c.017-3.75 1.044-6.131 2.965-8.25l7.142-8.119 7.143 8.213c1.92 2.1 2.948 4.406 2.965 8.156H4.35z",fill:"#fff"})))}function Bt(){return(Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function Ht(e){return t.createElement("svg",Bt({xmlns:"http://www.w3.org/2000/svg",fill:"#fff",width:84,height:84,viewBox:"4 -4 15 30"},e),yt||(yt=t.createElement("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),bt||(bt=t.createElement("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})))}function Pt(){return(Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function zt(e){return t.createElement("svg",Pt({width:41,height:35,viewBox:"-5 -2 51 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),wt||(wt=t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.5.625h-30a3.761 3.761 0 00-3.75 3.75v26.25a3.761 3.761 0 003.75 3.75h30a3.761 3.761 0 003.75-3.75V4.375A3.761 3.761 0 0034.5.625zm-18.75 26.25H6.375v-3.75h9.375v3.75zm0-7.5H6.375v-3.75h9.375v3.75zm0-7.5H6.375v-3.75h9.375v3.75zm9.038 11.25L19.5 17.8l2.644-2.644 2.644 2.663 5.943-5.944 2.663 2.662-8.606 8.588z",fill:"#fff"})))}function jt(){return(jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function Wt(e){return t.createElement("svg",jt({width:41,height:35,viewBox:"-8 -2 51 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Tt||(Tt=t.createElement("path",{d:"M34.375 28.75v1.875a3.761 3.761 0 01-3.75 3.75H4.375a3.749 3.749 0 01-3.75-3.75V4.375a3.749 3.749 0 013.75-3.75h26.25a3.761 3.761 0 013.75 3.75V6.25H17.5A3.749 3.749 0 0013.75 10v15a3.749 3.749 0 003.75 3.75h16.875zM17.5 25h18.75V10H17.5v15zm7.5-4.688a2.809 2.809 0 01-2.813-2.812A2.809 2.809 0 0125 14.687a2.809 2.809 0 012.813 2.813A2.809 2.809 0 0125 20.313z",fill:"#fff"})))}function Vt(){return(Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function Kt(e){return t.createElement("svg",Vt({width:41,height:37,viewBox:"-5 -2 51 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ct||(Ct=t.createElement("path",{d:"M20.501 8.708V.875H.918v35.25h39.167V8.708H20.5zm-11.75 23.5H4.835v-3.916H8.75v3.916zm0-7.833H4.835v-3.917H8.75v3.917zm0-7.833H4.835v-3.917H8.75v3.917zm0-7.834H4.835V4.792H8.75v3.916zm7.834 23.5h-3.917v-3.916h3.917v3.916zm0-7.833h-3.917v-3.917h3.917v3.917zm0-7.833h-3.917v-3.917h3.917v3.917zm0-7.834h-3.917V4.792h3.917v3.916zm19.583 23.5H20.501v-3.916h3.917v-3.917h-3.917v-3.917h3.917v-3.916h-3.917v-3.917h15.667v19.583zm-3.917-15.666h-3.916v3.916h3.916v-3.916zm0 7.833h-3.916v3.917h3.916v-3.917z",fill:"#fff"})))}function Yt(){return(Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function qt(e){return t.createElement("svg",Yt({width:41,height:35,viewBox:"-8 -2 51 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_t||(_t=t.createElement("path",{d:"M30.854 8.25h-6.738V4.5c0-2.081-1.5-3.75-3.37-3.75h-6.738c-1.87 0-3.37 1.669-3.37 3.75v3.75H3.9C2.03 8.25.548 9.919.548 12L.531 32.625c0 2.081 1.5 3.75 3.37 3.75h26.953c1.87 0 3.37-1.669 3.37-3.75V12c0-2.081-1.5-3.75-3.37-3.75zm-10.107 0h-6.739V4.5h6.739v3.75z",fill:"#fff"})))}function Gt(){return(Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function Qt(e){return t.createElement("svg",Gt({width:41,height:35,viewBox:"-5 -2 51 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Lt||(Lt=t.createElement("path",{d:"M20.501 8.708V.875H.918v35.25h39.167V8.708H20.5zm-11.75 23.5H4.835v-3.916H8.75v3.916zm0-7.833H4.835v-3.917H8.75v3.917zm0-7.833H4.835v-3.917H8.75v3.917zm0-7.834H4.835V4.792H8.75v3.916zm7.834 23.5h-3.917v-3.916h3.917v3.916zm0-7.833h-3.917v-3.917h3.917v3.917zm0-7.833h-3.917v-3.917h3.917v3.917zm0-7.834h-3.917V4.792h3.917v3.916zm19.583 23.5H20.501v-3.916h3.917v-3.917h-3.917v-3.917h3.917v-3.916h-3.917v-3.917h15.667v19.583zm-3.917-15.666h-3.916v3.916h3.916v-3.916zm0 7.833h-3.916v3.917h3.916v-3.917z",fill:"#fff"})))}function Xt(){return(Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function Jt(e){return t.createElement("svg",Xt({width:45,height:35,viewBox:"-8 0 51 38",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),xt||(xt=t.createElement("path",{d:"M26.75.75H4.25A3.761 3.761 0 00.5 4.5v30a3.761 3.761 0 003.75 3.75h22.5a3.761 3.761 0 003.75-3.75v-30A3.761 3.761 0 0026.75.75zM4.25 4.5h9.375v15l-4.688-2.813L4.25 19.5v-15z",fill:"#fff"})))}function Zt(){return(Zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function $t(e){return t.createElement("svg",Zt({width:34,height:25,viewBox:"-1 0 34 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),kt||(kt=t.createElement("path",{d:"M27.168.833H3.835A2.894 2.894 0 00.933 3.75l-.015 17.5a2.907 2.907 0 002.917 2.917h23.333a2.907 2.907 0 002.917-2.917V3.75A2.907 2.907 0 0027.168.833zm0 20.417H3.835V12.5h23.333v8.75zm0-14.583H3.835V3.75h23.333v2.917z",fill:"#fff"})))}function el(e,t){switch(e.toLowerCase()){case"overview":case"dss_overview":return l.createElement(It,null);case"fsm":case"dss_fsm":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(Ht,null));case"obps dashboard":case"obps dashboard":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(Kt,null));case"online building plan approval system":case"dss_obps_overview":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(Qt,null));case"nurt_overview":case"nurt_project_staus":return l.createElement(It,null);case"nurt_property_tax":case"dss_property_tax":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(At,null));case"nurt_trade_licence":case"dss_trade_licence":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(qt,null));case"nurt_complains":case"dss_complains":case"public grievances & redressal":case"dss_pgr_overview":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(Ot,null));case"nurt_water_sewerage":case"dss_water_sewerage":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(Ft,null));case"dss_building_permission":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(Qt,null));case"nurt_firenoc":case"fire noc dashboard":case"fire noc":case"dss_firenoc_overview":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(zt,null));case"nurt_mcollect":case"dss_mcollect":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(Wt,null));case"dss_finance":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement($t,null));case"nurt_live_active_ulbs":return l.createElement(It,null);case"dss_birth_death":case"nss_birth_death":case"nurt_birth":case"nurt_death":case"nurt_bnd":return l.createElement("div",{style:{background:t,width:"60 px",height:"52px"}},l.createElement(Jt,null));default:return l.createElement("div",null)}}const tl={scale:320,center:[85.9629,22.5937]},ll=["#54D140","#298CFF","#a82227","#D1D1D1"],nl=["Live","UnderImplementation","OnBoarded","None"],al=e=>{if(e)switch(e&&e.status){case"Live":return ll[0];case"OnBoarded":return ll[1];case"UnderImplementation":return ll[2];case"None":default:return"#D1D1D1"}return"#D1D1D1"},il={default:{outline:"none",stroke:"white",strokeWidth:"0.5",strokeOpacity:"0.9"},hover:{outline:"none",stroke:"white",strokeWidth:"0.5",strokeOpacity:"0.9"},pressed:{outline:"none",stroke:"white",strokeWidth:"0.5",strokeOpacity:"0.9"}},rl=e=>{var i,r,c;let{data:m,drillDown:v=!1,setselectedState:g,setdrilldownId:h,settotalCount:p,setliveCount:f}=e;const{t:D}=n.useTranslation(),{id:E}=m,S=Digit.ULBService.getCurrentTenantId(),[y,b]=t.useState(""),{startDate:w,endDate:T,interval:C}=(()=>{var e,t,l,n,a;const i=Digit.SessionStorage.get("DSS_FILTERS"),r=null!=i&&null!==(e=i.range)&&void 0!==e&&e.startDate?new Date(null==i||null===(t=i.range)||void 0===t?void 0:t.startDate):Digit.Utils.dss.getDefaultFinacialYear().startDate,o=null!=i&&null!==(l=i.range)&&void 0!==l&&l.endDate?new Date(null==i||null===(n=i.range)||void 0===n?void 0:n.endDate):Digit.Utils.dss.getDefaultFinacialYear().endDate;return{startDate:r,endDate:o,title:ge(r,"MMM d, yyyy")+" - "+ge(o,"MMM d, yyyy"),interval:Digit.Utils.dss.getDuration(r,o),denomination:(null==i?void 0:i.denomination)||"Lac",tenantId:(null==i||null===(a=i.filters)||void 0===a?void 0:a.tenantId)||[]}})(),_={startDate:w.getTime(),endDate:T.getTime(),interval:C,title:"home"},{data:L,isLoading:x}=Digit.Hooks.dss.useMDMS(Digit.ULBService.getStateId(),"dss-dashboard",["dashboard-config"],{select:e=>{var t,l,n,a;return(null==e||null===(t=e["dss-dashboard"])||void 0===t||null===(l=t["dashboard-config"])||void 0===l||null===(n=l[0])||void 0===n||null===(a=n.MAP_CONFIG)||void 0===a?void 0:a[0])||{}},enabled:!0}),k=null===(i=u.get(L,"objects.india.geometries",[]))||void 0===i?void 0:i.map(e=>({state:e.properties.name,value:0,id:e.id}));let N=(null==k?void 0:k.reduce((e,t)=>(e[t.state]={...t},{...e}),{}))||{};const{isLoading:A,data:M}=Digit.Hooks.dss.useGetChart({key:E,type:"metric",tenantId:S,requestDate:_});return A||!(null==M||null===(r=M.responseData)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.filter(e=>{let t=e.plots[3].value,l=e.plots[4].value,n=e.plots[4].strValue>0;N[e.headerName]={...null==N?void 0:N[e.headerName],status:e.plots[2].strValue,value:n?l:t,live:n,totalCount:t,liveCount:l}}))?l.createElement("div",null,"Loading..."):A||x?l.createElement(a.Loader,null):l.createElement(o.ResponsiveContainer,{width:"40%",height:220,margin:{top:5,right:5,left:5,bottom:5}},l.createElement("div",{style:{position:"relative"}},l.createElement(s,null,y),l.createElement(d.ComposableMap,{projectionConfig:tl,projection:"geoMercator",width:240,height:170,"data-tip":""},l.createElement(d.Geographies,{geography:L},e=>{let{geographies:t}=e;return t.map(e=>{const t=Object.values(N).find(t=>t.id===e.id);return l.createElement(d.Geography,{key:e.rsmKey,geography:e,fill:al(t),style:il,onMouseEnter:l=>function(e,t,l){return void 0===t&&(t={value:"0"}),b(D(""+e.properties.name)+": "+(t.value?Number(t.value).toFixed()+" ULBs":"NA")+" ")}(e,t),onClick:e=>function(e,t,l){var n;void 0===t&&(t={value:"NA"}),t&&t.value>0&&"Live"===t.status&&g(t.state),h(null==M||null===(n=M.responseData)||void 0===n?void 0:n.drillDownChartId),p(t.totalCount),f(t.liveCount)}(0,t),onMouseLeave:e=>{b("")}})})})),l.createElement("span",{className:"map-status"},nl.map(e=>l.createElement("span",{className:"map-row"},l.createElement("span",{className:"map-box",style:{background:al({status:e})}}),l.createElement("span",{className:"map-text"},D("DSS_"+e.toUpperCase())))))))},ol=e=>{let{onClick:t}=e;return l.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",onClick:t,xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M16 7H3.83L9.42 1.41L8 0L0 8L8 16L9.41 14.59L3.83 9H16V7Z",fill:"#0B0C0C"}))},sl=e=>{var t;let{drilldown:i=!0,selectedState:r,setselectedState:s,drilldownId:d,setdrilldownId:u,setTotalCount:c,setLiveCount:m}=e;const{t:v}=n.useTranslation(),g=Digit.ULBService.getCurrentTenantId();let h={};""!=r&&(h.state=r),h={...h};const{startDate:p,endDate:f,interval:D}=(()=>{var e,t,l,n,a;const i=Digit.SessionStorage.get("DSS_FILTERS"),r=null!=i&&null!==(e=i.range)&&void 0!==e&&e.startDate?new Date(null==i||null===(t=i.range)||void 0===t?void 0:t.startDate):Digit.Utils.dss.getDefaultFinacialYear().startDate,o=null!=i&&null!==(l=i.range)&&void 0!==l&&l.endDate?new Date(null==i||null===(n=i.range)||void 0===n?void 0:n.endDate):Digit.Utils.dss.getDefaultFinacialYear().endDate;return{startDate:r,endDate:o,title:ge(r,"MMM d, yyyy")+" - "+ge(o,"MMM d, yyyy"),interval:Digit.Utils.dss.getDuration(r,o),denomination:(null==i?void 0:i.denomination)||"Lac",tenantId:(null==i||null===(a=i.filters)||void 0===a?void 0:a.tenantId)||[]}})(),E={startDate:p.getTime(),endDate:f.getTime(),interval:D,title:"home"},{isLoading:S,data:y}=Digit.Hooks.dss.useGetChart({key:d,type:"metric",tenantId:g,requestDate:E,filters:h});if(S)return l.createElement(a.Loader,null);const b=null==y||null===(t=y.responseData)||void 0===t?void 0:t.data;return l.createElement(o.ResponsiveContainer,{width:"50%",height:240,margin:{top:5,right:5,left:5,bottom:5}},l.createElement("div",null," ",l.createElement("div",{style:{float:"left"}},l.createElement(ol,{onClick:e=>{s(""),u("none"),c(""),m("")}})),b&&0==b.length&&l.createElement("div",{style:{paddingTop:"60px"}},v("DSS_NO_DATA")),b&&b[0]&&l.createElement("span",{className:"tab-rows tab-header"},l.createElement("span",null,v("DSS_"+b[0].plots[1].name)),l.createElement("span",null,v("DSS_"+b[0].plots[2].name))),b.map((e,t)=>l.createElement("span",{className:"tab-rows",style:{background:t%2==0?"none":"#EEEEEE"}},l.createElement("span",null,v("DSS_"+e.plots[1].label)),l.createElement("span",null,e.plots[2].value)))))};var dl,ul;function cl(){return(cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function ml(e){return t.createElement("svg",cl({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),dl||(dl=t.createElement("path",{d:"M8 0L6.59 1.41 12.17 7H0v2h12.17l-5.58 5.59L8 16l8-8-8-8z",fill:"#a82227"})))}function vl(){return(vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function gl(e){return t.createElement("svg",vl({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ul||(ul=t.createElement("path",{d:"M8 0L6.59 1.41 12.17 7H0v2h12.17l-5.58 5.59L8 16l8-8-8-8z",fill:"#fff"})))}const hl=()=>{var e,t,l,n,a;const i=Digit.SessionStorage.get("DSS_FILTERS"),r=null!=i&&null!==(e=i.range)&&void 0!==e&&e.startDate?new Date(null==i||null===(t=i.range)||void 0===t?void 0:t.startDate):Digit.Utils.dss.getDefaultFinacialYear().startDate,o=null!=i&&null!==(l=i.range)&&void 0!==l&&l.endDate?new Date(null==i||null===(n=i.range)||void 0===n?void 0:n.endDate):Digit.Utils.dss.getDefaultFinacialYear().endDate;return{startDate:r,endDate:o,title:ge(r,"MMM d, yyyy")+" - "+ge(o,"MMM d, yyyy"),interval:Digit.Utils.dss.getDuration(r,o),denomination:(null==i?void 0:i.denomination)||"Lac",tenantId:(null==i||null===(a=i.filters)||void 0===a?void 0:a.tenantId)||[]}},pl=[{dark:"rgba(12, 157, 149, 0.85)",light:"rgba(11, 222, 133, 0.14)",defaultColor:"rgba(244, 119, 56, 1)"},{dark:"rgba(251, 192, 45, 0.85)",light:"rgba(255, 202, 69, 0.24)",defaultColor:"rgba(244, 119, 56, 1)"},{dark:"rgba(75, 31, 165, 0.85)",light:"rgba(138, 83, 255, 0.24)",defaultColor:"rgba(244, 119, 56, 1)"},{dark:"rgba(4, 139, 208, 0.85)",light:"rgba(4, 139, 208, 0.24)",defaultColor:"rgba(244, 119, 56, 1)"},{dark:"rgba(239, 124, 91, 0.85)",light:"rgba(255, 114, 69, 0.24)",defaultColor:"rgba(244, 119, 56, 1)"},{dark:"rgba(81, 210, 198, 0.85)",light:"rgba(83, 255, 234, 0.14)",defaultColor:"rgba(244, 119, 56, 1)"},{dark:"rgba(183, 165, 69, 0.85)",light:"rgba(222, 188, 11, 0.24)",defaultColor:"rgba(244, 119, 56, 1)"},{dark:"rgba(110, 132, 89, 1)",light:"rgba(159, 255, 83, 0.24)",defaultColor:"rgba(244, 119, 56, 1)"},{dark:"rgba(120, 120, 120, 0.85)",light:"rgb(120,120,120,0.35)",defaultColor:"rgba(244, 119, 56, 1)"},{dark:"rgba(183, 165, 69, 0.85)",light:"rgba(222, 188, 11, 0.24)",defaultColor:"rgba(244, 119, 56, 1)"},{dark:"rgba(183, 165, 69, 0.85)",light:"rgba(222, 188, 11, 0.24)",defaultColor:"rgba(244, 119, 56, 1)"}],fl=e=>{var t,i,r,o,s,d,u,c,m,v,g,h,p,f,D,E,S,y,b,w,T,C,_,L,x,k,N;let{data:A,moduleLevel:M,overview:I=!1}=e;const{t:U}=n.useTranslation(),O=Digit.ULBService.getCurrentTenantId(),{id:R,chartType:F}=A,{startDate:B,endDate:H,interval:P}=hl(),z={startDate:B.getTime(),endDate:H.getTime(),interval:P,title:"home"},{isLoading:j,data:W}=Digit.Hooks.dss.useGetChart({key:R,type:F,tenantId:O,requestDate:z,moduleLevel:M});if(j)return l.createElement(a.Loader,null);const V=null==W||null===(t=W.responseData)||void 0===t||null===(i=t.data)||void 0===i||null===(r=i[0])||void 0===r||null===(o=r.insight)||void 0===o||null===(s=o.value)||void 0===s||null===(d=s.replace(/[+-]/g,""))||void 0===d?void 0:d.split("%");return l.createElement("div",{className:"dss-insight-card",style:I?{}:{margin:"0px"}},l.createElement("div",{className:"tooltip"},l.createElement("p",{className:"p1"},U(null==A?void 0:A.name)),l.createElement("span",{className:"tooltiptext",style:{width:U("TIP_"+A.name).length<40?"max-content":"fit-content",height:U("TIP_"+A.name).length<40?"fit-content":"max-content",whiteSpace:"normal"}},l.createElement("span",{style:{fontSize:"14px",fontWeight:"400px",color:"white"}},U("TIP_"+A.name)))),"NATIONAL_DSS_OVERVIEW_CITIZEN_FEEDBACK_SCORE"===A.name?l.createElement(a.Rating,{currentRating:Math.round(10*(null==W||null===(u=W.responseData)||void 0===u||null===(c=u.data)||void 0===c||null===(m=c[0])||void 0===m?void 0:m.headerValue))/10,styles:{width:"unset",marginBottom:0},starStyles:{width:"25px"},toolTipText:U("COMMON_RATING_LABEL")}):l.createElement("p",{className:"p2"},Digit.Utils.dss.formatter(null==W||null===(v=W.responseData)||void 0===v||null===(g=v.data)||void 0===g||null===(h=g[0])||void 0===h?void 0:h.headerValue,null==W||null===(p=W.responseData)||void 0===p||null===(f=p.data)||void 0===f||null===(D=f[0])||void 0===D?void 0:D.headerSymbol,"Lac",!0,U)),null!=W&&null!==(E=W.responseData)&&void 0!==E&&null!==(S=E.data)&&void 0!==S&&null!==(y=S[0])&&void 0!==y&&null!==(b=y.insight)&&void 0!==b&&b.value?l.createElement("p",{className:"p3 "+("upper_green"===(null==W||null===(w=W.responseData)||void 0===w||null===(T=w.data)||void 0===T||null===(C=T[0])||void 0===C||null===(_=C.insight)||void 0===_?void 0:_.indicator)?"color-green":"color-red")},"upper_green"===(null==W||null===(L=W.responseData)||void 0===L||null===(x=L.data)||void 0===x||null===(k=x[0])||void 0===k||null===(N=k.insight)||void 0===N?void 0:N.indicator)?Je("10px"):Ge("10px"),(null==V?void 0:V[0])&&V[0]+"% "+U(Digit.Utils.locale.getTransformedLocale("DSS"+(null==V?void 0:V[1])||""))):null)},Dl=e=>{var i,r;let{data:s,setselectState:d=""}=e;const u=["#298CFF","#54D140"],{t:c}=n.useTranslation(),m=Digit.ULBService.getCurrentTenantId(),{id:v,chartType:g}=s;let h={};""!==d&&(h.state=d),h={...h};const{startDate:p,endDate:f,interval:D}=hl(),E={startDate:p.getTime(),endDate:f.getTime(),interval:D,title:"home"},{isLoading:S,data:y}=Digit.Hooks.dss.useGetChart({key:v,type:g,tenantId:m,requestDate:E,filters:h}),b=t.useMemo(()=>{var e;return(e=>{let t={};for(let l=0;l<(null==e?void 0:e.length);l++){const n=e[l];for(let e=0;e<n.plots.length;e++){const l=n.plots[e];t[l.name]={...t[l.name],[c(n.headerName)]:null==l?void 0:l.value,name:c(l.name)}}}return Object.keys(t).map(e=>({name:e,...t[e]}))})(null==y||null===(e=y.responseData)||void 0===e?void 0:e.data)});if(S)return l.createElement(a.Loader,null);const w=null==y||null===(i=y.responseData)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.map(e=>null==e?void 0:e.headerName);return l.createElement(o.ResponsiveContainer,{width:"50%",height:480,margin:{top:5,right:5,left:5,bottom:5}},0!==(null==b?void 0:b.length)&&b?l.createElement(o.BarChart,{width:"100%",height:"100%",margin:{top:5,right:5,left:5,bottom:5},layout:"horizontal",data:b,barGap:12,barSize:30},l.createElement(o.CartesianGrid,{strokeDasharray:"2 2"}),l.createElement(o.YAxis,{dataKey:"",type:"number",tick:{fontSize:"12px",fill:"#505A5F"},label:{value:"",angle:-90,position:"insideLeft",dy:50,fontSize:"12px",fill:"#505A5F"},tickCount:10,unit:"",width:130}),l.createElement(o.XAxis,{dataKey:"name",type:"category",tick:{fontSize:"14px",fill:"#505A5F"},tickCount:10}),null==w?void 0:w.map((e,t)=>l.createElement(o.Bar,{key:t,dataKey:c(e),fill:u[t],stackId:(null==w?void 0:w.length)>2?1:t})),l.createElement(o.Legend,{formatter:e=>l.createElement("span",{style:{fontSize:"14px",color:"#505A5F"}},c("DSS_"+Digit.Utils.locale.getTransformedLocale(e))),iconType:"circle"}),l.createElement(o.Tooltip,{cursor:!1})):l.createElement(Le,{t:c}))},El=e=>{var r,o;let{stateCode:s}=e;const d=Digit.ULBService.getCurrentTenantId(),{t:u}=n.useTranslation(),[c,m]=t.useState(()=>{}),{moduleCode:v}=i.useParams(),g=Digit.StoreData.getCurrentLanguage(),{isLoading:h}=Digit.Services.useStore({stateCode:s,moduleCode:v,language:g}),{data:p,isLoading:f}=Digit.Hooks.dss.useDashboardConfig(v),[D,E]=t.useState(!1),[S,y]=t.useState(""),[b,w]=t.useState("none"),[T,C]=t.useState(""),[_,L]=t.useState(""),x=window.location.href.includes("/dss/landing/home")||window.location.href.includes("dss/landing/NURT_DASHBOARD"),k=e=>{Digit.SessionStorage.set("DSS_FILTERS",e),m(e)},N=t.useRef(),A=t.useMemo(()=>({value:c,setValue:k}),[c]),M=innerWidth<=640,I=()=>{var e;return Digit.Download.PDF(N,u(null==U||null===(e=U[0])||void 0===e?void 0:e.name))},U=null==p?void 0:p.responseData,O=navigator.share?[{label:u("ES_DSS_SHARE_PDF"),onClick:()=>{E(!D),setTimeout(()=>{var e;return Digit.ShareFiles.PDF(d,N,u(null==U||null===(e=U[0])||void 0===e?void 0:e.name))},500)}},{label:u("ES_DSS_SHARE_IMAGE"),onClick:()=>{E(!D),setTimeout(()=>{var e;return Digit.ShareFiles.Image(d,N,u(null==U||null===(e=U[0])||void 0===e?void 0:e.name))},500)}}]:[{icon:l.createElement(a.EmailIcon,null),label:u("ES_DSS_SHARE_PDF"),onClick:()=>{E(!D),setTimeout(()=>{var e;return Digit.ShareFiles.PDF(d,N,u(null==U||null===(e=U[0])||void 0===e?void 0:e.name),"mail")},500)}},{icon:l.createElement(a.WhatsappIcon,null),label:u("ES_DSS_SHARE_PDF"),onClick:()=>{E(!D),setTimeout(()=>{var e;return Digit.ShareFiles.PDF(d,N,u(null==U||null===(e=U[0])||void 0===e?void 0:e.name),"whatsapp")},500)}},{icon:l.createElement(a.EmailIcon,null),label:u("ES_DSS_SHARE_IMAGE"),onClick:()=>{E(!D),setTimeout(()=>{var e;return Digit.ShareFiles.Image(d,N,u(null==U||null===(e=U[0])||void 0===e?void 0:e.name),"mail")},500)}},{icon:l.createElement(a.WhatsappIcon,null),label:u("ES_DSS_SHARE_IMAGE"),onClick:()=>{E(!D),setTimeout(()=>{var e;return Digit.ShareFiles.Image(d,N,u(null==U||null===(e=U[0])||void 0===e?void 0:e.name),"whatsapp")},500)}}];return f||h?l.createElement(a.Loader,null):l.createElement(ye.Provider,{value:A},l.createElement("div",{ref:N},l.createElement("div",{className:"options",style:{margin:"10px"}},l.createElement(a.Header,{styles:{marginBottom:"0px"}},u(null==U||null===(r=U[0])||void 0===r?void 0:r.name)),M?null:l.createElement("div",null,l.createElement("div",{className:"mrlg"},l.createElement(a.MultiLink,{className:"multilink-block-wrapper",label:u("ES_DSS_SHARE"),icon:l.createElement(a.ShareIcon,{className:"mrsm"}),showOptions:e=>E(e),onHeadClick:e=>E(void 0!==e?e:!D),displayOptions:D,options:O})),l.createElement("div",{className:"mrsm",onClick:I},l.createElement(a.DownloadIcon,{className:"mrsm"}),u("ES_DSS_DOWNLOAD")))),M?l.createElement("div",{className:"options-m"},l.createElement("div",null,l.createElement(a.MultiLink,{className:"multilink-block-wrapper",label:u("ES_DSS_SHARE"),icon:l.createElement(a.ShareIcon,{className:"mrsm"}),showOptions:e=>E(e),onHeadClick:e=>E(void 0!==e?e:!D),displayOptions:D,options:O})),l.createElement("div",{onClick:I},l.createElement(a.DownloadIcon,null),u("ES_DSS_DOWNLOAD"))):null,null==U||null===(o=U[0])||void 0===o?void 0:o.visualizations.map((e,t)=>l.createElement("div",{className:"dss-card",key:t},e.vizArray.map((t,n)=>{var a,i,r,o,s,d,c,m,v,g,h,p,f,D,E,k,N,A,M,I,U,O,R;return"bar"==(null==t||null===(a=t.charts)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.chartType)?null:"map"==(null==t||null===(r=t.charts)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.chartType)?l.createElement("div",{className:"dss-card-parent  "+("collection"==t.vizType?"w-100":t.name.includes("PROJECT_STAUS")||t.name.includes("LIVE_ACTIVE_ULBS")?"dss-h-100":""),style:"collection"==t.vizType?{backgroundColor:"#fff",height:"600px"}:{backgroundColor:pl[n].light},key:n},l.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},l.createElement("div",{className:"dss-card-header"},el(t.name),l.createElement("p",{style:{marginLeft:"20px"}},u(""===S?t.name:"DSS_TB_"+Digit.Utils.locale.getTransformedLocale(S))),""!=S&&t.name.includes("PROJECT_STAUS")&&l.createElement("span",{style:{fontSize:"14px",display:"block"}},u("DSS_TOTAL_ULBS")," ",Number(T).toFixed()," | ",u("DSS_LIVE_ULBS")," ",Number(_).toFixed())),"map"==(null==t||null===(s=t.charts)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.chartType)&&l.createElement("div",{className:"dss-card-header",style:{width:"45%"}},el(null===(c=e.vizArray)||void 0===c||null===(m=c[1])||void 0===m?void 0:m.name),l.createElement("p",{style:{marginLeft:"20px",fontSize:"24px",fontFamily:"Roboto, sans-serif",fontWeight:500,color:"#000000"}},u(""===S?null===(v=e.vizArray)||void 0===v||null===(g=v[1])||void 0===g?void 0:g.name:Digit.Utils.locale.getTransformedLocale(S)+"_"+(null===(h=e.vizArray)||void 0===h||null===(p=h[1])||void 0===p?void 0:p.name))))),l.createElement("div",{className:"dss-card-body"},"map"==(null==t||null===(f=t.charts)||void 0===f||null===(D=f[0])||void 0===D?void 0:D.chartType)&&(""!=S?l.createElement(sl,{data:null==t||null===(E=t.charts)||void 0===E?void 0:E[0],selectedState:S,setselectedState:y,drilldownId:b,setdrilldownId:w,setTotalCount:C,setLiveCount:L}):l.createElement(rl,{data:null==t||null===(k=t.charts)||void 0===k?void 0:k[0],setselectedState:y,setdrilldownId:w,settotalCount:C,setliveCount:L})),"map"==(null==t||null===(N=t.charts)||void 0===N||null===(A=N[0])||void 0===A?void 0:A.chartType)&&l.createElement(Dl,{data:null===(M=e.vizArray)||void 0===M||null===(I=M[1])||void 0===I||null===(U=I.charts)||void 0===U?void 0:U[0],setselectState:S}))):l.createElement("div",{className:"dss-card-parent  "+("collection"==t.vizType?"dss-w-100":t.name.includes("PROJECT_STAUS")||t.name.includes("LIVE_ACTIVE_ULBS")?"h-100":""),style:"collection"==t.vizType||t.name.includes("PROJECT_STAUS")||t.name.includes("LIVE_ACTIVE_ULBS")?{backgroundColor:"#fff",position:"relative"}:{backgroundColor:pl[n].light,padding:"20px",paddingBottom:"40px",position:"relative"},key:n},l.createElement("div",{style:{justifyContent:"space-between",display:"flex",flexDirection:"row"}},l.createElement("div",{className:"dss-card-header",style:{marginBottom:"10px"}},el(t.name,pl[n].dark),l.createElement("p",{style:{marginLeft:"20px"}},u(t.name))),"collection"==t.vizType?l.createElement("div",{style:{float:"right",textAlign:"right",color:"#a82227",fontSize:16,fontWeight:"bold",display:"flex",flexDirection:"row"}},!x&&l.createElement("span",null,l.createElement("span",{style:{paddingRight:10}},u("DSS_OVERVIEW")),l.createElement("span",null," ",l.createElement(ml,null)))):null),l.createElement("div",{className:"dss-card-body",style:{marginBottom:x?"20px":""}},t.charts.map((e,n)=>l.createElement("div",{style:"collection"==t.vizType?{width:Digit.Utils.browser.isMobile()?"50%":"25%"}:{width:"50%"}},l.createElement(fl,{data:e,key:n,moduleLevel:t.moduleLevel,overview:"collection"===t.vizType})))),x&&l.createElement("div",{style:{borderRadius:"0px 0px 4px 4px",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",bottom:"0px",left:"0px",width:"100%",background:"collection"==t.vizType||t.name.includes("PROJECT_STAUS")||t.name.includes("LIVE_ACTIVE_ULBS")?null==pl||null===(O=pl[n])||void 0===O?void 0:O.defaultColor:null==pl||null===(R=pl[n])||void 0===R?void 0:R.dark},onClick:()=>{location.href="/digit-ui/employee/dss/dashboard/"+t.ref.url}},l.createElement("div",{style:{padding:"10px",display:"flex",justifyContent:"center",alignItems:"center",height:"40px"}},l.createElement("span",{style:{marginRight:"10px",color:"white"}},u("COMMON_DSS_VIEW_DASH_BOARD_LABEL")+" "),l.createElement(gl,null))))})))))},Sl=e=>{var i,r,o,s,d,u,c,m,v,h,p,f,D,E,S;let{stateCode:y}=e;const[b,w]=t.useState(""),{chart:T,title:C,type:_="table",fillColor:L="",isNational:x="NO"}=Digit.Hooks.useQueryParams(),{t:A}=n.useTranslation(),M="YES"==x,[I,U]=t.useState(()=>{const{startDate:e,endDate:t,title:l,interval:n,tenantId:a}=(()=>{var e,t,l,n,a;const i=Digit.SessionStorage.get("DSS_FILTERS"),r=null!=i&&null!==(e=i.range)&&void 0!==e&&e.startDate?new Date(null==i||null===(t=i.range)||void 0===t?void 0:t.startDate):g(k(new Date),3),o=null!=i&&null!==(l=i.range)&&void 0!==l&&l.endDate?new Date(null==i||null===(n=i.range)||void 0===n?void 0:n.endDate):g(N(new Date),3);return{startDate:r,endDate:o,title:ge(r,"MMM d, yyyy")+" - "+ge(o,"MMM d, yyyy"),interval:Digit.Utils.dss.getDuration(r,o),denomination:(null==i?void 0:i.denomination)||"Unit",tenantId:(null==i||null===(a=i.filters)||void 0===a?void 0:a.tenantId)||[]}})();return{range:{startDate:e,endDate:t,title:l,interval:n},requestDate:{startDate:e.getTime(),endDate:t.getTime(),interval:n,title:l},filters:{tenantId:a}}}),[O,R]=t.useState(!1),F=e=>{Digit.SessionStorage.set("DSS_FILTERS",e),U(e)},{data:B,isLoading:H}=Digit.Hooks.useModuleTenants("DSS"),P=t.useMemo(()=>({value:I,setValue:F}),[I]),{data:z}=Digit.Hooks.dss.useMDMS(y,"tenant",["nationalInfo"],{select:e=>{var t;let l=((null==e||null===(t=e.tenant)||void 0===t?void 0:t.nationalInfo)||[]).reduce((e,t)=>(e[t.stateCode]?e[t.stateCode].push(t):e[t.stateCode]=[t],{...e}),{}),n={ddr:[],ulb:[]};return Object.keys(l).map(e=>{var t;let a=null===(t=l[e])||void 0===t?void 0:t[0].stateName;n.ddr.push({code:e,ddrKey:a,ulbKey:a}),n.ulb.push(...l[e].map(e=>({code:e.code,ulbKey:e.name,ddrKey:e.stateName})))}),n},enabled:M}),j=e=>{var t;F({...I,filters:{...null==I?void 0:I.filters,tenantId:[...null==I||null===(t=I.filters)||void 0===t?void 0:t.tenantId].filter((t,l)=>l!==e)}})},W=e=>{var t,l;let n=[...null==I||null===(t=I.filters)||void 0===t?void 0:t.state].filter((t,l)=>l!==e),a=(null==I||null===(l=I.filters)||void 0===l?void 0:l.ulb)||[];if(0==(null==n?void 0:n.length))a=[];else{var i,r;let e=null==z||null===(i=z.ulb)||void 0===i||null===(r=i.filter(e=>Digit.Utils.dss.getCitiesAvailable(e,n)))||void 0===r?void 0:r.map(e=>null==e?void 0:e.code);a=a.filter(t=>e.includes(t))}F({...I,filters:{...null==I?void 0:I.filters,state:n,ulb:a}})},V=e=>{var t;F({...I,filters:{...null==I?void 0:I.filters,ulb:[...null==I||null===(t=I.filters)||void 0===t?void 0:t.ulb].filter((t,l)=>l!==e)}})};return H?l.createElement(a.Loader,null):l.createElement(ye.Provider,{value:P},l.createElement(a.Header,null,A(C)),x?l.createElement(_e,{t:A,ulbTenants:z,isNational:x}):l.createElement(Ce,{t:A,ulbTenants:x?z:B,isNational:M}),(null==I||null===(i=I.filters)||void 0===i||null===(r=i.tenantId)||void 0===r?void 0:r.length)>0&&l.createElement("div",{className:"tag-container"},!O&&(null==I||null===(o=I.filters)||void 0===o?void 0:o.tenantId)&&I.filters.tenantId.slice(0,5).map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:A("DSS_HEADER_ULB")+": "+A("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(e)),onClick:()=>j(t)})),(null==I||null===(s=I.filters)||void 0===s||null===(d=s.tenantId)||void 0===d?void 0:d.length)>6&&l.createElement(Fragment,null,O&&I.filters.tenantId.map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:A("DSS_HEADER_ULB")+": "+A("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(e)),onClick:()=>j(t)})),!O&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>R(!0)},A("DSS_FILTER_SHOWALL")),O&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>R(!1)},A("DSS_FILTER_SHOWLESS"))),l.createElement("p",{className:"clearText cursorPointer",onClick:()=>{F({...I,filters:{...null==I?void 0:I.filters,tenantId:[]}})}},A("DSS_FILTER_CLEAR"))),(null==I||null===(u=I.filters)||void 0===u||null===(c=u.state)||void 0===c?void 0:c.length)>0&&l.createElement("div",{className:"tag-container"},!O&&(null==I||null===(m=I.filters)||void 0===m?void 0:m.state)&&I.filters.state.slice(0,5).map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:A("DSS_HEADER_STATE")+": "+A("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(e)),onClick:()=>W(t)})),(null==I||null===(v=I.filters)||void 0===v||null===(h=v.state)||void 0===h?void 0:h.length)>6&&l.createElement(Fragment,null,O&&I.filters.state.map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:A("DSS_HEADER_STATE")+": "+A("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(e)),onClick:()=>W(t)})),!O&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>R(!0)},A("DSS_FILTER_SHOWALL")),O&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>R(!1)},A("DSS_FILTER_SHOWLESS"))),l.createElement("p",{className:"clearText cursorPointer",onClick:()=>{F({...I,filters:{...null==I?void 0:I.filters,state:[],ulb:[]}})}},A("DSS_FILTER_CLEAR_ST"))),(null==I||null===(p=I.filters)||void 0===p||null===(f=p.ulb)||void 0===f?void 0:f.length)>0&&l.createElement("div",{className:"tag-container"},!O&&(null==I||null===(D=I.filters)||void 0===D?void 0:D.ulb)&&I.filters.ulb.slice(0,5).map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:A("DSS_HEADER_ULB")+": "+A("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(e)),onClick:()=>V(t)})),(null==I||null===(E=I.filters)||void 0===E||null===(S=E.ulb)||void 0===S?void 0:S.length)>6&&l.createElement(Fragment,null,O&&I.filters.ulb.map((e,t)=>l.createElement(a.RemoveableTag,{key:t,text:A("DSS_HEADER_ULB")+": "+A("DSS_TB_"+Digit.Utils.locale.getTransformedLocale(e)),onClick:()=>V(t)})),!O&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>R(!0)},A("DSS_FILTER_SHOWALL")),O&&l.createElement("p",{className:"clearText cursorPointer",onClick:()=>R(!1)},A("DSS_FILTER_SHOWLESS"))),l.createElement("p",{className:"clearText cursorPointer",onClick:()=>{F({...I,filters:{...null==I?void 0:I.filters,ulb:[]}})}},A("DSS_FILTER_CLEAR_TN"))),"table"===_&&l.createElement(nt,{header:C,showDownload:!0,showSearch:!0,className:"fullWidth",onChange:e=>w(e.target.value),showHeader:!1},l.createElement(tt,{data:{id:T},onSearch:b})),"performing-metric"===_&&l.createElement(nt,{header:C,subHeader:"("+A("SUB_"+C)+")",showHeader:!1,className:"fullWidth"},l.createElement(Fe,{data:{id:T},fillColor:L,title:C,showDrillDown:!1})))},yl=e=>{const{question:i,answer:r,index:o,lastIndex:s,subAnswer:d,acrynom:u}=e,[c,m]=t.useState(!1),{t:v}=n.useTranslation(),g=Digit.StoreData.getCurrentLanguage();return l.createElement("div",{className:"faqs border-none",onClick:()=>m(!c)},l.createElement("div",{className:"faq-question",style:{justifyContent:v(i).length>30&&c?"revert":"space-between",display:Digit.Utils.browser.isMobile()&&v(i).length>30&&c?"block":"flex"}},l.createElement("span",{style:{fontWeight:700}},o+". "+v(i)),l.createElement("span",{className:c?"faqicon rotate":"faqicon",style:{float:"right"}},l.createElement(a.ArrowForward,null))),l.createElement("div",{className:"faq-answer",style:c?{display:"block"}:{display:"none"}},l.createElement("div",{style:{marginTop:"-20px"}},null==r?void 0:r.map((e,t)=>l.createElement("span",{style:{color:"#000",marginTop:"20px",marginBottom:"20px"}},v(e.ans))),null==u?void 0:u.map((e,t)=>l.createElement("div",null," ",l.createElement("span",{style:{color:"#000",marginTop:1===o?0===t?"20px":"0px":"20px",marginBottom:1===o?0===t?"20px":"0px":"20px"}},v(e.acr)),l.createElement("span",{style:{color:"#000",marginTop:1===o?0===t?"-40px":"-20px":"20px",marginBottom:1===o?14===t?"20px":"0px":"20px",marginLeft:"hi_IN"===g?"115px":"60px"}},v(e.fullForm)))),null==r?void 0:r.map(e=>l.createElement("span",{style:{color:"#000",marginLeft:"30px"}},e.point?"•":null,l.createElement("div",{style:{marginTop:"-21px",marginLeft:"15px"}},v(e.point))))),l.createElement("div",null,null==d?void 0:d.map(e=>l.createElement("span",{style:{color:"#000",marginBottom:"20px"}},v(e.ans))),null==d?void 0:d.map(e=>l.createElement("span",{style:{color:"#000",marginLeft:"30px"}},e.point?"•":null,l.createElement("div",{style:{marginTop:"-21px",marginLeft:"15px"}},v(e.point)))))),s?null:l.createElement("div",{className:"cs-box-border"}))},bl=()=>{var e,i,r;const o=Digit.UserService.getUser(),{t:s}=((null==o||null===(e=o.info)||void 0===e?void 0:e.tenantId)||Digit.ULBService.getCurrentTenantId(),n.useTranslation()),{isLoading:d,data:u}=Digit.Hooks.useGetDSSFAQsJSON(Digit.ULBService.getStateId()),c=null==u||null===(i=u.MdmsRes["dss-dashboard"])||void 0===i||null===(r=i.FAQs[0])||void 0===r?void 0:r.DSS.FAQs;return d?l.createElement(a.Loader,null):l.createElement(t.Fragment,null,l.createElement("div",{className:"faq-page"},l.createElement("div",{style:{marginBottom:"15px"}},l.createElement(a.Header,{styles:{marginLeft:"0px",paddingTop:"10px",fontSize:"36px"}},s("DSS_FAQS"))),l.createElement("div",{className:"faq-list"},c.map((e,t)=>l.createElement(yl,{key:"FAQ"+t,question:e.question,acrynom:e.acrynom,answer:e.answer,subAnswer:e.subAnswer,index:t+1})))))},wl=()=>{var e,i;const{t:r}=n.useTranslation(),{isLoading:o,data:s}=Digit.Hooks.useGetDSSAboutJSON(Digit.ULBService.getStateId()),d=null==s||null===(e=s.MdmsRes["dss-dashboard"])||void 0===e||null===(i=e.About[0])||void 0===i?void 0:i.DSS.About;return o?l.createElement(a.Loader,null):l.createElement(t.Fragment,null,l.createElement(a.Header,{styles:{marginLeft:"15px",paddingTop:"10px",fontSize:"36px"}},r("DSS_ABOUT_DASHBOARD")),l.createElement(a.Card,null,d.map(e=>{var t,n,i;return l.createElement("div",null,l.createElement(a.CardSubHeader,{style:{marginBottom:"0",fontSize:"24px",marginBottom:"10px"}},r(null==e?void 0:e.titleHeader)),l.createElement("div",{style:{fontSize:"16px",marginBottom:"20px"}},(e=>{let t=[];for(var l=0;l<e.length;l++)t.push(r(e[l]));return t.join(" ")})(null==e?void 0:e.define)),null!=e&&e.definePoints&&"KEY_TERMS"===(null==e?void 0:e.titleHeader)?l.createElement("div",null,null==e||null===(t=e.definePoints)||void 0===t?void 0:t.map((e,t)=>l.createElement("div",{style:{fontSize:"16px",marginLeft:"15px",marginBottom:"20px"}},"•",l.createElement("div",{style:{marginTop:"-25px",marginLeft:"15px"}},l.createElement("b",null,r((null==e?void 0:e.point)+"_HEADER"))," - ",r((null==e?void 0:e.point)+"_MSG"))))):null,null!=e&&e.definePoints&&"KEY_TERMS"!==(null==e?void 0:e.titleHeader)?l.createElement("div",null,null==e||null===(n=e.definePoints)||void 0===n?void 0:n.map((e,t)=>l.createElement("div",{style:{fontSize:"16px",marginLeft:"15px",marginBottom:"20px"}},"•",l.createElement("div",{style:{marginTop:"-25px",marginLeft:"15px"}},r(null==e?void 0:e.point))))):null,l.createElement("div",{style:{fontSize:"16px",marginBottom:"20px"}},r(null==e?void 0:e.subdefine)),null!=e&&e.subdefinePoints?l.createElement("div",null,null==e||null===(i=e.subdefinePoints)||void 0===i?void 0:i.map((e,t)=>l.createElement("div",{style:{fontSize:"16px",marginLeft:"15px",marginBottom:"20px"}},"•",l.createElement("div",{style:{marginTop:"-25px",marginLeft:"15px"}},r(null==e?void 0:e.point))))):null)})))},Tl=e=>{let{location:t}=e;const{t:i}=n.useTranslation(),{fromModule:r=!1,title:o}=Digit.Hooks.useQueryParams(),s=Digit.Utils.dss.getCurrentModuleName(),d=[{path:"/digit-ui/employee",content:i("ES_COMMON_HOME"),show:!0},{path:Se()||window.location.href.includes("NURT_DASHBOARD")?"/digit-ui/employee/dss/landing/NURT_DASHBOARD":"/digit-ui/employee/dss/landing/home",content:i("ES_LANDING_PAGE"),show:!0},{path:r?"/digit-ui/employee/dss/dashboard/"+r:"/digit-ui/employee/dss/dashboard/"+Digit.Utils.dss.getCurrentModuleName(),content:i("ES_COMMON_DSS_"+Digit.Utils.locale.getTransformedLocale(r||s)),show:!!t.pathname.includes("dashboard")},{path:"/digit-ui/employee/dss/drilldown",content:t.pathname.includes("drilldown")?i(o):i("ES_COMMON_DSS_DRILL"),show:!!t.pathname.includes("drilldown")},{path:"/digit-ui/employee/dss/national-faqs",content:i("ES_COMMON_DSS_FAQS"),show:!!t.pathname.includes("national-faqs")},{path:"/digit-ui/employee/dss/national-about",content:i("ES_COMMON_DSS_ABOUT"),show:!!t.pathname.includes("national-about")}];return l.createElement(a.BreadCrumb,{crumbs:null==d?void 0:d.filter(e=>e.show)})},Cl=e=>{let{path:t,stateCode:n}=e;const r=i.useLocation(),o=window.Digit.Utils.browser.isMobile();return l.createElement("div",{className:"chart-wrapper",style:o?{marginTop:"unset"}:{}},l.createElement(Tl,{location:r}),l.createElement(i.Switch,null,l.createElement(a.PrivateRoute,{path:t+"/landing/:moduleCode",component:()=>l.createElement(El,{stateCode:n})}),l.createElement(a.PrivateRoute,{path:t+"/dashboard/:moduleCode",component:()=>l.createElement(ht,{stateCode:n})}),l.createElement(a.PrivateRoute,{path:t+"/drilldown",component:()=>l.createElement(Sl,{stateCode:n})}),l.createElement(i.Route,{key:"national-faq",path:t+"/national-faqs"},l.createElement(bl,null)),l.createElement(i.Route,{key:"national-about",path:t+"/national-about"},l.createElement(wl,null))))},_l={DSSModule:e=>{let{stateCode:t,userType:n,tenants:r}=e;const{path:o}=i.useRouteMatch(),s=Digit.StoreData.getCurrentLanguage(),{isLoading:d}=Digit.Services.useStore({stateCode:t,moduleCode:"DSS",language:s});return d?l.createElement(a.Loader,null):(Digit.SessionStorage.set("DSS_TENANTS",r),"citizen"!==n?l.createElement(Cl,{path:o,stateCode:t}):void 0)},DSSCard:()=>{const e=Digit.UserService.hasAccess("STADMIN"),{t:t}=n.useTranslation();if(!e)return null;let i=Object.values(Ee).filter(e=>!0===e.active).map(e=>({label:t(null==e?void 0:e.label),link:e.active?"/digit-ui/employee/dss/dashboard/"+(null==e?void 0:e.stateKey):"/employee/integration/dss/"+(null==e?void 0:e.stateKey)}));const r={headerStyle:{border:"none",height:"48px"},moduleName:t("ES_TITLE_DSS"),subHeader:t("ACTION_TEST_SURE_DASHBOARD"),subHeaderLink:"/digit-ui/employee/dss/landing/home",className:"employeeCard card-home customEmployeeCard full-width-card full-employee-card-height",links:[...i]};return l.createElement(a.ModuleCardFullWidth,De({},r,{styles:{width:"100%"}}))},NDSSCard:()=>{const e=Digit.UserService.hasAccess("NATADMIN"),{t:t}=n.useTranslation();if(!e)return null;let i=Object.values(Ee).filter(e=>!0===e.nActive).map(e=>({label:t(null==e?void 0:e.label),link:"/digit-ui/employee/dss/dashboard/"+(null==e?void 0:e.key),link:null!=e&&e.others?"/digit-ui/employee/dss/"+(null==e?void 0:e.key):"/digit-ui/employee/dss/dashboard/"+(null==e?void 0:e.key)}));const r={headerStyle:{border:"none",height:"48px"},moduleName:t("ACTION_TEST_NATDASHBOARD"),subHeader:t("ACTION_TEST_NATDASHBOARD"),subHeaderLink:"/digit-ui/employee/dss/landing/NURT_DASHBOARD",className:"employeeCard customEmployeeCard card-home full-width-card full-employee-card-height",links:[...i]};return l.createElement(a.ModuleCardFullWidth,r)}};exports.initDSSComponents=()=>{Object.entries(_l).forEach(e=>{let[t,l]=e;Digit.ComponentRegistryService.setComponent(t,l)})};
