var e,t=require("@egovernments/digit-ui-react-components"),n=require("react"),l=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,o=require("react-i18next"),i=require("react-router-dom"),a=require("react-hook-form"),r=require("react-query");function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}let s=[];const d=e=>{let{currentStep:n=1,flow:i=""}=e;const{t:a}=o.useTranslation(),r=window.Digit.Utils.browser.isMobile();return(e=>{switch(e){case"STAKEHOLDER":s=[];break;case"PT_MUTATE":s=["PT_OWNERSHIP_INFO_SUB_HEADER","PT_MUTATION_DETAILS","CE_DOCUMENT_DETAILS","PT_COMMON_SUMMARY"];break;default:s=["ES_NEW_APPLICATION_PROPERTY_DETAILS","PT_OWNERSHIP_INFO_SUB_HEADER","CE_DOCUMENT_DETAILS","PT_COMMON_SUMMARY"]}})(i),l.createElement("div",{className:"timeline-container",style:r?{}:{maxWidth:"960px",minWidth:"640px",marginRight:"auto"}},s.map((e,o,i)=>l.createElement("div",{className:"timeline-checkpoint",key:o},l.createElement("div",{className:"timeline-content"},l.createElement("span",{className:"circle "+(o<=n-1&&"active")},o<n-1?l.createElement(t.TickMark,null):o+1),l.createElement("span",{className:"secondary-color"},a(e))),o<i.length-1&&l.createElement("span",{className:"line "+(o<n-1&&"active")}))))};function c(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));const p=function(e){return void 0===e&&(e=""),!(!e||null==e||null==e||""==e)},m=function(e){return void 0===e&&(e=""),p(e)&&(e.replaceAll&&e.replaceAll(".","_")||e.replace&&M(e,".","_"))||"NA"},v=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");let n=m(e);return"NA"==n?"PT_NA":t+"_"+n},E=function(e){return void 0===e&&(e=""),v(e,"COMMON_PROPTYPE")},T=function(e){return void 0===e&&(e=""),v(e,"PROPERTYTAX_OCCUPANCYTYPE")},f=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");let n=m(t);return"NA"!=n&&p(e)?(n=n.toUpperCase(),v(e,n+"_REVENUE")):"PT_NA"},y=function(e){void 0===e&&(e="");let t=m(e);return"NA"!=t&&p(e)?(t=t.toUpperCase(),v(t,"TENANT_TENANTS")):"PT_NA"},S=function(e){return void 0===e&&(e=""),v(e,"PROPERTYTAX_OWNERTYPE")},g=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=5),e.length<=t?e:e.substr(0,t)+"..."},P={},A=e=>{var t,n,l;let{address:o}=e,i={...o,pincode:null==o?void 0:o.pincode,landmark:null==o?void 0:o.landmark,city:null==o||null===(t=o.city)||void 0===t?void 0:t.name,doorNo:null==o?void 0:o.doorNo,street:null==o?void 0:o.street,locality:{code:(null==o||null===(n=o.locality)||void 0===n?void 0:n.code)||"NA",area:null==o||null===(l=o.locality)||void 0===l?void 0:l.name}};return e.address=i,e},N=e=>{var t,n,l;return"RESIDENTIAL"==(null==e||null===(t=e.isResdential)||void 0===t?void 0:t.code)?null==e||null===(n=e.isResdential)||void 0===n?void 0:n.code:null==e||null===(l=e.usageCategoryMajor)||void 0===l?void 0:l.code},O=e=>{let t=0;return null==e||e.units.map(e=>{var n;t+=null==e||null===(n=e.constructionDetail)||void 0===n?void 0:n.builtUpArea}),t},I=e=>{var t,n,l,o,i,a;let r={};var u,s;if(null!=e&&null!==(t=e.PropertyType)&&void 0!==t&&null!==(n=t.code)&&void 0!==n&&n.includes("VACANT"))r={units:[],landArea:parseInt(null==e||null===(u=e.landarea)||void 0===u?void 0:u.floorarea),propertyType:null==e||null===(s=e.PropertyType)||void 0===s?void 0:s.code,noOfFloors:0,usageCategory:N(e)};else if(null!=e&&null!==(l=e.PropertyType)&&void 0!==l&&null!==(o=l.code)&&void 0!==o&&o.includes("SHAREDPROPERTY")){var d,c,p,m,v;r={units:null==e?void 0:e.units,landArea:null==e||null===(d=e.units)||void 0===d?void 0:d.reduce((e,t)=>{var n;return Number(null==t||null===(n=t.constructionDetail)||void 0===n?void 0:n.builtUpArea)+e},0),propertyType:null==e||null===(c=e.PropertyType)||void 0===c?void 0:c.code,noOfFloors:1,superBuiltUpArea:null==e||null===(p=e.units)||void 0===p?void 0:p.reduce((e,t)=>{var n;return Number(null==t||null===(n=t.constructionDetail)||void 0===n?void 0:n.builtUpArea)+e},0),usageCategory:null==e||null===(m=e.units)||void 0===m||null===(v=m[0])||void 0===v?void 0:v.usageCategory}}else if(null!=e&&null!==(i=e.PropertyType)&&void 0!==i&&null!==(a=i.code)&&void 0!==a&&a.includes("INDEPENDENTPROPERTY")){var E,_,T,f,y;r={units:null==e?void 0:e.units,landArea:null==e||null===(E=e.landArea)||void 0===E?void 0:E.floorarea,propertyType:null==e||null===(_=e.PropertyType)||void 0===_?void 0:_.code,noOfFloors:(null==e||null===(T=e.noOfFloors)||void 0===T?void 0:T.code)+1,superBuiltUpArea:null,usageCategory:null==e||null===(f=e.units)||void 0===f||null===(y=f[0])||void 0===y?void 0:y.usageCategory}}else{var S;r={units:[{occupancyType:"SELFOCCUPIED",floorNo:"0",constructionDetail:{builtUpArea:16.67},tenantId:e.tenantId,usageCategory:"RESIDENTIAL"}],landArea:"2000",propertyType:null==e||null===(S=e.PropertyType)||void 0===S?void 0:S.code,noOfFloors:1,superBuiltUpArea:16.67,usageCategory:N(e)}}return e.propertyDetails=r,e},h=function(e){return void 0===e&&(e=""),p(e)?e:"PT_NA"},C=function(e){return void 0===e&&(e=""),!(!p(e)||!e.includes("INDEPENDENT"))},R=function(e){return void 0===e&&(e=""),!(!p(e)||!e.includes("SELFOCCUPIED"))},b=function(e){return void 0===e&&(e=""),!(!p(e)||!e.includes("YES"))},D=function(e,t,n){void 0===e&&(e={}),void 0===t&&(t="");let l=e[t]||"",o=(null==l?void 0:l.split(","))||[],i="";return o.length>0&&o.map(e=>{e.includes("large")||e.includes("medium")||e.includes("small")||(i=e)}),i},L=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=0),decodeURIComponent(e.split("?")[0].split("/").pop().slice(13))||"Document - "+(t+1)},w=(e,t)=>{if(e){const n=new Date(e);let l=n.getMonth()+1,o=n.getDate(),i=n.getFullYear();return l=(l>9?"":"0")+l,o=(o>9?"":"0")+o,"PT"==t?o+"-"+l+"-"+i:o+"/"+l+"/"+i}return null},M=function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,n);return e},x=function(e){return void 0===e&&(e=[]),!(!e||!Array.isArray(e))},U=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),!!(x(e)&&e.length>t)},F=function(e){var t;return void 0===e&&(e={}),{action:null!==(t=e)&&void 0!==t&&t.isEditProperty?"REOPEN":"OPEN",businessService:"PT."+B(e),moduleName:"PT"}},B=function(e){var t;return void 0===e&&(e={}),null!==(t=e)&&void 0!==t&&t.isUpdateProperty?"UPDATE":"CREATE"},k=e=>{var n,i,a;let{data:r,OpenImage:u}=e;const{t:s}=o.useTranslation();return l.createElement("div",null,r.date&&l.createElement("p",null,r.date),l.createElement("p",null,r.name),r.mobileNumber&&l.createElement(t.TelePhone,{mobile:r.mobileNumber}),r.source&&l.createElement("p",null,s("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+r.source.toUpperCase())),r.comment&&l.createElement(Reason,{otherComment:null==r?void 0:r.otherComment,headComment:null==r?void 0:r.comment}),null!=r&&r.wfComment?l.createElement("div",null,null==r||null===(n=r.wfComment)||void 0===n?void 0:n.map(e=>l.createElement("div",{className:"TLComments"},l.createElement("h3",null,s("WF_COMMON_COMMENTS")),l.createElement("p",null,e)))):null,(null==r||null===(i=r.thumbnailsToShow)||void 0===i||null===(a=i.thumbs)||void 0===a?void 0:a.length)>0?l.createElement("div",{className:"TLComments"},l.createElement("h3",null,s("CS_COMMON_ATTACHMENTS")),l.createElement(t.DisplayPhotos,{srcs:null==r?void 0:r.thumbnailsToShow.thumbs,onClick:(e,t)=>{u(e,t,null==r?void 0:r.thumbnailsToShow)}})):null)},H=e=>{var a,r,u,s,d;const{t:c}=o.useTranslation(),p=(null===(a=e.application)||void 0===a?void 0:a.creationReason)&&"PT."+e.application.creationReason||"PT.CREATE",{isLoading:m,data:v}=Digit.Hooks.useWorkflowDetails({tenantId:null===(r=e.application)||void 0===r?void 0:r.tenantId,id:e.id,moduleCode:p});function E(e,t,n){var l;window.open(null==n||null===(l=n.fullImage)||void 0===l?void 0:l[0],"_blank")}const _=n=>{if("OPEN"===n.state){var o,a;const t={date:null==n||null===(o=n.auditDetails)||void 0===o?void 0:o.lastModified,source:(null===(a=e.application)||void 0===a?void 0:a.channel)||""};return l.createElement(k,{data:t})}if(n.state){var r,u,s,d,p;const e={date:null==n||null===(r=n.auditDetails)||void 0===r?void 0:r.lastModified,name:null==n||null===(u=n.assignes)||void 0===u||null===(s=u[0])||void 0===s?void 0:s.name,mobileNumber:null==n||null===(d=n.assignes)||void 0===d||null===(p=d[0])||void 0===p?void 0:p.mobileNumber,comment:c(null==n?void 0:n.comment),wfComment:n.wfComment,thumbnailsToShow:null==n?void 0:n.thumbnailsToShow};return l.createElement(k,{data:e,OpenImage:E})}var m;if("ACTIVE"===n.status&&"citizen"===(null==e?void 0:e.userType))return l.createElement("div",null,l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/properties/"+(null==e||null===(m=e.application)||void 0===m?void 0:m.propertyId)},l.createElement(t.ActionLinks,null,c("PT_VIEW_PROPERTY_DETAILS"))));{var v,_;const t={date:Digit.DateUtils.ConvertTimestampToDate(null===(v=e.application)||void 0===v?void 0:v.auditDetails.lastModified),name:null==n||null===(_=n.assigner)||void 0===_?void 0:_.name,comment:c(null==n?void 0:n.comment)};return l.createElement(k,{data:t})}};return m?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,!m&&l.createElement(n.Fragment,null,(null==v||null===(u=v.timeline)||void 0===u?void 0:u.length)>0&&l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},c("CS_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=v&&v.timeline&&1===(null==v||null===(s=v.timeline)||void 0===s?void 0:s.length)?l.createElement(t.CheckPoint,{isCompleted:!0,label:c((null==v||null===(d=v.timeline[0])||void 0===d?void 0:d.state)&&"WF_"+p+"_"+v.timeline[0].state||"NA"),customChild:_(null==v?void 0:v.timeline[0])}):l.createElement(t.ConnectingCheckPoints,null,(null==v?void 0:v.timeline)&&(null==v?void 0:v.timeline.map((e,n,o)=>l.createElement(l.Fragment,{key:n},l.createElement(t.CheckPoint,{keyValue:n,isCompleted:0===n,label:e.state?c("WF_"+p+"_"+e.state):"NA",customChild:_(e)})))))),v&&(n=>{var o,a;let r=n[0];const u=n.map(e=>e.action);if(u.includes("PAY")||u.includes("EDIT")){let e=u.indexOf("EDIT")||u.indexOf("PAY");e=-1!=e?e:u.indexOf("PAY"),r=n[e]}switch(null===(o=r)||void 0===o?void 0:o.action){case"PAY":return"citizen"===(null==e?void 0:e.userType)?l.createElement("div",{style:{marginTop:"1em",bottom:"0px",width:"100%",marginBottom:"1.2em"}},l.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/payment/my-bills/"+p+"/"+e.id,state:{tenantId:e.application.tenantId,propertyId:null==e||null===(a=e.application)||void 0===a?void 0:a.propertyId}}},l.createElement(t.SubmitBar,{label:c("CS_APPLICATION_DETAILS_MAKE_PAYMENT")}))):null;case"EDIT":return l.createElement("div",{style:{marginTop:"1em",bottom:"0px",width:"100%",marginBottom:"1.2em"}},"PT.MUTATION"!=p&&l.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/pt/property/edit-application/action=edit-"+p+"/"+e.id,state:{tenantId:e.application.tenantId}}},l.createElement(t.SubmitBar,{label:c("CS_APPLICATION_DETAILS_EDIT")})));case"SUBMIT_FEEDBACK":return l.createElement("div",{style:{marginTop:"24px"}},l.createElement(i.Link,{to:"/digit-ui/citizen/fsm/rate/"+e.id},l.createElement(t.SubmitBar,{label:c("CS_APPLICATION_DETAILS_RATE")})));default:return null}})(null==v?void 0:v.nextActions))};var Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function W(e,t){return e(t={exports:{}},t.exports),t.exports}var j=W(function(e,t){(function(){var n="Expected a function",l="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],i="[object Arguments]",a="[object Array]",r="[object Boolean]",u="[object Date]",s="[object Error]",d="[object Function]",c="[object GeneratorFunction]",p="[object Map]",m="[object Number]",v="[object Object]",E="[object RegExp]",_="[object Set]",T="[object String]",f="[object Symbol]",y="[object WeakMap]",S="[object ArrayBuffer]",g="[object DataView]",P="[object Float32Array]",A="[object Float64Array]",N="[object Int8Array]",O="[object Int16Array]",I="[object Int32Array]",h="[object Uint8Array]",C="[object Uint16Array]",R="[object Uint32Array]",b=/\b__p \+= '';/g,D=/\b(__p \+=) '' \+/g,L=/(__e\(.*?\)|\b__t\)) \+\n'';/g,w=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,x=RegExp(w.source),U=RegExp(M.source),F=/<%-([\s\S]+?)%>/g,B=/<%([\s\S]+?)%>/g,k=/<%=([\s\S]+?)%>/g,H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/[\\^$.*+?()[\]{}|]/g,V=RegExp(K.source),z=/^\s+/,G=/\s/,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,q=/\{\n\/\* \[wrapped with (.+)\] \*/,$=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Q=/[()=,{}\[\]\/\s]/,J=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ne=/^[-+]0x[0-9a-f]+$/i,le=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,ie=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,re=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,se=/['\n\r\u2028\u2029\\]/g,de="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="["+ce+"]",me="["+de+"]",ve="\\d+",Ee="[a-z\\xdf-\\xf6\\xf8-\\xff]",_e="[^\\ud800-\\udfff"+ce+ve+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Te="\\ud83c[\\udffb-\\udfff]",fe="[^\\ud800-\\udfff]",ye="(?:\\ud83c[\\udde6-\\uddff]){2}",Se="[\\ud800-\\udbff][\\udc00-\\udfff]",ge="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Pe="(?:"+Ee+"|"+_e+")",Ae="(?:"+ge+"|"+_e+")",Ne="(?:"+me+"|"+Te+")?",Oe="[\\ufe0e\\ufe0f]?"+Ne+"(?:\\u200d(?:"+[fe,ye,Se].join("|")+")[\\ufe0e\\ufe0f]?"+Ne+")*",Ie="(?:"+["[\\u2700-\\u27bf]",ye,Se].join("|")+")"+Oe,he="(?:"+[fe+me+"?",me,ye,Se,"[\\ud800-\\udfff]"].join("|")+")",Ce=RegExp("['’]","g"),Re=RegExp(me,"g"),be=RegExp(Te+"(?="+Te+")|"+he+Oe,"g"),De=RegExp([ge+"?"+Ee+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[pe,ge,"$"].join("|")+")",Ae+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[pe,ge+Pe,"$"].join("|")+")",ge+"?"+Pe+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ge+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ve,Ie].join("|"),"g"),Le=RegExp("[\\u200d\\ud800-\\udfff"+de+"\\ufe0e\\ufe0f]"),we=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Me=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xe=-1,Ue={};Ue[P]=Ue[A]=Ue[N]=Ue[O]=Ue[I]=Ue[h]=Ue["[object Uint8ClampedArray]"]=Ue[C]=Ue[R]=!0,Ue[i]=Ue[a]=Ue[S]=Ue[r]=Ue[g]=Ue[u]=Ue[s]=Ue[d]=Ue[p]=Ue[m]=Ue[v]=Ue[E]=Ue[_]=Ue[T]=Ue[y]=!1;var Fe={};Fe[i]=Fe[a]=Fe[S]=Fe[g]=Fe[r]=Fe[u]=Fe[P]=Fe[A]=Fe[N]=Fe[O]=Fe[I]=Fe[p]=Fe[m]=Fe[v]=Fe[E]=Fe[_]=Fe[T]=Fe[f]=Fe[h]=Fe["[object Uint8ClampedArray]"]=Fe[C]=Fe[R]=!0,Fe[s]=Fe[d]=Fe[y]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ke=parseFloat,He=parseInt,Ye="object"==typeof Y&&Y&&Y.Object===Object&&Y,We="object"==typeof self&&self&&self.Object===Object&&self,je=Ye||We||Function("return this")(),Ke=t&&!t.nodeType&&t,Ve=Ke&&e&&!e.nodeType&&e,ze=Ve&&Ve.exports===Ke,Ge=ze&&Ye.process,Xe=function(){try{return Ve&&Ve.require&&Ve.require("util").types||Ge&&Ge.binding&&Ge.binding("util")}catch(e){}}(),qe=Xe&&Xe.isArrayBuffer,$e=Xe&&Xe.isDate,Ze=Xe&&Xe.isMap,Qe=Xe&&Xe.isRegExp,Je=Xe&&Xe.isSet,et=Xe&&Xe.isTypedArray;function tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function nt(e,t,n,l){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(l,a,n(a),e)}return l}function lt(e,t){for(var n=-1,l=null==e?0:e.length;++n<l&&!1!==t(e[n],n,e););return e}function ot(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function it(e,t){for(var n=-1,l=null==e?0:e.length;++n<l;)if(!t(e[n],n,e))return!1;return!0}function at(e,t){for(var n=-1,l=null==e?0:e.length,o=0,i=[];++n<l;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function rt(e,t){return!(null==e||!e.length)&&Tt(e,t,0)>-1}function ut(e,t,n){for(var l=-1,o=null==e?0:e.length;++l<o;)if(n(t,e[l]))return!0;return!1}function st(e,t){for(var n=-1,l=null==e?0:e.length,o=Array(l);++n<l;)o[n]=t(e[n],n,e);return o}function dt(e,t){for(var n=-1,l=t.length,o=e.length;++n<l;)e[o+n]=t[n];return e}function ct(e,t,n,l){var o=-1,i=null==e?0:e.length;for(l&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function pt(e,t,n,l){var o=null==e?0:e.length;for(l&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function mt(e,t){for(var n=-1,l=null==e?0:e.length;++n<l;)if(t(e[n],n,e))return!0;return!1}var vt=gt("length");function Et(e,t,n){var l;return n(e,function(e,n,o){if(t(e,n,o))return l=n,!1}),l}function _t(e,t,n,l){for(var o=e.length,i=n+(l?1:-1);l?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function Tt(e,t,n){return t==t?function(e,t,n){for(var l=n-1,o=e.length;++l<o;)if(e[l]===t)return l;return-1}(e,t,n):_t(e,yt,n)}function ft(e,t,n,l){for(var o=n-1,i=e.length;++o<i;)if(l(e[o],t))return o;return-1}function yt(e){return e!=e}function St(e,t){var n=null==e?0:e.length;return n?Nt(e,t)/n:NaN}function gt(e){return function(t){return null==t?void 0:t[e]}}function Pt(e){return function(t){return null==e?void 0:e[t]}}function At(e,t,n,l,o){return o(e,function(e,o,i){n=l?(l=!1,e):t(n,e,o,i)}),n}function Nt(e,t){for(var n,l=-1,o=e.length;++l<o;){var i=t(e[l]);void 0!==i&&(n=void 0===n?i:n+i)}return n}function Ot(e,t){for(var n=-1,l=Array(e);++n<e;)l[n]=t(n);return l}function It(e){return e?e.slice(0,Kt(e)+1).replace(z,""):e}function ht(e){return function(t){return e(t)}}function Ct(e,t){return st(t,function(t){return e[t]})}function Rt(e,t){return e.has(t)}function bt(e,t){for(var n=-1,l=e.length;++n<l&&Tt(t,e[n],0)>-1;);return n}function Dt(e,t){for(var n=e.length;n--&&Tt(t,e[n],0)>-1;);return n}function Lt(e,t){for(var n=e.length,l=0;n--;)e[n]===t&&++l;return l}var wt=Pt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Mt=Pt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function xt(e){return"\\"+Be[e]}function Ut(e){return Le.test(e)}function Ft(e){var t=-1,n=Array(e.size);return e.forEach(function(e,l){n[++t]=[l,e]}),n}function Bt(e,t){return function(n){return e(t(n))}}function kt(e,t){for(var n=-1,o=e.length,i=0,a=[];++n<o;){var r=e[n];r!==t&&r!==l||(e[n]=l,a[i++]=n)}return a}function Ht(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Yt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Wt(e){return Ut(e)?function(e){for(var t=be.lastIndex=0;be.test(e);)++t;return t}(e):vt(e)}function jt(e){return Ut(e)?function(e){return e.match(be)||[]}(e):function(e){return e.split("")}(e)}function Kt(e){for(var t=e.length;t--&&G.test(e.charAt(t)););return t}var Vt=Pt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),zt=function e(t){var Y,G=(t=null==t?je:zt.defaults(je.Object(),t,zt.pick(je,Me))).Array,de=t.Date,ce=t.Error,pe=t.Function,me=t.Math,ve=t.Object,Ee=t.RegExp,_e=t.String,Te=t.TypeError,fe=G.prototype,ye=ve.prototype,Se=t["__core-js_shared__"],ge=pe.prototype.toString,Pe=ye.hasOwnProperty,Ae=0,Ne=(Y=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",Oe=ye.toString,Ie=ge.call(ve),he=je._,be=Ee("^"+ge.call(Pe).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=ze?t.Buffer:void 0,Be=t.Symbol,Ye=t.Uint8Array,We=Le?Le.allocUnsafe:void 0,Ke=Bt(ve.getPrototypeOf,ve),Ve=ve.create,Ge=ye.propertyIsEnumerable,Xe=fe.splice,vt=Be?Be.isConcatSpreadable:void 0,Pt=Be?Be.iterator:void 0,Gt=Be?Be.toStringTag:void 0,Xt=function(){try{var e=Jo(ve,"defineProperty");return e({},"",{}),e}catch(e){}}(),qt=t.clearTimeout!==je.clearTimeout&&t.clearTimeout,$t=de&&de.now!==je.Date.now&&de.now,Zt=t.setTimeout!==je.setTimeout&&t.setTimeout,Qt=me.ceil,Jt=me.floor,en=ve.getOwnPropertySymbols,tn=Le?Le.isBuffer:void 0,nn=t.isFinite,ln=fe.join,on=Bt(ve.keys,ve),an=me.max,rn=me.min,un=de.now,sn=t.parseInt,dn=me.random,cn=fe.reverse,pn=Jo(t,"DataView"),mn=Jo(t,"Map"),vn=Jo(t,"Promise"),En=Jo(t,"Set"),_n=Jo(t,"WeakMap"),Tn=Jo(ve,"create"),fn=_n&&new _n,yn={},Sn=Ci(pn),gn=Ci(mn),Pn=Ci(vn),An=Ci(En),Nn=Ci(_n),On=Be?Be.prototype:void 0,In=On?On.valueOf:void 0,hn=On?On.toString:void 0;function Cn(e){if(Va(e)&&!Ma(e)&&!(e instanceof Ln)){if(e instanceof Dn)return e;if(Pe.call(e,"__wrapped__"))return Ri(e)}return new Dn(e)}var Rn=function(){function e(){}return function(t){if(!Ka(t))return{};if(Ve)return Ve(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function bn(){}function Dn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Ln(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function Un(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new xn;++t<n;)this.add(e[t])}function Fn(e){var t=this.__data__=new Mn(e);this.size=t.size}function Bn(e,t){var n=Ma(e),l=!n&&wa(e),o=!n&&!l&&Ba(e),i=!n&&!l&&!o&&Ja(e),a=n||l||o||i,r=a?Ot(e.length,_e):[],u=r.length;for(var s in e)!t&&!Pe.call(e,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ai(s,u))||r.push(s);return r}function kn(e){var t=e.length;return t?e[xl(0,t-1)]:void 0}function Hn(e,t){return Ai(To(e),qn(t,0,e.length))}function Yn(e){return Ai(To(e))}function Wn(e,t,n){(void 0!==n&&!ba(e[t],n)||void 0===n&&!(t in e))&&Gn(e,t,n)}function jn(e,t,n){var l=e[t];Pe.call(e,t)&&ba(l,n)&&(void 0!==n||t in e)||Gn(e,t,n)}function Kn(e,t){for(var n=e.length;n--;)if(ba(e[n][0],t))return n;return-1}function Vn(e,t,n,l){return el(e,function(e,o,i){t(l,e,n(e),i)}),l}function zn(e,t){return e&&fo(t,gr(t),e)}function Gn(e,t,n){"__proto__"==t&&Xt?Xt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Xn(e,t){for(var n=-1,l=t.length,o=G(l),i=null==e;++n<l;)o[n]=i?void 0:_r(e,t[n]);return o}function qn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function $n(e,t,n,l,o,a){var s,y=1&t,b=2&t,D=4&t;if(n&&(s=o?n(e,l,o,a):n(e)),void 0!==s)return s;if(!Ka(e))return e;var L=Ma(e);if(L){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Pe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!y)return To(e,s)}else{var w=ni(e),M=w==d||w==c;if(Ba(e))return co(e,y);if(w==v||w==i||M&&!o){if(s=b||M?{}:oi(e),!y)return b?function(e,t){return fo(e,ti(e),t)}(e,function(e,t){return e&&fo(t,Pr(t),e)}(s,e)):function(e,t){return fo(e,ei(e),t)}(e,zn(s,e))}else{if(!Fe[w])return o?e:{};s=function(e,t,n){var l=e.constructor;switch(t){case S:return po(e);case r:case u:return new l(+e);case g:return function(e,t){var n=t?po(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case P:case A:case N:case O:case I:case h:case"[object Uint8ClampedArray]":case C:case R:return mo(e,n);case p:return new l;case m:case T:return new l(e);case E:return function(e){var t=new e.constructor(e.source,te.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new l;case f:return In?ve(In.call(e)):{}}}(e,w,y)}}a||(a=new Fn);var x=a.get(e);if(x)return x;a.set(e,s),$a(e)?e.forEach(function(l){s.add($n(l,t,n,l,e,a))}):za(e)&&e.forEach(function(l,o){s.set(o,$n(l,t,n,o,e,a))});var U=L?void 0:(D?b?zo:Vo:b?Pr:gr)(e);return lt(U||e,function(l,o){U&&(l=e[o=l]),jn(s,o,$n(l,t,n,o,e,a))}),s}function Zn(e,t,n){var l=n.length;if(null==e)return!l;for(e=ve(e);l--;){var o=n[l],i=e[o];if(void 0===i&&!(o in e)||!(0,t[o])(i))return!1}return!0}function Qn(e,t,l){if("function"!=typeof e)throw new Te(n);return yi(function(){e.apply(void 0,l)},t)}function Jn(e,t,n,l){var o=-1,i=rt,a=!0,r=e.length,u=[],s=t.length;if(!r)return u;n&&(t=st(t,ht(n))),l?(i=ut,a=!1):t.length>=200&&(i=Rt,a=!1,t=new Un(t));e:for(;++o<r;){var d=e[o],c=null==n?d:n(d);if(d=l||0!==d?d:0,a&&c==c){for(var p=s;p--;)if(t[p]===c)continue e;u.push(d)}else i(t,c,l)||u.push(d)}return u}Cn.templateSettings={escape:F,evaluate:B,interpolate:k,variable:"",imports:{_:Cn}},(Cn.prototype=bn.prototype).constructor=Cn,(Dn.prototype=Rn(bn.prototype)).constructor=Dn,(Ln.prototype=Rn(bn.prototype)).constructor=Ln,wn.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},wn.prototype.get=function(e){var t=this.__data__;if(Tn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Pe.call(t,e)?t[e]:void 0},wn.prototype.has=function(e){var t=this.__data__;return Tn?void 0!==t[e]:Pe.call(t,e)},wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tn&&void 0===t?"__lodash_hash_undefined__":t,this},Mn.prototype.clear=function(){this.__data__=[],this.size=0},Mn.prototype.delete=function(e){var t=this.__data__,n=Kn(t,e);return!(n<0||(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,0))},Mn.prototype.get=function(e){var t=this.__data__,n=Kn(t,e);return n<0?void 0:t[n][1]},Mn.prototype.has=function(e){return Kn(this.__data__,e)>-1},Mn.prototype.set=function(e,t){var n=this.__data__,l=Kn(n,e);return l<0?(++this.size,n.push([e,t])):n[l][1]=t,this},xn.prototype.clear=function(){this.size=0,this.__data__={hash:new wn,map:new(mn||Mn),string:new wn}},xn.prototype.delete=function(e){var t=Zo(this,e).delete(e);return this.size-=t?1:0,t},xn.prototype.get=function(e){return Zo(this,e).get(e)},xn.prototype.has=function(e){return Zo(this,e).has(e)},xn.prototype.set=function(e,t){var n=Zo(this,e),l=n.size;return n.set(e,t),this.size+=n.size==l?0:1,this},Un.prototype.add=Un.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Un.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.clear=function(){this.__data__=new Mn,this.size=0},Fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Fn.prototype.get=function(e){return this.__data__.get(e)},Fn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Mn){var l=n.__data__;if(!mn||l.length<199)return l.push([e,t]),this.size=++n.size,this;n=this.__data__=new xn(l)}return n.set(e,t),this.size=n.size,this};var el=go(ul),tl=go(sl,!0);function nl(e,t){var n=!0;return el(e,function(e,l,o){return n=!!t(e,l,o)}),n}function ll(e,t,n){for(var l=-1,o=e.length;++l<o;){var i=e[l],a=t(i);if(null!=a&&(void 0===r?a==a&&!Qa(a):n(a,r)))var r=a,u=i}return u}function ol(e,t){var n=[];return el(e,function(e,l,o){t(e,l,o)&&n.push(e)}),n}function il(e,t,n,l,o){var i=-1,a=e.length;for(n||(n=ii),o||(o=[]);++i<a;){var r=e[i];t>0&&n(r)?t>1?il(r,t-1,n,l,o):dt(o,r):l||(o[o.length]=r)}return o}var al=Po(),rl=Po(!0);function ul(e,t){return e&&al(e,t,gr)}function sl(e,t){return e&&rl(e,t,gr)}function dl(e,t){return at(t,function(t){return Ya(e[t])})}function cl(e,t){for(var n=0,l=(t=ao(t,e)).length;null!=e&&n<l;)e=e[hi(t[n++])];return n&&n==l?e:void 0}function pl(e,t,n){var l=t(e);return Ma(e)?l:dt(l,n(e))}function ml(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Gt&&Gt in ve(e)?function(e){var t=Pe.call(e,Gt),n=e[Gt];try{e[Gt]=void 0;var l=!0}catch(e){}var o=Oe.call(e);return l&&(t?e[Gt]=n:delete e[Gt]),o}(e):function(e){return Oe.call(e)}(e)}function vl(e,t){return e>t}function El(e,t){return null!=e&&Pe.call(e,t)}function _l(e,t){return null!=e&&t in ve(e)}function Tl(e,t,n){for(var l=n?ut:rt,o=e[0].length,i=e.length,a=i,r=G(i),u=Infinity,s=[];a--;){var d=e[a];a&&t&&(d=st(d,ht(t))),u=rn(d.length,u),r[a]=!n&&(t||o>=120&&d.length>=120)?new Un(a&&d):void 0}d=e[0];var c=-1,p=r[0];e:for(;++c<o&&s.length<u;){var m=d[c],v=t?t(m):m;if(m=n||0!==m?m:0,!(p?Rt(p,v):l(s,v,n))){for(a=i;--a;){var E=r[a];if(!(E?Rt(E,v):l(e[a],v,n)))continue e}p&&p.push(v),s.push(m)}}return s}function fl(e,t,n){var l=null==(e=Ei(e,t=ao(t,e)))?e:e[hi(Hi(t))];return null==l?void 0:tt(l,e,n)}function yl(e){return Va(e)&&ml(e)==i}function Sl(e,t,n,l,o){return e===t||(null==e||null==t||!Va(e)&&!Va(t)?e!=e&&t!=t:function(e,t,n,l,o,d){var c=Ma(e),y=Ma(t),P=c?a:ni(e),A=y?a:ni(t),N=(P=P==i?v:P)==v,O=(A=A==i?v:A)==v,I=P==A;if(I&&Ba(e)){if(!Ba(t))return!1;c=!0,N=!1}if(I&&!N)return d||(d=new Fn),c||Ja(e)?jo(e,t,n,l,o,d):function(e,t,n,l,o,i,a){switch(n){case g:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!i(new Ye(e),new Ye(t)));case r:case u:case m:return ba(+e,+t);case s:return e.name==t.name&&e.message==t.message;case E:case T:return e==t+"";case p:var d=Ft;case _:if(d||(d=Ht),e.size!=t.size&&!(1&l))return!1;var c=a.get(e);if(c)return c==t;l|=2,a.set(e,t);var v=jo(d(e),d(t),l,o,i,a);return a.delete(e),v;case f:if(In)return In.call(e)==In.call(t)}return!1}(e,t,P,n,l,o,d);if(!(1&n)){var h=N&&Pe.call(e,"__wrapped__"),C=O&&Pe.call(t,"__wrapped__");if(h||C){var R=h?e.value():e,b=C?t.value():t;return d||(d=new Fn),o(R,b,n,l,d)}}return!!I&&(d||(d=new Fn),function(e,t,n,l,o,i){var a=1&n,r=Vo(e),u=r.length;if(u!=Vo(t).length&&!a)return!1;for(var s=u;s--;){var d=r[s];if(!(a?d in t:Pe.call(t,d)))return!1}var c=i.get(e),p=i.get(t);if(c&&p)return c==t&&p==e;var m=!0;i.set(e,t),i.set(t,e);for(var v=a;++s<u;){var E=e[d=r[s]],_=t[d];if(l)var T=a?l(_,E,d,t,e,i):l(E,_,d,e,t,i);if(!(void 0===T?E===_||o(E,_,n,l,i):T)){m=!1;break}v||(v="constructor"==d)}if(m&&!v){var f=e.constructor,y=t.constructor;f==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof f&&f instanceof f&&"function"==typeof y&&y instanceof y||(m=!1)}return i.delete(e),i.delete(t),m}(e,t,n,l,o,d))}(e,t,n,l,Sl,o))}function gl(e,t,n,l){var o=n.length,i=o,a=!l;if(null==e)return!i;for(e=ve(e);o--;){var r=n[o];if(a&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++o<i;){var u=(r=n[o])[0],s=e[u],d=r[1];if(a&&r[2]){if(void 0===s&&!(u in e))return!1}else{var c=new Fn;if(l)var p=l(s,d,u,e,t,c);if(!(void 0===p?Sl(d,s,3,l,c):p))return!1}}return!0}function Pl(e){return!(!Ka(e)||(t=e,Ne&&Ne in t))&&(Ya(e)?be:oe).test(Ci(e));var t}function Al(e){return"function"==typeof e?e:null==e?Gr:"object"==typeof e?Ma(e)?Cl(e[0],e[1]):hl(e):nu(e)}function Nl(e){if(!ci(e))return on(e);var t=[];for(var n in ve(e))Pe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ol(e,t){return e<t}function Il(e,t){var n=-1,l=Ua(e)?G(e.length):[];return el(e,function(e,o,i){l[++n]=t(e,o,i)}),l}function hl(e){var t=Qo(e);return 1==t.length&&t[0][2]?mi(t[0][0],t[0][1]):function(n){return n===e||gl(n,e,t)}}function Cl(e,t){return ui(e)&&pi(t)?mi(hi(e),t):function(n){var l=_r(n,e);return void 0===l&&l===t?Tr(n,e):Sl(t,l,3)}}function Rl(e,t,n,l,o){e!==t&&al(t,function(i,a){if(o||(o=new Fn),Ka(i))!function(e,t,n,l,o,i,a){var r=Ti(e,n),u=Ti(t,n),s=a.get(u);if(s)Wn(e,n,s);else{var d=i?i(r,u,n+"",e,t,a):void 0,c=void 0===d;if(c){var p=Ma(u),m=!p&&Ba(u),v=!p&&!m&&Ja(u);d=u,p||m||v?Ma(r)?d=r:Fa(r)?d=To(r):m?(c=!1,d=co(u,!0)):v?(c=!1,d=mo(u,!0)):d=[]:Xa(u)||wa(u)?(d=r,wa(r)?d=rr(r):Ka(r)&&!Ya(r)||(d=oi(u))):c=!1}c&&(a.set(u,d),o(d,u,l,i,a),a.delete(u)),Wn(e,n,d)}}(e,t,a,n,Rl,l,o);else{var r=l?l(Ti(e,a),i,a+"",e,t,o):void 0;void 0===r&&(r=i),Wn(e,a,r)}},Pr)}function bl(e,t){var n=e.length;if(n)return ai(t+=t<0?n:0,n)?e[t]:void 0}function Dl(e,t,n){t=t.length?st(t,function(e){return Ma(e)?function(t){return cl(t,1===e.length?e[0]:e)}:e}):[Gr];var l=-1;return t=st(t,ht($o())),function(e,t){var l=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var l=-1,o=e.criteria,i=t.criteria,a=o.length,r=n.length;++l<a;){var u=vo(o[l],i[l]);if(u)return l>=r?u:u*("desc"==n[l]?-1:1)}return e.index-t.index}(e,t,n)});l--;)e[l]=e[l].value;return e}(Il(e,function(e,n,o){return{criteria:st(t,function(t){return t(e)}),index:++l,value:e}}))}function Ll(e,t,n){for(var l=-1,o=t.length,i={};++l<o;){var a=t[l],r=cl(e,a);n(r,a)&&Hl(i,ao(a,e),r)}return i}function wl(e,t,n,l){var o=l?ft:Tt,i=-1,a=t.length,r=e;for(e===t&&(t=To(t)),n&&(r=st(e,ht(n)));++i<a;)for(var u=0,s=t[i],d=n?n(s):s;(u=o(r,d,u,l))>-1;)r!==e&&Xe.call(r,u,1),Xe.call(e,u,1);return e}function Ml(e,t){for(var n=e?t.length:0,l=n-1;n--;){var o=t[n];if(n==l||o!==i){var i=o;ai(o)?Xe.call(e,o,1):Ql(e,o)}}return e}function xl(e,t){return e+Jt(dn()*(t-e+1))}function Ul(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Jt(t/2))&&(e+=e)}while(t);return n}function Fl(e,t){return Si(vi(e,t,Gr),e+"")}function Bl(e){return kn(br(e))}function kl(e,t){var n=br(e);return Ai(n,qn(t,0,n.length))}function Hl(e,t,n,l){if(!Ka(e))return e;for(var o=-1,i=(t=ao(t,e)).length,a=i-1,r=e;null!=r&&++o<i;){var u=hi(t[o]),s=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var d=r[u];void 0===(s=l?l(d,u,r):void 0)&&(s=Ka(d)?d:ai(t[o+1])?[]:{})}jn(r,u,s),r=r[u]}return e}var Yl=fn?function(e,t){return fn.set(e,t),e}:Gr,Wl=Xt?function(e,t){return Xt(e,"toString",{configurable:!0,enumerable:!1,value:Kr(t),writable:!0})}:Gr;function jl(e){return Ai(br(e))}function Kl(e,t,n){var l=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=G(o);++l<o;)i[l]=e[l+t];return i}function Vl(e,t){var n;return el(e,function(e,l,o){return!(n=t(e,l,o))}),!!n}function zl(e,t,n){var l=0,o=null==e?l:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;l<o;){var i=l+o>>>1,a=e[i];null!==a&&!Qa(a)&&(n?a<=t:a<t)?l=i+1:o=i}return o}return Gl(e,t,Gr,n)}function Gl(e,t,n,l){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var a=(t=n(t))!=t,r=null===t,u=Qa(t),s=void 0===t;o<i;){var d=Jt((o+i)/2),c=n(e[d]),p=void 0!==c,m=null===c,v=c==c,E=Qa(c);if(a)var _=l||v;else _=s?v&&(l||p):r?v&&p&&(l||!m):u?v&&p&&!m&&(l||!E):!m&&!E&&(l?c<=t:c<t);_?o=d+1:i=d}return rn(i,4294967294)}function Xl(e,t){for(var n=-1,l=e.length,o=0,i=[];++n<l;){var a=e[n],r=t?t(a):a;if(!n||!ba(r,u)){var u=r;i[o++]=0===a?0:a}}return i}function ql(e){return"number"==typeof e?e:Qa(e)?NaN:+e}function $l(e){if("string"==typeof e)return e;if(Ma(e))return st(e,$l)+"";if(Qa(e))return hn?hn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Zl(e,t,n){var l=-1,o=rt,i=e.length,a=!0,r=[],u=r;if(n)a=!1,o=ut;else if(i>=200){var s=t?null:Fo(e);if(s)return Ht(s);a=!1,o=Rt,u=new Un}else u=t?[]:r;e:for(;++l<i;){var d=e[l],c=t?t(d):d;if(d=n||0!==d?d:0,a&&c==c){for(var p=u.length;p--;)if(u[p]===c)continue e;t&&u.push(c),r.push(d)}else o(u,c,n)||(u!==r&&u.push(c),r.push(d))}return r}function Ql(e,t){return null==(e=Ei(e,t=ao(t,e)))||delete e[hi(Hi(t))]}function Jl(e,t,n,l){return Hl(e,t,n(cl(e,t)),l)}function eo(e,t,n,l){for(var o=e.length,i=l?o:-1;(l?i--:++i<o)&&t(e[i],i,e););return n?Kl(e,l?0:i,l?i+1:o):Kl(e,l?i+1:0,l?o:i)}function to(e,t){var n=e;return n instanceof Ln&&(n=n.value()),ct(t,function(e,t){return t.func.apply(t.thisArg,dt([e],t.args))},n)}function no(e,t,n){var l=e.length;if(l<2)return l?Zl(e[0]):[];for(var o=-1,i=G(l);++o<l;)for(var a=e[o],r=-1;++r<l;)r!=o&&(i[o]=Jn(i[o]||a,e[r],t,n));return Zl(il(i,1),t,n)}function lo(e,t,n){for(var l=-1,o=e.length,i=t.length,a={};++l<o;)n(a,e[l],l<i?t[l]:void 0);return a}function oo(e){return Fa(e)?e:[]}function io(e){return"function"==typeof e?e:Gr}function ao(e,t){return Ma(e)?e:ui(e,t)?[e]:Ii(ur(e))}var ro=Fl;function uo(e,t,n){var l=e.length;return n=void 0===n?l:n,!t&&n>=l?e:Kl(e,t,n)}var so=qt||function(e){return je.clearTimeout(e)};function co(e,t){if(t)return e.slice();var n=e.length,l=We?We(n):new e.constructor(n);return e.copy(l),l}function po(e){var t=new e.constructor(e.byteLength);return new Ye(t).set(new Ye(e)),t}function mo(e,t){var n=t?po(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function vo(e,t){if(e!==t){var n=void 0!==e,l=null===e,o=e==e,i=Qa(e),a=void 0!==t,r=null===t,u=t==t,s=Qa(t);if(!r&&!s&&!i&&e>t||i&&a&&u&&!r&&!s||l&&a&&u||!n&&u||!o)return 1;if(!l&&!i&&!s&&e<t||s&&n&&o&&!l&&!i||r&&n&&o||!a&&o||!u)return-1}return 0}function Eo(e,t,n,l){for(var o=-1,i=e.length,a=n.length,r=-1,u=t.length,s=an(i-a,0),d=G(u+s),c=!l;++r<u;)d[r]=t[r];for(;++o<a;)(c||o<i)&&(d[n[o]]=e[o]);for(;s--;)d[r++]=e[o++];return d}function _o(e,t,n,l){for(var o=-1,i=e.length,a=-1,r=n.length,u=-1,s=t.length,d=an(i-r,0),c=G(d+s),p=!l;++o<d;)c[o]=e[o];for(var m=o;++u<s;)c[m+u]=t[u];for(;++a<r;)(p||o<i)&&(c[m+n[a]]=e[o++]);return c}function To(e,t){var n=-1,l=e.length;for(t||(t=G(l));++n<l;)t[n]=e[n];return t}function fo(e,t,n,l){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var r=t[i],u=l?l(n[r],e[r],r,n,e):void 0;void 0===u&&(u=e[r]),o?Gn(n,r,u):jn(n,r,u)}return n}function yo(e,t){return function(n,l){var o=Ma(n)?nt:Vn,i=t?t():{};return o(n,e,$o(l,2),i)}}function So(e){return Fl(function(t,n){var l=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&ri(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=ve(t);++l<o;){var r=n[l];r&&e(t,r,l,i)}return t})}function go(e,t){return function(n,l){if(null==n)return n;if(!Ua(n))return e(n,l);for(var o=n.length,i=t?o:-1,a=ve(n);(t?i--:++i<o)&&!1!==l(a[i],i,a););return n}}function Po(e){return function(t,n,l){for(var o=-1,i=ve(t),a=l(t),r=a.length;r--;){var u=a[e?r:++o];if(!1===n(i[u],u,i))break}return t}}function Ao(e){return function(t){var n=Ut(t=ur(t))?jt(t):void 0,l=n?n[0]:t.charAt(0),o=n?uo(n,1).join(""):t.slice(1);return l[e]()+o}}function No(e){return function(t){return ct(Yr(wr(t).replace(Ce,"")),e,"")}}function Oo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Rn(e.prototype),l=e.apply(n,t);return Ka(l)?l:n}}function Io(e){return function(t,n,l){var o=ve(t);if(!Ua(t)){var i=$o(n,3);t=gr(t),n=function(e){return i(o[e],e,o)}}var a=e(t,n,l);return a>-1?o[i?t[a]:a]:void 0}}function ho(e){return Ko(function(t){var l=t.length,o=l,i=Dn.prototype.thru;for(e&&t.reverse();o--;){var a=t[o];if("function"!=typeof a)throw new Te(n);if(i&&!r&&"wrapper"==Xo(a))var r=new Dn([],!0)}for(o=r?o:l;++o<l;){var u=Xo(a=t[o]),s="wrapper"==u?Go(a):void 0;r=s&&si(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?r[Xo(s[0])].apply(r,s[3]):1==a.length&&si(a)?r[u]():r.thru(a)}return function(){var e=arguments,n=e[0];if(r&&1==e.length&&Ma(n))return r.plant(n).value();for(var o=0,i=l?t[o].apply(this,e):n;++o<l;)i=t[o].call(this,i);return i}})}function Co(e,t,n,l,o,i,a,r,u,s){var d=128&t,c=1&t,p=2&t,m=24&t,v=512&t,E=p?void 0:Oo(e);return function _(){for(var T=arguments.length,f=G(T),y=T;y--;)f[y]=arguments[y];if(m)var S=qo(_),g=Lt(f,S);if(l&&(f=Eo(f,l,o,m)),i&&(f=_o(f,i,a,m)),T-=g,m&&T<s){var P=kt(f,S);return xo(e,t,Co,_.placeholder,n,f,P,r,u,s-T)}var A=c?n:this,N=p?A[e]:e;return T=f.length,r?f=_i(f,r):v&&T>1&&f.reverse(),d&&u<T&&(f.length=u),this&&this!==je&&this instanceof _&&(N=E||Oo(N)),N.apply(A,f)}}function Ro(e,t){return function(n,l){return function(e,t,n,l){return ul(e,function(e,o,i){t(l,n(e),o,i)}),l}(n,e,t(l),{})}}function bo(e,t){return function(n,l){var o;if(void 0===n&&void 0===l)return t;if(void 0!==n&&(o=n),void 0!==l){if(void 0===o)return l;"string"==typeof n||"string"==typeof l?(n=$l(n),l=$l(l)):(n=ql(n),l=ql(l)),o=e(n,l)}return o}}function Do(e){return Ko(function(t){return t=st(t,ht($o())),Fl(function(n){var l=this;return e(t,function(e){return tt(e,l,n)})})})}function Lo(e,t){var n=(t=void 0===t?" ":$l(t)).length;if(n<2)return n?Ul(t,e):t;var l=Ul(t,Qt(e/Wt(t)));return Ut(t)?uo(jt(l),0,e).join(""):l.slice(0,e)}function wo(e){return function(t,n,l){return l&&"number"!=typeof l&&ri(t,n,l)&&(n=l=void 0),t=lr(t),void 0===n?(n=t,t=0):n=lr(n),function(e,t,n,l){for(var o=-1,i=an(Qt((t-e)/(n||1)),0),a=G(i);i--;)a[l?i:++o]=e,e+=n;return a}(t,n,l=void 0===l?t<n?1:-1:lr(l),e)}}function Mo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ar(t),n=ar(n)),e(t,n)}}function xo(e,t,n,l,o,i,a,r,u,s){var d=8&t;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var c=[e,t,o,d?i:void 0,d?a:void 0,d?void 0:i,d?void 0:a,r,u,s],p=n.apply(void 0,c);return si(e)&&fi(p,c),p.placeholder=l,gi(p,e,t)}function Uo(e){var t=me[e];return function(e,n){if(e=ar(e),(n=null==n?0:rn(or(n),292))&&nn(e)){var l=(ur(e)+"e").split("e");return+((l=(ur(t(l[0]+"e"+(+l[1]+n)))+"e").split("e"))[0]+"e"+(+l[1]-n))}return t(e)}}var Fo=En&&1/Ht(new En([,-0]))[1]==1/0?function(e){return new En(e)}:Qr;function Bo(e){return function(t){var n=ni(t);return n==p?Ft(t):n==_?Yt(t):function(e,t){return st(t,function(t){return[t,e[t]]})}(t,e(t))}}function ko(e,t,o,i,a,r,u,s){var d=2&t;if(!d&&"function"!=typeof e)throw new Te(n);var c=i?i.length:0;if(c||(t&=-97,i=a=void 0),u=void 0===u?u:an(or(u),0),s=void 0===s?s:or(s),c-=a?a.length:0,64&t){var p=i,m=a;i=a=void 0}var v=d?void 0:Go(e),E=[e,t,o,i,a,p,m,r,u,s];if(v&&function(e,t){var n=e[1],o=t[1],i=n|o;if(!(i<131||128==o&&8==n||128==o&&256==n&&e[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==n))return e;1&o&&(e[2]=t[2],i|=1&n?0:4);var a=t[3];if(a){var r=e[3];e[3]=r?Eo(r,a,t[4]):a,e[4]=r?kt(e[3],l):t[4]}(a=t[5])&&(e[5]=(r=e[5])?_o(r,a,t[6]):a,e[6]=r?kt(e[5],l):t[6]),(a=t[7])&&(e[7]=a),128&o&&(e[8]=null==e[8]?t[8]:rn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(E,v),e=E[0],t=E[1],o=E[2],i=E[3],a=E[4],!(s=E[9]=void 0===E[9]?d?0:e.length:an(E[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||16==t?function(e,t,n){var l=Oo(e);return function o(){for(var i=arguments.length,a=G(i),r=i,u=qo(o);r--;)a[r]=arguments[r];var s=i<3&&a[0]!==u&&a[i-1]!==u?[]:kt(a,u);if((i-=s.length)<n)return xo(e,t,Co,o.placeholder,void 0,a,s,void 0,void 0,n-i);var d=this&&this!==je&&this instanceof o?l:e;return tt(d,this,a)}}(e,t,s):32!=t&&33!=t||a.length?Co.apply(void 0,E):function(e,t,n,l){var o=1&t,i=Oo(e);return function t(){for(var a=-1,r=arguments.length,u=-1,s=l.length,d=G(s+r),c=this&&this!==je&&this instanceof t?i:e;++u<s;)d[u]=l[u];for(;r--;)d[u++]=arguments[++a];return tt(c,o?n:this,d)}}(e,t,o,i);else var _=function(e,t,n){var l=1&t,o=Oo(e);return function t(){var i=this&&this!==je&&this instanceof t?o:e;return i.apply(l?n:this,arguments)}}(e,t,o);return gi((v?Yl:fi)(_,E),e,t)}function Ho(e,t,n,l){return void 0===e||ba(e,ye[n])&&!Pe.call(l,n)?t:e}function Yo(e,t,n,l,o,i){return Ka(e)&&Ka(t)&&(i.set(t,e),Rl(e,t,void 0,Yo,i),i.delete(t)),e}function Wo(e){return Xa(e)?void 0:e}function jo(e,t,n,l,o,i){var a=1&n,r=e.length,u=t.length;if(r!=u&&!(a&&u>r))return!1;var s=i.get(e),d=i.get(t);if(s&&d)return s==t&&d==e;var c=-1,p=!0,m=2&n?new Un:void 0;for(i.set(e,t),i.set(t,e);++c<r;){var v=e[c],E=t[c];if(l)var _=a?l(E,v,c,t,e,i):l(v,E,c,e,t,i);if(void 0!==_){if(_)continue;p=!1;break}if(m){if(!mt(t,function(e,t){if(!Rt(m,t)&&(v===e||o(v,e,n,l,i)))return m.push(t)})){p=!1;break}}else if(v!==E&&!o(v,E,n,l,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function Ko(e){return Si(vi(e,void 0,xi),e+"")}function Vo(e){return pl(e,gr,ei)}function zo(e){return pl(e,Pr,ti)}var Go=fn?function(e){return fn.get(e)}:Qr;function Xo(e){for(var t=e.name+"",n=yn[t],l=Pe.call(yn,t)?n.length:0;l--;){var o=n[l],i=o.func;if(null==i||i==e)return o.name}return t}function qo(e){return(Pe.call(Cn,"placeholder")?Cn:e).placeholder}function $o(){var e=Cn.iteratee||Xr;return e=e===Xr?Al:e,arguments.length?e(arguments[0],arguments[1]):e}function Zo(e,t){var n,l,o=e.__data__;return("string"==(l=typeof(n=t))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Qo(e){for(var t=gr(e),n=t.length;n--;){var l=t[n],o=e[l];t[n]=[l,o,pi(o)]}return t}function Jo(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Pl(n)?n:void 0}var ei=en?function(e){return null==e?[]:(e=ve(e),at(en(e),function(t){return Ge.call(e,t)}))}:iu,ti=en?function(e){for(var t=[];e;)dt(t,ei(e)),e=Ke(e);return t}:iu,ni=ml;function li(e,t,n){for(var l=-1,o=(t=ao(t,e)).length,i=!1;++l<o;){var a=hi(t[l]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++l!=o?i:!!(o=null==e?0:e.length)&&ja(o)&&ai(a,o)&&(Ma(e)||wa(e))}function oi(e){return"function"!=typeof e.constructor||ci(e)?{}:Rn(Ke(e))}function ii(e){return Ma(e)||wa(e)||!!(vt&&e&&e[vt])}function ai(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ae.test(e))&&e>-1&&e%1==0&&e<t}function ri(e,t,n){if(!Ka(n))return!1;var l=typeof t;return!!("number"==l?Ua(n)&&ai(t,n.length):"string"==l&&t in n)&&ba(n[t],e)}function ui(e,t){if(Ma(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Qa(e))||W.test(e)||!H.test(e)||null!=t&&e in ve(t)}function si(e){var t=Xo(e),n=Cn[t];if("function"!=typeof n||!(t in Ln.prototype))return!1;if(e===n)return!0;var l=Go(n);return!!l&&e===l[0]}(pn&&ni(new pn(new ArrayBuffer(1)))!=g||mn&&ni(new mn)!=p||vn&&"[object Promise]"!=ni(vn.resolve())||En&&ni(new En)!=_||_n&&ni(new _n)!=y)&&(ni=function(e){var t=ml(e),n=t==v?e.constructor:void 0,l=n?Ci(n):"";if(l)switch(l){case Sn:return g;case gn:return p;case Pn:return"[object Promise]";case An:return _;case Nn:return y}return t});var di=Se?Ya:au;function ci(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ye)}function pi(e){return e==e&&!Ka(e)}function mi(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in ve(n))}}function vi(e,t,n){return t=an(void 0===t?e.length-1:t,0),function(){for(var l=arguments,o=-1,i=an(l.length-t,0),a=G(i);++o<i;)a[o]=l[t+o];o=-1;for(var r=G(t+1);++o<t;)r[o]=l[o];return r[t]=n(a),tt(e,this,r)}}function Ei(e,t){return t.length<2?e:cl(e,Kl(t,0,-1))}function _i(e,t){for(var n=e.length,l=rn(t.length,n),o=To(e);l--;){var i=t[l];e[l]=ai(i,n)?o[i]:void 0}return e}function Ti(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var fi=Pi(Yl),yi=Zt||function(e,t){return je.setTimeout(e,t)},Si=Pi(Wl);function gi(e,t,n){var l=t+"";return Si(e,function(e,t){var n=t.length;if(!n)return e;var l=n-1;return t[l]=(n>1?"& ":"")+t[l],t=t.join(n>2?", ":" "),e.replace(X,"{\n/* [wrapped with "+t+"] */\n")}(l,function(e,t){return lt(o,function(n){var l="_."+n[0];t&n[1]&&!rt(e,l)&&e.push(l)}),e.sort()}(function(e){var t=e.match(q);return t?t[1].split($):[]}(l),n)))}function Pi(e){var t=0,n=0;return function(){var l=un(),o=16-(l-n);if(n=l,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Ai(e,t){var n=-1,l=e.length,o=l-1;for(t=void 0===t?l:t;++n<t;){var i=xl(n,o),a=e[i];e[i]=e[n],e[n]=a}return e.length=t,e}var Ni,Oi,Ii=(Ni=Na(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(j,function(e,n,l,o){t.push(l?o.replace(J,"$1"):n||e)}),t},function(e){return 500===Oi.size&&Oi.clear(),e}),Oi=Ni.cache,Ni);function hi(e){if("string"==typeof e||Qa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ci(e){if(null!=e){try{return ge.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ri(e){if(e instanceof Ln)return e.clone();var t=new Dn(e.__wrapped__,e.__chain__);return t.__actions__=To(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var bi=Fl(function(e,t){return Fa(e)?Jn(e,il(t,1,Fa,!0)):[]}),Di=Fl(function(e,t){var n=Hi(t);return Fa(n)&&(n=void 0),Fa(e)?Jn(e,il(t,1,Fa,!0),$o(n,2)):[]}),Li=Fl(function(e,t){var n=Hi(t);return Fa(n)&&(n=void 0),Fa(e)?Jn(e,il(t,1,Fa,!0),void 0,n):[]});function wi(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=null==n?0:or(n);return o<0&&(o=an(l+o,0)),_t(e,$o(t,3),o)}function Mi(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=l-1;return void 0!==n&&(o=or(n),o=n<0?an(l+o,0):rn(o,l-1)),_t(e,$o(t,3),o,!0)}function xi(e){return null!=e&&e.length?il(e,1):[]}function Ui(e){return e&&e.length?e[0]:void 0}var Fi=Fl(function(e){var t=st(e,oo);return t.length&&t[0]===e[0]?Tl(t):[]}),Bi=Fl(function(e){var t=Hi(e),n=st(e,oo);return t===Hi(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Tl(n,$o(t,2)):[]}),ki=Fl(function(e){var t=Hi(e),n=st(e,oo);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?Tl(n,void 0,t):[]});function Hi(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Yi=Fl(Wi);function Wi(e,t){return e&&e.length&&t&&t.length?wl(e,t):e}var ji=Ko(function(e,t){var n=null==e?0:e.length,l=Xn(e,t);return Ml(e,st(t,function(e){return ai(e,n)?+e:e}).sort(vo)),l});function Ki(e){return null==e?e:cn.call(e)}var Vi=Fl(function(e){return Zl(il(e,1,Fa,!0))}),zi=Fl(function(e){var t=Hi(e);return Fa(t)&&(t=void 0),Zl(il(e,1,Fa,!0),$o(t,2))}),Gi=Fl(function(e){var t=Hi(e);return t="function"==typeof t?t:void 0,Zl(il(e,1,Fa,!0),void 0,t)});function Xi(e){if(!e||!e.length)return[];var t=0;return e=at(e,function(e){if(Fa(e))return t=an(e.length,t),!0}),Ot(t,function(t){return st(e,gt(t))})}function qi(e,t){if(!e||!e.length)return[];var n=Xi(e);return null==t?n:st(n,function(e){return tt(t,void 0,e)})}var $i=Fl(function(e,t){return Fa(e)?Jn(e,t):[]}),Zi=Fl(function(e){return no(at(e,Fa))}),Qi=Fl(function(e){var t=Hi(e);return Fa(t)&&(t=void 0),no(at(e,Fa),$o(t,2))}),Ji=Fl(function(e){var t=Hi(e);return t="function"==typeof t?t:void 0,no(at(e,Fa),void 0,t)}),ea=Fl(Xi),ta=Fl(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,qi(e,n)});function na(e){var t=Cn(e);return t.__chain__=!0,t}function la(e,t){return t(e)}var oa=Ko(function(e){var t=e.length,n=t?e[0]:0,l=this.__wrapped__,o=function(t){return Xn(t,e)};return!(t>1||this.__actions__.length)&&l instanceof Ln&&ai(n)?((l=l.slice(n,+n+(t?1:0))).__actions__.push({func:la,args:[o],thisArg:void 0}),new Dn(l,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e})):this.thru(o)}),ia=yo(function(e,t,n){Pe.call(e,n)?++e[n]:Gn(e,n,1)}),aa=Io(wi),ra=Io(Mi);function ua(e,t){return(Ma(e)?lt:el)(e,$o(t,3))}function sa(e,t){return(Ma(e)?ot:tl)(e,$o(t,3))}var da=yo(function(e,t,n){Pe.call(e,n)?e[n].push(t):Gn(e,n,[t])}),ca=Fl(function(e,t,n){var l=-1,o="function"==typeof t,i=Ua(e)?G(e.length):[];return el(e,function(e){i[++l]=o?tt(t,e,n):fl(e,t,n)}),i}),pa=yo(function(e,t,n){Gn(e,n,t)});function ma(e,t){return(Ma(e)?st:Il)(e,$o(t,3))}var va=yo(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ea=Fl(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ri(e,t[0],t[1])?t=[]:n>2&&ri(t[0],t[1],t[2])&&(t=[t[0]]),Dl(e,il(t,1),[])}),_a=$t||function(){return je.Date.now()};function Ta(e,t,n){return t=n?void 0:t,ko(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function fa(e,t){var l;if("function"!=typeof t)throw new Te(n);return e=or(e),function(){return--e>0&&(l=t.apply(this,arguments)),e<=1&&(t=void 0),l}}var ya=Fl(function(e,t,n){var l=1;if(n.length){var o=kt(n,qo(ya));l|=32}return ko(e,l,t,n,o)}),Sa=Fl(function(e,t,n){var l=3;if(n.length){var o=kt(n,qo(Sa));l|=32}return ko(t,l,e,n,o)});function ga(e,t,l){var o,i,a,r,u,s,d=0,c=!1,p=!1,m=!0;if("function"!=typeof e)throw new Te(n);function v(t){var n=o,l=i;return o=i=void 0,d=t,r=e.apply(l,n)}function E(e){return d=e,u=yi(T,t),c?v(e):r}function _(e){var n=e-s;return void 0===s||n>=t||n<0||p&&e-d>=a}function T(){var e=_a();if(_(e))return f(e);u=yi(T,function(e){var n=t-(e-s);return p?rn(n,a-(e-d)):n}(e))}function f(e){return u=void 0,m&&o?v(e):(o=i=void 0,r)}function y(){var e=_a(),n=_(e);if(o=arguments,i=this,s=e,n){if(void 0===u)return E(s);if(p)return so(u),u=yi(T,t),v(s)}return void 0===u&&(u=yi(T,t)),r}return t=ar(t)||0,Ka(l)&&(c=!!l.leading,a=(p="maxWait"in l)?an(ar(l.maxWait)||0,t):a,m="trailing"in l?!!l.trailing:m),y.cancel=function(){void 0!==u&&so(u),d=0,o=s=i=u=void 0},y.flush=function(){return void 0===u?r:f(_a())},y}var Pa=Fl(function(e,t){return Qn(e,1,t)}),Aa=Fl(function(e,t,n){return Qn(e,ar(t)||0,n)});function Na(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(n);var l=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=l.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return l.cache=i.set(o,a)||i,a};return l.cache=new(Na.Cache||xn),l}function Oa(e){if("function"!=typeof e)throw new Te(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Na.Cache=xn;var Ia=ro(function(e,t){var n=(t=1==t.length&&Ma(t[0])?st(t[0],ht($o())):st(il(t,1),ht($o()))).length;return Fl(function(l){for(var o=-1,i=rn(l.length,n);++o<i;)l[o]=t[o].call(this,l[o]);return tt(e,this,l)})}),ha=Fl(function(e,t){return ko(e,32,void 0,t,kt(t,qo(ha)))}),Ca=Fl(function(e,t){return ko(e,64,void 0,t,kt(t,qo(Ca)))}),Ra=Ko(function(e,t){return ko(e,256,void 0,void 0,void 0,t)});function ba(e,t){return e===t||e!=e&&t!=t}var Da=Mo(vl),La=Mo(function(e,t){return e>=t}),wa=yl(function(){return arguments}())?yl:function(e){return Va(e)&&Pe.call(e,"callee")&&!Ge.call(e,"callee")},Ma=G.isArray,xa=qe?ht(qe):function(e){return Va(e)&&ml(e)==S};function Ua(e){return null!=e&&ja(e.length)&&!Ya(e)}function Fa(e){return Va(e)&&Ua(e)}var Ba=tn||au,ka=$e?ht($e):function(e){return Va(e)&&ml(e)==u};function Ha(e){if(!Va(e))return!1;var t=ml(e);return t==s||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Xa(e)}function Ya(e){if(!Ka(e))return!1;var t=ml(e);return t==d||t==c||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Wa(e){return"number"==typeof e&&e==or(e)}function ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ka(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Va(e){return null!=e&&"object"==typeof e}var za=Ze?ht(Ze):function(e){return Va(e)&&ni(e)==p};function Ga(e){return"number"==typeof e||Va(e)&&ml(e)==m}function Xa(e){if(!Va(e)||ml(e)!=v)return!1;var t=Ke(e);if(null===t)return!0;var n=Pe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ge.call(n)==Ie}var qa=Qe?ht(Qe):function(e){return Va(e)&&ml(e)==E},$a=Je?ht(Je):function(e){return Va(e)&&ni(e)==_};function Za(e){return"string"==typeof e||!Ma(e)&&Va(e)&&ml(e)==T}function Qa(e){return"symbol"==typeof e||Va(e)&&ml(e)==f}var Ja=et?ht(et):function(e){return Va(e)&&ja(e.length)&&!!Ue[ml(e)]},er=Mo(Ol),tr=Mo(function(e,t){return e<=t});function nr(e){if(!e)return[];if(Ua(e))return Za(e)?jt(e):To(e);if(Pt&&e[Pt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Pt]());var t=ni(e);return(t==p?Ft:t==_?Ht:br)(e)}function lr(e){return e?(e=ar(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function or(e){var t=lr(e),n=t%1;return t==t?n?t-n:t:0}function ir(e){return e?qn(or(e),0,4294967295):0}function ar(e){if("number"==typeof e)return e;if(Qa(e))return NaN;if(Ka(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ka(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=It(e);var n=le.test(e);return n||ie.test(e)?He(e.slice(2),n?2:8):ne.test(e)?NaN:+e}function rr(e){return fo(e,Pr(e))}function ur(e){return null==e?"":$l(e)}var sr=So(function(e,t){if(ci(t)||Ua(t))fo(t,gr(t),e);else for(var n in t)Pe.call(t,n)&&jn(e,n,t[n])}),dr=So(function(e,t){fo(t,Pr(t),e)}),cr=So(function(e,t,n,l){fo(t,Pr(t),e,l)}),pr=So(function(e,t,n,l){fo(t,gr(t),e,l)}),mr=Ko(Xn),vr=Fl(function(e,t){e=ve(e);var n=-1,l=t.length,o=l>2?t[2]:void 0;for(o&&ri(t[0],t[1],o)&&(l=1);++n<l;)for(var i=t[n],a=Pr(i),r=-1,u=a.length;++r<u;){var s=a[r],d=e[s];(void 0===d||ba(d,ye[s])&&!Pe.call(e,s))&&(e[s]=i[s])}return e}),Er=Fl(function(e){return e.push(void 0,Yo),tt(Nr,void 0,e)});function _r(e,t,n){var l=null==e?void 0:cl(e,t);return void 0===l?n:l}function Tr(e,t){return null!=e&&li(e,t,_l)}var fr=Ro(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Oe.call(t)),e[t]=n},Kr(Gr)),yr=Ro(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Oe.call(t)),Pe.call(e,t)?e[t].push(n):e[t]=[n]},$o),Sr=Fl(fl);function gr(e){return Ua(e)?Bn(e):Nl(e)}function Pr(e){return Ua(e)?Bn(e,!0):function(e){if(!Ka(e))return function(e){var t=[];if(null!=e)for(var n in ve(e))t.push(n);return t}(e);var t=ci(e),n=[];for(var l in e)("constructor"!=l||!t&&Pe.call(e,l))&&n.push(l);return n}(e)}var Ar=So(function(e,t,n){Rl(e,t,n)}),Nr=So(function(e,t,n,l){Rl(e,t,n,l)}),Or=Ko(function(e,t){var n={};if(null==e)return n;var l=!1;t=st(t,function(t){return t=ao(t,e),l||(l=t.length>1),t}),fo(e,zo(e),n),l&&(n=$n(n,7,Wo));for(var o=t.length;o--;)Ql(n,t[o]);return n}),Ir=Ko(function(e,t){return null==e?{}:function(e,t){return Ll(e,t,function(t,n){return Tr(e,n)})}(e,t)});function hr(e,t){if(null==e)return{};var n=st(zo(e),function(e){return[e]});return t=$o(t),Ll(e,n,function(e,n){return t(e,n[0])})}var Cr=Bo(gr),Rr=Bo(Pr);function br(e){return null==e?[]:Ct(e,gr(e))}var Dr=No(function(e,t,n){return t=t.toLowerCase(),e+(n?Lr(t):t)});function Lr(e){return Hr(ur(e).toLowerCase())}function wr(e){return(e=ur(e))&&e.replace(re,wt).replace(Re,"")}var Mr=No(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),xr=No(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Ur=Ao("toLowerCase"),Fr=No(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Br=No(function(e,t,n){return e+(n?" ":"")+Hr(t)}),kr=No(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Hr=Ao("toUpperCase");function Yr(e,t,n){return e=ur(e),void 0===(t=n?void 0:t)?function(e){return we.test(e)}(e)?function(e){return e.match(De)||[]}(e):function(e){return e.match(Z)||[]}(e):e.match(t)||[]}var Wr=Fl(function(e,t){try{return tt(e,void 0,t)}catch(e){return Ha(e)?e:new ce(e)}}),jr=Ko(function(e,t){return lt(t,function(t){t=hi(t),Gn(e,t,ya(e[t],e))}),e});function Kr(e){return function(){return e}}var Vr=ho(),zr=ho(!0);function Gr(e){return e}function Xr(e){return Al("function"==typeof e?e:$n(e,1))}var qr=Fl(function(e,t){return function(n){return fl(n,e,t)}}),$r=Fl(function(e,t){return function(n){return fl(e,n,t)}});function Zr(e,t,n){var l=gr(t),o=dl(t,l);null!=n||Ka(t)&&(o.length||!l.length)||(n=t,t=e,e=this,o=dl(t,gr(t)));var i=!(Ka(n)&&"chain"in n&&!n.chain),a=Ya(e);return lt(o,function(n){var l=t[n];e[n]=l,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=To(this.__actions__);return o.push({func:l,args:arguments,thisArg:e}),n.__chain__=t,n}return l.apply(e,dt([this.value()],arguments))})}),e}function Qr(){}var Jr=Do(st),eu=Do(it),tu=Do(mt);function nu(e){return ui(e)?gt(hi(e)):function(e){return function(t){return cl(t,e)}}(e)}var lu=wo(),ou=wo(!0);function iu(){return[]}function au(){return!1}var ru,uu=bo(function(e,t){return e+t},0),su=Uo("ceil"),du=bo(function(e,t){return e/t},1),cu=Uo("floor"),pu=bo(function(e,t){return e*t},1),mu=Uo("round"),vu=bo(function(e,t){return e-t},0);return Cn.after=function(e,t){if("function"!=typeof t)throw new Te(n);return e=or(e),function(){if(--e<1)return t.apply(this,arguments)}},Cn.ary=Ta,Cn.assign=sr,Cn.assignIn=dr,Cn.assignInWith=cr,Cn.assignWith=pr,Cn.at=mr,Cn.before=fa,Cn.bind=ya,Cn.bindAll=jr,Cn.bindKey=Sa,Cn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ma(e)?e:[e]},Cn.chain=na,Cn.chunk=function(e,t,n){t=(n?ri(e,t,n):void 0===t)?1:an(or(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var o=0,i=0,a=G(Qt(l/t));o<l;)a[i++]=Kl(e,o,o+=t);return a},Cn.compact=function(e){for(var t=-1,n=null==e?0:e.length,l=0,o=[];++t<n;){var i=e[t];i&&(o[l++]=i)}return o},Cn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=G(e-1),n=arguments[0],l=e;l--;)t[l-1]=arguments[l];return dt(Ma(n)?To(n):[n],il(t,1))},Cn.cond=function(e){var t=null==e?0:e.length,l=$o();return e=t?st(e,function(e){if("function"!=typeof e[1])throw new Te(n);return[l(e[0]),e[1]]}):[],Fl(function(n){for(var l=-1;++l<t;){var o=e[l];if(tt(o[0],this,n))return tt(o[1],this,n)}})},Cn.conforms=function(e){return function(e){var t=gr(e);return function(n){return Zn(n,e,t)}}($n(e,1))},Cn.constant=Kr,Cn.countBy=ia,Cn.create=function(e,t){var n=Rn(e);return null==t?n:zn(n,t)},Cn.curry=function e(t,n,l){var o=ko(t,8,void 0,void 0,void 0,void 0,void 0,n=l?void 0:n);return o.placeholder=e.placeholder,o},Cn.curryRight=function e(t,n,l){var o=ko(t,16,void 0,void 0,void 0,void 0,void 0,n=l?void 0:n);return o.placeholder=e.placeholder,o},Cn.debounce=ga,Cn.defaults=vr,Cn.defaultsDeep=Er,Cn.defer=Pa,Cn.delay=Aa,Cn.difference=bi,Cn.differenceBy=Di,Cn.differenceWith=Li,Cn.drop=function(e,t,n){var l=null==e?0:e.length;return l?Kl(e,(t=n||void 0===t?1:or(t))<0?0:t,l):[]},Cn.dropRight=function(e,t,n){var l=null==e?0:e.length;return l?Kl(e,0,(t=l-(t=n||void 0===t?1:or(t)))<0?0:t):[]},Cn.dropRightWhile=function(e,t){return e&&e.length?eo(e,$o(t,3),!0,!0):[]},Cn.dropWhile=function(e,t){return e&&e.length?eo(e,$o(t,3),!0):[]},Cn.fill=function(e,t,n,l){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&ri(e,t,n)&&(n=0,l=o),function(e,t,n,l){var o=e.length;for((n=or(n))<0&&(n=-n>o?0:o+n),(l=void 0===l||l>o?o:or(l))<0&&(l+=o),l=n>l?0:ir(l);n<l;)e[n++]=t;return e}(e,t,n,l)):[]},Cn.filter=function(e,t){return(Ma(e)?at:ol)(e,$o(t,3))},Cn.flatMap=function(e,t){return il(ma(e,t),1)},Cn.flatMapDeep=function(e,t){return il(ma(e,t),1/0)},Cn.flatMapDepth=function(e,t,n){return n=void 0===n?1:or(n),il(ma(e,t),n)},Cn.flatten=xi,Cn.flattenDeep=function(e){return null!=e&&e.length?il(e,1/0):[]},Cn.flattenDepth=function(e,t){return null!=e&&e.length?il(e,t=void 0===t?1:or(t)):[]},Cn.flip=function(e){return ko(e,512)},Cn.flow=Vr,Cn.flowRight=zr,Cn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,l={};++t<n;){var o=e[t];l[o[0]]=o[1]}return l},Cn.functions=function(e){return null==e?[]:dl(e,gr(e))},Cn.functionsIn=function(e){return null==e?[]:dl(e,Pr(e))},Cn.groupBy=da,Cn.initial=function(e){return null!=e&&e.length?Kl(e,0,-1):[]},Cn.intersection=Fi,Cn.intersectionBy=Bi,Cn.intersectionWith=ki,Cn.invert=fr,Cn.invertBy=yr,Cn.invokeMap=ca,Cn.iteratee=Xr,Cn.keyBy=pa,Cn.keys=gr,Cn.keysIn=Pr,Cn.map=ma,Cn.mapKeys=function(e,t){var n={};return t=$o(t,3),ul(e,function(e,l,o){Gn(n,t(e,l,o),e)}),n},Cn.mapValues=function(e,t){var n={};return t=$o(t,3),ul(e,function(e,l,o){Gn(n,l,t(e,l,o))}),n},Cn.matches=function(e){return hl($n(e,1))},Cn.matchesProperty=function(e,t){return Cl(e,$n(t,1))},Cn.memoize=Na,Cn.merge=Ar,Cn.mergeWith=Nr,Cn.method=qr,Cn.methodOf=$r,Cn.mixin=Zr,Cn.negate=Oa,Cn.nthArg=function(e){return e=or(e),Fl(function(t){return bl(t,e)})},Cn.omit=Or,Cn.omitBy=function(e,t){return hr(e,Oa($o(t)))},Cn.once=function(e){return fa(2,e)},Cn.orderBy=function(e,t,n,l){return null==e?[]:(Ma(t)||(t=null==t?[]:[t]),Ma(n=l?void 0:n)||(n=null==n?[]:[n]),Dl(e,t,n))},Cn.over=Jr,Cn.overArgs=Ia,Cn.overEvery=eu,Cn.overSome=tu,Cn.partial=ha,Cn.partialRight=Ca,Cn.partition=va,Cn.pick=Ir,Cn.pickBy=hr,Cn.property=nu,Cn.propertyOf=function(e){return function(t){return null==e?void 0:cl(e,t)}},Cn.pull=Yi,Cn.pullAll=Wi,Cn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?wl(e,t,$o(n,2)):e},Cn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?wl(e,t,void 0,n):e},Cn.pullAt=ji,Cn.range=lu,Cn.rangeRight=ou,Cn.rearg=Ra,Cn.reject=function(e,t){return(Ma(e)?at:ol)(e,Oa($o(t,3)))},Cn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var l=-1,o=[],i=e.length;for(t=$o(t,3);++l<i;){var a=e[l];t(a,l,e)&&(n.push(a),o.push(l))}return Ml(e,o),n},Cn.rest=function(e,t){if("function"!=typeof e)throw new Te(n);return Fl(e,t=void 0===t?t:or(t))},Cn.reverse=Ki,Cn.sampleSize=function(e,t,n){return t=(n?ri(e,t,n):void 0===t)?1:or(t),(Ma(e)?Hn:kl)(e,t)},Cn.set=function(e,t,n){return null==e?e:Hl(e,t,n)},Cn.setWith=function(e,t,n,l){return l="function"==typeof l?l:void 0,null==e?e:Hl(e,t,n,l)},Cn.shuffle=function(e){return(Ma(e)?Yn:jl)(e)},Cn.slice=function(e,t,n){var l=null==e?0:e.length;return l?(n&&"number"!=typeof n&&ri(e,t,n)?(t=0,n=l):(t=null==t?0:or(t),n=void 0===n?l:or(n)),Kl(e,t,n)):[]},Cn.sortBy=Ea,Cn.sortedUniq=function(e){return e&&e.length?Xl(e):[]},Cn.sortedUniqBy=function(e,t){return e&&e.length?Xl(e,$o(t,2)):[]},Cn.split=function(e,t,n){return n&&"number"!=typeof n&&ri(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ur(e))&&("string"==typeof t||null!=t&&!qa(t))&&!(t=$l(t))&&Ut(e)?uo(jt(e),0,n):e.split(t,n):[]},Cn.spread=function(e,t){if("function"!=typeof e)throw new Te(n);return t=null==t?0:an(or(t),0),Fl(function(n){var l=n[t],o=uo(n,0,t);return l&&dt(o,l),tt(e,this,o)})},Cn.tail=function(e){var t=null==e?0:e.length;return t?Kl(e,1,t):[]},Cn.take=function(e,t,n){return e&&e.length?Kl(e,0,(t=n||void 0===t?1:or(t))<0?0:t):[]},Cn.takeRight=function(e,t,n){var l=null==e?0:e.length;return l?Kl(e,(t=l-(t=n||void 0===t?1:or(t)))<0?0:t,l):[]},Cn.takeRightWhile=function(e,t){return e&&e.length?eo(e,$o(t,3),!1,!0):[]},Cn.takeWhile=function(e,t){return e&&e.length?eo(e,$o(t,3)):[]},Cn.tap=function(e,t){return t(e),e},Cn.throttle=function(e,t,l){var o=!0,i=!0;if("function"!=typeof e)throw new Te(n);return Ka(l)&&(o="leading"in l?!!l.leading:o,i="trailing"in l?!!l.trailing:i),ga(e,t,{leading:o,maxWait:t,trailing:i})},Cn.thru=la,Cn.toArray=nr,Cn.toPairs=Cr,Cn.toPairsIn=Rr,Cn.toPath=function(e){return Ma(e)?st(e,hi):Qa(e)?[e]:To(Ii(ur(e)))},Cn.toPlainObject=rr,Cn.transform=function(e,t,n){var l=Ma(e),o=l||Ba(e)||Ja(e);if(t=$o(t,4),null==n){var i=e&&e.constructor;n=o?l?new i:[]:Ka(e)&&Ya(i)?Rn(Ke(e)):{}}return(o?lt:ul)(e,function(e,l,o){return t(n,e,l,o)}),n},Cn.unary=function(e){return Ta(e,1)},Cn.union=Vi,Cn.unionBy=zi,Cn.unionWith=Gi,Cn.uniq=function(e){return e&&e.length?Zl(e):[]},Cn.uniqBy=function(e,t){return e&&e.length?Zl(e,$o(t,2)):[]},Cn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Zl(e,void 0,t):[]},Cn.unset=function(e,t){return null==e||Ql(e,t)},Cn.unzip=Xi,Cn.unzipWith=qi,Cn.update=function(e,t,n){return null==e?e:Jl(e,t,io(n))},Cn.updateWith=function(e,t,n,l){return l="function"==typeof l?l:void 0,null==e?e:Jl(e,t,io(n),l)},Cn.values=br,Cn.valuesIn=function(e){return null==e?[]:Ct(e,Pr(e))},Cn.without=$i,Cn.words=Yr,Cn.wrap=function(e,t){return ha(io(t),e)},Cn.xor=Zi,Cn.xorBy=Qi,Cn.xorWith=Ji,Cn.zip=ea,Cn.zipObject=function(e,t){return lo(e||[],t||[],jn)},Cn.zipObjectDeep=function(e,t){return lo(e||[],t||[],Hl)},Cn.zipWith=ta,Cn.entries=Cr,Cn.entriesIn=Rr,Cn.extend=dr,Cn.extendWith=cr,Zr(Cn,Cn),Cn.add=uu,Cn.attempt=Wr,Cn.camelCase=Dr,Cn.capitalize=Lr,Cn.ceil=su,Cn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ar(n))==n?n:0),void 0!==t&&(t=(t=ar(t))==t?t:0),qn(ar(e),t,n)},Cn.clone=function(e){return $n(e,4)},Cn.cloneDeep=function(e){return $n(e,5)},Cn.cloneDeepWith=function(e,t){return $n(e,5,t="function"==typeof t?t:void 0)},Cn.cloneWith=function(e,t){return $n(e,4,t="function"==typeof t?t:void 0)},Cn.conformsTo=function(e,t){return null==t||Zn(e,t,gr(t))},Cn.deburr=wr,Cn.defaultTo=function(e,t){return null==e||e!=e?t:e},Cn.divide=du,Cn.endsWith=function(e,t,n){e=ur(e),t=$l(t);var l=e.length,o=n=void 0===n?l:qn(or(n),0,l);return(n-=t.length)>=0&&e.slice(n,o)==t},Cn.eq=ba,Cn.escape=function(e){return(e=ur(e))&&U.test(e)?e.replace(M,Mt):e},Cn.escapeRegExp=function(e){return(e=ur(e))&&V.test(e)?e.replace(K,"\\$&"):e},Cn.every=function(e,t,n){var l=Ma(e)?it:nl;return n&&ri(e,t,n)&&(t=void 0),l(e,$o(t,3))},Cn.find=aa,Cn.findIndex=wi,Cn.findKey=function(e,t){return Et(e,$o(t,3),ul)},Cn.findLast=ra,Cn.findLastIndex=Mi,Cn.findLastKey=function(e,t){return Et(e,$o(t,3),sl)},Cn.floor=cu,Cn.forEach=ua,Cn.forEachRight=sa,Cn.forIn=function(e,t){return null==e?e:al(e,$o(t,3),Pr)},Cn.forInRight=function(e,t){return null==e?e:rl(e,$o(t,3),Pr)},Cn.forOwn=function(e,t){return e&&ul(e,$o(t,3))},Cn.forOwnRight=function(e,t){return e&&sl(e,$o(t,3))},Cn.get=_r,Cn.gt=Da,Cn.gte=La,Cn.has=function(e,t){return null!=e&&li(e,t,El)},Cn.hasIn=Tr,Cn.head=Ui,Cn.identity=Gr,Cn.includes=function(e,t,n,l){e=Ua(e)?e:br(e),n=n&&!l?or(n):0;var o=e.length;return n<0&&(n=an(o+n,0)),Za(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&Tt(e,t,n)>-1},Cn.indexOf=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=null==n?0:or(n);return o<0&&(o=an(l+o,0)),Tt(e,t,o)},Cn.inRange=function(e,t,n){return t=lr(t),void 0===n?(n=t,t=0):n=lr(n),function(e,t,n){return e>=rn(t,n)&&e<an(t,n)}(e=ar(e),t,n)},Cn.invoke=Sr,Cn.isArguments=wa,Cn.isArray=Ma,Cn.isArrayBuffer=xa,Cn.isArrayLike=Ua,Cn.isArrayLikeObject=Fa,Cn.isBoolean=function(e){return!0===e||!1===e||Va(e)&&ml(e)==r},Cn.isBuffer=Ba,Cn.isDate=ka,Cn.isElement=function(e){return Va(e)&&1===e.nodeType&&!Xa(e)},Cn.isEmpty=function(e){if(null==e)return!0;if(Ua(e)&&(Ma(e)||"string"==typeof e||"function"==typeof e.splice||Ba(e)||Ja(e)||wa(e)))return!e.length;var t=ni(e);if(t==p||t==_)return!e.size;if(ci(e))return!Nl(e).length;for(var n in e)if(Pe.call(e,n))return!1;return!0},Cn.isEqual=function(e,t){return Sl(e,t)},Cn.isEqualWith=function(e,t,n){var l=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===l?Sl(e,t,void 0,n):!!l},Cn.isError=Ha,Cn.isFinite=function(e){return"number"==typeof e&&nn(e)},Cn.isFunction=Ya,Cn.isInteger=Wa,Cn.isLength=ja,Cn.isMap=za,Cn.isMatch=function(e,t){return e===t||gl(e,t,Qo(t))},Cn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,gl(e,t,Qo(t),n)},Cn.isNaN=function(e){return Ga(e)&&e!=+e},Cn.isNative=function(e){if(di(e))throw new ce("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pl(e)},Cn.isNil=function(e){return null==e},Cn.isNull=function(e){return null===e},Cn.isNumber=Ga,Cn.isObject=Ka,Cn.isObjectLike=Va,Cn.isPlainObject=Xa,Cn.isRegExp=qa,Cn.isSafeInteger=function(e){return Wa(e)&&e>=-9007199254740991&&e<=9007199254740991},Cn.isSet=$a,Cn.isString=Za,Cn.isSymbol=Qa,Cn.isTypedArray=Ja,Cn.isUndefined=function(e){return void 0===e},Cn.isWeakMap=function(e){return Va(e)&&ni(e)==y},Cn.isWeakSet=function(e){return Va(e)&&"[object WeakSet]"==ml(e)},Cn.join=function(e,t){return null==e?"":ln.call(e,t)},Cn.kebabCase=Mr,Cn.last=Hi,Cn.lastIndexOf=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var o=l;return void 0!==n&&(o=(o=or(n))<0?an(l+o,0):rn(o,l-1)),t==t?function(e,t,n){for(var l=n+1;l--;)if(e[l]===t)return l;return l}(e,t,o):_t(e,yt,o,!0)},Cn.lowerCase=xr,Cn.lowerFirst=Ur,Cn.lt=er,Cn.lte=tr,Cn.max=function(e){return e&&e.length?ll(e,Gr,vl):void 0},Cn.maxBy=function(e,t){return e&&e.length?ll(e,$o(t,2),vl):void 0},Cn.mean=function(e){return St(e,Gr)},Cn.meanBy=function(e,t){return St(e,$o(t,2))},Cn.min=function(e){return e&&e.length?ll(e,Gr,Ol):void 0},Cn.minBy=function(e,t){return e&&e.length?ll(e,$o(t,2),Ol):void 0},Cn.stubArray=iu,Cn.stubFalse=au,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=pu,Cn.nth=function(e,t){return e&&e.length?bl(e,or(t)):void 0},Cn.noConflict=function(){return je._===this&&(je._=he),this},Cn.noop=Qr,Cn.now=_a,Cn.pad=function(e,t,n){e=ur(e);var l=(t=or(t))?Wt(e):0;if(!t||l>=t)return e;var o=(t-l)/2;return Lo(Jt(o),n)+e+Lo(Qt(o),n)},Cn.padEnd=function(e,t,n){e=ur(e);var l=(t=or(t))?Wt(e):0;return t&&l<t?e+Lo(t-l,n):e},Cn.padStart=function(e,t,n){e=ur(e);var l=(t=or(t))?Wt(e):0;return t&&l<t?Lo(t-l,n)+e:e},Cn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),sn(ur(e).replace(z,""),t||0)},Cn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ri(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=lr(e),void 0===t?(t=e,e=0):t=lr(t)),e>t){var l=e;e=t,t=l}if(n||e%1||t%1){var o=dn();return rn(e+o*(t-e+ke("1e-"+((o+"").length-1))),t)}return xl(e,t)},Cn.reduce=function(e,t,n){var l=Ma(e)?ct:At,o=arguments.length<3;return l(e,$o(t,4),n,o,el)},Cn.reduceRight=function(e,t,n){var l=Ma(e)?pt:At,o=arguments.length<3;return l(e,$o(t,4),n,o,tl)},Cn.repeat=function(e,t,n){return t=(n?ri(e,t,n):void 0===t)?1:or(t),Ul(ur(e),t)},Cn.replace=function(){var e=arguments,t=ur(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Cn.result=function(e,t,n){var l=-1,o=(t=ao(t,e)).length;for(o||(o=1,e=void 0);++l<o;){var i=null==e?void 0:e[hi(t[l])];void 0===i&&(l=o,i=n),e=Ya(i)?i.call(e):i}return e},Cn.round=mu,Cn.runInContext=e,Cn.sample=function(e){return(Ma(e)?kn:Bl)(e)},Cn.size=function(e){if(null==e)return 0;if(Ua(e))return Za(e)?Wt(e):e.length;var t=ni(e);return t==p||t==_?e.size:Nl(e).length},Cn.snakeCase=Fr,Cn.some=function(e,t,n){var l=Ma(e)?mt:Vl;return n&&ri(e,t,n)&&(t=void 0),l(e,$o(t,3))},Cn.sortedIndex=function(e,t){return zl(e,t)},Cn.sortedIndexBy=function(e,t,n){return Gl(e,t,$o(n,2))},Cn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var l=zl(e,t);if(l<n&&ba(e[l],t))return l}return-1},Cn.sortedLastIndex=function(e,t){return zl(e,t,!0)},Cn.sortedLastIndexBy=function(e,t,n){return Gl(e,t,$o(n,2),!0)},Cn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=zl(e,t,!0)-1;if(ba(e[n],t))return n}return-1},Cn.startCase=Br,Cn.startsWith=function(e,t,n){return e=ur(e),n=null==n?0:qn(or(n),0,e.length),t=$l(t),e.slice(n,n+t.length)==t},Cn.subtract=vu,Cn.sum=function(e){return e&&e.length?Nt(e,Gr):0},Cn.sumBy=function(e,t){return e&&e.length?Nt(e,$o(t,2)):0},Cn.template=function(e,t,n){var l=Cn.templateSettings;n&&ri(e,t,n)&&(t=void 0),e=ur(e),t=cr({},t,l,Ho);var o,i,a=cr({},t.imports,l.imports,Ho),r=gr(a),u=Ct(a,r),s=0,d=t.interpolate||ue,c="__p += '",p=Ee((t.escape||ue).source+"|"+d.source+"|"+(d===k?ee:ue).source+"|"+(t.evaluate||ue).source+"|$","g"),m="//# sourceURL="+(Pe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xe+"]")+"\n";e.replace(p,function(t,n,l,a,r,u){return l||(l=a),c+=e.slice(s,u).replace(se,xt),n&&(o=!0,c+="' +\n__e("+n+") +\n'"),r&&(i=!0,c+="';\n"+r+";\n__p += '"),l&&(c+="' +\n((__t = ("+l+")) == null ? '' : __t) +\n'"),s=u+t.length,t}),c+="';\n";var v=Pe.call(t,"variable")&&t.variable;if(v){if(Q.test(v))throw new ce("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";c=(i?c.replace(b,""):c).replace(D,"$1").replace(L,"$1;"),c="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var E=Wr(function(){return pe(r,m+"return "+c).apply(void 0,u)});if(E.source=c,Ha(E))throw E;return E},Cn.times=function(e,t){if((e=or(e))<1||e>9007199254740991)return[];var n=4294967295,l=rn(e,4294967295);e-=4294967295;for(var o=Ot(l,t=$o(t));++n<e;)t(n);return o},Cn.toFinite=lr,Cn.toInteger=or,Cn.toLength=ir,Cn.toLower=function(e){return ur(e).toLowerCase()},Cn.toNumber=ar,Cn.toSafeInteger=function(e){return e?qn(or(e),-9007199254740991,9007199254740991):0===e?e:0},Cn.toString=ur,Cn.toUpper=function(e){return ur(e).toUpperCase()},Cn.trim=function(e,t,n){if((e=ur(e))&&(n||void 0===t))return It(e);if(!e||!(t=$l(t)))return e;var l=jt(e),o=jt(t);return uo(l,bt(l,o),Dt(l,o)+1).join("")},Cn.trimEnd=function(e,t,n){if((e=ur(e))&&(n||void 0===t))return e.slice(0,Kt(e)+1);if(!e||!(t=$l(t)))return e;var l=jt(e);return uo(l,0,Dt(l,jt(t))+1).join("")},Cn.trimStart=function(e,t,n){if((e=ur(e))&&(n||void 0===t))return e.replace(z,"");if(!e||!(t=$l(t)))return e;var l=jt(e);return uo(l,bt(l,jt(t))).join("")},Cn.truncate=function(e,t){var n=30,l="...";if(Ka(t)){var o="separator"in t?t.separator:o;n="length"in t?or(t.length):n,l="omission"in t?$l(t.omission):l}var i=(e=ur(e)).length;if(Ut(e)){var a=jt(e);i=a.length}if(n>=i)return e;var r=n-Wt(l);if(r<1)return l;var u=a?uo(a,0,r).join(""):e.slice(0,r);if(void 0===o)return u+l;if(a&&(r+=u.length-r),qa(o)){if(e.slice(r).search(o)){var s,d=u;for(o.global||(o=Ee(o.source,ur(te.exec(o))+"g")),o.lastIndex=0;s=o.exec(d);)var c=s.index;u=u.slice(0,void 0===c?r:c)}}else if(e.indexOf($l(o),r)!=r){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+l},Cn.unescape=function(e){return(e=ur(e))&&x.test(e)?e.replace(w,Vt):e},Cn.uniqueId=function(e){var t=++Ae;return ur(e)+t},Cn.upperCase=kr,Cn.upperFirst=Hr,Cn.each=ua,Cn.eachRight=sa,Cn.first=Ui,Zr(Cn,(ru={},ul(Cn,function(e,t){Pe.call(Cn.prototype,t)||(ru[t]=e)}),ru),{chain:!1}),Cn.VERSION="4.17.21",lt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Cn[e].placeholder=Cn}),lt(["drop","take"],function(e,t){Ln.prototype[e]=function(n){n=void 0===n?1:an(or(n),0);var l=this.__filtered__&&!t?new Ln(this):this.clone();return l.__filtered__?l.__takeCount__=rn(n,l.__takeCount__):l.__views__.push({size:rn(n,4294967295),type:e+(l.__dir__<0?"Right":"")}),l},Ln.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),lt(["filter","map","takeWhile"],function(e,t){var n=t+1,l=1==n||3==n;Ln.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:$o(e,3),type:n}),t.__filtered__=t.__filtered__||l,t}}),lt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Ln.prototype[e]=function(){return this[n](1).value()[0]}}),lt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Ln.prototype[e]=function(){return this.__filtered__?new Ln(this):this[n](1)}}),Ln.prototype.compact=function(){return this.filter(Gr)},Ln.prototype.find=function(e){return this.filter(e).head()},Ln.prototype.findLast=function(e){return this.reverse().find(e)},Ln.prototype.invokeMap=Fl(function(e,t){return"function"==typeof e?new Ln(this):this.map(function(n){return fl(n,e,t)})}),Ln.prototype.reject=function(e){return this.filter(Oa($o(e)))},Ln.prototype.slice=function(e,t){e=or(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Ln(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=or(t))<0?n.dropRight(-t):n.take(t-e)),n)},Ln.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ln.prototype.toArray=function(){return this.take(4294967295)},ul(Ln.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),l=/^(?:head|last)$/.test(t),o=Cn[l?"take"+("last"==t?"Right":""):t],i=l||/^find/.test(t);o&&(Cn.prototype[t]=function(){var t=this.__wrapped__,a=l?[1]:arguments,r=t instanceof Ln,u=a[0],s=r||Ma(t),d=function(e){var t=o.apply(Cn,dt([e],a));return l&&c?t[0]:t};s&&n&&"function"==typeof u&&1!=u.length&&(r=s=!1);var c=this.__chain__,p=!!this.__actions__.length,m=i&&!c,v=r&&!p;if(!i&&s){t=v?t:new Ln(this);var E=e.apply(t,a);return E.__actions__.push({func:la,args:[d],thisArg:void 0}),new Dn(E,c)}return m&&v?e.apply(this,a):(E=this.thru(d),m?l?E.value()[0]:E.value():E)})}),lt(["pop","push","shift","sort","splice","unshift"],function(e){var t=fe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);Cn.prototype[e]=function(){var e=arguments;if(l&&!this.__chain__){var o=this.value();return t.apply(Ma(o)?o:[],e)}return this[n](function(n){return t.apply(Ma(n)?n:[],e)})}}),ul(Ln.prototype,function(e,t){var n=Cn[t];if(n){var l=n.name+"";Pe.call(yn,l)||(yn[l]=[]),yn[l].push({name:t,func:n})}}),yn[Co(void 0,2).name]=[{name:"wrapper",func:void 0}],Ln.prototype.clone=function(){var e=new Ln(this.__wrapped__);return e.__actions__=To(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=To(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=To(this.__views__),e},Ln.prototype.reverse=function(){if(this.__filtered__){var e=new Ln(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ln.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ma(e),l=t<0,o=n?e.length:0,i=function(e,t,n){for(var l=-1,o=n.length;++l<o;){var i=n[l],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=rn(t,e+a);break;case"takeRight":e=an(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,r=i.end,u=r-a,s=l?r:a-1,d=this.__iteratees__,c=d.length,p=0,m=rn(u,this.__takeCount__);if(!n||!l&&o==u&&m==u)return to(e,this.__actions__);var v=[];e:for(;u--&&p<m;){for(var E=-1,_=e[s+=t];++E<c;){var T=d[E],f=T.type,y=(0,T.iteratee)(_);if(2==f)_=y;else if(!y){if(1==f)continue e;break e}}v[p++]=_}return v},Cn.prototype.at=oa,Cn.prototype.chain=function(){return na(this)},Cn.prototype.commit=function(){return new Dn(this.value(),this.__chain__)},Cn.prototype.next=function(){void 0===this.__values__&&(this.__values__=nr(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Cn.prototype.plant=function(e){for(var t,n=this;n instanceof bn;){var l=Ri(n);l.__index__=0,l.__values__=void 0,t?o.__wrapped__=l:t=l;var o=l;n=n.__wrapped__}return o.__wrapped__=e,t},Cn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ln){var t=e;return this.__actions__.length&&(t=new Ln(this)),(t=t.reverse()).__actions__.push({func:la,args:[Ki],thisArg:void 0}),new Dn(t,this.__chain__)}return this.thru(Ki)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return to(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,Pt&&(Cn.prototype[Pt]=function(){return this}),Cn}();Ve?((Ve.exports=zt)._=zt,Ke._=zt):je._=zt}).call(Y)});function K(e){var o,i,r,u,s,d,c,p,m,v,E;let{t:_,unit:T,allUnits:f,setUnits:y,index:S,focusIndex:g,setFocusIndex:P,getfloorlistdata:A,floorlist:N,occupencyOptions:O,formData:I,handleRemoveUnit:h,isMobile:C,stateId:R,formState:b,setError:D,clearErrors:L,usageCategoryMajorMenu:w,subUsageCategoryMenu:M}=e;const{data:x={}}=Digit.Hooks.pt.usePropertyMDMS(R,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory"]);let U=[];U=(null==x||null===(o=x.PropertyTax)||void 0===o||null===(i=o.UsageCategory)||void 0===i?void 0:i.filter(e=>"MIXED"!==(null==e?void 0:e.code)))||[];const[F,B]=n.useState(()=>{var e,t;const{existingUsageCategory:n}=T;if([n,null==I||null===(e=I.usageCategoryMajor)||void 0===e?void 0:e.code].includes("RESIDENTIAL"))return w(U).filter(e=>"RESIDENTIAL"===(null==e?void 0:e.code))[0];if("MIXED"!==(null==I||null===(t=I.usageCategoryMajor)||void 0===t?void 0:t.code));else if(n){const e=null==n?void 0:n.split(".");return w(U).filter(t=>(null==t?void 0:t.code)===e[0]+"."+e[1])[0]}}),{control:k,formState:H,watch:Y,setError:W,clearErrors:K,setValue:V}=a.useForm(),z=Y();n.useEffect(()=>{var e;const t=null==I||null===(e=I.usageCategoryMajor)||void 0===e?void 0:e.code;t!==(null==F?void 0:F.code)&&"MIXED"!==t&&B(null==I?void 0:I.usageCategoryMajor)},[null==I||null===(r=I.usageCategoryMajor)||void 0===r?void 0:r.code]),n.useEffect(()=>{var e;"RESIDENTIAL"===(null==F?void 0:F.code)?V("usageCategory",F):"RESIDENTIAL"===(null===(e=z.usageCategory)||void 0===e?void 0:e.code)&&V("usageCategory",null)},[F]),n.useEffect(()=>{var e,t,n;let l=Object.keys(z);const o={};l.forEach(e=>o[e]=T[e]),j.isEqual(z,o)||y(e=>e.map(e=>e.key===T.key?{...e,...z}:e));for(let e in z)H.errors[e]?(["builtUpArea","arv"].includes(e)&&!isNaN(z[e])&&H.errors[e].type===e.toUpperCase()+"_INVALID"||z[e]&&H.errors[e].type===e.toUpperCase()+"_REQUIRED")&&K([e]):z[e]?["builtUpArea","arv"].includes(e)&&isNaN(z[e])&&W(e,{type:e.toUpperCase()+"_INVALID",message:_("ERR_DEFAULT_INPUT_FIELD_MSG")}):W(e,{type:e.toUpperCase()+"_REQUIRED",message:_("CORE_COMMON_REQUIRED_ERRMSG")});!Object.keys(H.errors).length||null!=b&&null!==(e=b.errors)&&void 0!==e&&e.units?(null==b||null===(t=b.errors)||void 0===t||null===(n=t.units)||void 0===n?void 0:n.type)!==""+T.key||Object.keys(H.errors).length||L("units"):D("units",{type:""+T.key,message:Object.keys(H.errors).join()})},[z]);const{errors:G}=H,X=C?{width:"70%",marginLeft:"4%",fontSize:"12px"}:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return l.createElement("div",{style:{marginBottom:"16px"}},l.createElement("div",{className:"label-field-pair"},l.createElement("h2",{className:"card-label card-label-smaller",style:{color:"#505A5F"}},"Unit ",null==T?void 0:T.order)),l.createElement("div",{style:{border:"1px solid #E3E3E3",padding:"16px",marginTop:"8px"}},f.length>1?l.createElement(t.LinkButton,{label:l.createElement(t.DeleteIcon,{style:{float:"right",position:"relative",bottom:"5px"},fill:1!=f.length?"#494848":"#FAFAFA"}),style:{marginBottom:"16px",padding:"5px",cursor:"pointer",textAlign:"right"},onClick:e=>h(T)}):null,l.createElement("div",{style:{marginTop:"30px"}},l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},_("PT_FORM2_SELECT_FLOOR")+" *"),l.createElement(a.Controller,{name:"floorNo",defaultValue:T.floorNo,control:k,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:!1,option:A(N)||[],select:e.onChange,optionKey:"i18nKey",onBlur:e.onBlur,t:_})})),l.createElement(t.CardLabelError,{style:X},H.touched.floorNo?null==G||null===(u=G.floorNo)||void 0===u?void 0:u.message:"")),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},_("PT_PROPERTY_DETAILS_USAGE_TYPE_HEADER")+" *"),l.createElement(t.Dropdown,{className:"form-field",selected:F,disable:"MIXED"!==(null==I||null===(s=I.usageCategoryMajor)||void 0===s?void 0:s.code),option:w(U),select:B,optionKey:"i18nKey",t:_})),l.createElement(t.LabelFieldPair,{style:["RESIDENTIAL"].includes(null==F?void 0:F.code)?{display:"none"}:{}},l.createElement(t.CardLabel,{className:"card-label-smaller"},_("PT_FORM2_USAGE_TYPE")+" *"),l.createElement(a.Controller,{name:"usageCategory",defaultValue:null===(d=M(F))||void 0===d?void 0:d.filter(e=>(null==e?void 0:e.code)===T.existingUsageCategory)[0],control:k,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:!(null!=F&&F.code),option:M(F),select:e.onChange,optionKey:"i18nKey",onBlur:e.onBlur,t:_})})),["RESIDENTIAL"].includes(null==F?void 0:F.code)?null:l.createElement(t.CardLabelError,{style:X},H.touched.usageCategory?null==G||null===(c=G.usageCategory)||void 0===c?void 0:c.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},_("PT_FORM2_OCCUPANCY")+" *"),l.createElement(a.Controller,{name:"occupancyType",defaultValue:null==T?void 0:T.occupancyType,control:k,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:1===(null==O?void 0:O.length),option:O,select:e.onChange,optionKey:"i18nKey",onBlur:e.onBlur,t:_})})),l.createElement(t.CardLabelError,{style:X},H.touched.occupancyType?null==G||null===(p=G.occupancyType)||void 0===p?void 0:p.message:""),"RENTED"===(null===(m=z.occupancyType)||void 0===m?void 0:m.code)?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},_("PT_FORM2_TOTAL_ANNUAL_RENT")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{name:"arv",defaultValue:T.arv,control:k,render:e=>l.createElement(t.TextInput,{type:"text",name:"unit-area",onChange:t=>{e.onChange(t.target.value),P({index:S,type:"arv"})},value:e.value,autoFocus:g.index===S&&"arv"===g.type,onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:X},H.touched.arv?null==G||null===(v=G.arv)||void 0===v?void 0:v.message:"")):null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},_("PT_FORM2_BUILT_AREA")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{name:"builtUpArea",defaultValue:null==T?void 0:T.builtUpArea,control:k,render:e=>l.createElement(t.TextInput,{type:"text",name:"unit-area",onChange:t=>{e.onChange(t.target.value),P({index:S,type:"builtUpArea"})},value:e.value,autoFocus:g.index===S&&"builtUpArea"===g.type,onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:X},H.touched.builtUpArea?null==G||null===(E=G.builtUpArea)||void 0===E?void 0:E.message:"")))}function V(e){var o,i,a,r,u;let{t:s,document:d,setDocuments:p,setError:m,documents:v,action:E,formData:_,setFormError:T,clearFormErrors:f,config:y,formState:S,fromRawData:g,id:P,propertyInitialValues:A}=e;const N=null==v?void 0:v.filter(e=>{var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==d?void 0:d.code)})[0],[O,I]=(Digit.ULBService.getCurrentTenantId(),n.useState(N?{...N,active:"ACTIVE"===(null==N?void 0:N.status),code:null==N?void 0:N.documentType}:1===(null==d||null===(o=d.dropdownData)||void 0===o?void 0:o.length)?null==d?void 0:d.dropdownData[0]:{})),[h,C]=n.useState(null),[R,b]=n.useState(()=>(null==N?void 0:N.fileStoreId)||null),{dropdownData:D}=d,{dropdownFilter:L,enabledActions:w,filterCondition:M}=(null==d?void 0:d.additionalDetails)||{};var x=D;const[U,F]=n.useState(!1),B=()=>{var e,t;let n=null===(e=S.errors)||void 0===e||null===(t=e[y.key])||void 0===t?void 0:t.type;Array.isArray(n)||(n=[]),n.includes(null==d?void 0:d.code)&&(n=n.filter(e=>e!=(null==d?void 0:d.code)),n.length?T(y.key,{type:n}):f(y.key))};if(n.useEffect(()=>{null!=O&&O.code&&p(e=>{const t=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==O?void 0:O.code));return 0===(null==R?void 0:R.length)||null===R?t:[...null==t?void 0:t.filter(e=>(null==e?void 0:e.fileStoreId)!==R),{documentType:null==O?void 0:O.code,fileStoreId:R,documentUid:R}]}),U?U&&B():R&&null!=O&&O.code?R&&null!=O&&O.code&&B():(()=>{var e,t;let n=null===(e=S.errors)||void 0===e||null===(t=e[y.key])||void 0===t?void 0:t.type;Array.isArray(n)||(n=[]),n.includes(d.code)||(n.push(d.code),T(y.key,{type:n}))})()},[R,O,U]),n.useEffect(()=>{if("update"===E){var e,t;const n=null==_||null===(e=_.originalData)||void 0===e||null===(t=e.documents)||void 0===t?void 0:t.filter(e=>e.documentType.includes(null==d?void 0:d.code))[0],l=x.filter(e=>e.code===(null==n?void 0:n.documentType)).map(e=>{var t;return{...e,i18nKey:null==e||null===(t=e.code)||void 0===t?void 0:t.replaceAll(".","_")}})[0];l?(I(l),b(null==n?void 0:n.fileStoreId)):F(!0)}},[]),n.useEffect(()=>{!function(){try{m(null);const e=function(){if(h){const e=function(){if(h.size>=5242880)m(s("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=c(function(){return b(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",h,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?b(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):m(s("CS_FILE_UPLOAD_ERROR"))})},function(){m(s("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[h]),n.useEffect(()=>{U&&b(null)},[U]),n.useEffect(()=>{var e,t,n;"OWNER.TRANSFERREASONDOCUMENT"===d.code&&(null==O||null===(e=O.code)||void 0===e?void 0:e.split(".")[2])!==(null==_||null===(t=_.additionalDetails)||void 0===t||null===(n=t.reasonForTransfer)||void 0===n?void 0:n.code)&&(I(null),b(null))},[null==_||null===(i=_.additionalDetails)||void 0===i||null===(a=i.reasonForTransfer)||void 0===a?void 0:a.code]),M){const{filterValue:e,jsonPath:t,onArray:n,arrayAttribute:l,formDataPath:o,formArrayAttrPath:i}=M;if("create"===E){const t=null==o?void 0:o.reduce((e,t)=>t.charAt(0).toUpperCase()+t.slice(1)==="PropertyType"?e.PropertyType:null==e?void 0:e[t],_);let l;if(t){if(n){const n=null==t?void 0:t.map(e=>i.reduce((e,t)=>null==e?void 0:e[t],e)||e);l=null==n?void 0:n.every(t=>e.includes(t))}else l=null==e?void 0:e.includes(t);if(l!==U&&F(l),l)return null}}if("update"===E){var k;const a=g?t:null==t?void 0:t.split("Properties[0].propertyDetails[0].")[1],r=(null==a||null===(k=a.split("."))||void 0===k?void 0:k.map(e=>{var t;return e.includes("[")?null===(t=e.split("[")[1])||void 0===t?void 0:t.split("]")[0]:e})).reduce((e,t)=>e[t],null==_?void 0:_.originalData),u=null==o?void 0:o.reduce((e,t)=>t.charAt(0).toUpperCase()+t.slice(1)==="PropertyType"?e.PropertyType:null==e?void 0:e[t],_);let s;if(r){if(n)if(null!=w&&w[E].disableUpload)s=null==r?void 0:r.every(t=>null==e?void 0:e.includes(t[l]));else{const t=null==u?void 0:u.map(e=>i.reduce((e,t)=>null==e?void 0:e[t],e)||e);s=null==t?void 0:t.every(t=>null==e?void 0:e.includes(t))}else s=null==e?void 0:e.includes(r);if(s!==U&&F(s),s)return null}}}if(L){const{formDataPath:e,formArrayAttrPath:t,onArray:n,parentJsonpath:l,parentArrayJsonPath:o}=L;if(["create","update"].includes(E))if(null!=w&&w[E].disableUpload)if(n){const e=(null==o?void 0:o.split("Properties[0].propertyDetails[0].")[1].split(".")).reduce((e,t)=>e[t],null==_?void 0:_.originalData).map(e=>l.split(".").reduce((e,t)=>e[t],e));x=D.filter(t=>t.parentValue.some(t=>e.includes(t)))}else{const e=(null==l?void 0:l.split("Properties[0].propertyDetails[0].")[1].split(".")).reduce((e,t)=>e[t],null==_?void 0:_.originalData);x=D.filter(t=>t.parentValue.includes(e))}else{const l=e,o=null==l?void 0:l.reduce((e,t)=>null==e?void 0:e[t],_),i=t;if(o)if(n){const e=o.map(e=>(null==i?void 0:i.reduce((e,t)=>e[t],e))||e);x=D.filter(t=>t.parentValue.some(t=>e.includes(t)))}else x=D.filter(e=>e.parentValue.includes(o))}}return 0===(null===(r=x)||void 0===r?void 0:r.length)?(B(),null):("OWNER.TRANSFERREASONDOCUMENT"===d.code&&(x=x.filter(e=>{var t,n,l;return(null===(t=e.code)||void 0===t?void 0:t.split(".")[2])===(null==_||null===(n=_.additionalDetails)||void 0===n||null===(l=n.reasonForTransfer)||void 0===l?void 0:l.code)})),l.createElement("div",{style:{marginBottom:"24px"}},null!=d&&d.hasDropdown?l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},s(null==d?void 0:d.code.replaceAll(".","_"))+"  *"),l.createElement(t.Dropdown,{className:"form-field",selected:O,disable:0===(null===(u=x)||void 0===u?void 0:u.length)||!!(null!=A&&A.documents&&(null==A?void 0:A.documents.length)>0&&(null==A?void 0:A.documents.filter(e=>e.documentType.includes(null==d?void 0:d.code)).length)>0)&&(null==w?void 0:w[E].disableDropdown),option:x.map(e=>{var t;return{...e,i18nKey:null===(t=e.code)||void 0===t?void 0:t.replaceAll(".","_")}}),select:e=>I(e),optionKey:"i18nKey",t:s})):null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"}),l.createElement("div",{className:"field"},l.createElement(t.UploadFile,{onUpload:function(e){C(e.target.files[0])},onDelete:()=>{b(null)},id:P,message:R?"1 "+s("CS_ACTION_FILEUPLOADED"):s("CS_ACTION_NO_FILEUPLOADED"),textStyles:{width:"100%"},inputStyles:{width:"280px"},disabled:!!(null!=A&&A.documents&&(null==A?void 0:A.documents.length)>0&&(null==A?void 0:A.documents.filter(e=>e.documentType.includes(null==d?void 0:d.code)).length)>0)&&(null==w?void 0:w[E].disableUpload)||!(null!=O&&O.code),buttonType:"button",error:!R})))))}const z=()=>({name:"",mobileNumber:"",fatherOrHusbandName:"",emailId:"",permanentAddress:"",relationship:"",ownerType:"",gender:"",isCorrespondenceAddress:!1,key:Date.now()}),G=e=>{var o,i,r,u,s,d,c,p,m,v,E,_,T,f,y,S,g,P,A,N,O,I,h,C,R,b,D,L,w,x,U,F,B,k,H,Y,W,K,V,z;const{owner:G,index:X,focusIndex:q,allOwners:$,setFocusIndex:Z,removeOwner:Q,setOwners:J,t:ee,mdmsData:te,formData:ne,config:le,setError:oe,clearErrors:ie,formState:ae,menu:re,isEditScreen:ue}=e,{originalData:se={}}=ne,{institution:de={}}=se,{control:ce,formState:pe,watch:me,trigger:ve}=a.useForm(),Ee=me(),{errors:_e}=pe;G.institution={name:null!=G&&null!==(o=G.institution)&&void 0!==o&&o.name?null==Ee||null===(i=Ee.institution)||void 0===i?void 0:i.name:null==de?void 0:de.name},G.institution.type={active:!0,code:(null==Ee||null===(r=Ee.institution)||void 0===r||null===(u=r.type)||void 0===u?void 0:u.code)||(null==de||null===(s=de.type)||void 0===s?void 0:s.code),i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+M((null==Ee||null===(d=Ee.institution)||void 0===d||null===(c=d.type)||void 0===c?void 0:c.code)||(null==de?void 0:de.type)||""),name:ee("COMMON_MASTERS_OWNERSHIPCATEGORY_"+M((null==Ee||null===(p=Ee.institution)||void 0===p||null===(m=p.type)||void 0===m?void 0:m.code)||(null==de?void 0:de.type)||""))},G.designation=null!=G&&G.designation?null==Ee?void 0:Ee.designation:null==de?void 0:de.designation;const Te=n.useMemo(()=>{var e,t,n,l,o,i;return(null==te||null===(e=te.PropertyTax)||void 0===e||null===(t=e.Documents)||void 0===t||null===(n=t.filter(e=>"OWNER.SPECIALCATEGORYPROOF"===e.code))||void 0===n||null===(l=n[0].dropdownData)||void 0===l||null===(o=(i=l.filter(e=>{var t;return e.parentValue.includes(null==Ee||null===(t=Ee.ownerType)||void 0===t?void 0:t.code)})).map)||void 0===o?void 0:o.call(i,e=>{var t;return{i18nKey:null===(t=e.code)||void 0===t?void 0:t.replaceAll(".","_"),code:e.code}}))||[]},[te,Ee]),fe=n.useMemo(()=>{var e,t,n;return(null==te||null===(e=te.PropertyTax)||void 0===e||null===(t=e.OwnerType)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.call(t,e=>({i18nKey:""+e.code.replaceAll("PROPERTY","COMMON_MASTERS").replaceAll(".","_"),code:e.code})))||[]},[te]);(null==fe?void 0:fe.length)>0&&(fe&&fe.sort((e,t)=>e.code.localeCompare(t.code)),null==fe||fe.forEach((e,t)=>{e.order="NONE"==e.code?0:t+1}),fe.sort(function(e,t){return e.order-t.order}));const ye=n.useMemo(()=>{var e;return null==ne||null===(e=ne.ownershipCategory)||void 0===e?void 0:e.code.includes("INDIVIDUAL")},[null==ne||null===(v=ne.ownershipCategory)||void 0===v?void 0:v.code]),Se=n.useMemo(()=>{var e,t,n;const l=null==ne||null===(e=ne.ownershipCategory)||void 0===e?void 0:e.code,o=null==te||null===(t=te.PropertyTax)||void 0===t||null===(n=t.SubOwnerShipCategory)||void 0===n?void 0:n.filter(e=>{var t;return null==e||null===(t=e.ownerShipCategory)||void 0===t?void 0:t.includes(l)});return null==o?void 0:o.map(e=>{var t;return{...e,i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+(null===(t=e.code)||void 0===t?void 0:t.replaceAll(".","_"))}})},[te,null==ne?void 0:ne.ownershipCategory]);n.useEffect(()=>{ve()},[]);const[ge,Pe]=l.useState({});n.useEffect(()=>{let e=ye?{}:{ownerType:{code:"NONE"}};j.isEqual(ge,Ee)||(Pe({...Ee}),J(t=>t.map(t=>t.key&&t.key===G.key?{...t,...Ee,...e}:{...t})),ve())},[Ee]),n.useEffect(()=>{var e;Object.keys(_e).length&&!j.isEqual((null===(e=ae.errors[le.key])||void 0===e?void 0:e.type)||{},_e)?oe(le.key,{type:_e}):!Object.keys(_e).length&&ae.errors[le.key]&&ie(le.key)},[_e]);const Ae={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};return l.createElement(l.Fragment,null,l.createElement("div",{style:{marginBottom:"16px"}},l.createElement("div",{className:"label-field-pair"},l.createElement("h2",{className:"card-label card-label-smaller",style:{color:"#505A5F"}},ye?"Owner "+(null!=ne&&null!==(E=ne.ownershipCategory)&&void 0!==E&&null!==(_=E.code)&&void 0!==_&&_.includes("MULTIPLE")?X+1:""):"Authorised Person Details")),l.createElement("div",{style:{border:"1px solid #E3E3E3",padding:"16px",marginTop:"8px"}},(null==$?void 0:$.length)>2?l.createElement("div",{onClick:()=>Q(G),style:{marginBottom:"16px",padding:"5px",cursor:"pointer",textAlign:"right"}},"X"):null,ye?null:l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_INSTITUTION_NAME")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:ce,name:"institution.name",defaultValue:ue?null!=de&&de.name?de.name:null==G?void 0:G.name:null,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG"),validate:{pattern:e=>!!/^[a-zA-Z_@./()#&+-\s]*$/.test(e)||ee("ERR_DEFAULT_INPUT_FIELD_MSG")}},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ue,name:"institution.name",autoFocus:q.index===(null==G?void 0:G.key)&&"institution.name"===q.type,onChange:t=>{e.onChange(t.target.value),Z({index:G.key,type:"institution.name"})},onBlur:t=>{Z({index:-1}),e.onBlur(t)}})}))),l.createElement(t.CardLabelError,{style:Ae},null!==(T=pe.touched)&&void 0!==T&&null!==(f=T.institution)&&void 0!==f&&f.name?null==_e||null===(y=_e.institution)||void 0===y||null===(S=y.name)||void 0===S?void 0:S.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_INSTITUTION_TYPE")+" *"),l.createElement(a.Controller,{control:ce,name:"institution.type",defaultValue:ue?{active:!0,code:null==de?void 0:de.type,i18nKey:"COMMON_MASTERS_OWNERSHIPCATEGORY_"+M((null==de?void 0:de.type)||""),name:ee("COMMON_MASTERS_OWNERSHIPCATEGORY_"+M((null==de?void 0:de.type)||""))}:null,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:e.onChange,onBlur:e.onBlur,option:Se,optionKey:"i18nKey",disable:ue,t:ee})})),l.createElement(t.CardLabelError,{style:Ae},null!==(g=pe.touched)&&void 0!==g&&null!==(P=g.institution)&&void 0!==P&&P.type?null==_e||null===(A=_e.institution)||void 0===A||null===(N=A.type)||void 0===N?void 0:N.message:"")),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_OWNER_NAME")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:ce,name:"name",defaultValue:null==G?void 0:G.name,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG"),validate:{pattern:e=>!!/^[a-zA-Z\s]*$/.test(e)||ee("ERR_DEFAULT_INPUT_FIELD_MSG")}},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ue,autoFocus:q.index===(null==G?void 0:G.key)&&"name"===q.type,onChange:t=>{e.onChange(t.target.value),Z({index:G.key,type:"name"})},onBlur:t=>{Z({index:-1}),e.onBlur(t)}})}))),l.createElement(t.CardLabelError,{style:Ae},pe.touched.name?null==_e||null===(O=_e.name)||void 0===O?void 0:O.message:""),ye?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_FORM3_GENDER")+" *"),l.createElement(a.Controller,{control:ce,name:"gender",defaultValue:null==G?void 0:G.gender,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:e.onChange,disable:ue,onBlur:e.onBlur,option:re,optionKey:"i18nKey",t:ee})})),l.createElement(t.CardLabelError,{style:Ae},pe.touched.gender?null==_e||null===(I=_e.gender)||void 0===I?void 0:I.message:"")):l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_LANDLINE_NUMBER_FLOATING_LABEL")+(ye?"":" *")),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:ce,name:"altContactNumber",defaultValue:null==G?void 0:G.altContactNumber,rules:ye?{}:{required:ee("CORE_COMMON_REQUIRED_ERRMSG"),validate:{pattern:e=>!!/^[0-9]{11}$/i.test(e)||ee("ERR_DEFAULT_INPUT_FIELD_MSG")}},render:e=>l.createElement(t.MobileNumber,{value:e.value,hideSpan:!0,disable:ue,maxLength:11,autoFocus:q.index===(null==G?void 0:G.key)&&"altContactNumber"===q.type,onChange:t=>{e.onChange(t),Z({index:G.key,type:"altContactNumber"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ae},pe.touched.altContactNumber?null==_e||null===(h=_e.altContactNumber)||void 0===h?void 0:h.message:"")),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_FORM3_MOBILE_NUMBER")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:ce,name:"mobileNumber",defaultValue:null==G?void 0:G.mobileNumber,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG"),validate:e=>!!/^[6789]\d{9}$/.test(e)||ee("ERR_DEFAULT_INPUT_FIELD_MSG")},render:e=>l.createElement(t.MobileNumber,{value:e.value,disable:ue,autoFocus:q.index===(null==G?void 0:G.key)&&"mobileNumber"===q.type,onChange:t=>{e.onChange(t),Z({index:G.key,type:"mobileNumber"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ae},pe.touched.mobileNumber?null==_e||null===(C=_e.mobileNumber)||void 0===C?void 0:C.message:""),ye?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_SEARCHPROPERTY_TABEL_GUARDIANNAME")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:ce,name:"fatherOrHusbandName",defaultValue:null==G?void 0:G.fatherOrHusbandName,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG"),validate:{pattern:e=>!!/^\w+( +\w+)*$/.test(e)||ee("ERR_DEFAULT_INPUT_FIELD_MSG")}},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ue,autoFocus:q.index===(null==G?void 0:G.key)&&"fatherOrHusbandName"===q.type,onChange:t=>{e.onChange(t.target.value),Z({index:G.key,type:"fatherOrHusbandName"})},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ae},pe.touched.fatherOrHusbandName?null==_e||null===(R=_e.fatherOrHusbandName)||void 0===R?void 0:R.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_FORM3_RELATIONSHIP")+" *"),l.createElement(a.Controller,{control:ce,name:"relationship",defaultValue:null==G?void 0:G.relationship,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:e.onChange,onBlur:e.onBlur,disable:ue,option:[{i18nKey:"PT_FORM3_FATHER",code:"FATHER"},{i18nKey:"PT_FORM3_HUSBAND",code:"HUSBAND"}],optionKey:"i18nKey",t:ee})})),l.createElement(t.CardLabelError,{style:Ae},pe.touched.relationship?null==_e||null===(b=_e.relationship)||void 0===b?void 0:b.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_FORM3_SPECIAL_CATEGORY")+" *"),l.createElement(a.Controller,{control:ce,name:"ownerType",defaultValue:null==G?void 0:G.ownerType,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:e.onChange,onBlur:e.onBlur,option:fe,disable:ue,optionKey:"i18nKey",t:ee})})),l.createElement(t.CardLabelError,{style:Ae},pe.touched.ownerType?null==_e||null===(D=_e.ownerType)||void 0===D?void 0:D.message:"")):l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("TL_NEW_DESIG_OWNER_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:ce,name:"designation",defaultValue:ue?(null==de?void 0:de.designation)||"":null,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ue,autoFocus:q.index===(null==G?void 0:G.key)&&"designation"===q.type,onChange:t=>{e.onChange(t.target.value),Z({index:G.key,type:"designation"})},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ae},pe.touched.designation?null==_e||null===(L=_e.designation)||void 0===L?void 0:L.message:"")),null!==(w=Ee.ownerType)&&void 0!==w&&w.code&&"NONE"!==(null===(x=Ee.ownerType)||void 0===x?void 0:x.code)?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_OWNERSHIP_DOCUMENT_TYPE")+" *"),l.createElement(a.Controller,{control:ce,name:"documents.documentType",defaultValue:null==G||null===(U=G.documents)||void 0===U?void 0:U.documentType,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,select:e.onChange,disable:ue,onBlur:e.onBlur,option:Te,optionKey:"i18nKey",t:ee})})),l.createElement(t.CardLabelError,{style:Ae},null!==(F=pe.touched.documents)&&void 0!==F&&F.documentType?null==_e||null===(B=_e.documents)||void 0===B||null===(k=B.documentType)||void 0===k?void 0:k.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_OWNERSHIP_DOCUMENT_ID")+" *"),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:ce,name:"documents.documentUid",defaultValue:null==G||null===(H=G.documents)||void 0===H?void 0:H.documentUid,rules:{required:ee("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ue,autoFocus:q.index===(null==G?void 0:G.key)&&"documents.documentUid"===q.type,onChange:t=>{e.onChange(t),Z({index:G.key,type:"documents.documentUid"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ae},null!==(Y=pe.touched.documents)&&void 0!==Y&&Y.documentUid?null==_e||null===(W=_e.documents)||void 0===W||null===(K=W.documentUid)||void 0===K?void 0:K.message:"")," "):null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_OWNERSHIP_INFO_EMAIL_ID")),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:ce,name:"emailId",defaultValue:null==G?void 0:G.emailId,rules:{validate:e=>!!(e&&/^[^\s@]+@[^\s@]+$/.test(e)||!e)||ee("ERR_DEFAULT_INPUT_FIELD_MSG")},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ue,autoFocus:q.index===(null==G?void 0:G.key)&&"emailId"===q.type,onChange:t=>{e.onChange(t),Z({index:G.key,type:"emailId"})},labelStyle:{marginTop:"unset"},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ae},pe.touched.emailId?null==_e||null===(V=_e.emailId)||void 0===V?void 0:V.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},ee("PT_OWNERSHIP_INFO_CORR_ADDR")+(ye?"":" *")),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:ce,name:"correspondenceAddress",defaultValue:null==G?void 0:G.correspondenceAddress,rules:ye?{}:{required:ee("CORE_COMMON_REQUIRED_ERRMSG")},render:e=>l.createElement(t.TextInput,{value:e.value,disable:ue,autoFocus:q.index===(null==G?void 0:G.key)&&"correspondenceAddress"===q.type,onChange:t=>{e.onChange(t),Z({index:G.key,type:"correspondenceAddress"})},onBlur:e.onBlur})}))),l.createElement(t.CardLabelError,{style:Ae},pe.touched.correspondenceAddress?null==_e||null===(z=_e.correspondenceAddress)||void 0===z?void 0:z.message:""))))},X={searchId:{propertyIds:{type:"text",label:"PT_PROPERTY_UNIQUE_ID",placeHolder:"PT_PROPERTY_UNIQUE_ID_PLACEHOLDER",validation:{pattern:{value:/[A-Za-z]{2}\-[A-Za-z]{2}\-[0-9]{4}\-[0-9]{2}\-[0-9]{2}\-[0-9]{6}/,message:"ERR_INVALID_PROPERTY_ID"}}},oldPropertyId:{type:"text",label:"PT_EXISTING_PROPERTY_ID",placeholder:"PT_EXISTING_PROPERTY_ID_PLACEHOLDER",validation:{pattern:{value:/[A-Za-z]{2}\-[A-Za-z]{2}\-[0-9]{4}\-[0-9]{2}\-[0-9]{2}\-[0-9]{6}/,message:"ERR_INVALID_PROPERTY_ID"}}},mobileNumber:{type:"number",label:"PT_HOME_SEARCH_RESULTS_OWN_MOB_LABEL",placeHolder:"PT_HOME_SEARCH_RESULTS_OWN_MOB_PLACEHOLDER",validation:{minLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},maxLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}}}},searchDetail:{locality:{type:"custom",label:"PT_SEARCH_LOCALITY",placeHolder:"PT_SEARCH_LOCALITY_PLACEHOLDER",validation:{required:"PTLOCALITYMANDATORY"},customComponent:t.Localities,customCompProps:{boundaryType:"revenue",keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10"},disableLoader:!0}},doorNo:{type:"text",label:"PT_SEARCHPROPERTY_TABEL_DOOR_NO",placeHolder:"PT_SEARCH_DOOR_NO_PLACEHOLDER",validation:{pattern:{value:"[A-Za-z0-9#,/ -()]{1,63}",message:"ERR_INVALID_DOOR_NO"}}},name:{type:"text",label:"PT_SEARCHPROPERTY_TABEL_OWNERNAME",placeHolder:"PT_SEARCH_OWNER_NAME_PLACEHOLDER",validation:{minLength:{value:3,message:"PT_MIN_3CHAR"},pattern:{value:"[A-Za-z .`'-]{3,63}",message:"PAYMENT_INVALID_NAME"}}}}},q={propertyIds:"",mobileNumber:"",oldPropertyId:"",locality:"",name:"",doorNo:""},$=()=>{const{t:e}=o.useTranslation(),i=Digit.ULBService.getCurrentTenantId(),[a,r]=n.useState({}),[u,s]=n.useState(q),[d,c]=n.useState("searchId"),[p,m]=n.useState(null),v=n.memo(Digit.ComponentRegistryService.getComponent("PropertySearchForm")),E=n.memo(Digit.ComponentRegistryService.getComponent("PropertySearchResults")),{data:_}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"DIGIT-UI","HelpText",{select:e=>{var t,n,l;return null==e||null===(t=e["DIGIT-UI"])||void 0===t||null===(n=t.HelpText)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.PT}}),T=n.useCallback(()=>{s(q),r({}),m(null)});n.useEffect(()=>{1==sessionStorage.getItem("searchDetailValue")&&"searchId"===d&&c("searchDetail")},[d]);const f=n.useCallback(e=>{s(e),Object.keys(e).filter(t=>e[t]&&"object"!=typeof e[t]).length>0?(r(Object.keys(e).filter(t=>e[t]).reduce((t,n)=>({...t,[n]:"object"==typeof e[n]?e[n].code:e[n]}),{})),m(null)):m({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"})});return l.createElement(l.Fragment,null,l.createElement(t.Header,null,e("SEARCH_PROPERTY")),l.createElement(v,{t:e,payload:u,searchBy:d,setSearchBy:c,PTSearchFields:X,tenantId:i,onSubmit:f,onReset:T}),Object.keys(a).length>0&&l.createElement(E,{t:e,showToast:p,setShowToast:m,tenantId:i,payload:a,ptSearchConfig:{..._}}),p&&l.createElement(t.Toast,{error:p.error,warning:p.warning,label:e(p.label),onClose:()=>{m(null)}}))},Z=e=>{var n,i,a,r,u,s,d,c,p,m;let{application:v}=e;const{t:E}=o.useTranslation();return l.createElement(t.Card,null,l.createElement(t.KeyNote,{noteStyle:{fontSize:"24px",fontWeight:"700"},keyValue:E("CS_PAYMENT_AMOUNT_PAID_WITHOUT_SYMBOL"),note:"₹ "+(null==v||null===(n=v.paymentDetails)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.totalAmountPaid)}),l.createElement(t.KeyNote,{keyValue:E("PT_SEARCHPROPERTY_TABEL_PID"),note:E(null==v||null===(a=v.paymentDetails)||void 0===a||null===(r=a[0])||void 0===r||null===(u=r.bill)||void 0===u?void 0:u.consumerCode)}),l.createElement(t.KeyNote,{keyValue:E("PT_OWNERS_NAME"),note:null==v||null===(s=v.owners)||void 0===s?void 0:s.map(e=>null==e?void 0:e.name).join(",")}),l.createElement(t.KeyNote,{keyValue:E("PT_RECEIPT_DATE_LABEL"),note:w(null==v||null===(d=v.paymentDetails)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.receiptDate)||E("CS_NA")}),l.createElement(t.KeyNote,{keyValue:E("PT_RECEIPT_NO_LABEL"),note:E(null==v||null===(p=v.paymentDetails)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.receiptNumber)}),l.createElement(t.SubmitBar,{label:E("PT_DOWNLOAD_RECEIPT"),onSubmit:e=>{var t,n,l;return function(e,t,n,l){try{return t=t||Digit.ULBService.getCurrentTenantId(),Promise.resolve(Digit.Utils.downloadReceipt(e,"PT","consolidatedreceipt",t)).then(function(){})}catch(e){return Promise.reject(e)}}(null==v||null===(t=v.paymentDetails)||void 0===t||null===(n=t[0])||void 0===n||null===(l=n.bill)||void 0===l?void 0:l.consumerCode,null==v?void 0:v.tenantId)}}))},Q=()=>{var e,n,i,a;const{t:r}=o.useTranslation(),u=Digit.ULBService.getCurrentTenantId(),s=Digit.Hooks.pt.usePropertySearch({}),d=null==s||null===(e=s.data)||void 0===e||null===(n=e.Properties)||void 0===n?void 0:n.map(e=>e.propertyId).join(","),{data:c,isLoading:p}=Digit.Hooks.pt.useMyPropertyPayments({tenantId:u,filters:{consumerCodes:d}},{enabled:(null==s||null===(i=s.data)||void 0===i?void 0:i.Properties.length)>0,propertyData:null==s||null===(a=s.data)||void 0===a?void 0:a.Properties});if(p||null!=s&&s.isLoading)return l.createElement(t.Loader,null);const m=c&&(null==c?void 0:c.Payments)||[];return l.createElement(l.Fragment,null,l.createElement(t.Header,null,r("PT_MY_PAYMENTS_HEADER")+" "+(m?"("+m.length+")":"")),l.createElement("div",null,(null==m?void 0:m.length)>0&&m.map((e,t)=>l.createElement("div",{key:t},l.createElement(Z,{application:e}))),!(null!=m&&m.length)>0&&l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},r("PT_NO_APPLICATION_FOUND_MSG"))))},J=[{screenPath:"property/new-application/acknowledgement"},{screenPath:"property/edit-application/acknowledgement"}],ee=()=>{var e,n,a,r,s,d,c,p,m,v,E,_,T,f,y,S,g,P,A,N;const{path:O,...I}=i.useRouteMatch(),{t:h}=o.useTranslation(),C=null===(e=Digit)||void 0===e||null===(n=e.ComponentRegistryService)||void 0===n?void 0:n.getComponent("PTCreateProperty"),R=null===(a=Digit)||void 0===a||null===(r=a.ComponentRegistryService)||void 0===r?void 0:r.getComponent("PTEditProperty"),b=null===(s=Digit)||void 0===s||null===(d=s.ComponentRegistryService)||void 0===d?void 0:d.getComponent("PTSearchPropertyComponent"),D=null===(c=Digit)||void 0===c||null===(p=c.ComponentRegistryService)||void 0===p?void 0:p.getComponent("PTSearchResultsComponent"),L=null===(m=Digit)||void 0===m||null===(v=m.ComponentRegistryService)||void 0===v?void 0:v.getComponent("PTApplicationDetails"),w=null===(E=Digit)||void 0===E||null===(_=E.ComponentRegistryService)||void 0===_?void 0:_.getComponent("PTMyApplications"),M=null===(T=Digit)||void 0===T||null===(f=T.ComponentRegistryService)||void 0===f?void 0:f.getComponent("PTMyProperties"),x=null===(y=Digit)||void 0===y||null===(S=y.ComponentRegistryService)||void 0===S?void 0:S.getComponent("PTMutateProperty"),U=null===(g=Digit)||void 0===g||null===(P=g.ComponentRegistryService)||void 0===P?void 0:P.getComponent("PropertyInformation"),F=null===(A=Digit)||void 0===A||null===(N=A.ComponentRegistryService)||void 0===N?void 0:N.getComponent("PropertyOwnerHistory");return l.createElement("span",{className:"pt-citizen"},l.createElement(i.Switch,null,l.createElement(t.AppContainer,null,function(e){return void 0===e&&(e=[]),e.filter(e=>window.location.href.includes(e.screenPath)).length>0}(J)?"":l.createElement(t.BackButton,null,"Back"),l.createElement(t.PrivateRoute,{path:O+"/property/new-application",component:C}),l.createElement(t.PrivateRoute,{path:O+"/property/edit-application",component:R}),l.createElement(i.Route,{path:O+"/property/citizen-search",component:b}),l.createElement(i.Route,{path:O+"/property/search-results",component:D}),l.createElement(t.PrivateRoute,{path:O+"/property/application/:acknowledgementIds/:tenantId",component:L}),l.createElement(t.PrivateRoute,{path:O+"/property/my-applications",component:w}),l.createElement(t.PrivateRoute,{path:O+"/property/my-properties",component:M}),l.createElement(t.PrivateRoute,{path:O+"/property/my-payments",component:Q}),l.createElement(t.PrivateRoute,{path:O+"/property/property-mutation",component:x}),l.createElement(t.PrivateRoute,{path:O+"/property/properties/:propertyIds",component:U}),l.createElement(t.PrivateRoute,{path:O+"/property/owner-history/:tenantId/:propertyIds",component:F}),l.createElement(t.PrivateRoute,{path:O+"/property/search",component:e=>l.createElement($,u({},e,{t:h,parentRoute:O}))}))))};var te="function"==typeof Symbol&&Symbol.for,ne=te?Symbol.for("react.element"):60103,le=te?Symbol.for("react.portal"):60106,oe=te?Symbol.for("react.fragment"):60107,ie=te?Symbol.for("react.strict_mode"):60108,ae=te?Symbol.for("react.profiler"):60114,re=te?Symbol.for("react.provider"):60109,ue=te?Symbol.for("react.context"):60110,se=te?Symbol.for("react.async_mode"):60111,de=te?Symbol.for("react.concurrent_mode"):60111,ce=te?Symbol.for("react.forward_ref"):60112,pe=te?Symbol.for("react.suspense"):60113,me=te?Symbol.for("react.suspense_list"):60120,ve=te?Symbol.for("react.memo"):60115,Ee=te?Symbol.for("react.lazy"):60116,_e=te?Symbol.for("react.block"):60121,Te=te?Symbol.for("react.fundamental"):60117,fe=te?Symbol.for("react.responder"):60118,ye=te?Symbol.for("react.scope"):60119;function Se(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case ne:switch(e=e.type){case se:case de:case oe:case ae:case ie:case pe:return e;default:switch(e=e&&e.$$typeof){case ue:case ce:case Ee:case ve:case re:return e;default:return t}}case le:return t}}}function ge(e){return Se(e)===de}var Pe={AsyncMode:se,ConcurrentMode:de,ContextConsumer:ue,ContextProvider:re,Element:ne,ForwardRef:ce,Fragment:oe,Lazy:Ee,Memo:ve,Portal:le,Profiler:ae,StrictMode:ie,Suspense:pe,isAsyncMode:function(e){return ge(e)||Se(e)===se},isConcurrentMode:ge,isContextConsumer:function(e){return Se(e)===ue},isContextProvider:function(e){return Se(e)===re},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===ne},isForwardRef:function(e){return Se(e)===ce},isFragment:function(e){return Se(e)===oe},isLazy:function(e){return Se(e)===Ee},isMemo:function(e){return Se(e)===ve},isPortal:function(e){return Se(e)===le},isProfiler:function(e){return Se(e)===ae},isStrictMode:function(e){return Se(e)===ie},isSuspense:function(e){return Se(e)===pe},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===oe||e===de||e===ae||e===ie||e===pe||e===me||"object"==typeof e&&null!==e&&(e.$$typeof===Ee||e.$$typeof===ve||e.$$typeof===re||e.$$typeof===ue||e.$$typeof===ce||e.$$typeof===Te||e.$$typeof===fe||e.$$typeof===ye||e.$$typeof===_e)},typeOf:Se},Ae=W(function(e,t){"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,l=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,r=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,s=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,v=e?Symbol.for("react.memo"):60115,E=e?Symbol.for("react.lazy"):60116,_=e?Symbol.for("react.block"):60121,T=e?Symbol.for("react.fundamental"):60117,f=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var m=e.type;switch(m){case s:case d:case o:case a:case i:case p:return m;default:var _=m&&m.$$typeof;switch(_){case u:case c:case E:case v:case r:return _;default:return t}}case l:return t}}}var g=d,P=u,A=r,N=n,O=c,I=o,h=E,C=v,R=l,b=a,D=i,L=p,w=!1;function M(e){return S(e)===d}t.AsyncMode=s,t.ConcurrentMode=g,t.ContextConsumer=P,t.ContextProvider=A,t.Element=N,t.ForwardRef=O,t.Fragment=I,t.Lazy=h,t.Memo=C,t.Portal=R,t.Profiler=b,t.StrictMode=D,t.Suspense=L,t.isAsyncMode=function(e){return w||(w=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),M(e)||S(e)===s},t.isConcurrentMode=M,t.isContextConsumer=function(e){return S(e)===u},t.isContextProvider=function(e){return S(e)===r},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return S(e)===c},t.isFragment=function(e){return S(e)===o},t.isLazy=function(e){return S(e)===E},t.isMemo=function(e){return S(e)===v},t.isPortal=function(e){return S(e)===l},t.isProfiler=function(e){return S(e)===a},t.isStrictMode=function(e){return S(e)===i},t.isSuspense=function(e){return S(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===a||e===i||e===p||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===E||e.$$typeof===v||e.$$typeof===r||e.$$typeof===u||e.$$typeof===c||e.$$typeof===T||e.$$typeof===f||e.$$typeof===y||e.$$typeof===_)},t.typeOf=S}()}),Ne=W(function(e){e.exports="production"===process.env.NODE_ENV?Pe:Ae}),Oe=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;function Ce(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var Re=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(e){l[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,l,o=Ce(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))Ie.call(n,a)&&(o[a]=n[a]);if(Oe){l=Oe(n);for(var r=0;r<l.length;r++)he.call(n,l[r])&&(o[l[r]]=n[l[r]])}}return o},be="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",De=Function.call.bind(Object.prototype.hasOwnProperty),Le=function(){};if("production"!==process.env.NODE_ENV){var we=be,Me={},xe=De;Le=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function Ue(e,t,n,l,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(xe(e,i)){var a;try{if("function"!=typeof e[i]){var r=Error((l||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw r.name="Invariant Violation",r}a=e[i](t,i,l,n,null,we)}catch(e){a=e}if(!a||a instanceof Error||Le((l||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in Me)){Me[a.message]=!0;var u=o?o():"";Le("Failed "+n+" type: "+a.message+(null!=u?u:""))}}}Ue.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(Me={})};var Fe=Ue,Be=function(){};function ke(){return null}function He(){}function Ye(){}"production"!==process.env.NODE_ENV&&(Be=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}),Ye.resetWarningCache=He;var We=W(function(e){e.exports="production"!==process.env.NODE_ENV?function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,l={array:r("array"),bigint:r("bigint"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),symbol:r("symbol"),any:a(ke),arrayOf:function(e){return a(function(t,n,l,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+l+"` has invalid PropType notation inside arrayOf.");var r=t[n];if(!Array.isArray(r))return new i("Invalid "+o+" `"+a+"` of type `"+d(r)+"` supplied to `"+l+"`, expected an array.");for(var u=0;u<r.length;u++){var s=e(r,u,l,o,a+"["+u+"]",be);if(s instanceof Error)return s}return null})},element:a(function(t,n,l,o,a){var r=t[n];return e(r)?null:new i("Invalid "+o+" `"+a+"` of type `"+d(r)+"` supplied to `"+l+"`, expected a single ReactElement.")}),elementType:a(function(e,t,n,l,o){var a=e[t];return Ne.isValidElementType(a)?null:new i("Invalid "+l+" `"+o+"` of type `"+d(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(e){return a(function(t,n,l,o,a){var r;return t[n]instanceof e?null:new i("Invalid "+o+" `"+a+"` of type `"+((r=t[n]).constructor&&r.constructor.name?r.constructor.name:"<<anonymous>>")+"` supplied to `"+l+"`, expected instance of `"+(e.name||"<<anonymous>>")+"`.")})},node:a(function(e,t,n,l,o){return s(e[t])?null:new i("Invalid "+l+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(e){return a(function(t,n,l,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+l+"` has invalid PropType notation inside objectOf.");var r=t[n],u=d(r);if("object"!==u)return new i("Invalid "+o+" `"+a+"` of type `"+u+"` supplied to `"+l+"`, expected an object.");for(var s in r)if(De(r,s)){var c=e(r,s,l,o,a+"."+s,be);if(c instanceof Error)return c}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Be(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),ke;function t(t,n,l,a,r){for(var u=t[n],s=0;s<e.length;s++)if(o(u,e[s]))return null;var d=JSON.stringify(e,function(e,t){return"symbol"===c(t)?String(t):t});return new i("Invalid "+a+" `"+r+"` of value `"+String(u)+"` supplied to `"+l+"`, expected one of "+d+".")}return a(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Be("Invalid argument supplied to oneOfType, expected an instance of array."),ke;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return Be("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+p(n)+" at index "+t+"."),ke}return a(function(t,n,l,o,a){for(var r=[],u=0;u<e.length;u++){var s=(0,e[u])(t,n,l,o,a,be);if(null==s)return null;s.data&&De(s.data,"expectedType")&&r.push(s.data.expectedType)}return new i("Invalid "+o+" `"+a+"` supplied to `"+l+"`"+(r.length>0?", expected one of type ["+r.join(", ")+"]":"")+".")})},shape:function(e){return a(function(t,n,l,o,a){var r=t[n],s=d(r);if("object"!==s)return new i("Invalid "+o+" `"+a+"` of type `"+s+"` supplied to `"+l+"`, expected `object`.");for(var p in e){var m=e[p];if("function"!=typeof m)return u(l,o,a,p,c(m));var v=m(r,p,l,o,a+"."+p,be);if(v)return v}return null})},exact:function(e){return a(function(t,n,l,o,a){var r=t[n],s=d(r);if("object"!==s)return new i("Invalid "+o+" `"+a+"` of type `"+s+"` supplied to `"+l+"`, expected `object`.");var p=Re({},t[n],e);for(var m in p){var v=e[m];if(De(e,m)&&"function"!=typeof v)return u(l,o,a,m,c(v));if(!v)return new i("Invalid "+o+" `"+a+"` key `"+m+"` supplied to `"+l+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var E=v(r,m,l,o,a+"."+m,be);if(E)return E}return null})}};function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function i(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function a(e){function t(t,n,l,o,a,r,u){if(o=o||"<<anonymous>>",r=r||l,u!==be){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}return null==n[l]?t?new i(null===n[l]?"The "+a+" `"+r+"` is marked as required in `"+o+"`, but its value is `null`.":"The "+a+" `"+r+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(n,l,o,a,r)}process;var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function r(e){return a(function(t,n,l,o,a,r){var u=t[n];return d(u)!==e?new i("Invalid "+o+" `"+a+"` of type `"+c(u)+"` supplied to `"+l+"`, expected `"+e+"`.",{expectedType:e}):null})}function u(e,t,n,l,o){return new i((e||"React class")+": "+t+" type `"+n+"."+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o+"`.")}function s(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(s);if(null===t||e(t))return!0;var l=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!l)return!1;var o,i=l.call(t);if(l!==t.entries){for(;!(o=i.next()).done;)if(!s(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!s(a[1]))return!1}return!0;default:return!1}}function d(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function c(e){if(null==e)return""+e;var t=d(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function p(e){var t=c(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return i.prototype=Error.prototype,l.checkPropTypes=Fe,l.resetWarningCache=Fe.resetWarningCache,l.PropTypes=l,l}(Ne.isElement):function(){function e(e,t,n,l,o,i){if(i!==be){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ye,resetWarningCache:He};return n.PropTypes=n,n}()});const je={description:"PT_SEARCH_OR_DESC",descriptionStyles:{fontWeight:"300  ",color:"#505A5F",marginTop:"0px",textAlign:"center",marginBottom:"20px",maxWidth:"540px"}},Ke=e=>{var a,r,s;let{config:d,onSelect:c}=e;const{t:p}=o.useTranslation(),m=i.useHistory(),{action:v=0}=Digit.Hooks.useQueryParams(),[E,_]=n.useState({}),[T,f]=n.useState(null),y=null===(a=Digit.Hooks.pt.useTenants())||void 0===a?void 0:a.sort((e,t)=>{var n,l;return null==e||null===(n=e.i18nKey)||void 0===n||null===(l=n.localeCompare)||void 0===l?void 0:l.call(n,null==t?void 0:t.i18nKey)}),[S,g]=n.useState(),[P,A]=n.useState(),[N,O]=n.useState(!1),{data:I,isLoading:h,error:C}=Digit.Hooks.pt.usePropertySearchWithDue({tenantId:null==E?void 0:E.city,filters:null==E?void 0:E.filters,auth:!0,configs:{enabled:Object.keys(E).length>0,retry:!1,retryOnMount:!1,staleTime:Infinity}}),R=window.Digit.Utils.browser.isMobile();n.useEffect(()=>{var e,t;(null==E||null===(e=E.filters)||void 0===e||!e.mobileNumber||1!=(null===(t=Object.keys(null==E?void 0:E.filters))||void 0===t?void 0:t.length))&&(null==I?void 0:I.Properties.length)>0&&b.maxResultValidation&&(null==I?void 0:I.Properties.length)>b.maxPropertyResult&&!N&&f({error:!0,warning:!0,label:"ERR_PLEASE_REFINED_UR_SEARCH"})},[I]),n.useEffect(()=>{T&&"ERR_PLEASE_REFINED_UR_SEARCH"!==(null==T?void 0:T.label)&&f(null)},[v,h]),n.useLayoutEffect(()=>{const e=()=>{let t=document.querySelector("div.action-bar-wrap");t?(t.style.position="static",t.style.padding="8px 0",t.style.boxShadow="none",t.style.marginBottom="16px",t.style.textAlign="left"):setTimeout(()=>{e()},100)};e()},[]);const{data:b,isLoading:D}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"DIGIT-UI","HelpText",{select:e=>{var t,n,l;return null==e||null===(t=e["DIGIT-UI"])||void 0===t||null===(n=t.HelpText)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.PT}}),[L,w,M,x,U]=d.inputs,F=[{body:[{type:"custom",populators:{name:"addParam",defaultValue:{code:0,name:"PT_KNOW_PT_ID"},customProps:{t:p,isMandatory:!0,optionsKey:"name",options:[{code:0,name:"PT_KNOW_PT_ID"},{code:1,name:"PT_KNOW_PT_DETAIL"}]},component:(e,n)=>l.createElement(t.RadioButtons,u({},n,{selectedOption:e.value,onSelect:t=>{null==e||e.setValue("city",{}),null==e||e.setValue("locality",{}),null==e||e.setValue("mobileNumber",""),null==e||e.setValue("propertyIds",""),null==e||e.setValue("doorNo",""),null==e||e.setValue("oldPropertyId",""),null==e||e.setValue("name",""),m.replace(m.location.pathname+"?action="+(0==v?1:0))}}))}},{label:"PT_SELECT_CITY",isMandatory:!0,type:"custom",populators:{name:"city",defaultValue:null,rules:{required:!0},customProps:{t:p,isMandatory:!0,option:[...y],optionKey:"i18nKey"},component:(e,n)=>l.createElement(t.Dropdown,u({},n,{selected:e.value,select:t=>{var n,l;Digit.LocalizationService.getLocale({modules:["rainmaker-"+(null==e||null===(n=e.value)||void 0===n?void 0:n.code)],locale:Digit.StoreData.getCurrentLanguage(),tenantId:""+(null==e||null===(l=e.value)||void 0===l?void 0:l.code)}),t.code!==S&&e.setValue("locality",null),e.onChange(t)}}))}},{label:p("PT_PROVIDE_ONE_MORE_PARAM"),isInsideBox:!0,placementinbox:0,isSectionText:!0},{label:L.label,type:L.type,populators:{defaultValue:"",name:L.name,validation:null==L?void 0:L.validation},...je,isMandatory:!1,isInsideBox:!0,placementinbox:1},{label:w.label,labelChildren:l.createElement("div",{className:"tooltip",style:{paddingLeft:"10px",marginBottom:"-3px"}},"  ",l.createElement(t.InfoBannerIcon,{fill:"#0b0c0c"}),l.createElement("span",{className:"tooltiptext",style:{width:"150px",left:"230%",fontSize:"14px"}},p(w.description)+" "+(null==b?void 0:b.propertyIdFormat))),type:w.type,populators:{name:w.name,defaultValue:"",validation:null==w?void 0:w.validation},...je,isMandatory:!1,isInsideBox:!0,placementinbox:1},{label:M.label,type:M.type,populators:{name:M.name,defaultValue:"",validation:null==M?void 0:M.validation},isMandatory:!1,isInsideBox:!0,placementinbox:2}],body1:[{type:"custom",populators:{name:"addParam1",defaultValue:{code:1,name:"PT_KNOW_PT_DETAIL"},customProps:{t:p,isMandatory:!0,optionsKey:"name",options:[{code:0,name:"PT_KNOW_PT_ID"},{code:1,name:"PT_KNOW_PT_DETAIL"}]},component:(e,n)=>l.createElement(t.RadioButtons,u({},n,{selectedOption:e.value,onSelect:t=>{null==e||e.setValue("city",{}),null==e||e.setValue("locality",{}),null==e||e.setValue("mobileNumber",""),null==e||e.setValue("propertyIds",""),null==e||e.setValue("doorNo",""),null==e||e.setValue("oldPropertyId",""),null==e||e.setValue("name",""),m.replace(m.location.pathname+"?action="+(0==v?1:0))}}))}},{label:"PT_SELECT_CITY",isMandatory:!0,type:"custom",populators:{name:"city",defaultValue:null,rules:{required:!0},customProps:{t:p,isMandatory:!0,option:[...y],optionKey:"i18nKey"},component:(e,n)=>l.createElement(t.Dropdown,u({},n,{selected:e.value,select:t=>{var n,l;Digit.LocalizationService.getLocale({modules:["rainmaker-"+(null==e||null===(n=e.value)||void 0===n?void 0:n.code)],locale:Digit.StoreData.getCurrentLanguage(),tenantId:""+(null==e||null===(l=e.value)||void 0===l?void 0:l.code)}),t.code!==S&&e.setValue("locality",null),e.onChange(t)}}))}},{label:"PT_SELECT_LOCALITY",type:"custom",isMandatory:!0,populators:{name:"locality",defaultValue:"",rules:{required:!0},customProps:{},component:(e,n)=>l.createElement(t.Localities,{selectLocality:t=>{e.onChange(t)},tenantId:S,boundaryType:"revenue",keepNull:!1,optionCardStyles:{height:"600px",overflow:"auto",zIndex:"10"},selected:null==P?void 0:P.locality,disable:!S,disableLoader:!0})}},{label:p("PT_PROVIDE_ONE_MORE_PARAM"),isInsideBox:!0,placementinbox:0,isSectionText:!0},{label:U.label,type:U.type,populators:{defaultValue:"",name:U.name,validation:null==U?void 0:U.validation},isMandatory:!1,isInsideBox:!0,placementinbox:1},{label:x.label,type:x.type,populators:{defaultValue:"",name:x.name,validation:null==x?void 0:x.validation},isMandatory:!1,isInsideBox:!0,placementinbox:2}]}];if(D)return l.createElement(t.Loader,null);let B=!(b.maxResultValidation&&(null==E||null===(r=E.filters)||void 0===r||!r.mobileNumber||1!=(null===(s=Object.keys(null==E?void 0:E.filters))||void 0===s?void 0:s.length)))||(null==I?void 0:I.Properties.length)<b.maxPropertyResult&&(null==T||null!==T&&!(null!=T&&T.error));if(I&&!h&&!C&&B){var k,H,Y,W;let e={};e={...E.filters,city:E.city},(null==E||null===(k=E.filters)||void 0===k||!k.mobileNumber||1!=(null===(H=Object.keys(null==E?void 0:E.filters))||void 0===H?void 0:H.length))&&null!=b&&b.ptSearchCount&&null!=E&&null!==(Y=E.filters)&&void 0!==Y&&Y.locality&&h&&null!=h&&null!==(W=h.Properties)&&void 0!==W&&W.length&&h.Properties.length>b.ptSearchCount?!T&&f({error:!0,label:"PT_MODIFY_SEARCH_CRITERIA"}):"MUTATION"===d.action?c(d.key,e,null,null,null,{queryParams:{...e}}):m.push("/digit-ui/citizen/pt/property/search-results?"+Object.keys(e).map(t=>t+"="+e[t]).join("&"))}var K,V,z,G;return C&&!T&&f({error:!0,label:(null==C||null===(K=C.response)||void 0===K||null===(V=K.data)||void 0===V||null===(z=V.Errors)||void 0===z||null===(G=z[0])||void 0===G?void 0:G.code)||C}),1==v&&(F[0].body=[...F[0].body1]),l.createElement("div",{style:{marginTop:"16px",marginBottom:"16px",backgroundColor:"white",maxWidth:"960px"}},l.createElement(t.FormComposer,{onSubmit:function(e){try{var t;if(b.maxResultValidation&&(null==I?void 0:I.Properties.length)>0&&(null==I?void 0:I.Properties.length)>b.maxPropertyResult&&N)return O(!0),Promise.resolve();if(null==e||null===(t=e.city)||void 0===t||!t.code)return f({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(0==v){var n,l,o,i,a,r,u,s,d,c,p,m,E,y,S;if(!(null!=e&&e.mobileNumber||null!=e&&e.propertyIds||null!=e&&e.oldPropertyId))return f({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(null!=e&&e.mobileNumber&&(null===(n=e.mobileNumber)||void 0===n||!n.match(null==L||null===(l=L.validation)||void 0===l||null===(o=l.pattern)||void 0===o?void 0:o.value)))return f({warning:!0,label:null==L||null===(c=L.validation)||void 0===c||null===(p=c.pattern)||void 0===p?void 0:p.message}),Promise.resolve();if(null!=e&&e.propertyIds&&(null===(i=e.propertyIds)||void 0===i||!i.match(null==w||null===(a=w.validation)||void 0===a||null===(r=a.pattern)||void 0===r?void 0:r.value)))return f({warning:!0,label:null==w||null===(m=w.validation)||void 0===m||null===(E=m.pattern)||void 0===E?void 0:E.message}),Promise.resolve();if(null!=e&&e.oldPropertyId&&(null===(u=e.oldPropertyId)||void 0===u||!u.match(null==M||null===(s=M.validation)||void 0===s||null===(d=s.pattern)||void 0===d?void 0:d.value)))return f({warning:!0,label:null==M||null===(y=M.validation)||void 0===y||null===(S=y.pattern)||void 0===S?void 0:S.message}),Promise.resolve()}else{var g,P,A,h,C,R,D,F,B,k,H;if(null==e||null===(g=e.locality)||void 0===g||!g.code)return f({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(!(null!=e&&e.doorNo||null!=e&&e.name))return f({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"}),Promise.resolve();if(null!=e&&e.name&&(null===(P=e.name)||void 0===P||!P.match(null==x||null===(A=x.validation)||void 0===A||null===(h=A.pattern)||void 0===h?void 0:h.value)))return f({warning:!0,label:null==x||null===(F=x.validation)||void 0===F||null===(B=F.pattern)||void 0===B?void 0:B.message}),Promise.resolve();if(null!=e&&e.doorNo&&(null===(C=e.doorNo)||void 0===C||!C.match(null==U||null===(R=U.validation)||void 0===R||null===(D=R.pattern)||void 0===D?void 0:D.value)))return f({warning:!0,label:null==U||null===(k=U.validation)||void 0===k||null===(H=k.pattern)||void 0===H?void 0:H.message}),Promise.resolve()}"ERR_PLEASE_REFINED_UR_SEARCH"!==(null==T?void 0:T.label)&&f(null),null!=e&&e.doorNo&&""!==(null==e?void 0:e.doorNo)&&""!==(null==e?void 0:e.propertyIds)&&(e.propertyIds="");let Y=Object.keys(e).filter(t=>e[t]).reduce((t,n)=>({...t,[n]:"object"==typeof e[n]?e[n].code:e[n]}),{}),W=Y.city;return delete Y.addParam,delete Y.addParam1,delete Y.city,_({city:W,filters:Y}),Promise.resolve()}catch(e){return Promise.reject(e)}},noBoxShadow:!0,inline:!0,config:F,label:d.texts.submitButtonLabel,heading:p(d.texts.header),text:p(d.texts.text),headingStyle:{fontSize:"32px",marginBottom:"16px",fontFamily:"Roboto Condensed,sans-serif"},onFormValueChange:(e,t,n)=>{null!=t&&t.doorNo&&""!==(null==t?void 0:t.doorNo)&&""!==(null==t?void 0:t.propertyIds)&&(t.propertyIds="");const l=null==t?void 0:t.city;(null==l?void 0:l.code)!==S&&g(null==l?void 0:l.code),j.isEqual(t,P)||A(t)},cardStyle:{marginBottom:"0"}}),l.createElement("span",{className:"link",style:{display:"flex",justifyContent:R?"center":"left",paddingBottom:"16px",paddingLeft:"24px",marginTop:"-24px"}},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/new-application"},p("CPT_REG_NEW_PROPERTY"))),T&&l.createElement(t.Toast,{error:T.error,isDleteBtn:!0,warning:T.warning,label:p(T.label),onClose:()=>{f(null),O(!1)}}))};Ke.propTypes={loginParams:We.any},Ke.defaultProps={loginParams:null};const Ve=[{texts:{header:"CS_SEARCH_RESULTS",actionButtonLabel:"CS_VIEW_DETAILS"},labels:[{label:"PT_TOTAL_DUES",key:"total_due",noteStyle:{fontSize:"24px",fontWeight:"bold"},notePrefix:"₹ "},{label:"PT_PROPERTY_PTUID",key:"property_id"},{label:"PT_OWNERSHIP_INFO_NAME",key:"owner_name"},{label:"PT_PROPERTY_ADDRESS_SUB_HEADER",key:"property_address"},{label:"PT_DUE_DATE",key:"bil_due__date"}]}],ze=e=>{var a,r,u,s,d,c,p,m;let{template:v,header:E,actionButtonLabel:_,isMutation:T,onSelect:f,config:y,clearParams:S=(()=>{})}=e;const{t:g}=o.useTranslation(),P=n.useRef(),{mobileNumber:A,propertyIds:N,oldPropertyIds:O,locality:I,city:h,doorNo:C,name:R,PToffset:b}=Digit.Hooks.useQueryParams();let D={};const[L,w]=n.useState(!1);let M,x,U=b;isNaN(parseInt(U))?M=5:(x=U,M=parseInt(U)+5);let F=isNaN(parseInt(U))?{limit:"5",sortOrder:"ASC",sortBy:"createdTime",offset:"0"}:{limit:"50",sortOrder:"ASC",sortBy:"createdTime",offset:x};Digit.Hooks.useClickOutside(P,()=>{w(!1)},L),A&&(D.mobileNumber=A),N&&(D.propertyIds=N),O&&(D.oldPropertyIds=O),I&&(D.locality=I),C&&(D.doorNo=C),R&&(D.name=R),D.limit=F.limit,D.sortOrder=F.sortOrder,D.sortBy=F.sortBy,D.offset=F.offset;const[B,k,H]=Digit.Hooks.useSessionStorage("PT_MUTATE_MULTIPLE_OWNERS",null),[Y,W,j]=Digit.Hooks.useSessionStorage("PT_MUTATE_MULTIPLE_OWNERS_LAST_PATH",null);n.useEffect(()=>{k([]),S(),W("")},[]);const K=Digit.ULBService.getCurrentTenantId(),V=Digit.Hooks.pt.usePropertySearch(h?{tenantId:h,filters:D,auth:!0}:{filters:D,auth:!0}),z=null==V||null===(a=V.data)||void 0===a||null===(r=a.Properties)||void 0===r?void 0:r.map(e=>e.propertyId).join(",");let G=A?{mobileNumber:A,consumerCode:z}:{consumerCode:z};window.location.href.includes("/search-results")&&(G={consumerCode:z});const X=Digit.Hooks.useFetchBillsForBuissnessService({businessService:"PT",...G,tenantId:h},{enabled:!!z,retry:!1}),q=i.useHistory();if(X.isLoading||V.isLoading)return l.createElement(t.Loader,null);if(V.error||!z)return l.createElement("div",{style:{height:"150px"}},l.createElement(t.Card,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},g("CS_PT_NO_PROPERTIES_FOUND")));const $={};null==X||null===(u=X.data)||void 0===u||null===(s=u.Bill)||void 0===s||s.forEach(e=>{var t,n;null!=e&&e.consumerCode&&($[null==e?void 0:e.consumerCode]={total_due:null==e?void 0:e.totalAmount,bil_due__date:new Date(null==e||null===(t=e.billDetails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.expiryDate).toDateString()})});const Z=T?null==V||null===(d=V.data)||void 0===d||null===(c=d.Properties)||void 0===c?void 0:c.filter(e=>"ACTIVE"===e.status):null==V||null===(p=V.data)||void 0===p?void 0:p.Properties,Q=null==Z?void 0:Z.map(e=>{var t,n,l,o;let i=(null==e?void 0:e.address)||{};return{property_id:null==e?void 0:e.propertyId,owner_name:null===(t=(null==e?void 0:e.owners)||[])||void 0===t?void 0:t.map(e=>null==e?void 0:e.name).join(","),property_address:[i.doorNo||"",i.buildingName||"",i.street||"",(null===(n=i.locality)||void 0===n?void 0:n.name)||"",i.city||""].filter(e=>e).join(", "),total_due:(null===(l=$[null==e?void 0:e.propertyId])||void 0===l?void 0:l.total_due)||0,bil_due__date:(null===(o=$[null==e?void 0:e.propertyId])||void 0===o?void 0:o.bil_due__date)||g("N/A")}});return l.createElement("div",{className:"static",style:{marginTop:"16px"}},l.createElement("div",{className:"static-wrapper"},E&&l.createElement(t.Header,{style:{marginLeft:"8px"}},g(E)," (",null==Q?void 0:Q.length,")"),l.createElement(t.ResponseComposer,{data:Q,template:v,actionButtonLabel:_,onSubmit:e=>{if(T){var t,n,l;let o=null==V||null===(t=V.data)||void 0===t||null===(n=t.Properties)||void 0===n||null===(l=n.filter)||void 0===l?void 0:l.call(n,t=>t.propertyId===e.property_id)[0];Number(e.total_due)>0?w(e):f(y.key,{data:e,property:o})}else q.push("/digit-ui/citizen/payment/my-bills/PT/"+e.property_id,{tenantId:K})}})),L?l.createElement(t.Modal,{hideSubmit:!0,isDisabled:!1,popupStyles:{width:"319px",height:"250px",margin:"auto"},formId:"modal-action"},l.createElement("div",{ref:P},l.createElement(t.KeyNote,{keyValue:g("PT_AMOUNT_DUE"),note:"₹ "+(null==L||null===(m=L.total_due)||void 0===m?void 0:m.toLocaleString("en-IN")),noteStyle:{fontSize:"24px",fontWeight:"bold"}}),l.createElement("p",null,g("PT_YOU_HAVE")+" ₹ "+(null==L?void 0:L.total_due.toLocaleString("en-IN"))+" "+g("PT_PENDING_AMOUNT")+" "+g("PT_INORDER_TO_TRANSFER")),l.createElement(t.SubmitBar,{submit:!1,onSubmit:()=>{q.push("/digit-ui/citizen/payment/my-bills/PT/"+L.property_id,{tenantId:K})},style:{marginTop:"14px",width:"100%"},label:g("PT_PROCEED_PAYMENT")}))):null,!(null!=Q&&Q.length)>0&&l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},g("PT_NO_PROP_FOUND_MSG")),0!==(null==Q?void 0:Q.length)&&(5==(null==Q?void 0:Q.length)||50==(null==Q?void 0:Q.length))&&l.createElement("div",null,l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},g("PT_LOAD_MORE_MSG")," ",l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/search-results?mobileNumber="+(A||"")+"&propertyIds="+(N||"")+"&oldPropertyIds="+(O||"")+"&doorNo="+(C||"")+"&name="+(R||"")+"&city="+(h||"")+"&locality="+(I||"")+"&PToffset="+M},g("PT_COMMON_CLICK_HERE"))))),T&&0!==(null==Q?void 0:Q.length)?l.createElement(t.CitizenInfoLabel,{info:g("CS_FILE_APPLICATION_INFO_LABEL"),text:g("PT_CANNOT_TRANSFER_IF_AMOUNT_PENDING")}):null)};ze.propTypes={template:We.any,header:We.string,actionButtonLabel:We.string},ze.defaultProps={template:[],header:null,actionButtonLabel:null};const Ge=e=>{const{config:t,onSelect:a,clearParams:r}=e,{t:u}=o.useTranslation(),{path:s}=i.useRouteMatch();let d=t?[t]:Ve;const c=n.useMemo(()=>{var e;return null==d||null===(e=d.map)||void 0===e?void 0:e.call(d,e=>{const t={};for(const n in e.texts)t[n]=u(e.texts[n]);return{...e,texts:t}})},[d]);return l.createElement(i.Switch,null,l.createElement(i.Route,{path:""+s,exact:!0},l.createElement(ze,{template:c[0].labels,header:c[0].texts.header,actionButtonLabel:c[0].texts.actionButtonLabel,t:u,isMutation:"MUTATION"===(null==t?void 0:t.action),onSelect:a,config:t,clearParams:r})))},Xe=e=>{let{jumpTo:n}=e;const{t:a}=o.useTranslation(),r=i.useHistory();return l.createElement(t.LinkButton,{label:a("CS_COMMON_CHANGE"),className:"check-page-link-button",onClick:function(){r.push(n)}})},qe=e=>e.substr(0,1).toUpperCase()+e.substr(1),$e=e=>e.toLowerCase().split(" ").map(qe).join(" "),Ze=(e,t,n)=>{let l=[];var o,i,a,r,u,s,d,c,p,m,v,E,_,T,f,y;if(n&&n.includes("TRANSFEROR")?null!=e&&e.isTransferor&&null!=e&&e.transferorDetails?(e.ownershipCategory=null==e||null===(o=e.transferorDetails)||void 0===o?void 0:o.ownershipCategory,l=[...(null==e||null===(i=e.transferorDetails)||void 0===i?void 0:i.owners)||[]]):l=[...(null==e?void 0:e.owners.filter(e=>"INACTIVE"==e.status))||[]]:l=[...(null==e?void 0:e.owners.filter(e=>"ACTIVE"==e.status))||[]],"INDIVIDUAL.SINGLEOWNER"==(null==e?void 0:e.ownershipCategory))return{title:t(n||"PT_OWNERSHIP_INFO_SUB_HEADER"),values:[{title:t("PT_OWNERSHIP_INFO_NAME"),value:(null===(a=l[0])||void 0===a?void 0:a.name)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_MOBILE_NO"),value:(null===(r=l[0])||void 0===r?void 0:r.mobileNumber)||t("CS_NA")},{title:t("PT_SEARCHPROPERTY_TABEL_GUARDIANNAME"),value:(null===(u=l[0])||void 0===u?void 0:u.fatherOrHusbandName)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_GENDER"),value:t(null===(s=l[0])||void 0===s?void 0:s.gender)||t("CS_NA")},{title:t("PT_FORM3_OWNERSHIP_TYPE"),value:t(null==e?void 0:e.ownershipCategory)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_EMAIL_ID"),value:(null===(d=l[0])||void 0===d?void 0:d.emailId)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_USER_CATEGORY"),value:t(S(null===(c=l[0])||void 0===c?void 0:c.ownerType))||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_CORR_ADDR"),value:(null===(p=l[0])||void 0===p?void 0:p.permanentAddress)||t("CS_NA")}]};if(null!=e&&e.ownershipCategory.includes("INDIVIDUAL")){let o=[];return l.map(n=>{let l=[{title:t("PT_OWNERSHIP_INFO_NAME"),value:(null==n?void 0:n.name)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_MOBILE_NO"),value:(null==n?void 0:n.mobileNumber)||t("CS_NA")},{title:t("PT_SEARCHPROPERTY_TABEL_GUARDIANNAME"),value:(null==n?void 0:n.fatherOrHusbandName)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_GENDER"),value:t(null==n?void 0:n.gender)||t("CS_NA")},{title:t("PT_FORM3_OWNERSHIP_TYPE"),value:t(null==e?void 0:e.ownershipCategory)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_EMAIL_ID"),value:(null==n?void 0:n.emailId)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_USER_CATEGORY"),value:t(S(null==n?void 0:n.ownerType))||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_CORR_ADDR"),value:(null==n?void 0:n.permanentAddress)||t("CS_NA")}];o.push(...l)}),{title:t(n||"PT_OWNERSHIP_INFO_SUB_HEADER"),values:o}}return null!=e&&e.ownershipCategory.includes("INSTITUTIONAL")?{title:t("PT_OWNERSHIP_INFO_SUB_HEADER"),values:[{title:t("PT_COMMON_INSTITUTION_NAME"),value:(null==e||null===(m=e.institution)||void 0===m?void 0:m.name)||t("CS_NA")},{title:t("PT_TYPE_OF_INSTITUTION"),value:(null==e||null===(v=e.institution)||void 0===v?void 0:v.type)||t("CS_NA")},{title:t("PT_OWNER_NAME"),value:(null==e||null===(E=e.institution)||void 0===E?void 0:E.nameOfAuthorizedPerson)||t("CS_NA")},{title:t("PT_COMMON_AUTHORISED_PERSON_DESIGNATION"),value:(null==e||null===(_=e.institution)||void 0===_?void 0:_.designation)||t("CS_NA")},{title:t("PT_FORM3_MOBILE_NUMBER"),value:(null===(T=l[0])||void 0===T?void 0:T.mobileNumber)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_TEL_PHONE_NO"),value:(null===(f=l[0])||void 0===f?void 0:f.altContactNumber)||t("CS_NA")},{title:t("PT_OWNERSHIP_INFO_CORR_ADDR"),value:(null===(y=l[0])||void 0===y?void 0:y.correspondenceAddress)||t("CS_NA")},{title:t("PT_FORM3_OWNERSHIP_TYPE"),value:t(null==e?void 0:e.ownershipCategory)||t("CS_NA")}]}:{title:t("PT_OWNERSHIP_INFO_SUB_HEADER"),values:[{title:t("PT_NO_OWNERS"),value:t("CS_NA")}]}},Qe=(e,t)=>{var n,l,o,i;let a=[{title:t("PT_ASSESMENT_INFO_USAGE_TYPE"),value:null!=e&&e.usageCategory?""+t(("RESIDENTIAL"!==(null==e?void 0:e.usageCategory)?"COMMON_PROPUSGTYPE_NONRESIDENTIAL_":"COMMON_PROPSUBUSGTYPE_")+(null!=e&&null!==(n=e.usageCategory)&&void 0!==n&&n.split(".")[1]?null==e||null===(l=e.usageCategory)||void 0===l?void 0:l.split(".")[1]:null==e?void 0:e.usageCategory)):t("CS_NA")},{title:t("PT_ASSESMENT_INFO_TYPE_OF_BUILDING"),value:t(E(null==e?void 0:e.propertyType))||t("CS_NA")},{title:t("PT_ASSESMENT_INFO_PLOT_SIZE"),value:t(null==e?void 0:e.landArea)||t("CS_NA")},{title:t("PT_ASSESMENT_INFO_NO_OF_FLOOR"),value:t(null==e?void 0:e.noOfFloors)||t("CS_NA")}];e.units=(null==e||null===(o=e.units)||void 0===o?void 0:o.filter(e=>1==e.active))||[];let r,u=0;return r=e.units&&(null===(i=e.units[0])||void 0===i?void 0:i.floorNo),e.units.map(e=>{var n;let l=[{title:(r!==(null==e?void 0:e.floorNo)?u=1:u+=1)&&1===u?t("PROPERTYTAX_FLOOR_"+(null==e?void 0:e.floorNo)):""},{title:t("")},{title:t("")},{title:t("")},{title:t("PT_UNIT")+" "+u},{title:t("")},{title:t("")},{title:t("")},{title:(r=null==e?void 0:e.floorNo)>-3?t("PT_ASSESSMENT_UNIT_USAGE_TYPE"):"",value:(r=null==e?void 0:e.floorNo)>-3?t((o=null==e?void 0:e.usageCategory,void 0===o&&(o=""),v(o,"COMMON_PROPSUBUSGTYPE")))||t("CS_NA"):""},{title:(r=null==e?void 0:e.floorNo)>-3?t("PT_ASSESMENT_INFO_OCCUPLANCY"):"",value:(r=null==e?void 0:e.floorNo)>-3?t(T(null==e?void 0:e.occupancyType))||t("CS_NA"):""},{title:(r=null==e?void 0:e.floorNo)>-3?t("PT_FORM2_BUILT_AREA"):"",value:(r=null==e?void 0:e.floorNo)>-3?t(null==e||null===(n=e.constructionDetail)||void 0===n?void 0:n.builtUpArea)||t("CS_NA"):""},{title:(r=null==e?void 0:e.floorNo)>-3?"Rented"===t(T(null==e?void 0:e.occupancyType))?t("PT_FORM2_TOTAL_ANNUAL_RENT"):t(""):"",value:(r=null==e?void 0:e.floorNo)>-3?"Rented"===t(T(null==e?void 0:e.occupancyType))?(null==e?void 0:e.arv)&&"₹"+t(null==e?void 0:e.arv)||"NA":t(""):""}];var o;a.push(...l)}),{title:t("PT_ASSESMENT_INFO_SUB_HEADER"),values:a}},Je=(e,t)=>{var n,l,o,i,a;return{title:t("PT_MUTATION_DETAILS"),values:[{title:t("PT_MUTATION_COURT_PENDING_OR_NOT"),value:null!=e&&null!==(n=e.additionalDetails)&&void 0!==n&&n.isMutationInCourt?t("PT_MUTATION_PENDING_"+(null==e?void 0:e.additionalDetails.isMutationInCourt)):t("CS_NA")},{title:t("PT_MUTATION_COURT_CASE_DETAILS"),value:(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.caseDetails)||t("CS_NA")},{title:t("PT_MUTATION_STATE_ACQUISITION"),value:null!=e&&null!==(o=e.additionalDetails)&&void 0!==o&&o.isPropertyUnderGovtPossession?t("PT_MUTATION_STATE_ACQUISITION_"+(null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.isPropertyUnderGovtPossession)):t("CS_NA")},{title:t("PT_MUTATION_GOVT_ACQUISITION_DETAILS"),value:(null==e||null===(a=e.additionalDetails)||void 0===a?void 0:a.govtAcquisitionDetails)||t("CS_NA")}]}},et=(e,t)=>{var n,l,o,i,a,r,u;return{title:t("PT_MUTATION_REGISTRATION_DETAILS"),values:[{title:t("PT_MUTATION_TRANSFER_REASON"),value:t("PROPERTYTAX_REASONFORTRANSFER_"+(null==e||null===(n=e.additionalDetails)||void 0===n?void 0:n.reasonForTransfer.replaceAll(".","_")))},{title:t("PT_MUTATION_MARKET_VALUE"),value:(null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.marketValue)||t("CS_NA")},{title:t("PT_MUTATION_DOCUMENT_NO"),value:(null==e||null===(o=e.additionalDetails)||void 0===o?void 0:o.documentNumber)||t("CS_NA")},{title:t("PT_MUTATION_DOCUMENT_VALUE"),value:(null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.documentValue)||t("CS_NA")},{title:t("PT_MUTATION_DOCUMENT_ISSUE_DATE"),value:null!=e&&null!==(a=e.additionalDetails)&&void 0!==a&&a.documentDate?new Date(null==e||null===(r=e.additionalDetails)||void 0===r?void 0:r.documentDate).toDateString():t("CS_NA")},{title:t("")},{title:t("PT_MUTATION_REMARKS"),value:(null==e||null===(u=e.additionalDetails)||void 0===u?void 0:u.remarks)||t("CS_NA")}]}},tt=function(e,t,n){try{var l;function o(l){var o,i,a,r,u,s,d,c,p,m,v,E,_,T,S,g;return"MUTATION"===e.creationReason?{t:n,tenantId:null==t?void 0:t.code,name:n(null==t?void 0:t.i18nKey)+" "+$e(n("ULBGRADE_"+(null==t||null===(o=t.city)||void 0===o?void 0:o.ulbGrade.toUpperCase().replace(" ","_").replace(".","_")))),email:null==t?void 0:t.emailId,phoneNumber:null==t?void 0:t.contactNumber,heading:n("PT_ACKNOWLEDGEMENT"),details:[{title:n("CS_TITLE_APPLICATION_DETAILS"),values:[{title:n("PT_APPLICATION_NO"),value:null==e?void 0:e.acknowldgementNumber},{title:n("PT_PROPERRTYID"),value:null==e?void 0:e.propertyId},{title:n("CS_APPLICATION_DETAILS_APPLICATION_DATE"),value:Digit.DateUtils.ConvertTimestampToDate(null==e||null===(i=e.auditDetails)||void 0===i?void 0:i.createdTime,"dd/MM/yyyy")}]},{title:n("PT_PROPERTY_ADDRESS_SUB_HEADER"),values:[{title:n("PT_PROPERTY_ADDRESS_PINCODE"),value:(null==e||null===(a=e.address)||void 0===a?void 0:a.pincode)||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_CITY"),value:n(y(null==e?void 0:e.tenantId))||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_MOHALLA"),value:n(""+f(null==e||null===(r=e.address)||void 0===r||null===(u=r.locality)||void 0===u?void 0:u.code,null==e?void 0:e.tenantId))||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_STREET_NAME"),value:(null==e||null===(s=e.address)||void 0===s?void 0:s.street)||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_HOUSE_NO"),value:(null==e||null===(d=e.address)||void 0===d?void 0:d.doorNo)||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_LANDMARK"),value:(null==e||null===(c=e.address)||void 0===c?void 0:c.landmark)||n("CS_NA")}]},Ze(e,n,"PT_MUTATION_TRANSFEROR_DETAILS"),Ze(e,n,"PT_MUTATION_TRANSFEREE_DETAILS_HEADER"),Je(e,n),et(e,n)]}:{t:n,tenantId:null==t?void 0:t.code,name:n(null==t?void 0:t.i18nKey)+" "+$e(n("ULBGRADE_"+(null==t||null===(p=t.city)||void 0===p?void 0:p.ulbGrade.toUpperCase().replace(" ","_").replace(".","_")))),email:null==t?void 0:t.emailId,phoneNumber:null==t?void 0:t.contactNumber,heading:n("PT_ACKNOWLEDGEMENT"),details:[{title:n("CS_TITLE_APPLICATION_DETAILS"),values:[{title:n("PT_APPLICATION_NO"),value:null==e?void 0:e.acknowldgementNumber},{title:n("PT_PROPERRTYID"),value:null==e?void 0:e.propertyId},{title:n("CS_APPLICATION_DETAILS_APPLICATION_DATE"),value:Digit.DateUtils.ConvertTimestampToDate(null==e||null===(m=e.auditDetails)||void 0===m?void 0:m.createdTime,"dd/MM/yyyy")}]},Ze(e,n),Qe(e,n),{title:n("PT_PROPERTY_ADDRESS_SUB_HEADER"),values:[{title:n("PT_PROPERTY_ADDRESS_PINCODE"),value:(null==e||null===(v=e.address)||void 0===v?void 0:v.pincode)||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_CITY"),value:n(y(null==e?void 0:e.tenantId))||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_MOHALLA"),value:n(""+f(null==e||null===(E=e.address)||void 0===E||null===(_=E.locality)||void 0===_?void 0:_.code,null==e?void 0:e.tenantId))||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_STREET_NAME"),value:(null==e||null===(T=e.address)||void 0===T?void 0:T.street)||n("CS_NA")},{title:n("PT_PROPERTY_ADDRESS_HOUSE_NO"),value:(null==e||null===(S=e.address)||void 0===S?void 0:S.doorNo)||n("CS_NA")},"CITIZEN"===(null==e?void 0:e.channel)?{title:n("PT_PROPERTY_ADDRESS_LANDMARK"),value:(null==e||null===(g=e.address)||void 0===g?void 0:g.landmark)||n("CS_NA")}:{}]},{title:n("PT_COMMON_DOCS"),values:e.documents&&e.documents.length>0?e.documents.map((e,t)=>{let o=D(null==l?void 0:l.data,null==e?void 0:e.fileStoreId);return{title:n((null==e?void 0:e.documentType)||n("CS_NA")),value:L(o,t)||n("CS_NA")}}):{title:n("PT_NO_DOCUMENTS"),value:" "}}]}}const i=null==e||null===(l=e.documents)||void 0===l?void 0:l.map(e=>null==e?void 0:e.fileStoreId),a=(null==i?void 0:i.length)>0;return Promise.resolve(a?Promise.resolve(Digit.UploadServices.Filefetch(i,Digit.ULBService.getStateId())).then(o):o(a))}catch(e){return Promise.reject(e)}},nt=e=>{const{t:t}=o.useTranslation();return e.isSuccess?window.location.href.includes("edit-application")?t("CS_PROPERTY_UPDATE_APPLICATION_SUCCESS"):t("CS_PROPERTY_APPLICATION_SUCCESS"):e.isLoading?window.location.href.includes("edit-application")?t("CS_PROPERTY_UPDATE_APPLICATION_PENDING"):t("CS_PROPERTY_APPLICATION_PENDING"):e.isSuccess?void 0:window.location.href.includes("edit-application")?t("CS_PROPERTY_UPDATE_APPLICATION_FAILED"):t("CS_PROPERTY_APPLICATION_FAILED")},lt={padding:"4px 0px",justifyContent:"space-between"},ot=e=>{var n;return l.createElement(t.Banner,{message:nt(e),applicationNumber:null===(n=e.data)||void 0===n?void 0:n.Properties[0].acknowldgementNumber,info:e.isSuccess?e.t("PT_APPLICATION_NO"):"",successful:e.isSuccess,style:{width:"100%"}})},it=e=>{let t=e.searchBy;return l.createElement("div",{className:"w-fullwidth PropertySearchFormSwitcher"},e.keys.map(n=>l.createElement("span",{key:n,className:t===n?"selected":"non-selected",onClick:()=>{"searchDetail"===n&&!sessionStorage.getItem("searchDetailValue")&&sessionStorage.setItem("searchDetailValue",1),"searchId"===n&&1==sessionStorage.getItem("searchDetailValue")&&sessionStorage.setItem("searchDetailValue",2),e.onSwitch(n),e.onReset()}},e.t("PT_SEARCH_BY_"+(null==n?void 0:n.toUpperCase())))))},at=e=>{let{skipNContinue:n,updateMobileNumber:a}=e;const{t:r}=o.useTranslation();return i.useParams(),l.createElement(l.Fragment,null,l.createElement(t.Card,null,l.createElement("div",null,l.createElement("p",null,r("PT_INVALID_OWNERS_MOBILE_NO"))),l.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},l.createElement(t.ButtonSelector,{theme:"border",label:r("PT_SKIP_N_CONTINUE"),onSubmit:n,style:{marginLeft:"10px"}}),l.createElement(t.ButtonSelector,{label:r("PT_UPDATE_MOBILE_NO"),onSubmit:a,style:{marginLeft:"10px"}}))))},rt=e=>l.createElement("span",{className:"cell-text"},e),ut=function(e){var t;void 0===e&&(e="");let n=(null===(t=e)||void 0===t?void 0:t.split("."))||[],l={};return l.usageCategoryMajor=n&&n.length>0&&n[0],l.usageCategoryMinor=n&&n.length>1&&n[1],l.usageCategorySubMinor=n&&n.length>2&&n[2],l.usageCategoryDetail=n&&n.length>3&&n[3],l},st=function(e,t,n){return void 0===e&&(e=[]),e&&0!=e.length?e.map(e=>{var t,n,l,o;let i=null==e||!e.usageCategory||null!=e&&null!==(t=e.usageCategory)&&void 0!==t&&t.includes("NONRESIDENTIAL")?null===(n=ut(null==e?void 0:e.usageCategory))||void 0===n?void 0:n.usageCategoryMinor:"RESIDENTIAL";return{...e,builtUpArea:null==e||null===(l=e.constructionDetail)||void 0===l?void 0:l.builtUpArea,usageCategory:i?{code:i,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+i}:{},occupancyType:null!=e&&e.occupancyType?{code:e.occupancyType,i18nKey:"PROPERTYTAX_OCCUPANCYTYPE_"+(null==e?void 0:e.occupancyType)}:"",floorNo:null!=e&&e.floorNo||Number.isInteger(null==e?void 0:e.floorNo)?{code:e.floorNo,i18nKey:"PROPERTYTAX_FLOOR_"+(null==e?void 0:e.floorNo)}:{},unitType:null!=e&&e.unitType?{code:e.unitType,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+((null==e||null===(o=e.unitType)||void 0===o?void 0:o.code)||(null==e?void 0:e.unitType))}:""}}):[{usageCategory:"",unitType:"",occupancyType:"",builtUpArea:null,arv:"",floorNo:n?{code:t,i18nKey:"PROPERTYTAX_FLOOR_"+t}:""}]},dt=l.memo(e=>{var o;let{t:i,config:a,onSelect:r,formData:u}=e,s=window.location.pathname.split("/"),c=Number(s[s.length-1]),p=window.location.pathname.includes("new-application/units")||window.location.pathname.includes("/edit-application/units");const[m,v]=n.useState(st(p?null==u||null===(o=u.units)||void 0===o?void 0:o.filter(e=>e.floorNo==c):null==u?void 0:u.units,c,p));n.useEffect(()=>(v(()=>{var e;return st(p?null==u||null===(e=u.units)||void 0===e?void 0:e.filter(e=>e.floorNo==c):null==u?void 0:u.units,c,p)}),()=>{v(null)}),[c,u,p]);const{data:E,isLoading:_}=Digit.Hooks.useCommonMDMS(Digit.ULBService.getStateId(),"PropertyTax",["Floor","OccupancyType","UsageCategory"],{select:e=>{var t,n,l,o,i,a,r,u,s,d;let c=null==e||null===(t=e.PropertyTax)||void 0===t||null===(n=t.UsageCategory)||void 0===n?void 0:n.map(e=>ut(e.code)).filter(e=>!1===e.usageCategoryDetail&&!1===e.usageCategorySubMinor&&!1!==e.usageCategoryMinor).map(e=>({code:e.usageCategoryMinor,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+e.usageCategoryMinor})),p=Digit.Utils.getUnique(null==e||null===(l=e.PropertyTax)||void 0===l?void 0:l.UsageCategory.map(e=>ut(e.code)).filter(e=>e.usageCategoryDetail).map(e=>({code:e.usageCategoryDetail,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+e.usageCategoryDetail,usageCategorySubMinor:e.usageCategorySubMinor,usageCategoryMinor:e.usageCategoryMinor})));return{Floor:null==e||null===(o=e.PropertyTax)||void 0===o||null===(i=o.Floor)||void 0===i||null===(a=i.filter(e=>e.active))||void 0===a?void 0:a.map(e=>({i18nKey:"PROPERTYTAX_FLOOR_"+e.code,code:e.code})),OccupancyType:null==e||null===(r=e.PropertyTax)||void 0===r||null===(u=r.OccupancyType)||void 0===u||null===(s=u.filter(e=>e.active))||void 0===s?void 0:s.map(e=>({i18nKey:"PROPERTYTAX_OCCUPANCYTYPE_"+e.code,code:e.code})),UsageCategory:c,UsageSubCategory:p,usageDetails:null==e||null===(d=e.PropertyTax)||void 0===d?void 0:d.UsageCategory}},retry:!1,enable:!1});return _?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{config:(a.texts.header="COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==u||null===(T=u.PropertyType)||void 0===T?void 0:T.i18nKey)?"PT_FLAT_DETAILS_HEADER":"PROPERTYTAX_FLOOR_"+c+"_DETAILS",a),onSelect:()=>{var e;let t=(null==u?void 0:u.units)||[],n=m.map(e=>{var t,n,l,o,i;"object"==typeof(null==e||null===(t=e.unitType)||void 0===t?void 0:t.code)&&null!=e&&null!==(n=e.unitType)&&void 0!==n&&null!==(l=n.code)&&void 0!==l&&l.code&&(e.unitType.code=null==e||null===(o=e.unitType)||void 0===o||null===(i=o.code)||void 0===i?void 0:i.code);let a={};return Object.keys(e).filter(t=>e[t]).map(t=>{var n;if("object"==typeof e.unitType&&null==e.unitType.code&&(e.unitType=""),"usageCategory"===t)a.usageCategory=null==E||null===(n=E.usageDetails.find(n=>{var l,o;return n.code.includes(null===(l=e[t])||void 0===l?void 0:l.code)&&n.code.includes("object"==typeof e.unitType?null===(o=e.unitType)||void 0===o?void 0:o.code:e.unitType)}))||void 0===n?void 0:n.code;else if("builtUpArea"===t)a.constructionDetail={builtUpArea:e[t]};else{var l;a[t]="object"==typeof e[t]?null===(l=e[t])||void 0===l?void 0:l.code:e[t]}}),a});var l,o,i;p&&(t=null===(l=t)||void 0===l?void 0:l.filter(e=>e.floorNo!=c),n=[...t,...n]),c!==(null==u||null===(e=u.noOfFloors)||void 0===e?void 0:e.code)&&p?-1==c&&2==(null==u||null===(o=u.noOofBasements)||void 0===o?void 0:o.code)?r(a.key,n,!1,-2,!0):c<0?r(a.key,n):r(a.key,n,!1,c+1,!0):(null==u||null===(i=u.noOofBasements)||void 0===i?void 0:i.code)>0?r(a.key,n,!1,-1,!0):r(a.key,n)},onSkip:()=>r(),t:i,isDisabled:function(){let e=0;return m&&(null==m||m.map(t=>{var n,l;null!=t&&t.usageCategory&&0!=Object.keys(null==t?void 0:t.usageCategory)&&null!=t&&t.occupancyType&&null!=t&&t.builtUpArea&&("RESIDENTIAL"===(null==t||null===(n=t.usageCategory)||void 0===n?void 0:n.code)||null!=t&&t.unitType)&&("RENTED"!==(null==t||null===(l=t.occupancyType)||void 0===l?void 0:l.code)||null!=t&&t.arv)||(e=1)})),0!=e}()},m.map((e,o)=>{var r,s,d,c;return l.createElement("div",{key:e+"-"+o},l.createElement("div",{style:{border:"solid",borderRadius:"5px",padding:"10px",paddingTop:"20px",marginTop:"10px",borderColor:"#f3f3f3",background:"#FAFAFA"}},l.createElement(t.LinkButton,{label:l.createElement(t.DeleteIcon,{style:{float:"right",position:"relative"},fill:1!==m.length?"#494848":"#FAFAFA"}),style:{width:"100px",display:"inline"},onClick:e=>function(e){const t=[...m];1!=t.length&&(t.splice(e,1),v(t))}(o)}),l.createElement(t.CardLabel,null,i("PT_FORM2_USAGE_TYPE")+"*"),l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:[...null!=E&&E.UsageCategory?null==E?void 0:E.UsageCategory:[],{code:"RESIDENTIAL",i18nKey:"PROPERTYTAX_BILLING_SLAB_RESIDENTIAL"}],selected:null==e?void 0:e.usageCategory,select:e=>function(e,t){let n=[...m];n[e].usageCategory=t,n[e].unitType="",v(n)}(o,e)}),(null==e||null===(r=e.usageCategory)||void 0===r?void 0:r.code)&&!1===e.usageCategory.code.includes("RESIDENTIAL")&&l.createElement(n.Fragment,null,l.createElement(t.CardLabel,null,i("PT_FORM2_SUB_USAGE_TYPE")+"*"),l.createElement("div",{className:"form-pt-dropdown-only"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:null==E||null===(s=E.UsageSubCategory)||void 0===s?void 0:s.filter(t=>{var n;return t.usageCategoryMinor===(null==e||null===(n=e.usageCategory)||void 0===n?void 0:n.code)}),selected:null==e?void 0:e.unitType,select:e=>function(e,t){let n=[...m];n[e].unitType=t,v(n)}(o,e)}))),l.createElement(t.CardLabel,null,i("PT_FORM2_OCCUPANCY")+"*"),l.createElement("div",{className:"form-pt-dropdown-only"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:null==E?void 0:E.OccupancyType,selected:null==e?void 0:e.occupancyType,select:e=>function(e,t){let n=[...m];n[e].occupancyType=t,v(n)}(o,e)})),(null==e||null===(d=e.occupancyType)||void 0===d?void 0:d.code)&&e.occupancyType.code.includes("RENTED")&&l.createElement(n.Fragment,null,l.createElement(t.CardLabel,null,i("PT_FORM2_TOTAL_ANNUAL_RENT")+"*"),l.createElement(t.TextInput,{style:{background:"#FAFAFA"},t:i,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"arv",value:null==e?void 0:e.arv,onChange:e=>function(e,t){let n=[...m];n[e].arv=t.target.value,v(n)}(o,e),isRequired:!0,pattern:"[0-9]+",type:"text",title:i("CORE_COMMON_REQUIRED_ERRMSG")})),l.createElement(t.CardLabel,null,"COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==u||null===(c=u.PropertyType)||void 0===c?void 0:c.i18nKey)?i("PT_FORM2_BUILT_UP_AREA")+"*":i("PT_BUILT_UP_AREA_HEADER")+"*"),l.createElement(t.TextInput,{style:{background:"#FAFAFA"},t:i,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"builtUpArea",value:(null==e?void 0:e.builtUpArea)||"",onChange:e=>function(e,t){let n=[...m];n[e].builtUpArea=t.target.value,v(n)}(o,e),isRequired:!0,pattern:"[0-9]+",type:"text",title:i("CORE_COMMON_REQUIRED_ERRMSG")}),!p&&l.createElement(n.Fragment,null,l.createElement(t.CardLabel,null,i("PT_FORM2_SELECT_FLOOR")+"*"),l.createElement("div",{className:"form-pt-dropdown-only"},l.createElement(t.Dropdown,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,option:null==E?void 0:E.Floor,selected:null==e?void 0:e.floorNo,select:e=>function(e,t){let n=[...m];n[e].floorNo=t,v(n)}(o,e)})))))}),l.createElement("div",{style:{justifyContent:"left",display:"flex",paddingBottom:"15px",color:"#FF8C00"}},l.createElement("button",{type:"button",style:{paddingTop:"10px"},onClick:()=>function(){const e=[...m];e.push({usageCategory:"",unitType:"",occupancyType:"",builtUpArea:null,arv:"",floorNo:p?{code:c,i18nKey:"PROPERTYTAX_FLOOR_"+c}:""}),v(e)}()},""+i("PT_ADD_UNIT")))));var T}),ct=[{head:"ES_NEW_APPLICATION_LOCATION_DETAILS",body:[{route:"map",component:"PTSelectGeolocation",nextStep:"pincode",hideInEmployee:!0,key:"address",texts:{header:"PT_GEOLOCATON_HEADER",cardText:"PT_GEOLOCATION_TEXT",nextText:"PT_COMMON_NEXT",skipAndContinueText:"CORE_COMMON_SKIP_CONTINUE"}},{route:"pincode",component:"PTSelectPincode",texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"PT_PINCODE_LABEL",cardText:"PT_PINCODE_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},withoutLabel:!0,key:"address",nextStep:"address",type:"component"},{route:"address",component:"PTSelectAddress",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_ADDRESS_TEXT",cardText:"CS_FILE_APPLICATION_PROPERTY_LOCATION_CITY_MOHALLA_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"address",nextStep:"street",isMandatory:!0,type:"component"},{type:"component",route:"street",component:"PTSelectStreet",key:"address",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_ADDRESS_TEXT",cardText:"PT_STREET_TEXT",submitBarLabel:"PT_COMMON_NEXT"},nextStep:"landmark"},{type:"component",route:"landmark",component:"PTSelectLandmark",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"CS_FILE_APPLICATION_PROPERTY_LOCATION_PROVIDE_LANDMARK_TITLE",cardText:"CS_FILE_APPLICATION_PROPERTY_LOCATION_PROVIDE_LANDMARK_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:"CORE_COMMON_SKIP_CONTINUE"},key:"address",nextStep:"proof",hideInEmployee:!0},{type:"component",route:"proof",component:"Proof",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"PT_PROOF_OF_ADDRESS_HEADER",cardText:"",nextText:"PT_COMMONS_NEXT",submitBarLabel:"PT_COMMONS_NEXT"},key:"address",nextStep:"owner-ship-details@0",hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",body:[{route:"info",component:"PropertyTax",nextStep:"property-type",hideInEmployee:!0,key:"Documents"},{type:"component",route:"isResidential",isMandatory:!0,component:"IsResidential",texts:{headerCaption:"",header:"PT_PROPERTY_DETAILS_RESIDENTIAL_PROPERTY_HEADER",cardText:"PT_PROPERTY_DETAILS_RESIDENTIAL_PROPERTY_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"isResdential",withoutLabel:!0,hideInEmployee:!0,nextStep:{PT_COMMON_YES:"property-type",PT_COMMON_NO:"property-usage-type"}},{type:"component",route:"property-usage-type",isMandatory:!0,component:"PropertyUsageType",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_PROPERTY_DETAILS_USAGE_TYPE_HEADER",cardText:"PT_PROPERTY_DETAILS_USAGE_TYPE_TEXT",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"property-type",key:"usageCategoryMajor",withoutLabel:!0},{type:"component",isMandatory:!0,component:"ProvideSubUsageType",key:"usageCategoryMinor",withoutLabel:!0},{type:"component",route:"provide-sub-usage-type",isMandatory:!0,component:"ProvideSubUsageType",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_ASSESSMENT_FLOW_SUBUSAGE_HEADER",cardText:"PT_ASSESSMENT_FLOW_SUBUSAGE_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{yes:"is-any-part-of-this-floor-unoccupied",no:"provide-sub-usage-type-of-rented-area"},hideInEmployee:!0},{type:"component",route:"property-type",isMandatory:!0,component:"PropertyType",texts:{headerCaption:"",header:"PT_ASSESMENT1_PROPERTY_TYPE",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:{COMMON_PROPTYPE_BUILTUP_INDEPENDENTPROPERTY:"landarea",COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY:"PtUnits",COMMON_PROPTYPE_VACANT:"area"},key:"PropertyType",withoutLabel:!0},{type:"component",isMandatory:!0,component:"Area",key:"landarea",withoutLabel:!0},{type:"component",route:"PtUnits",isMandatory:!0,component:"SelectPTUnits",texts:{headerCaption:"",header:"PT_FLAT_DETAILS",cardText:"PT_FLAT_DETAILS_DESC",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"map",hideInEmployee:!0},{type:"component",route:"landarea",isMandatory:!0,component:"PTLandArea",texts:{headerCaption:"",header:"PT_PLOT_SIZE_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"number-of-floors",hideInEmployee:!0},{type:"component",route:"area",isMandatory:!0,component:"Area",texts:{headerCaption:"",header:"PT_PLOT_SIZE_HEADER",cardText:"PT_FORM2_PLOT_SIZE_PLACEHOLDER",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"map",hideInEmployee:!0},{type:"component",route:"number-of-floors",isMandatory:!0,component:"PropertyBasementDetails",texts:{headerCaption:"",header:"PT_PROPERTY_DETAILS_NO_OF_BASEMENTS_HEADER",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"number-of-basements@0",key:"noOofBasements",withoutLabel:!0},{type:"component",component:"Units",key:"units",withoutLabel:!0},{type:"component",route:"provide-floor-no",isMandatory:!0,component:"ProvideFloorNo",texts:{headerCaption:"",header:"PT_FLOOR_NUMBER_HEADER",cardText:"",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:"units",key:"Floorno",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"is-this-floor-self-occupied",isMandatory:!0,component:"IsThisFloorSelfOccupied",texts:{headerCaption:"",header:"PT_ASSESSMENT_FLOW_FLOOR_OCC_HEADER",cardText:"PT_ASSESSMENT_FLOW_FLOOR_OCC_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{PT_YES_IT_IS_SELFOCCUPIED:"provide-sub-usage-type",PT_YES_IT_IS_SELFOCCUPIED1:"is-any-part-of-this-floor-unoccupied",PT_PARTIALLY_RENTED_OUT:"area",PT_PARTIALLY_RENTED_OUT1:"area",PT_FULLY_RENTED_OUT:"provide-sub-usage-type-of-rented-area",PT_FULLY_RENTED_OUT1:"rental-details"},hideInEmployee:!0},{type:"component",route:"number-of-basements@0",isMandatory:!0,component:"PropertyFloorDetails",texts:{headerCaption:"",header:"BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL",cardText:"PT_PROPERTY_DETAILS_NO_OF_FLOORS_TEXT",submitBarLabel:"PT_COMMONS_NEXT"},nextStep:{PT_NO_BASEMENT_OPTION:"units",PT_ONE_BASEMENT_OPTION:"units",PT_TWO_BASEMENT_OPTION:"units"},key:"noOfFloors",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"units",isMandatory:!0,component:"SelectPTUnits",texts:{headerCaption:"",header:"PT_FLAT_DETAILS",cardText:"PT_FLAT_DETAILS_DESC",submitBarLabel:"PT_COMMON_NEXT"},nextStep:"map",key:"units",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"rental-details",isMandatory:!0,component:"RentalDetails",texts:{header:"PT_ASSESSMENT_FLOW_RENTAL_DETAIL_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"is-any-part-of-this-floor-unoccupied",hideInEmployee:!0},{type:"component",route:"provide-sub-usage-type-of-rented-area",isMandatory:!0,component:"ProvideSubUsageTypeOfRentedArea",texts:{headerCaption:"PT_ASSESMENT_INFO_USAGE_TYPE",header:"PT_ASSESSMENT_FLOW_RENT_SUB_USAGE_HEADER",cardText:"PT_ASSESSMENT_FLOW_SUBUSAGE_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:"rental-details",hideInEmployee:!0},{type:"component",route:"is-any-part-of-this-floor-unoccupied",isMandatory:!0,component:"IsAnyPartOfThisFloorUnOccupied",texts:{header:"PT_ASSESSMENT_FLOW_ISUNOCCUPIED_HEADER",cardText:"PT_ASSESSMENT_FLOW_ISUNOCCUPIED_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"units",withoutLabel:!0,nextStep:{PT_COMMON_NO:"map",PT_COMMON_YES:"un-occupied-area"},hideInEmployee:!0},{type:"component",route:"un-occupied-area",isMandatory:!0,component:"UnOccupiedArea",texts:{header:"PT_ASSESSMENT_FLOW_UNOCCUPIED_AREA_HEADER",cardText:"PT_ASSESSMENT_FLOW_UNOCCUPIED_AREA_TEXT",submitBarLabel:"PT_COMMON_NEXT",skipText:""},key:"units",withoutLabel:!0,nextStep:"map",hideInEmployee:!0}]},{head:"ES_NEW_APPLICATION_OWNERSHIP_DETAILS",body:[{type:"component",route:"owner-ship-details@0",isMandatory:!0,component:"SelectOwnerShipDetails",texts:{headerCaption:"PT_PROPERTIES_OWNERSHIP",header:"PT_PROVIDE_OWNERSHIP_DETAILS",cardText:"PT_PROVIDE_OWNERSHI_DETAILS_SUB_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"ownershipCategory",withoutLabel:!0,nextStep:{INSTITUTIONALPRIVATE:"inistitution-details",INSTITUTIONALGOVERNMENT:"inistitution-details","INDIVIDUAL.SINGLEOWNER":"owner-details","INDIVIDUAL.MULTIPLEOWNERS":"owner-details"}},{isMandatory:!0,type:"component",route:"owner-details",key:"owners",component:"SelectOwnerDetails",texts:{headerCaption:"",header:"PT_OWNERSHIP_INFO_SUB_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,nextStep:"special-owner-category",hideInEmployee:!0},{type:"component",route:"special-owner-category",isMandatory:!0,component:"SelectSpecialOwnerCategoryType",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"owner-address",hideInEmployee:!0},{type:"component",route:"owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"special-owner-category-proof",hideInEmployee:!0},{type:"component",component:"SelectAltContactNumber",key:"owners",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"special-owner-category-proof",isMandatory:!0,component:"SelectSpecialProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY_PROOF_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"proof-of-identity",hideInEmployee:!0},{type:"component",route:"proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_DOCUMENT_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT",addMultipleText:"PT_COMMON_ADD_APPLICANT_LABEL"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0},{type:"component",route:"inistitution-details",isMandatory:!0,component:"SelectInistitutionOwnerDetails",texts:{headerCaption:"",header:"PT_INSTITUTION_DETAILS_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-owner-address",hideInEmployee:!0},{type:"component",route:"institutional-owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-proof-of-identity",hideInEmployee:!0},{type:"component",route:"institutional-proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0},{type:"component",component:"PTEmployeeOwnershipDetails",key:"owners",withoutLabel:!0,hideInCitizen:!0}]},{head:"ES_NEW_APPLICATION_DOCUMENTS_REQUIRED",body:[{component:"SelectDocuments",withoutLabel:!0,key:"documents",type:"component"}]}],pt=e=>{let{application:n,buttonLabel:a}=e;const{t:r}=o.useTranslation();return l.createElement(t.Card,null,l.createElement(t.KeyNote,{keyValue:r("PT_APPLICATION_NO_LABEL"),note:null==n?void 0:n.acknowldgementNumber}),l.createElement(t.KeyNote,{keyValue:r("PT_APPLICATION_CATEGORY"),note:r("PROPERTY_TAX")}),l.createElement(t.KeyNote,{keyValue:r("PT_SEARCHPROPERTY_TABEL_PTUID"),note:null==n?void 0:n.propertyId}),l.createElement(t.KeyNote,{keyValue:r("PT_COMMON_TABLE_COL_APP_TYPE"),note:(null==n?void 0:n.creationReason)&&r("PT."+n.creationReason)||r("CS_NA")}),l.createElement(t.KeyNote,{keyValue:r("PT_COMMON_TABLE_COL_STATUS_LABEL"),note:r("PT_COMMON_"+(null==n?void 0:n.status))}),l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/application/"+(null==n?void 0:n.acknowldgementNumber)+"/"+(null==n?void 0:n.tenantId)},l.createElement(t.SubmitBar,{label:a})))},mt=e=>{let{application:n}=e;const{t:a}=o.useTranslation(),r=null==n?void 0:n.address,u=null==n?void 0:n.owners;return l.createElement(t.Card,null,l.createElement(t.KeyNote,{keyValue:a("PT_COMMON_TABLE_COL_PT_ID"),note:n.propertyId}),l.createElement(t.KeyNote,{keyValue:a("PT_COMMON_TABLE_COL_OWNER_NAME"),note:u.map((e,t)=>l.createElement("div",{key:"index"},t==e.length-1?(null==e?void 0:e.name)+",":e.name))}),l.createElement(t.KeyNote,{keyValue:a("PT_COMMON_COL_ADDRESS"),note:a(null==r?void 0:r.locality.name)+", "+a(null==r?void 0:r.city)+","+(a(null==r?void 0:r.pincode)?""+r.pincode:" ")||"CS_APPLICATION_TYPE_PT"}),l.createElement(t.KeyNote,{keyValue:a("PT_COMMON_TABLE_COL_STATUS_LABEL"),note:a("PT_COMMON_"+n.status)}),l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/properties/"+n.propertyId},l.createElement(t.SubmitBar,{label:a("PT_VIEW_DETAILS")})))},vt=e=>{let{width:t=20,height:n=20,style:o}=e;return l.createElement("svg",{style:o,xmlns:"http://www.w3.org/2000/svg",width:t,height:n,viewBox:"0 0 20 20",fill:"gray"},l.createElement("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"}))};function Et(e){let{property:n={}}=e;const{t:i}=o.useTranslation(),{isLoading:a,data:r}=Digit.Hooks.pt.usePropertyDocumentSearch({property:n}),u=(null==n?void 0:n.documents)||[];return a?l.createElement(t.Loader,null):l.createElement("div",{style:{marginTop:"19px"}},l.createElement(l.Fragment,null,l.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},null==u?void 0:u.map((e,t)=>{let n=D(r.pdfFiles,null==e?void 0:e.fileStoreId);return l.createElement("a",{target:"_",href:n,style:{minWidth:"160px"},key:t},l.createElement(vt,{width:85,height:100,style:{background:"#f6f6f6",padding:"8px"}}),l.createElement("p",{style:{marginTop:"8px"}},i("PT_"+(null==e?void 0:e.documentType.replace(".","_")))))}))))}const _t=e=>{var n,o;let{setpopup:i,setShowToast:a,data:r}=e;const u=null===(n=Digit)||void 0===n||null===(o=n.ComponentRegistryService)||void 0===o?void 0:o.getComponent("CitizenFeedback");return l.createElement(l.Fragment,null,l.createElement(t.PopUp,null,l.createElement("div",{style:{margin:"0 auto",top:"15%",position:"relative"}},l.createElement(u,{popup:!0,onClose:i,setShowToast:a,data:r}))))};var Tt,ft=Array.isArray,yt="object"==typeof Y&&Y&&Y.Object===Object&&Y,St="object"==typeof self&&self&&self.Object===Object&&self,gt=yt||St||Function("return this")(),Pt=gt.Symbol,At=Object.prototype,Nt=At.hasOwnProperty,Ot=At.toString,It=Pt?Pt.toStringTag:void 0,ht=Object.prototype.toString,Ct=Pt?Pt.toStringTag:void 0,Rt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ct&&Ct in Object(e)?function(e){var t=Nt.call(e,It),n=e[It];try{e[It]=void 0;var l=!0}catch(e){}var o=Ot.call(e);return l&&(t?e[It]=n:delete e[It]),o}(e):function(e){return ht.call(e)}(e)},bt=function(e){return null!=e&&"object"==typeof e},Dt=function(e){return"symbol"==typeof e||bt(e)&&"[object Symbol]"==Rt(e)},Lt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wt=/^\w*$/,Mt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},xt=function(e){if(!Mt(e))return!1;var t=Rt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Ut=gt["__core-js_shared__"],Ft=(Tt=/[^.]+$/.exec(Ut&&Ut.keys&&Ut.keys.IE_PROTO||""))?"Symbol(src)_1."+Tt:"",Bt=Function.prototype.toString,kt=function(e){if(null!=e){try{return Bt.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ht=/^\[object .+?Constructor\]$/,Yt=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Mt(e)||(t=e,Ft&&Ft in t))&&(xt(e)?Yt:Ht).test(kt(e));var t}(n)?n:void 0},jt=Wt(Object,"create"),Kt=Object.prototype.hasOwnProperty,Vt=Object.prototype.hasOwnProperty;function zt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}zt.prototype.clear=function(){this.__data__=jt?jt(null):{},this.size=0},zt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zt.prototype.get=function(e){var t=this.__data__;if(jt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Kt.call(t,e)?t[e]:void 0},zt.prototype.has=function(e){var t=this.__data__;return jt?void 0!==t[e]:Vt.call(t,e)},zt.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=jt&&void 0===t?"__lodash_hash_undefined__":t,this};var Gt=zt,Xt=function(e,t){return e===t||e!=e&&t!=t},qt=function(e,t){for(var n=e.length;n--;)if(Xt(e[n][0],t))return n;return-1},$t=Array.prototype.splice;function Zt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}Zt.prototype.clear=function(){this.__data__=[],this.size=0},Zt.prototype.delete=function(e){var t=this.__data__,n=qt(t,e);return!(n<0||(n==t.length-1?t.pop():$t.call(t,n,1),--this.size,0))},Zt.prototype.get=function(e){var t=this.__data__,n=qt(t,e);return n<0?void 0:t[n][1]},Zt.prototype.has=function(e){return qt(this.__data__,e)>-1},Zt.prototype.set=function(e,t){var n=this.__data__,l=qt(n,e);return l<0?(++this.size,n.push([e,t])):n[l][1]=t,this};var Qt=Zt,Jt=Wt(gt,"Map"),en=function(e,t){var n,l,o=e.__data__;return("string"==(l=typeof(n=t))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map};function tn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}tn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gt,map:new(Jt||Qt),string:new Gt}},tn.prototype.delete=function(e){var t=en(this,e).delete(e);return this.size-=t?1:0,t},tn.prototype.get=function(e){return en(this,e).get(e)},tn.prototype.has=function(e){return en(this,e).has(e)},tn.prototype.set=function(e,t){var n=en(this,e),l=n.size;return n.set(e,t),this.size+=n.size==l?0:1,this};var nn=tn;function ln(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var l=arguments,o=t?t.apply(this,l):l[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,l);return n.cache=i.set(o,a)||i,a};return n.cache=new(ln.Cache||nn),n}ln.Cache=nn;var on,an,rn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,un=/\\(\\)?/g,sn=(on=ln(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rn,function(e,n,l,o){t.push(l?o.replace(un,"$1"):n||e)}),t},function(e){return 500===an.size&&an.clear(),e}),an=on.cache,on),dn=Pt?Pt.prototype:void 0,cn=dn?dn.toString:void 0,pn=function(e){if("string"==typeof e||Dt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},mn=function(e,t,n){var l=null==e?void 0:function(e,t){for(var n=0,l=(t=function(e,t){return ft(e)?e:function(e,t){if(ft(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Dt(e))||wt.test(e)||!Lt.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:sn(function(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(ft(t))return function(e,t){for(var n=-1,l=null==e?0:e.length,o=Array(l);++n<l;)o[n]=t(e[n],n,e);return o}(t,e)+"";if(Dt(t))return cn?cn.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}(e)}(e))}(t,e)).length;null!=e&&n<l;)e=e[pn(t[n++])];return n&&n==l?e:void 0}(e,t);return void 0===l?n:l};const vn=[{texts:{header:"SEARCH_PROPERTY",submitButtonLabel:"PT_HOME_SEARCH_RESULTS_BUTTON_SEARCH",text:"CS_PT_HOME_SEARCH_RESULTS_DESC"},inputs:[{label:"PT_HOME_SEARCH_RESULTS_OWN_MOB_LABEL",type:"mobileNumber",name:"mobileNumber",validation:{pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}},error:"CORE_COMMON_MOBILE_ERROR"},{label:"PT_PROPERTY_UNIQUE_ID",description:"CS_PROPERTY_ID_FORMAT_MUST_BE",type:"text",name:"propertyIds",error:"ERR_INVALID_PROPERTY_ID",validation:{pattern:{value:"[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}",message:"ERR_INVALID_PROPERTY_ID"}}},{label:"PT_EXISTING_PROPERTY_ID",type:"text",name:"oldPropertyId",error:"ERR_INVALID_PROPERTY_ID",validation:{pattern:{value:"[A-Za-z]{2}-[A-Za-z]{2}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{6}",message:"ERR_INVALID_PROPERTY_ID"}}},{label:"PT_SEARCHPROPERTY_TABEL_OWNERNAME",type:"text",name:"name",validation:{pattern:{value:"[A-Za-z .`'-]{3,63}",message:"PAYMENT_INVALID_NAME"}},error:"PAYMENT_INVALID_NAME"},{label:"PT_SEARCHPROPERTY_TABEL_DOOR_NO",type:"text",name:"doorNo",validation:{pattern:{value:"[A-Za-z0-9#,/ -()]{1,63}",message:"ERR_INVALID_DOOR_NO"}},error:"ERR_INVALID_DOOR_NO"}]}],En=[{head:"PT_MUTATION_TRANSFEROR_DETAILS",body:[{route:"info",component:"PropertyTax",nextStep:"transferer-details",hideInEmployee:!0,key:"_Documents",isMutation:!0,hideInEmployee:!0},{route:"search-property",component:"SearchPropertyCitizen",nextStep:"search-results",key:"searchParams",texts:{header:"SEARCH_PROPERTY",submitButtonLabel:"PT_HOME_SEARCH_RESULTS_BUTTON_SEARCH",text:"CS_PT_HOME_SEARCH_RESULTS_DESC"},inputs:[{label:"PT_HOME_SEARCH_RESULTS_OWN_MOB_LABEL",type:"mobileNumber",name:"mobileNumber",validation:{pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}},error:"CORE_COMMON_MOBILE_ERROR"},{label:"PT_PROPERTY_UNIQUE_ID",description:"CS_PROPERTY_ID_FORMAT_MUST_BE",type:"text",name:"propertyIds",error:"ERR_INVALID_PROPERTY_ID",validation:{pattern:{value:/^[a-zA-Z0-9-]*$/i,message:"ERR_INVALID_PROPERTY_ID"}}},{label:"PT_EXISTING_PROPERTY_ID",type:"text",name:"oldPropertyId",error:"ERR_INVALID_PROPERTY_ID",validation:{pattern:{value:/^[a-zA-Z0-9-]*$/i,message:"ERR_INVALID_PROPERTY_ID"}}},{label:"PT_SEARCHPROPERTY_TABEL_OWNERNAME",type:"text",name:"name",validation:{pattern:{value:"[A-Za-z .`'-]{3,63}",message:"PAYMENT_INVALID_NAME"}},error:"PAYMENT_INVALID_NAME"},{label:"PT_SEARCHPROPERTY_TABEL_DOOR_NO",type:"text",name:"doorNo",validation:{pattern:{value:"[A-Za-z0-9#,/ -()]{1,63}",message:"ERR_INVALID_DOOR_NO"}},error:"ERR_INVALID_DOOR_NO"}],action:"MUTATION",hideInEmployee:!0},{route:"search-results",component:"SearchResultCitizen",key:"searchResult",nextStep:"transferer-details",nextStep:"info",action:"MUTATION",hideInEmployee:!0,texts:{header:"CS_SEARCH_RESULTS",actionButtonLabel:"PT_OWNERSHIP_TRANSFER",nextText:"PT_COMMON_NEXT"},labels:[{label:"PT_TOTAL_DUES",key:"total_due",noteStyle:{fontSize:"24px",fontWeight:"bold"}},{label:"PT_PROPERTY_PTUID",key:"property_id"},{label:"PT_OWNERSHIP_INFO_NAME",key:"owner_name"},{label:"PT_PROPERTY_ADDRESS_SUB_HEADER",key:"property_address"},{label:"PT_DUE_DATE",key:"bil_due__date"}]},{route:"transferer-details",nextStep:"owner-ship-details@0",key:"transfererDetails",type:"component",withoutLabel:!0,component:"TransfererDetails",texts:{nextText:"PT_COMMON_NEXT",submitBarLabel:"PT_COMMON_NEXT"},labels:[{label:"PT_OWNERSHIP_INSTI_NAME",keyPath:["searchResult","property","institution","name"],ownershipType:"INSTITUTIONAL"},{label:"PT_OWNERSHIP_INFO_DESIGNATION",keyPath:["searchResult","property","institution","designation"],ownershipType:"INSTITUTIONAL"},{label:"PT_INSTI_OWNERSHIP_TYPE",keyPath:["searchResult","property","institution","type"],ownershipType:"INSTITUTIONAL"},{label:"PT_OWNERSHIP_INFO_NAME_OF_AUTH",keyPath:["searchResult","property","institution","nameOfAuthorizedPerson"],ownershipType:"INSTITUTIONAL"},{label:"PT_OWNERSHIP_INFO_TEL_NO",keyPath:["searchResult","property","owners","_index_","altContactNumber"],ownershipType:"INSTITUTIONAL"},{label:"PT_OWNERSHIP_INFO_NAME",keyPath:["searchResult","property","owners","_index_","name"],ownershipType:"INDIVIDUAL"},{label:"PT_GUARDIAN_NAME",keyPath:["searchResult","property","owners","_index_","fatherOrHusbandName"],ownershipType:"INDIVIDUAL"},{label:"PT_OWNERSHIP_INFO_MOBILE_NO",keyPath:["searchResult","property","owners","_index_","mobileNumber"],ownershipType:"ALL"},{label:"PT_OWNERSHIP_INFO_EMAIL_ID",keyPath:["searchResult","property","owners","_index_","emailId"],ownershipType:"INDIVIDUAL"},{label:"PT_OWNERSHIP_INFO_USER_CATEGORY",keyPath:["searchResult","property","owners","_index_","ownerType"],ownershipType:"INDIVIDUAL"},{label:"PT_OWNERSHIP_INFO_CORR_ADDR",keyPath:["searchResult","property","owners","_index_","correspondenceAddress"],ownershipType:"ALL"}]}]},{head:"PT_MUTATION_TRANSFEREE_DETAILS_HEADER",body:[{type:"component",route:"owner-ship-details@0",isMandatory:!0,component:"SelectOwnerShipDetails",texts:{headerCaption:"PT_MUTATION_TRANSFEREE_DETAILS_HEADER",header:"PT_PROVIDE_OWNERSHIP_DETAILS",cardText:"PT_PROVIDE_OWNERSHI_DETAILS_SUB_TEXT",submitBarLabel:"PT_COMMON_NEXT"},key:"ownershipCategory",withoutLabel:!0,nextStep:{INSTITUTIONALPRIVATE:"inistitution-details",INSTITUTIONALGOVERNMENT:"inistitution-details","INDIVIDUAL.SINGLEOWNER":"multiple-owners","INDIVIDUAL.MULTIPLEOWNERS":"multiple-owners"}},{route:"multiple-owners",component:"OwnerMutate",withoutLabel:!0,nextStep:"is-mutatation-pending",key:"Owners",hideInEmployee:!0},{type:"component",route:"inistitution-details",isMandatory:!0,component:"SelectInistitutionOwnerDetails",texts:{headerCaption:"",header:"PT_INSTITUTION_DETAILS_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-owner-address",hideInEmployee:!0},{isMandatory:!0,type:"component",route:"owner-details",key:"owners",component:"SelectOwnerDetails",texts:{headerCaption:"PT_MUTATION_TRANSFEREE_DETAILS_HEADER",header:"PT_OWNERSHIP_INFO_SUB_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,nextStep:"special-owner-category",hideInEmployee:!0},{type:"component",route:"special-owner-category",isMandatory:!0,component:"SelectSpecialOwnerCategoryType",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"owner-address",hideInEmployee:!0},{type:"component",route:"owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"special-owner-category-proof",hideInEmployee:!0},{type:"component",component:"SelectAltContactNumber",key:"owners",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"special-owner-category-proof",isMandatory:!0,component:"SelectSpecialProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY_PROOF_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"proof-of-identity",hideInEmployee:!0},{type:"component",route:"proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT",addMultipleText:"PT_COMMON_ADD_APPLICANT_LABEL"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0},{type:"component",route:"inistitution-details",isMandatory:!0,component:"SelectInistitutionOwnerDetails",texts:{headerCaption:"",header:"PT_INSTITUTION_DETAILS_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-owner-address",hideInEmployee:!0},{type:"component",route:"institutional-owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"institutional-proof-of-identity",hideInEmployee:!0},{type:"component",route:"institutional-proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"is-mutatation-pending",hideInEmployee:!0},{type:"component",component:"PTEmployeeOwnershipDetails",key:"owners",withoutLabel:!0,hideInCitizen:!0}]},{head:"PT_MUTATION_DETAILS",body:[{key:"additionalDetails",texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_COURT_PENDING_OR_NOT",cardText:"PT_MUTATION_PENDING_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},route:"is-mutatation-pending",withoutLabel:!0,component:"IsMutationPending",nextStep:"is-under-govt-aquisition",type:"component"},{key:"additionalDetails",route:"is-under-govt-aquisition",withoutLabel:!0,texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_STATE_ACQUISITION",cardText:"PT_STATE_AQUISTION_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},component:"UnderStateAquire",nextStep:"reason",type:"component"}]},{head:"PT_MUTATION_REGISTRATION_DETAILS",body:[{key:"additionalDetails",route:"reason",texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_TRANSFER_REASON",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,component:"PTReasonForTransfer",nextStep:"market-value",type:"component"},{key:"additionalDetails",route:"market-value",texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_MARKET_VALUE",cardText:"PT_MARKET_VALUE_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,component:"PropertyMarketValue",nextStep:"registration-doc",type:"component"},{key:"additionalDetails",route:"registration-doc",texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_DOCUMENT_DETAILS",cardText:"PT_REGISTRATION_DOC_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,component:"PTRegistrationDocument",nextStep:"comments",type:"component"},{key:"additionalDetails",route:"comments",withoutLabel:!0,component:"PTComments",texts:{headerCaption:"PT_MUTATION_DETAILS",header:"PT_MUTATION_REMARKS",cardText:"PT_REMARKS_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},nextStep:"transfer-reason-doc",type:"component"},{type:"component",route:"transfer-reason-doc",component:"TransferProof",withoutLabel:!0,texts:{headerCaption:"PT_TRANSFER_DOC_CAPTION",header:"PT_TRANSFER_DOC_HEADER",cardText:"PT_TRANSFER_DOC_MESSAGE",nextText:"PT_COMMONS_NEXT",submitBarLabel:"PT_COMMONS_NEXT"},key:"transferReasonProof",hideInEmployee:!0,nextStep:"address-proof"},{type:"component",route:"address-proof",component:"Proof",withoutLabel:!0,texts:{headerCaption:"PT_PROPERTY_LOCATION_CAPTION",header:"Proof of Address",cardText:"",nextText:"PT_COMMONS_NEXT",submitBarLabel:"PT_COMMONS_NEXT"},key:"addressProof",hideInEmployee:!0},{component:"SelectDocuments",withoutLabel:!0,key:"documents",type:"component"}]}],_n=e=>{var a,r,u,s,c,p,m,v,E,_;let{onSubmit:T,value:f={}}=e;const{t:y}=o.useTranslation(),S=(i.useHistory(),Digit.ULBService.getCurrentTenantId()),[g,P]=n.useState(null),[A,N]=n.useState(null),{ownershipCategory:O,IsAnyPartOfThisFloorUnOccupied:I,selfOccupied:h,Owners:D,owners:L,searchResult:w,additionalDetails:M}=f,{property:x}=w,{propertyType:U,units:F=[{}]}=x;n.useEffect(function(){try{return Promise.resolve(Digit.PaymentService.searchBill(S,{Service:"PT.MUTATION",consumerCode:null==x?void 0:x.acknowldgementNumber})).then(function(e){const t=function(){if(!e.Bill.length)return Promise.resolve(Digit.PTService.ptCalculateMutation({Property:{...x,additionalDetails:{...null==x?void 0:x.additionalDetails,...M,documentDate:new Date(null==M?void 0:M.documentDate).getTime()}}},S)).then(function(e){var t;P((null==e||null===(t=e[null==x?void 0:x.acknowldgementNumber])||void 0===t?void 0:t.totalAmount)||y("CS_NA")),N(y("PT_MUT_BILL_ACTIVE"))});var t,n,l;P((null==e||null===(t=e.Bill[0])||void 0===t?void 0:t.totalAmount)||y("CS_NA")),N(y("PT_MUT_BILL_"+(null==e||null===(n=e.Bill[0])||void 0===n||null===(l=n.status)||void 0===l?void 0:l.toUpperCase())))}();if(t&&t.then)return t.then(function(){})})}catch(e){return Promise.reject(e)}},[]),R(null==h?void 0:h.i18nKey),b(null==I?void 0:I.i18nKey),C(U);let B=y("CS_NA");if(null!=M&&M.documentDate){const e=new Date(null==M?void 0:M.documentDate),t=Digit.Utils.date.monthNames[e.getMonth()];B=e.getDate()+" "+t+" "+e.getFullYear()}const k=e=>location.href=e,[H,Y]=n.useState(!1);return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:4}):null,l.createElement(t.Header,{styles:{fontSize:"32px",marginLeft:"8px"}},y("WS_COMMON_SUMMARY")),l.createElement(t.Card,{style:{paddingRight:"16px"}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:y("PT_APPLICATION_NUMBER_LABEL"),text:null==x?void 0:x.acknowldgementNumber,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{className:"border-none",label:y("PT_SEARCHPROPERTY_TABEL_PTUID"),text:null==x?void 0:x.propertyId,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{className:"border-none",label:y("PT_APPLICATION_CHANNEL_LABEL"),text:y("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+(null==x?void 0:x.channel))}),l.createElement(t.Row,{className:"border-none",label:y("PT_FEE_AMOUNT"),text:g,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{className:"border-none",label:y("PT_PAYMENT_STATUS"),text:A,textStyle:{whiteSpace:"pre"}})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},y("PT_PROPERTY_ADDRESS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:y("PT_PROPERTY_ADDRESS_PINCODE"),text:(null==x||null===(a=x.address)||void 0===a?void 0:a.pincode)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_COMMON_CITY"),text:(null==x||null===(r=x.address)||void 0===r?void 0:r.city)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_COMMON_LOCALITY_OR_MOHALLA"),text:y(""+(null==x||null===(u=x.address)||void 0===u||null===(s=u.locality)||void 0===s?void 0:s.area))||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_PROPERTY_ADDRESS_STREET_NAME"),text:(null==x||null===(c=x.address)||void 0===c?void 0:c.street)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_DOOR_OR_HOUSE"),text:(null==x||null===(p=x.address)||void 0===p?void 0:p.doorNo)||y("CS_NA")})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},y("PT_MUTATION_TRANSFEROR_DETAILS")),l.createElement("div",null,Array.isArray(null==x?void 0:x.owners)&&(null==x?void 0:x.owners.map((e,n)=>l.createElement("div",{key:n,style:{margin:"none"}},1!=(null==x?void 0:x.owners.length)&&l.createElement("span",null,y("PT_OWNER_SUB_HEADER")," - ",n+1," "),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:y("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType.toLowerCase())||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||y("CS_NA")})))))),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},y("PT_MUTATION_TRANSFEREE_DETAILS")),l.createElement(t.LinkButton,{label:l.createElement(t.EditIcon,null),onClick:()=>k("/digit-ui/citizen/pt/property/property-mutation/owner-ship-details@0")})),null!=O&&null!==(m=O.code)&&void 0!==m&&m.includes("INSTITUTIONAL")?l.createElement("div",null,Array.isArray(L)&&L.map((e,n)=>{var o;return l.createElement("div",{key:n},1!=L.length&&l.createElement("span",null,y("PT_OWNER_SUB_HEADER")," - ",n+1," "),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:y("PT_INSTITUTION_NAME"),text:(null==e?void 0:e.inistitutionName)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_TYPE_OF_INSTITUTION"),text:""+y(null==e||null===(o=e.inistitutetype)||void 0===o?void 0:o.value)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_NAME_AUTHORIZED_PERSON"),text:(null==e?void 0:e.name)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_LANDLINE_NUMBER"),text:(null==e?void 0:e.altContactNumber)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_INSTITUTION_DESIGNATION"),text:(null==e?void 0:e.designation)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||y("CS_NA")})))})):l.createElement("div",null,Array.isArray(D)&&D.map((e,n)=>{var o,i,a;return l.createElement("div",{key:n},1!=D.length&&l.createElement("span",null,y("PT_OWNER_SUB_HEADER")," - ",n+1," "),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:y("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_COMMON_GENDER_LABEL"),text:y(null==e||null===(o=e.gender)||void 0===o?void 0:o.i18nKey)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_FORM3_RELATIONSHIP"),text:y(null==e||null===(i=e.relationship)||void 0===i?void 0:i.i18nKey)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:y(null==e||null===(a=e.ownerType)||void 0===a?void 0:a.i18nKey)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_FORM3_OWNERSHIP_TYPE"),text:""+y(null!=x&&x.ownershipCategoryTemp?"PT_OWNERSHIP_"+(null==x?void 0:x.ownershipCategoryTemp):"CS_NA")})))})),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},y("PT_MUTATION_DETAILS")),l.createElement(t.LinkButton,{label:l.createElement(t.EditIcon,null),onClick:()=>k("/digit-ui/citizen/pt/property/property-mutation/is-mutatation-pending")})),l.createElement("div",null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:y("PT_MUTATION_PENDING_COURT"),text:y(null==M||null===(v=M.isMutationInCourt)||void 0===v?void 0:v.code)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_DETAILS_COURT_CASE"),text:(null==M?void 0:M.caseDetails)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_PROP_UNDER_GOV_AQUISITION"),text:y(null==M||null===(E=M.isPropertyUnderGovtPossession)||void 0===E?void 0:E.code)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_DETAILS_GOV_AQUISITION"),text:(null==M?void 0:M.govtAcquisitionDetails)||y("CS_NA")}))),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},y("PT_REGISTRATION_DETAILS")),l.createElement(t.LinkButton,{label:l.createElement(t.EditIcon,null),onClick:()=>k("/digit-ui/citizen/pt/property/property-mutation/reason")})),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:y("PT_REASON_PROP_TRANSFER"),text:""+y(null==M||null===(_=M.reasonForTransfer)||void 0===_?void 0:_.i18nKey)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_PROP_MARKET_VALUE"),text:(null==M?void 0:M.marketValue)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_REG_NUMBER"),text:(null==M?void 0:M.documentNumber)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_DOC_ISSUE_DATE"),text:B}),l.createElement(t.Row,{className:"border-none",label:y("PT_REG_DOC_VALUE"),text:(null==M?void 0:M.documentValue)||y("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:y("PT_REMARKS"),text:(null==M?void 0:M.remarks)||y("CS_NA")})),l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px 16px 0px"}},y("PT_COMMON_DOCS")),l.createElement(t.LinkButton,{label:l.createElement(t.EditIcon,null),onClick:()=>k("/digit-ui/citizen/pt/property/property-mutation/transfer-reason-doc")})),l.createElement("div",{style:{marginTop:"0 important"}},Array.isArray(null==x?void 0:x.documents)?(null==x?void 0:x.documents.length)>0&&l.createElement(Et,{property:x}):l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",text:y("PT_NO_DOCUMENTS_MSG")}))),l.createElement(t.CheckBox,{label:y("PT_MUTATION_FINAL_DECLARATION_MESSAGE"),onChange:()=>{Y(!H)},styles:{height:"auto",margin:"2rem 0"}}),l.createElement(t.SubmitBar,{label:y("PT_COMMON_BUTTON_SUBMIT"),onSubmit:T,disabled:!H})))},Tn=function(e){var t,n;return void 0===e&&(e=null),null==e?"CS_NA":e&&null!==(t=e)&&void 0!==t&&t.Bill&&e.Bill[0]?null===(n=e.Bill[0])||void 0===n?void 0:n.totalAmount:"0"},fn=e=>{let{data:n,showHorizontalBar:i,wrapperStyles:a,tableStyles:r,containerStyles:u,rowContainerStyles:s}=e;return l.createElement("div",{className:a},n.map((e,n)=>l.createElement("div",{className:u},0!==n&&i&&l.createElement("div",{className:"historyHorizontalBar"}),l.createElement(t.StatusTable,{style:r},((e,n)=>{const{t:i}=o.useTranslation();return Object.keys(e).map(o=>l.createElement("div",null,l.createElement(t.Row,{rowContainerStyle:n,label:i(o),text:""+(e[o]||"NA")})))})(e,s)))))},yn=e=>{let{userType:n,propertyId:a}=e;const{t:r}=o.useTranslation(),{propertyIds:u}=i.useParams(),s=Digit.ULBService.getCurrentTenantId(),{isLoading:d,data:c}=Digit.Hooks.pt.usePropertySearch({tenantId:s,filters:{propertyIds:"employee"===n?a:u,audit:!0}});let p=(null==c?void 0:c.Properties)||" ",m={};if(p&&Array.isArray(p)&&p.length>0){let e=p[0];p=p.filter(e=>"ACTIVE"==e.status),0===p.length&&p.push(e),p=function(e){void 0===e&&(e=[]);let t=[];return e.map(e=>{JSON.stringify(t).includes(JSON.stringify(e.acknowldgementNumber))||t.push(e)}),t&&Array.isArray(t)&&t.filter(e=>"UPDATE"!=e.creationReason)}(p),p&&p.length>0&&p.map(e=>{let t=e.auditDetails.lastModifiedTime;e.owners=e.owners.filter(e=>"ACTIVE"==e.status),m[t]||(m[t]=[]),m[t].push(...(e=>{const{owners:t,institution:n,ownershipCategory:l}=e;let o=[];return t.map(e=>{let t={};t=n?{PT_COMMON_INSTITUTION_NAME:(null==n?void 0:n.name)||r("CS_NA"),PT_TYPE_OF_INSTITUTION:r(n.type)||r("CS_NA"),PT_OWNER_NAME:n.nameOfAuthorizedPerson||r("CS_NA"),PT_COMMON_AUTHORISED_PERSON_DESIGNATION:r(n.designation)||r("CS_NA"),PT_FORM3_MOBILE_NUMBER:e.mobileNumber||r("CS_NA"),PT_OWNERSHIP_INFO_TEL_PHONE_NO:e.altContactNumber||r("CS_NA"),PT_FORM3_EMAIL_ID:e.emailId||r("CS_NA"),PT_OWNERSHIP_INFO_CORR_ADDR:(null==e?void 0:e.correspondenceAddress)||r("CS_NA"),PT_FORM3_OWNERSHIP_TYPE:r("PROPERTYTAX_BILLING_SLAB_"+l.split(".")[0])||r("CS_NA")}:{PT_OWNER_NAME:e.name||r("CS_NA"),PT_FORM3_GENDER:r(e.gender)||r("CS_NA"),PT_FORM3_MOBILE_NUMBER:e.mobileNumber||r("CS_NA"),PT_FORM3_GUARDIAN_NAME:e.fatherOrHusbandName||r("CS_NA"),PT_FORM3_RELATIONSHIP:r(e.relationship)||r("CS_NA"),PT_SPECIAL_OWNER_CATEGORY:r("NONE"===e.ownerType?"CS_NA":e.ownerType)||r("CS_NA"),PT_MUTATION_AUTHORISED_EMAIL:e.emailId||r("CS_NA"),PT_OWNERSHIP_INFO_CORR_ADDR:e.permanentAddress||r("CS_NA")},o.push(t)}),o})(e))})}return d?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,a?l.createElement(t.Card,null,l.createElement("div",null,Object.keys(m).map((e,n,o)=>{const i=w(Number(e));return l.createElement("div",{className:"historyContent"},l.createElement("div",{style:{display:"flex"}},l.createElement("div",{className:"historyCheckpoint zIndex"}),n!==Object.keys(m).length-1?l.createElement("div",{className:"rowContainerStyles"},l.createElement(t.CardSubHeader,{className:"historyTableDateLabel bottomMargin"}," ",r("PT_DATE_OF_TRANSFER")," "),l.createElement(t.CardSubHeader,{className:"historyTableDate bottomMargin"},i)):null),l.createElement(fn,{data:m[e],wrapperStyles:"wrapperStyles",containerStyles:"containerStyles",rowContainerStyles:{display:"flex",flexDirection:"column"},tableStyles:{display:"grid",gridAutoRows:"min-content",gridTemplateColumns:"repeat(5, minmax(100px, 1fr))"}}),n!==o.length-1&&l.createElement("div",{className:"checkpoint-connect",style:{marginLeft:0,top:"4px"}}))}))):l.createElement(t.Card,null,l.createElement(t.Header,null,r("PT_OWNER_HISTORY")),l.createElement("div",null,Object.keys(m).map(e=>{const n=w(Number(e));return l.createElement("div",{style:{padding:"10px"}},l.createElement("div",{className:"historyCheckpoint"}),l.createElement(t.CardSubHeader,{className:"historyTableDateLabel smallText"}," ",r("PT_DATE_OF_TRANSFER")," "),l.createElement(t.CardSubHeader,{className:"historyTableDate smallText"}," - ",n),l.createElement(fn,{data:m[e],wrapperStyles:"wrapperStyles leftBorder",showHorizontalBar:!0}))}))))},Sn=e=>{var n,i,a;let{userType:r,formData:u,config:s,onSelect:c}=e;const{t:p}=o.useTranslation(),m="employee"===r?u.originalData:u.searchResult.property,v=null==m||null===(n=m.ownershipCategory)||void 0===n||null===(i=n.split)||void 0===i?void 0:i.call(n,".");var E;return"employee"===r?l.createElement(l.Fragment,null,l.createElement(t.StatusTable,null,null==m||null===(E=m.owners)||void 0===E?void 0:E.filter(e=>"ACTIVE"===e.status).map((e,n,o)=>{var i,a;return l.createElement(l.Fragment,null,(null==m||null===(i=m.owners)||void 0===i?void 0:i.filter(e=>"ACTIVE"===e.status).length)>1?l.createElement(t.CardCaption,{style:{marginTop:"24px",marginBottom:"12px",display:"block"}},p("ES_OWNER")+"  "+(n+1)):null,null===(a=s.labels)||void 0===a?void 0:a.filter(e=>"ALL"===e.ownershipType||(null==v?void 0:v[0].includes(e.ownershipType))||e.ownershipType===(null==v?void 0:v[0])).map(e=>{var o,i;let a=null==e||null===(o=e.keyPath)||void 0===o||null===(i=o.filter(e=>!["searchResult","property"].includes(e)))||void 0===i?void 0:i.reduce((e,t)=>"_index_"===t?null==e?void 0:e[n]:null==e?void 0:e[t],m);return l.createElement(t.Row,{key:e.label,label:p(e.label),text:a||"N/A"})}))}))):l.createElement(l.Fragment,null,l.createElement(d,{currentStep:1,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:p,config:s,onSelect:c,onSkip:()=>{},isDisabled:!1},l.createElement(t.CardHeader,null,p("PT_MUTATION_TRANSFEROR_DETAILS")),null==m||null===(a=m.owners)||void 0===a?void 0:a.filter(e=>"ACTIVE"===e.status).map((e,n,o)=>{var i,a;return l.createElement(l.Fragment,{key:n},(null==m||null===(i=m.owners)||void 0===i?void 0:i.filter(e=>"ACTIVE"===e.status).length)>1?l.createElement(t.CardCaption,{style:{marginTop:"24px",marginBottom:"12px",display:"block"}},p("ES_OWNER")+"  "+(n+1)):null,null===(a=s.labels)||void 0===a?void 0:a.filter(e=>"ALL"===e.ownershipType||(null==v?void 0:v[0].includes(e.ownershipType))||e.ownershipType===(null==v?void 0:v[0])).map(e=>{var o;let i=null==e||null===(o=e.keyPath)||void 0===o?void 0:o.reduce((e,t)=>"_index_"===t?null==e?void 0:e[n]:null==e?void 0:e[t],u);return l.createElement(t.KeyNote,{key:e.label,keyValue:p(e.label),note:"string"==typeof i?p(i):"N/A",noteStyle:e.noteStyle})}))})))},gn=()=>({name:"",mobileNumber:"",fatherOrHusbandName:"",emailId:"",permanentAddress:"",relationship:"",ownerType:"",gender:"",isCorrespondenceAddress:!1,documents:{},key:Date.now()}),Pn=[{isMandatory:!0,type:"component",route:"owner-details",key:"owners",component:"SelectOwnerDetails",texts:{headerCaption:"PT_MUTATION_TRANSFEREE_DETAILS_HEADER",header:"PT_OWNERSHIP_INFO_SUB_HEADER",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},withoutLabel:!0,nextStep:"special-owner-category",hideInEmployee:!0},{type:"component",route:"special-owner-category",isMandatory:!0,component:"SelectSpecialOwnerCategoryType",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY",cardText:"PT_FORM3_HEADER_MESSAGE",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"owner-address",hideInEmployee:!0},{type:"component",route:"owner-address",isMandatory:!0,component:"SelectOwnerAddress",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_OWNERS_ADDRESS",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"special-owner-category-proof",hideInEmployee:!0},{type:"component",component:"SelectAltContactNumber",key:"owners",withoutLabel:!0,hideInEmployee:!0},{type:"component",route:"special-owner-category-proof",isMandatory:!0,component:"SelectSpecialProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_SPECIAL_OWNER_CATEGORY_PROOF_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT"},key:"owners",withoutLabel:!0,nextStep:"proof-of-identity",hideInEmployee:!0},{type:"component",route:"proof-of-identity",isMandatory:!0,component:"SelectProofIdentity",texts:{headerCaption:"PT_OWNERS_DETAILS",header:"PT_PROOF_IDENTITY_HEADER",cardText:"",submitBarLabel:"PT_COMMON_NEXT",addMultipleText:"PT_COMMON_ADD_APPLICANT_LABEL"},key:"owners",withoutLabel:!0,nextStep:null,hideInEmployee:!0}],An=e=>{let{owner:t,addNewOwner:n,setOwners:a,owners:r,ownerIndex:u,propsConfig:s,...d}=e;const{t:c}=o.useTranslation(),{path:p}=i.useRouteMatch(),{pathname:m}=i.useLocation(),v=i.useHistory(),E=e=>{a(n=>n.map((n,l)=>n.key===t.key?{...n,...e}:n)),n()},_=function(e,n,l,o,i,c,p){a(e=>e.map((e,l)=>e.key===t.key?{...e,...n}:e));let E=m.split("/"),_=E.pop(),T=Pn.filter(e=>e.route===_)[0],f=c?"?"+Object.keys(c).map(e=>e+"="+c[e]).join("&"):"";const y=l?v.replace:v.push;if(T.nextStep){if("string"==typeof T.nextStep)y(E.join("/")+"/"+T.nextStep+f);else if("object"==typeof T.nextStep&&T.nextStep){let e=T.nextStep[p.routeKey];y(E.join("/")+"/"+e+f)}}else u!==r.length-1?(E.pop(),E.push(u+1),y(E.join("/")+"/"+Pn[0].route)):d.onSelect(s.key,r,"","","",{nesting:2})};return l.createElement(i.Switch,null,Pn.map((e,t)=>{const{component:n}=e,o="string"==typeof n?Digit.ComponentRegistryService.getComponent(n):n;return l.createElement(i.Route,{key:t,path:p+"/"+e.route},l.createElement(o,{config:e,onSelect:_,onSkip:()=>{},t:c,formData:{...d.formData,owners:r},ownerIndex:u,addNewOwner:E}))}))},Nn={type:"register"},On={type:"login"},In={otpSentTo:!1,isNewUser:!1,invalid:!1,showToast:null,error:!1,warning:!1,name:"",message:"",mobileNumber:"",previousAction:null,disable:!1},hn=(e,t)=>{switch(t.type){case"verifiedotp":return{...e,previousAction:t.type,message:"",disable:!1,showToast:!1,error:!0,warning:!1,invalid:!0};case"verifyotp":return{...e,previousAction:t.type,message:"",disable:!0,showToast:!1,error:!0,warning:!1,invalid:!1};case"otpsent":return{...e,previousAction:t.type,message:"PT_SEC_OTP_SENT_SUCEESS",otpSentTo:t.value,isNewUser:t.isNewUser,showToast:!0,error:!1,warning:!1};case"resettoast":return{...e,previousAction:t.type,message:"",showToast:!1,error:!1,warning:!1};case"success":return{...e,previousAction:t.type,message:t.value,showToast:!0,warning:!1,error:!1};case"warning":return{...e,previousAction:t.type,message:t.value,showToast:!0,warning:!0,error:!1};case"error":return{...e,previousAction:t.type,message:t.value,showToast:!0,error:!0};case"reset":default:return{...In}}},Cn=function(e,t){return Promise.resolve(c(function(){return Promise.resolve(Digit.UserService.sendOtp(e,t)).then(function(e){return[e,null]})},function(e){return[null,e]}))},Rn={invalid:!1,showToast:null,error:!1,warning:!1,name:"",message:"",mobileNumber:"",previousAction:null,disable:!1},bn=(e,t)=>{switch(t.type){case"verifiedotp":return{...e,previousAction:t.type,message:"",disable:!1,showToast:!1,error:!0,warning:!1,invalid:!0};case"verifyotp":return{...e,previousAction:t.type,message:"",disable:!0,showToast:!1,error:!0,warning:!1,invalid:!1};case"otpsent":return{...e,previousAction:t.type,message:"PT_SEC_OTP_SENT_SUCEESS",showToast:!0,error:!1,warning:!1};case"resettoast":return{...e,previousAction:t.type,message:"",showToast:!1,error:!1,warning:!1};case"success":return{...e,previousAction:t.type,message:t.value,showToast:!0,warning:!1,error:!1};case"warning":return{...e,previousAction:t.type,message:t.value,showToast:!0,warning:!0,error:!1};case"error":return{...e,previousAction:t.type,message:t.value,showToast:!0,error:!0};case"reset":default:return{...Rn}}},Dn=e=>{let{t:n,currentPage:o,columns:i,data:a,getCellProps:r,disableSort:u,onSort:s,onNextPage:d,onPrevPage:c,onPageSizeChange:p,pageSizeLimit:m,sortParams:v,totalRecords:E}=e;return l.createElement(t.Table,{t:n,data:a,currentPage:o,columns:i,getCellProps:r,onNextPage:d,onPrevPage:c,pageSizeLimit:m,disableSort:u,onPageSizeChange:p,onSort:s,sortParams:v,totalRecords:E})},Ln=e=>{let{businessService:a}=e;const{t:r}=o.useTranslation(),u=[{text:"ES_TITLE_NEW_REGISTRATION",link:"/digit-ui/employee/pt/new-application",businessService:"PT",roles:["PT_CEMP"]},{text:"PT_SEARCH_PROPERTY",link:"/digit-ui/employee/pt/search",businessService:"PT",roles:[]},{text:"ES_COMMON_APPLICATION_SEARCH",link:"/digit-ui/employee/pt/application-search",businessService:"PT",roles:[]}],[s,d]=n.useState([]),{roles:c}=Digit.UserService.getUser().info;return n.useEffect(()=>{let e=u.filter(e=>e.businessService===a).filter(e=>{let{roles:t}=e;return t.some(e=>c.map(e=>{let{code:t}=e;return t}).includes(e))||!(null!=t&&t.length)});d(e)},[]),l.createElement(t.Card,{className:"employeeCard filter inboxLinks"},l.createElement("div",{className:"complaint-links-container"},l.createElement("div",{className:"header"},l.createElement("span",{className:"logo"},l.createElement(t.PropertyHouse,null))," ",l.createElement("span",{className:"text"},r("ES_TITLE_PROPERTY_TAX"))),l.createElement("div",{className:"body"},s.map((e,t)=>{let{link:n,text:o,hyperlink:a=!1,roles:u=[]}=e;return l.createElement("span",{className:"link",key:t},a?l.createElement("a",{href:n},o):l.createElement(i.Link,{to:n},r(o)))}))))},wn={date:t.DatePicker,mobileNumber:t.MobileNumber,Locality:e=>l.createElement(t.Localities,{tenantId:Digit.ULBService.getCurrentTenantId(),selectLocality:e.onChange,keepNull:!1,boundaryType:"revenue",selected:e.value,disableLoader:!0,sortFn:(e,t)=>e.i18nkey<t.i18nkey?-1:1})},Mn=e=>{var i;let{onSearch:r,type:u,onClose:s,searchFields:d,searchParams:c,isInboxPage:p,clearSearch:m}=e;const{t:v}=o.useTranslation(),{handleSubmit:E,reset:_,watch:T,control:f,setError:y,clearErrors:S,formState:g,setValue:P}=a.useForm({defaultValues:p?c:{locality:null,city:null,...c}}),A=T(),N=innerWidth<=640;function O(){const e=d.reduce((e,t)=>({...e,[null==t?void 0:t.name]:""}),{});if(_(e),p){const e={...c};e.delete=[],d.forEach(t=>{e.delete.push(null==t?void 0:t.name)}),r({...e})}else m()}n.useEffect(()=>{d.forEach(e=>{let{pattern:t,name:n,maxLength:l,minLength:o,errorMessages:i,...a}=e;const r=A[n],u=g.errors[n];t&&(new RegExp(t).test(r)||u?new RegExp(t).test(r)&&"pattern"===(null==u?void 0:u.type)&&S([n]):y(n,{type:"pattern",message:v(null==i?void 0:i.pattern)||v("PATTERN_"+n.toUpperCase()+"_FAILED")})),o&&((null==r?void 0:r.length)<o&&!u?y(n,{type:"minLength",message:v((null==i?void 0:i.minLength)||"MINLENGTH_"+n.toUpperCase()+"_FAILED")}):(null==r?void 0:r.length)>=o&&"minLength"===(null==u?void 0:u.type)&&S([n])),l&&((null==r?void 0:r.length)>l&&!u?y(n,{type:"maxLength",message:v((null==i?void 0:i.maxLength)||"MAXLENGTH_"+n.toUpperCase()+"_FAILED")}):(null==r?void 0:r.length)<=l&&"maxLength"===(null==u?void 0:u.type)&&S([n]))})},[A,g,y,S]);const I=e=>l.createElement(t.LinkLabel,{style:{display:"inline",...e?{margin:0}:{}},onClick:O},v("ES_COMMON_CLEAR_SEARCH"));return l.createElement("form",{onSubmit:E(e=>{e.mobileNumber||delete e.mobileNumber,e.delete=[],d.forEach(t=>{e[t.name]||e.delete.push(t.name)}),r(e),"mobile"===u&&s()})},l.createElement(l.Fragment,null,l.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:p?"24px":"revert"}},l.createElement("div",{className:"search-complaint-container"},("mobile"===u||N)&&l.createElement("div",{className:"complaint-header"},l.createElement("h2",null,v("ES_COMMON_SEARCH_BY")),l.createElement("span",{onClick:s},l.createElement(t.CloseSvg,null))),l.createElement("div",{className:"complaint-input-container for-pt "+(p?"":"for-search"),style:{width:"100%",display:"grid"}},null==d||null===(i=d.filter(e=>!0))||void 0===i?void 0:i.map((e,n)=>{var o,i,r;return l.createElement("div",{key:e.name,className:"input-fields"},l.createElement("span",{className:"mobile-input"},l.createElement(t.Label,null,v(e.label)+" "+(e.isMendatory?"*":"")),l.createElement(a.Controller,e.type?{render:t=>l.createElement(null==wn?void 0:wn[e.type],{formValue:A,setValue:P,onChange:t.onChange,value:t.value}),name:e.name,control:f,defaultValue:""}:{render:e=>l.createElement(t.TextInput,{onChange:e.onChange,value:e.value}),name:e.name,control:f,defaultValue:""})),null!=g&&null!==(o=g.dirtyFields)&&void 0!==o&&o[e.name]?l.createElement("span",{style:{fontWeight:"700",color:"rgba(212, 53, 28)",paddingLeft:"8px",marginTop:"-20px",fontSize:"12px"},className:"inbox-search-form-error"},null==g||null===(i=g.errors)||void 0===i||null===(r=i[e.name])||void 0===r?void 0:r.message):null)}),p&&l.createElement("div",{style:{gridColumn:"2/3",textAlign:"right",paddingTop:"10px"},className:"input-fields"},l.createElement("div",null,I())),"desktop"===u&&!N&&l.createElement("div",{style:{maxWidth:"unset",marginLeft:"unset"},className:"search-submit-wrapper"},l.createElement(t.SubmitBar,{className:"submit-bar-search",label:v("ES_COMMON_SEARCH"),disabled:!!Object.keys(g.errors).length||(()=>{var e;let t=!0;return Object.keys(A).forEach(e=>{!["locality","city"].includes(e)&&A[e]&&(t=!1)}),null==d||!d.find(e=>"locality"===e.name)||null!=A&&null!==(e=A.locality)&&void 0!==e&&e.code||(t=!0),t})(),submit:!0}),!p&&l.createElement("div",null,I()))))),("mobile"===u||N)&&l.createElement(t.ActionBar,{className:"clear-search-container"},l.createElement("button",{className:"clear-search",style:{flex:1}},I(N)),l.createElement(t.SubmitBar,{disabled:!!Object.keys(g.errors).length,label:v("ES_COMMON_SEARCH"),style:{flex:1},submit:!0}))))},xn=e=>{let{tableConfig:i,filterComponent:a,...r}=e;const{data:u,useNewInboxAPI:s}=r,{t:d}=o.useTranslation(),[c,p]=n.useState(()=>{var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent(a)}),[m,v]=n.useState(()=>{var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent(r.EmptyResultInboxComp)}),[E,_]=n.useState(!1),T=l.useMemo(()=>r.isSearch?i.searchColumns(r):i.inboxColumns(r)||[],[]);let f;return r.isLoading?f=l.createElement(t.Loader,null):E?f=null:!u||0===(null==u?void 0:u.length)||s&&null!=u&&u[0].dataEmpty?f=m&&l.createElement(m,{data:u})||(0===(null==u?void 0:u.length)||s&&null!=u&&u[0].dataEmpty?l.createElement(t.Card,{style:{marginTop:20}},d("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n").map((e,t)=>l.createElement("p",{key:t,style:{textAlign:"center"}},e))):l.createElement(t.Loader,null)):(null==u?void 0:u.length)>0&&(f=l.createElement(Dn,{t:d,data:u,columns:T,getCellProps:e=>({style:{minWidth:e.column.Header===d("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:r.onPageSizeChange,currentPage:r.currentPage,onNextPage:r.onNextPage,onPrevPage:r.onPrevPage,pageSizeLimit:r.pageSizeLimit,onSort:r.onSort,disableSort:r.disableSort,sortParams:r.sortParams,totalRecords:r.totalRecords})),l.createElement("div",{className:"inbox-container"},!r.isSearch&&l.createElement("div",{className:"filters-container"},l.createElement(Ln,{parentRoute:r.parentRoute,businessService:r.moduleCode}),l.createElement("div",null,l.createElement(c,{defaultSearchParams:r.defaultSearchParams,onFilterChange:r.onFilterChange,searchParams:r.searchParams,type:"desktop",useNewInboxAPI:s,statusMap:s?null==u?void 0:u[0].statusMap:null,moduleCode:r.moduleCode}))),l.createElement("div",{style:{flex:1}},l.createElement(Mn,{defaultSearchParams:r.defaultSearchParams,onSearch:e=>{r.onSearch(e),_(!1)},type:"desktop",searchFields:r.searchFields,isInboxPage:!(null!=r&&r.isSearch),searchParams:r.searchParams,clearSearch:()=>_(!0)}),l.createElement("div",{className:"result",style:{marginLeft:null!=r&&r.isSearch?"":"24px",flex:1}},f)))},Un=e=>{const{t:i}=o.useTranslation(),[a,r]=n.useState(()=>{var t,n;return null!==(t=e.sortParams)&&void 0!==t&&null!==(n=t[0])&&void 0!==n&&n.desc?{code:"DESC",name:i("ES_INBOX_DATE_LATEST_FIRST")}:{code:"ASC",name:i("ES_INBOX_DATE_LATEST_LAST")}});function u(){}return l.createElement(l.Fragment,null,l.createElement("div",{className:"filter"},l.createElement("div",{className:"filter-card"},l.createElement("div",{className:"heading"},l.createElement("div",{className:"filter-label"},i("SORT_BY"),":"),l.createElement("div",{className:"clearAll",onClick:u},i("ES_COMMON_CLEAR_ALL")),"desktop"===e.type&&l.createElement("span",{className:"clear-search",onClick:u},i("ES_COMMON_CLEAR_ALL")),"mobile"===e.type&&l.createElement("span",{onClick:e.onClose},l.createElement(t.CloseSvg,null))),l.createElement("div",null,l.createElement(t.RadioButtons,{onSelect:function(t){e.onSort([{id:"createdTime",desc:"DESC"===t.code}]),e.onClose()},selectedOption:a,optionsKey:"name",options:[{code:"DESC",name:i("ES_INBOX_DATE_LATEST_FIRST")},{code:"ASC",name:i("ES_INBOX_DATE_LATEST_LAST")}]})))))},Fn=e=>{let{t:o,data:i,onFilterChange:a,onSearch:r,onSort:u,serviceRequestIdKey:s,isFstpOperator:d,isLoading:c,isSearch:p,searchParams:m,searchFields:v,sortParams:E,linkPrefix:_,filterComponent:T}=e;const[f,y]=n.useState(p?"SEARCH":""),[S,g]=n.useState(!!p),[P,A]=n.useState(E),[N]=n.useState(()=>{var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent(T)});n.useEffect(()=>{f&&g(!0)},[f]);const O=()=>{g(!1),y(""),A(E)};if(c)return l.createElement(t.Loader,null);let I;return i&&0!==(null==i?void 0:i.length)?i&&(null==i?void 0:i.length)>0&&(I=l.createElement(t.DetailsCard,{data:i,serviceRequestIdKey:s,linkPrefix:_||"/digit-ui/employee/pt/"})):I=l.createElement(t.Card,{style:{marginTop:20}},o("CS_MYAPPLICATIONS_NO_APPLICATION").split("\\n").map((e,t)=>l.createElement("p",{key:t,style:{textAlign:"center"}},e))),l.createElement(l.Fragment,null,l.createElement("div",{className:"searchBox"},r&&l.createElement(t.SearchAction,{text:"SEARCH",handleActionClick:()=>{y("SEARCH"),g(!0)}}),!p&&a&&l.createElement(t.FilterAction,{text:"FILTER",handleActionClick:()=>{y("FILTER"),g(!0)}}),l.createElement(t.FilterAction,{text:"SORT",handleActionClick:()=>{y("SORT"),g(!0)}})),I,S&&l.createElement(t.PopUp,null,"FILTER"===f&&l.createElement("div",{className:"popup-module"},l.createElement(N,{onFilterChange:e=>{a(e),g(!1)},Close:O,type:"mobile",searchParams:m})),"SORT"===f&&l.createElement("div",{className:"popup-module"},l.createElement(Un,{type:"mobile",sortParams:E,onClose:O,onSort:u})),"SEARCH"===f&&l.createElement("div",{className:"popup-module"},l.createElement(Mn,{type:"mobile",onClose:O,onSearch:r,isFstpOperator:d,searchParams:m,searchFields:v}))))},Bn=e=>{let{linkPrefix:a,classNameForMobileView:r=""}=e;const{t:u}=o.useTranslation(),s=[{text:u("ES_TITLE_NEW_REGISTRATION"),link:"/digit-ui/employee/pt/new-application"},{text:u("ES_TITILE_SEARCH_APPLICATION"),link:a+"/search"}],[d,c]=n.useState([]),{roles:p}=Digit.UserService.getUser().info;return n.useEffect(()=>{let e=[];s.forEach(t=>{var n;t.accessTo?(n=t.accessTo,p.filter(e=>n.includes(e.code)).length&&e.push(t)):e.push(t)}),c(e)},[]),l.createElement(t.Card,{className:"employeeCard filter"},l.createElement("div",{className:"complaint-links-container "+r},l.createElement("div",{className:"header"},l.createElement("span",{className:"logo"},l.createElement(t.ShippingTruck,null))," ",l.createElement("span",{className:"text"},u("ES_TITLE_PROPERTY_TAX"))),l.createElement("div",{className:"body"},d.map((e,t)=>{let{link:n,text:o}=e;return l.createElement("span",{className:"link",key:t},l.createElement(i.Link,{to:n},o))}))))},kn=e=>{let{data:t,isLoading:n,isSearch:i,searchFields:a,onFilterChange:r,onSearch:u,onSort:s,parentRoute:d,searchParams:c,sortParams:p,linkPrefix:m,tableConfig:v,filterComponent:E}=e;const{t:_}=o.useTranslation();return l.createElement("div",{style:{padding:0}},l.createElement("div",{className:"inbox-container"},l.createElement("div",{className:"filters-container"},!i&&l.createElement(Bn,{classNameForMobileView:"linksWrapperForMobileInbox",linkPrefix:d,isMobile:!0}),l.createElement(Fn,{t:_,data:null==t?void 0:t.map(e=>{const t={};return(i?v.searchColumns():v.inboxColumns()).forEach(n=>{n.mobileCell&&(t[n.Header]=n.mobileCell(e))}),t}),onFilterChange:r,isLoading:n,isSearch:i,onSearch:u,onSort:s,searchParams:c,searchFields:a,linkPrefix:m,sortParams:p,serviceRequestIdKey:null==v?void 0:v.serviceRequestIdKey,filterComponent:E}))))},Hn=e=>{var i,a,r,u,s;let{useNewInboxAPI:d,parentRoute:c,moduleCode:p="PT",initialStates:m={},filterComponent:v,isInbox:E,rawWfHandler:_,rawSearchHandler:T,combineResponse:f,wfConfig:y,searchConfig:S,middlewaresWf:g,middlewareSearch:P,EmptyResultInboxComp:A}=e;const N=Digit.ULBService.getCurrentTenantId(),{t:O}=o.useTranslation(),[I,h]=n.useState(()=>E?{}:{enabled:!1}),[C,R]=n.useState(()=>{var e;return null===(e=Digit.ComponentRegistryService)||void 0===e?void 0:e.getComponent("PTInboxTableConfig")}),[b,D]=n.useState(m.pageOffset||0),[L,w]=n.useState(m.pageSize||10),[M,x]=n.useState(m.sortParams||[{id:"createdTime",desc:!1}]),[U,F]=n.useState(m.searchParams||{});let B=window.Digit.Utils.browser.isMobile(),k=B?{limit:100,offset:0,sortBy:null==M||null===(i=M[0])||void 0===i?void 0:i.id,sortOrder:null!=M&&null!==(a=M[0])&&void 0!==a&&a.desc?"DESC":"ASC"}:{limit:L,offset:b,sortBy:null==M||null===(r=M[0])||void 0===r?void 0:r.id,sortOrder:null!=M&&null!==(u=M[0])&&void 0!==u&&u.desc?"DESC":"ASC"};const{isLoading:H,data:Y,searchFields:W,...j}=d?Digit.Hooks.useNewInboxGeneral({tenantId:N,ModuleCode:p,filters:{...U,...k,sortParams:M}}):Digit.Hooks.useInboxGeneral({tenantId:N,businessService:p,isInbox:E,filters:{...U,...k,sortParams:M},rawWfHandler:_,rawSearchHandler:T,combineResponse:f,wfConfig:y,searchConfig:{...I,...S},middlewaresWf:g,middlewareSearch:P});n.useEffect(()=>{D(0)},[U]);const K=e=>{let t=e.delete,n={...U,...e};t&&t.forEach(e=>delete n[e]),delete e.delete,F({...n}),h({enabled:!0})},V=n.useCallback(e=>{0!==e.length&&x(e)},[]);var z,G;if(null!==(null==j||null===(s=j.data)||void 0===s?void 0:s.length))return B?l.createElement(kn,{data:Y,isLoading:H,isSearch:!E,searchFields:W,onFilterChange:K,onSearch:K,onSort:V,parentRoute:c,searchParams:U,sortParams:M,linkPrefix:c+"/application-details/",tableConfig:null!=j&&j.tableConfig?null===(z=res)||void 0===z?void 0:z.tableConfig:C(O).PT,filterComponent:v,EmptyResultInboxComp:A,useNewInboxAPI:d}):l.createElement("div",null,E&&l.createElement(t.Header,null,O("ES_COMMON_INBOX")),!E&&l.createElement(t.Header,null,O("SEARCH_PROPERTY")),l.createElement(xn,{moduleCode:p,data:Y,tableConfig:C(O).PT,isLoading:H,defaultSearchParams:m.searchParams,isSearch:!E,onFilterChange:K,searchFields:W,onSearch:K,onSort:V,onNextPage:()=>{D(e=>e+L)},onPrevPage:()=>{D(e=>e-L)},currentPage:Math.floor(b/L),pageSizeLimit:L,disableSort:!1,onPageSizeChange:e=>{w(Number(e.target.value))},parentRoute:c,searchParams:U,sortParams:M,totalRecords:Number(null==Y||null===(G=Y[0])||void 0===G?void 0:G.totalCount),filterComponent:v,EmptyResultInboxComp:A,useNewInboxAPI:d}))},Yn=e=>{const t=new Date(e).toString().split(" ");return t.length>0?t[2]+"-"+t[1]+"-"+t[3]:"dd-mmm-yyyy"},Wn=function(e){void 0===e&&(e=[]);let t=e.sort((e,t)=>t.fromPeriod-e.fromPeriod);return Yn(t[t.length-1].fromPeriod)+" to "+Yn(t[0].toPeriod)},jn=()=>{const{t:e}=o.useTranslation(),a=Digit.ULBService.getCurrentTenantId();let{id:r}=i.useParams();const u=r.indexOf("?");-1!=u&&(r=r.slice(0,u));const[s,d]=n.useState([]),c=window.Digit.Utils.browser.isMobile(),{isLoading:p,data:m}=Digit.Hooks.receipts.useReceiptsSearch({businessServices:"PT",consumerCodes:r},a,[],!1);return n.useEffect(()=>{var e;m&&d(null==m||null===(e=m.Payments)||void 0===e?void 0:e.map(e=>({receiptNumber:e.paymentDetails[0].receiptNumber,billPeriod:Wn(e.paymentDetails[0].bill.billDetails),transactionDate:Yn(e.transactionDate),billNo:e.paymentDetails[0].bill.billNumber,paymentStatus:e.paymentStatus?"CS_"+e.paymentStatus:"PT_NA",amountPaid:0===e.totalAmountPaid?"0":e.totalAmountPaid})))},[m]),p?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(t.Header,null,e("PT_PAYMENT_HISTORY")),l.createElement("div",{style:{display:"flex",paddingBottom:"8px",marginBottom:"8px"}},l.createElement("h2",{style:c?{marginLeft:"15px",fontSize:"16px",lineHeight:"24px",width:"30%",fontWeight:"700"}:{fontSize:"16px",lineHeight:"24px",width:"30%",fontWeight:"700"}},e("PT_PROPERTY_PTUID")),l.createElement("div",{style:{whiteSpace:"pre",width:"50%",fontSize:"16px",lineHeight:"24px"}},r)),s.length>0?null==s?void 0:s.map(n=>l.createElement("div",{style:c?{}:{marginLeft:"-16px"}},l.createElement(t.Card,{style:c?{marginBottom:"10px"}:{}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:e("PT_HISTORY_BILL_PERIOD"),text:null==n?void 0:n.billPeriod,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_BILL_NO"),text:null==n?void 0:n.billNo,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_RECEIPT_NO"),text:null==n?void 0:n.receiptNumber,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_PAYMENT_DATE"),text:null==n?void 0:n.transactionDate,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:e("PT_HISTORY_AMOUNT_PAID"),text:null==n?void 0:n.amountPaid}),l.createElement(t.Row,{label:e("PT_HISTORY_PAYMENT_STATUS"),text:e(null==n?void 0:n.paymentStatus),textStyle:{whiteSpace:"pre"}}),l.createElement(t.LinkLabel,{style:c?{marginLeft:"0px"}:{},onClick:()=>function(e,t){try{return Promise.resolve(Digit.Utils.downloadReceipt(null,"PT","consolidatedreceipt",void 0,t)).then(function(){})}catch(e){return Promise.reject(e)}}(0,null==n?void 0:n.receiptNumber)},e("PT_DOWNLOAD_RECEIPT")))))):l.createElement("div",null,l.createElement(t.CardText,null,e("PT_NO_PAYMENTS_HISTORY"))))},Kn=e=>{var o,i;let{register:r,control:u,reset:s,t:d,formState:c,setShowToast:p,previousPage:m}=e;const v=[{code:"CREATE",i18nKey:"CREATE"},{code:"UPDATE",i18nKey:"UPDATE"},{code:"MUTATION",i18nKey:"MUTATION"}],E=[{code:"ACTIVE",i18nKey:"WF_PT_ACTIVE"},{code:"INACTIVE",i18nKey:"WF_PT_INACTIVE"},{code:"INWORKFLOW",i18nKey:"WF_PT_INWORKFLOW"}];return l.createElement(n.Fragment,null,l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_APPLICATION_NO_LABEL")),l.createElement(t.TextInput,{name:"acknowledgementIds",inputRef:r({})})),l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_SEARCHPROPERTY_TABEL_PID")),l.createElement(t.TextInput,{name:"propertyIds",inputRef:r({})})),l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_OWNER_MOBILE_NO")),l.createElement(t.MobileNumber,{name:"mobileNumber",inputRef:r({minLength:{value:10,message:d("CORE_COMMON_MOBILE_ERROR")},maxLength:{value:10,message:d("CORE_COMMON_MOBILE_ERROR")},pattern:{value:/[6789][0-9]{9}/,message:d("CORE_COMMON_MOBILE_ERROR")}}),type:"number",componentInFront:l.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91")}),l.createElement(t.CardLabelError,null,null==c||null===(o=c.errors)||void 0===o||null===(i=o.mobileNumber)||void 0===i?void 0:i.message)),l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_SEARCHPROPERTY_TABEL_APPLICATIONTYPE")),l.createElement(a.Controller,{control:u,name:"creationReason",render:e=>l.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:v,optionKey:"i18nKey",t:d,disable:!1})})),l.createElement(t.SearchField,null,l.createElement("label",null,d("ES_SEARCH_PROPERTY_STATUS")),l.createElement(a.Controller,{control:u,name:"status",render:e=>l.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:E,optionKey:"i18nKey",t:d,disable:!1})})),l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_FROM_DATE")),l.createElement(a.Controller,{render:e=>l.createElement(t.DatePicker,{date:e.value,disabled:!1,onChange:e.onChange}),name:"fromDate",control:u})),l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_TO_DATE")),l.createElement(a.Controller,{render:e=>l.createElement(t.DatePicker,{date:e.value,disabled:!1,onChange:e.onChange}),name:"toDate",control:u})),l.createElement(t.SearchField,{className:"submit"},l.createElement(t.SubmitBar,{label:d("ES_COMMON_SEARCH"),submit:!0}),l.createElement("p",{style:{marginTop:"10px"},onClick:()=>{s({acknowledgementIds:"",fromDate:"",toDate:"",propertyIds:"",mobileNumber:"",status:"",creationReason:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"}),p(null),m()}},d("ES_COMMON_CLEAR_ALL"))))},Vn=e=>{let{Controller:o,register:i,control:a,t:r,reset:s,previousPage:d,handleSubmit:c,tenantId:p,data:m,onSubmit:v,formState:E,setShowToast:_}=e;const[T,f]=n.useReducer(function(e,t){switch(t.type){case"set":return t.payload;case"remove":return!1}},!1),y=()=>{f({type:"remove"})},S=()=>l.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:y},l.createElement(t.CloseSvg,null)),g={Controller:o,register:i,control:a,t:r,reset:s,previousPage:d,formState:E,setShowToast:_},P=n.useCallback(e=>{let{currentlyActiveMobileModal:n,searchFormFieldsComponentProps:o,tenantId:i,...a}=e;return(e=>{let{currentlyActiveMobileModal:n,searchFormFieldsComponentProps:o,tenantId:i,...a}=e;const{closeMobilePopupModal:s}=a;switch(n){case"SearchFormComponent":return l.createElement(t.SearchForm,a,l.createElement(S,null),l.createElement("div",{className:"MobilePopupHeadingWrapper"},l.createElement("h2",null,r("ES_COMMON_SEARCH"),":")),l.createElement(Kn,u({},o,{closeMobilePopupModal:s,tenantId:i,t:r})));default:return l.createElement("span",null)}})({currentlyActiveMobileModal:n,searchFormFieldsComponentProps:o,tenantId:i,...a})},[T]),A=n.useMemo(()=>null!=m&&m.display||""===m?[]:null==m?void 0:m.map(e=>{var t,n,l,o,i,a,u,s,d,c;return{[r("PT_SEARCHPROPERTY_TABEL_PID")]:null==e?void 0:e.propertyId,[r("PT_APPLICATION_NO_LABEL")]:(null==e?void 0:e.acknowldgementNumber)||"-",[r("PT_SEARCHPROPERTY_TABEL_APPLICATIONTYPE")]:(null==e?void 0:e.creationReason)||"",[r("PT_COMMON_TABLE_COL_OWNER_NAME")]:(null==e||null===(t=e.owners)||void 0===t?void 0:t.map(e=>e.name).join(","))||"",[r("ES_SEARCH_PROPERTY_STATUS")]:r((null==e?void 0:e.status)&&"WF_PT_"+(null==e?void 0:e.status)||"NA")||"",[r("PT_ADDRESS_LABEL")]:(null!=e&&null!==(n=e.address)&&void 0!==n&&n.doorNo?(null==e||null===(l=e.address)||void 0===l?void 0:l.doorNo)+", ":"")+" "+(null!=e&&null!==(o=e.address)&&void 0!==o&&o.street?(null==e||null===(i=e.address)||void 0===i?void 0:i.street)+", ":"")+(null!=e&&null!==(a=e.address)&&void 0!==a&&a.landmark?(null==e||null===(u=e.address)||void 0===u?void 0:u.landmark)+", ":"")+r(null==e||null===(s=e.address)||void 0===s?void 0:s.locality.code)+", "+r(null==e||null===(d=e.address)||void 0===d?void 0:d.city.code)+" "+(r(null==e||null===(c=e.address)||void 0===c?void 0:c.pincode)?""+(null==e?void 0:e.address.pincode):" ")||"NA"}}),[m]);return l.createElement(l.Fragment,null,l.createElement("div",{className:"searchBox"},l.createElement(t.SearchAction,{text:r("ES_COMMON_SEARCH"),handleActionClick:()=>f({type:"set",payload:"SearchFormComponent"}),tenantId:p,t:r})),T?l.createElement(t.PopUp,null,l.createElement(P,{onSubmit:e=>{f({type:"remove"}),v(e)},handleSubmit:c,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:g,currentlyActiveMobileModal:T,closeMobilePopupModal:y,tenantId:p})):null,null!=m&&m.display?l.createElement(t.Card,{style:{marginTop:20}},r(null==m?void 0:m.display).split("\\n").map((e,t)=>l.createElement("p",{key:t,style:{textAlign:"center"}},e))):l.createElement(t.DetailsCard,{data:A,linkPrefix:"/digit-ui/employee/pt/applicationsearch/application-details/",serviceRequestIdKey:r("PT_SEARCHPROPERTY_TABEL_PID")}))},zn=e=>{var o,r;let{tenantId:u,isLoading:s,t:d,onSubmit:c,data:p,count:m,setShowToast:v}=e;const E=window.Digit.Utils.browser.isMobile(),{register:_,control:T,handleSubmit:f,setValue:y,getValues:S,reset:g,formState:P}=a.useForm({defaultValues:{offset:0,limit:!E&&10,sortBy:"commencementDate",sortOrder:"DESC"}});n.useEffect(()=>{_("offset",0),_("limit",10),_("sortBy","commencementDate"),_("sortOrder","DESC")},[_]);const A=[{code:"CREATE",i18nKey:"CREATE"},{code:"UPDATE",i18nKey:"UPDATE"},{code:"MUTATION",i18nKey:"MUTATION"}],N=[{code:"ACTIVE",i18nKey:"WF_PT_ACTIVE"},{code:"INACTIVE",i18nKey:"WF_PT_INACTIVE"},{code:"INWORKFLOW",i18nKey:"WF_PT_INWORKFLOW"}],O=e=>l.createElement("span",{className:"cell-text"},e),I=n.useMemo(()=>[{Header:d("PT_SEARCHPROPERTY_TABEL_PID"),disableSortBy:!0,accessor:e=>O(e.propertyId||"")},{Header:d("PT_APPLICATION_NO_LABEL"),accessor:"acknowldgementNumber",disableSortBy:!0,Cell:e=>{let{row:t}=e;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/employee/pt/applicationsearch/application-details/"+t.original.propertyId},t.original.acknowldgementNumber)))}},{Header:d("PT_SEARCHPROPERTY_TABEL_APPLICATIONTYPE"),disableSortBy:!0,accessor:e=>O(e.creationReason||"")},{Header:d("PT_COMMON_TABLE_COL_OWNER_NAME"),accessor:e=>O(e.owners.map(e=>e.name).join(",")||""),disableSortBy:!0},{Header:d("ES_SEARCH_PROPERTY_STATUS"),accessor:e=>O(d((null==e?void 0:e.status)&&"WF_PT_"+e.status||"NA")),disableSortBy:!0},{Header:d("PT_ADDRESS_LABEL"),disableSortBy:!0,accessor:e=>{return O((null!=(t=e.address)&&t.doorNo?(null==t?void 0:t.doorNo)+", ":"")+" "+(null!=t&&t.street?(null==t?void 0:t.street)+", ":"")+(null!=t&&t.landmark?(null==t?void 0:t.landmark)+", ":"")+d(null==t?void 0:t.locality.code)+", "+d(null==t?void 0:t.city)+","+(d(null==t?void 0:t.pincode)?""+t.pincode:" ")||"");var t}}],[]),h=n.useCallback(e=>{0!==e.length&&(y("sortBy",e.id),y("sortOrder",e.desc?"DESC":"ASC"))},[]);function C(){y("offset",S("offset")-S("limit")),f(c)()}return l.createElement(l.Fragment,null,E?l.createElement(Vn,{Controller:a.Controller,register:_,control:T,t:d,reset:g,previousPage:C,handleSubmit:f,tenantId:u,data:p,onSubmit:c,formState:P,setShowToast:v}):l.createElement("div",null,l.createElement(t.Header,null,d("PT_SEARCH_PROP_APP")),l.createElement(t.Card,{className:"card-search-heading"},l.createElement("span",{style:{color:"#505A5F"}},d("Provide at least one parameter to search for an application"))),l.createElement(t.SearchForm,{onSubmit:c,handleSubmit:f},l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_APPLICATION_NO_LABEL")),l.createElement(t.TextInput,{name:"acknowledgementIds",inputRef:_({})})),l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_SEARCHPROPERTY_TABEL_PID")),l.createElement(t.TextInput,{name:"propertyIds",inputRef:_({})})),l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_OWNER_MOBILE_NO")),l.createElement(t.MobileNumber,{name:"mobileNumber",inputRef:_({minLength:{value:10,message:d("CORE_COMMON_MOBILE_ERROR")},maxLength:{value:10,message:d("CORE_COMMON_MOBILE_ERROR")},pattern:{value:/[6789][0-9]{9}/,message:d("CORE_COMMON_MOBILE_ERROR")}}),type:"number",componentInFront:l.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91")}),l.createElement(t.CardLabelError,null,null==P||null===(o=P.errors)||void 0===o||null===(r=o.mobileNumber)||void 0===r?void 0:r.message)),l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_SEARCHPROPERTY_TABEL_APPLICATIONTYPE")),l.createElement(a.Controller,{control:T,name:"creationReason",render:e=>l.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:A,optionKey:"i18nKey",t:d,disable:!1})})),l.createElement(t.SearchField,null,l.createElement("label",null,d("ES_SEARCH_PROPERTY_STATUS")),l.createElement(a.Controller,{control:T,name:"status",render:e=>l.createElement(t.Dropdown,{selected:e.value,select:e.onChange,onBlur:e.onBlur,option:N,optionKey:"i18nKey",t:d,disable:!1})})),l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_FROM_DATE")),l.createElement(a.Controller,{render:e=>l.createElement(t.DatePicker,{date:e.value,disabled:!1,onChange:e.onChange}),name:"fromDate",control:T})),l.createElement(t.SearchField,null,l.createElement("label",null,d("PT_TO_DATE")),l.createElement(a.Controller,{render:e=>l.createElement(t.DatePicker,{date:e.value,disabled:!1,onChange:e.onChange}),name:"toDate",control:T})),l.createElement(t.SearchField,{className:"submit"},l.createElement(t.SubmitBar,{label:d("ES_COMMON_SEARCH"),submit:!0}),l.createElement("p",{style:{marginTop:"10px"},onClick:()=>{g({acknowledgementIds:"",fromDate:"",toDate:"",propertyIds:"",mobileNumber:"",status:"",creationReason:"",offset:0,limit:10,sortBy:"commencementDate",sortOrder:"DESC"}),v(null),C()}},d("ES_COMMON_CLEAR_ALL")))),!s&&null!=p&&p.display?l.createElement(t.Card,{style:{marginTop:20}},d(p.display).split("\\n").map((e,t)=>l.createElement("p",{key:t,style:{textAlign:"center"}},e))):s||""===p?""!==p||s&&l.createElement(t.Loader,null):l.createElement(t.Table,{t:d,data:p,totalRecords:m,columns:I,getCellProps:e=>({style:{minWidth:e.column.Header===d("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}),onPageSizeChange:function(e){y("limit",Number(e.target.value)),f(c)()},currentPage:S("offset")/S("limit"),onNextPage:function(){y("offset",S("offset")+S("limit")),f(c)()},onPrevPage:C,pageSizeLimit:S("limit"),onSort:h,disableSort:!1,sortParams:[{id:S("sortBy"),desc:"DESC"===S("sortOrder")}]})))},Gn=e=>{i.useParams();const{t:a}=o.useTranslation(),r=Digit.ULBService.getCurrentTenantId(),[u,s]=n.useState({}),[d,c]=n.useState(null),p={enabled:!!(u&&Object.keys(u).length>0)},{isLoading:m,isSuccess:v,data:{Properties:E,Count:_}={}}=Digit.Hooks.pt.usePropertySearch({tenantId:r,filters:u},p);return l.createElement(l.Fragment,null,l.createElement(zn,{t:a,isLoading:m,tenantId:r,setShowToast:c,onSubmit:function(e){var t=new Date(null==e?void 0:e.fromDate);null==t||t.setSeconds((null==t?void 0:t.getSeconds())-19800);var n=new Date(null==e?void 0:e.toDate);null==n||n.setSeconds((null==n?void 0:n.getSeconds())+86399-19800);const l={...e,...e.toDate?{toDate:null==n?void 0:n.getTime()}:{},...e.fromDate?{fromDate:null==t?void 0:t.getTime()}:{}};let o=Object.keys(l).filter(e=>l[e]).reduce((e,t)=>({...e,[t]:"object"==typeof l[t]?l[t].code:l[t]}),{});!(Object.entries(o).length>0)||o.acknowledgementIds||o.creationReason||o.fromDate||o.mobileNumber||o.propertyIds||o.status||o.toDate?!(Object.entries(o).length>0&&(o.creationReason||o.status))||o.acknowledgementIds||o.fromDate||o.mobileNumber||o.propertyIds||o.toDate?Object.entries(o).length>0&&o.fromDate&&!o.toDate||!o.fromDate&&o.toDate?c({warning:!0,label:"ERR_PROVIDE_BOTH_FORM_TO_DATE"}):s(o):c({warning:!0,label:"ERR_PROVIDE_MORE_PARAM_WITH_TYPE_STATUS"}):c({warning:!0,label:"ERR_PT_FILL_VALID_FIELDS"})},data:v&&!m?E.length>0?E:{display:"ES_COMMON_NO_DATA"}:"",count:_}),d&&l.createElement(t.Toast,{error:d.error,warning:d.warning,label:a(d.label),isDleteBtn:!0,onClose:()=>{c(null)}}))},Xn=e=>{var n,a,r,s,d,p,m,v,E,_,T,f,y,S,g,P;let{path:A,url:N,userType:O}=e;const{t:I}=o.useTranslation(),h=i.useLocation();sessionStorage.removeItem("revalidateddone");const C=window.Digit.Utils.browser.isMobile(),R={searchParams:{uuid:{code:"ASSIGNED_TO_ALL",name:"ES_INBOX_ASSIGNED_TO_ALL"},services:["PT.CREATE","PT.MUTATION","PT.UPDATE"],applicationStatus:[],locality:[]}},b=[{combineTaxDueInSearchData:function(e,t,n){try{function l(){return n(t)}let t;const o=Digit.ULBService.getCurrentTenantId();let i=["PT"].join(),a=e.map(e=>e.propertyId).join();const r=c(function(){return Promise.resolve(Digit.PaymentService.fetchBill(o,{consumerCode:a,businessService:i})).then(function(n){let l={};n.Bill.forEach(e=>{l[e.consumerCode]=e.totalAmount}),t=e.map(e=>({...e,due_tax:l[e.propertyId]||0}))})},function(n){var l,o;const i=null==n||null===(l=n.response)||void 0===l?void 0:l.data;["EG_BS_BILL_NO_DEMANDS_FOUND","EMPTY_DEMANDS"].includes(null==i||null===(o=i.Errors)||void 0===o?void 0:o[0].code)&&(t=e.map(e=>({...e,due_tax:0})))});return Promise.resolve(r&&r.then?r.then(l):l())}catch(e){return Promise.reject(e)}}}],D=e=>{let{location:n}=e;const{t:a}=o.useTranslation(),r=i.useLocation().search,u=new URLSearchParams(r).get("from")||null,{from:s}=Digit.Hooks.useQueryParams(),d=[{path:"/digit-ui/employee",content:a("ES_COMMON_HOME"),show:!0},{path:"/digit-ui/employee/pt/inbox",content:a("ES_TITLE_INBOX"),show:!!n.pathname.includes("pt/inbox")},{path:"/digit-ui/employee/pt/search",content:a("PT_COMMON_SEARCH_PROPERTY_SUB_HEADER"),show:!(!n.pathname.includes("/pt/search")&&!n.pathname.includes("/pt/ptsearch"))},{path:"digit-ui/employee/pt/property-mutate-docs-required",content:a("PT_REQIURED_DOC_TRANSFER_OWNERSHIP"),show:!!n.pathname.includes("pt/property-mutate-docs-required")},{path:"/digit-ui/employee/pt/property-mutate/",content:a("ES_TITLE_MUTATE_PROPERTY"),show:!!n.pathname.includes("pt/property-mutate/")},{path:"/digit-ui/employee/pt/modify-application/",content:a("PT_UPDATE_PROPERTY"),show:!!n.pathname.includes("pt/modify-application")},{path:"/digit-ui/employee/pt/application-search",content:a("ES_COMMON_APPLICATION_SEARCH"),show:!(!n.pathname.includes("/pt/application-search")&&!n.pathname.includes("/pt/applicationsearch/application-details/"))},{path:"/digit-ui/employee/pt/ptsearch/property-details/"+sessionStorage.getItem("propertyIdinPropertyDetail"),content:u||s?a(u||s)+" / "+a("PT_PROPERTY_INFORMATION"):a("PT_PROPERTY_INFORMATION"),show:!!(n.pathname.includes("/pt/ptsearch/property-details/")||n.pathname.includes("/pt/ptsearch/payment-details/")||n.pathname.includes("/pt/ptsearch/assessment-details/")),isBack:u&&!0},{path:"/digit-ui/employee/pt/property-details/"+sessionStorage.getItem("propertyIdinPropertyDetail")+"?"+(s?"from="+s:""),content:u||s?a(u||s)+" / "+a("PT_PROPERTY_INFORMATION"):a("PT_PROPERTY_INFORMATION"),show:!(!n.pathname.includes("/pt/property-details/")&&!n.pathname.includes("/pt/payment-details/")),isBack:!0},{path:"/digit-ui/employee/pt/applicationsearch/application-details/"+sessionStorage.getItem("applicationNoinAppDetails"),content:a("PT_APPLICATION_TITLE"),show:!(!n.pathname.includes("/pt/application-details/")&&!n.pathname.includes("/pt/applicationsearch/application-details/"))},{path:"/digit-ui/employee/pt/payment-details/",content:u?a(u)+" / "+a("PT_PAYMENT_HISTORY")+" ":a("PT_PAYMENT_HISTORY"),show:!(!n.pathname.includes("/pt/ptsearch/payment-details")&&!n.pathname.includes("/pt/payment-details")),isBack:u&&!0},{path:"/digit-ui/employee/pt/assessment-details/",content:a("PT_ASSESS_PROPERTY"),show:!!n.pathname.includes("pt/ptsearch/assessment-details")}];return l.createElement(t.BreadCrumb,{style:C?{display:"flex"}:{},spanStyle:{maxWidth:"min-content"},crumbs:d})},L=null===(n=Digit)||void 0===n||null===(a=n.ComponentRegistryService)||void 0===a?void 0:a.getComponent("PTNewApplication"),w=null===(r=Digit)||void 0===r||null===(s=r.ComponentRegistryService)||void 0===s?void 0:s.getComponent("ApplicationDetails"),M=null===(d=Digit)||void 0===d||null===(p=d.ComponentRegistryService)||void 0===p?void 0:p.getComponent("PTPropertyDetails"),x=null===(m=Digit)||void 0===m||null===(v=m.ComponentRegistryService)||void 0===v?void 0:v.getComponent("PTAssessmentDetails"),U=null===(E=Digit)||void 0===E||null===(_=E.ComponentRegistryService)||void 0===_?void 0:_.getComponent("PTEditApplication"),F=null===(T=Digit)||void 0===T||null===(f=T.ComponentRegistryService)||void 0===f?void 0:f.getComponent("PTResponse"),B=null===(y=Digit)||void 0===y||null===(S=y.ComponentRegistryService)||void 0===S?void 0:S.getComponent("PTTransferOwnership"),k=null===(g=Digit)||void 0===g||null===(P=g.ComponentRegistryService)||void 0===P?void 0:P.getComponent("PTDocsRequired"),H=window.location.href.includes("pt/response"),Y=(window.location.href.includes("pt")||window.location.href.includes("application"),window.location.href.includes("new-application")||window.location.href.includes("modify-application")||window.location.href.includes("pt/application-details"));return l.createElement(i.Switch,null,l.createElement(l.Fragment,null,l.createElement("div",{className:"ground-container"},H?null:l.createElement("div",{style:Y?{marginLeft:"12px"}:{marginLeft:"-4px"}},l.createElement(D,{location:h})),l.createElement(t.PrivateRoute,{exact:!0,path:A+"/",component:()=>l.createElement(Ui,{matchPath:A,userType:O})}),l.createElement(t.PrivateRoute,{path:A+"/inbox",component:()=>l.createElement(Hn,{useNewInboxAPI:!0,parentRoute:A,businessService:"PT",filterComponent:"PT_INBOX_FILTER",initialStates:R,isInbox:!0})}),l.createElement(t.PrivateRoute,{path:A+"/new-application",component:()=>l.createElement(L,{parentUrl:N})}),l.createElement(t.PrivateRoute,{path:A+"/application-details/:id",component:()=>l.createElement(w,{parentRoute:A})}),l.createElement(t.PrivateRoute,{path:A+"/property-details/:id",component:()=>l.createElement(M,{parentRoute:A})}),l.createElement(t.PrivateRoute,{path:A+"/applicationsearch/application-details/:id",component:()=>l.createElement(w,{parentRoute:A})}),l.createElement(t.PrivateRoute,{path:A+"/ptsearch/property-details/:id",component:()=>l.createElement(M,{parentRoute:A})}),l.createElement(t.PrivateRoute,{path:A+"/payment-details/:id",component:()=>l.createElement(jn,{parentRoute:A})}),l.createElement(t.PrivateRoute,{path:A+"/ptsearch/payment-details/:id",component:()=>l.createElement(jn,{parentRoute:A})}),l.createElement(t.PrivateRoute,{path:A+"/assessment-details/:id",component:()=>l.createElement(x,{parentRoute:A})}),l.createElement(t.PrivateRoute,{path:A+"/ptsearch/assessment-details/:id",component:()=>l.createElement(x,{parentRoute:A})}),l.createElement(t.PrivateRoute,{path:A+"/modify-application/:id",component:()=>l.createElement(U,null)}),l.createElement(t.PrivateRoute,{path:A+"/response",component:e=>l.createElement(F,u({},e,{parentRoute:A}))}),l.createElement(t.PrivateRoute,{path:A+"/property-mutate/:id",component:()=>l.createElement(B,{parentRoute:A})}),l.createElement(t.PrivateRoute,{path:A+"/property-mutate-docs-required/:id",component:()=>l.createElement(k,{parentRoute:A})}),l.createElement(t.PrivateRoute,{path:A+"/search",component:e=>l.createElement($,u({},e,{t:I,parentRoute:A}))}),l.createElement(t.PrivateRoute,{path:A+"/searchold",component:()=>l.createElement(Hn,{parentRoute:A,businessService:"PT",middlewareSearch:b,initialStates:R,isInbox:!1,EmptyResultInboxComp:"PTEmptyResultInbox"})}),l.createElement(t.PrivateRoute,{path:A+"/application-search",component:e=>l.createElement(Gn,u({},e,{parentRoute:A}))}))))},qn=e=>{var n;let{status:i,searchParams:a,onAssignmentChange:r,statusMap:u}=e;return o.useTranslation(),l.createElement(t.CheckBox,{styles:{height:"unset"},onChange:e=>r({...e,state:i.state},i),checked:null==a?void 0:a.applicationStatus.some(e=>e.uuid===i.uuid),label:i.name+" ("+((null==u||null===(n=u.find(e=>e.statusid===i.uuid))||void 0===n?void 0:n.count)||"-")+")"})},$n=e=>{var i,a,r,u,s;let{onAssignmentChange:d,searchParams:c,businessServices:p,statusMap:m}=e;const{t:v}=o.useTranslation(),[E,_]=n.useState(!1),{data:T,isLoading:f}=Digit.Hooks.useApplicationStatusGeneral({businessServices:p},{}),{userRoleStates:y}=T||{},S={"PT.CREATE":"ES_PT_NEW_PROPERTY","PT.MUTATION":"ES_PT_TRANSFER_OWNERSHIP","PT.UPDATE":"ES_PT_UPDATE_PROPERTY"},g=(e,t)=>t(S[e.stateBusinessService])+" - "+t("ES_PT_COMMON_STATUS_"+(e.state||"CREATED"));return f?l.createElement(t.Loader,null):null!=y&&y.filter(e=>!e.isTerminateState).length?l.createElement("div",{className:"status-container"},l.createElement("div",{className:"filter-label",style:{fontWeight:"normal"}},v("ES_INBOX_STATUS")),null==y||null===(i=y.filter(e=>!e.isTerminateState))||void 0===i||null===(a=i.slice(0,4))||void 0===a?void 0:a.map((e,t)=>l.createElement(qn,{businessServices:p,key:t,onAssignmentChange:d,status:{name:g(e,v),code:e.applicationStatus,...e},searchParams:c,statusMap:m})),(null==y||null===(r=y.filter(e=>!e.isTerminateState))||void 0===r?void 0:r.slice(4).length)>0?l.createElement(l.Fragment,null,E&&(null==y||null===(u=y.filter(e=>!e.isTerminateState))||void 0===u||null===(s=u.slice(4))||void 0===s?void 0:s.map((e,t)=>l.createElement(qn,{businessServices:p,key:e.uuid,onAssignmentChange:d,status:{name:g(e,v),code:e.applicationStatus,...e},searchParams:c,statusMap:m}))),l.createElement("div",{className:"filter-button",onClick:()=>_(!E)}," ",v(E?"ES_COMMON_LESS":"ES_COMMON_MORE")," ")):null):null},Zn=e=>{var i;let{searchParams:a,onFilterChange:u,defaultSearchParams:s,statusMap:d,moduleCode:c,...p}=e;const{t:m}=o.useTranslation(),v=r.useQueryClient(),[E,_]=n.useState(()=>({...a,services:[]})),T=[{label:"ES_PT_NEW_PROPERTY",value:"PT.CREATE"},{label:"ES_PT_TRANSFER_OWNERSHIP",value:"PT.MUTATION"},{label:"ES_PT_UPDATE_PROPERTY",value:"PT.UPDATE"}],f=e=>{let t=e.delete,n={...E,...e};t&&t.forEach(e=>delete n[e]),delete e.delete,_({...n})},y=()=>{_({...s,services:[]}),u({...s})},S=Digit.ULBService.getCurrentTenantId();return l.createElement(l.Fragment,null,l.createElement("div",{className:"filter"},l.createElement("div",{className:"filter-card"},l.createElement("div",{className:"heading",style:{alignItems:"center"}},l.createElement("div",{className:"filter-label",style:{display:"flex",alignItems:"center"}},l.createElement("span",null,l.createElement("svg",{width:"17",height:"17",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M0.66666 2.48016C3.35999 5.9335 8.33333 12.3335 8.33333 12.3335V20.3335C8.33333 21.0668 8.93333 21.6668 9.66666 21.6668H12.3333C13.0667 21.6668 13.6667 21.0668 13.6667 20.3335V12.3335C13.6667 12.3335 18.6267 5.9335 21.32 2.48016C22 1.60016 21.3733 0.333496 20.2667 0.333496H1.71999C0.613327 0.333496 -0.01334 1.60016 0.66666 2.48016Z",fill:"#505A5F"}))),l.createElement("span",{style:{marginLeft:"8px",fontWeight:"normal"}},m("ES_COMMON_FILTER_BY"),":")),l.createElement("div",{className:"clearAll",onClick:y},m("ES_COMMON_CLEAR_ALL")),"desktop"===p.type&&l.createElement("span",{className:"clear-search",onClick:y,style:{border:"1px solid #e0e0e0",padding:"6px"}},l.createElement("svg",{width:"17",height:"17",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M8 5V8L12 4L8 0V3C3.58 3 0 6.58 0 11C0 12.57 0.46 14.03 1.24 15.26L2.7 13.8C2.25 12.97 2 12.01 2 11C2 7.69 4.69 5 8 5ZM14.76 6.74L13.3 8.2C13.74 9.04 14 9.99 14 11C14 14.31 11.31 17 8 17V14L4 18L8 22V19C12.42 19 16 15.42 16 11C16 9.43 15.54 7.97 14.76 6.74Z",fill:"#505A5F"}))),"mobile"===p.type&&l.createElement("span",{onClick:p.onClose},l.createElement(t.CloseSvg,null))),l.createElement("div",null,l.createElement(t.RadioButtons,{onSelect:e=>f({uuid:e}),selectedOption:null==E?void 0:E.uuid,t:m,optionsKey:"name",options:[{code:"ASSIGNED_TO_ME",name:"ES_INBOX_ASSIGNED_TO_ME"},{code:"ASSIGNED_TO_ALL",name:"ES_INBOX_ASSIGNED_TO_ALL"}]}),l.createElement("div",null,l.createElement("div",{className:"filter-label",style:{fontWeight:"normal"}},m("ES_INBOX_LOCALITY"),":"),l.createElement(t.Localities,{selectLocality:e=>{f({locality:[...(null==E?void 0:E.locality)||[],e]})},tenantId:S,boundaryType:"revenue"}),l.createElement("div",{className:"tag-container"},null==E||null===(i=E.locality)||void 0===i?void 0:i.map((e,n)=>l.createElement(t.RemoveableTag,{key:n,text:m(e.i18nkey),onClick:()=>{f({locality:null==E?void 0:E.locality.filter(t=>t.code!==e.code)})}})))),l.createElement("div",null,l.createElement("div",{className:"filter-label",style:{fontWeight:"normal"}},m("ES_PT_APP_TYPE")),T.map((e,n)=>{var o;const i=null==E||null===(o=E.services)||void 0===o?void 0:o.includes(e.value);return l.createElement(t.CheckBox,{key:n+"service",label:m(e.label),value:e.label,checked:i,onChange:t=>((e,t)=>{var n;f(e.target.checked?{services:Array.isArray(E.services)?[...E.services,t]:[t]}:{services:E.services.filter(e=>e!==t),applicationStatus:null===(n=E.applicationStatus)||void 0===n?void 0:n.filter(e=>e.stateBusinessService!==t)})})(t,e.value)})})),l.createElement("div",null,l.createElement($n,{searchParams:E,businessServices:E.services,statusMap:d||v.getQueryData("INBOX_STATUS_MAP_"+c),moduleCode:c,onAssignmentChange:(e,t)=>{if(e.target.checked)f({applicationStatus:[...null==E?void 0:E.applicationStatus,t]});else{let e=null==E?void 0:E.applicationStatus.filter(e=>e.state!==t.state);f({applicationStatus:e})}}})),l.createElement("div",null,l.createElement(t.SubmitBar,{onSubmit:()=>{u(0===E.services.length?{...E,services:T.map(e=>e.value)}:E)},label:m("ES_COMMON_APPLY")}))))))},Qn=e=>l.createElement("span",{className:"cell-text"},e),Jn=e=>isNaN(e)?l.createElement("span",{className:"sla-cell-success"},"0"):l.createElement("span",e<0?{className:"sla-cell-error"}:{className:"sla-cell-success"},e),el=e=>l.createElement("span",{className:"sla-cell"},e),tl=e=>l.createElement("h1",{className:"heading-m"},e.label),nl=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),ll=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(nl,null)),ol=e=>{var o,i;let{t:a,action:r,tenantId:u,closeModal:s,submitAction:d,applicationData:p,businessService:m,moduleCode:v}=e;const{data:E,isLoading:_}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(o=r.assigneeRoles)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),{isLoading:T,data:f}=Digit.Hooks.pt.useMDMS(u,m,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'PT')]"}]}]}}),[y,S]=n.useState({}),[g,P]=n.useState({}),[A,N]=n.useState([]),[O,I]=n.useState(null),[h,C]=n.useState(null),[R,b]=n.useState(null),[D,L]=n.useState(null),[w,M]=n.useState([]),[x,U]=n.useState(null),[F,B]=n.useState(!1);function k(e){C(e.target.files[0])}return n.useEffect(()=>{var e;f&&f["egf-master"]&&M(null===(e=f["egf-master"])||void 0===e?void 0:e.FinancialYear)},[f]),n.useEffect(()=>{var e;N(null==E||null===(e=E.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[E]),n.useEffect(()=>{!function(){try{L(null);const e=function(){if(h){const e=function(){if(h.size>=5242880)L(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",h,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?b(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):L(a("CS_FILE_UPLOAD_ERROR"))})},function(){L(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[h]),n.useEffect(()=>{r&&S(null!=r&&r.showFinancialYearsModal?(e=>{let{t:n,action:o,financialYears:i,selectedFinancialYear:a,setSelectedFinancialYear:r}=e;return{label:{heading:"WF_"+o.action+"_APPLICATION",submit:"WF_PT.CREATE_"+o.action,cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:n("ES_PT_FINANCIAL_YEARS"),isMandatory:!0,type:"radio",populators:l.createElement(t.RadioButtons,{options:i,optionsKey:"name",onSelect:r,selectedOption:a})}]}]}})({t:a,action:r,financialYears:w,selectedFinancialYear:x,setSelectedFinancialYear:U}):(e=>{var n;let{t:o,action:i,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:s,uploadedFile:d,setUploadedFile:c,assigneeLabel:p,businessService:m}=e;return{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+m+"_"+(null==i?void 0:i.action),cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:i.isTerminateState||"SENDBACKTOCITIZEN"===(null==i?void 0:i.action)?null:o(p||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||"SENDBACKTOCITIZEN"===(null==i?void 0:i.action)?null:l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:o("ES_PT_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:o("ES_PT_ATTACH_FILE")+(i.docUploadRequired?" *":""),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:s,onDelete:()=>{c(null)},showHint:!0,hintText:o("PT_ATTACH_RESTRICTIONS_SIZE"),message:d?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("ES_PT_ACTION_NO_FILEUPLOADED")})}]}]}})({t:a,action:r,approvers:A,selectedApprover:O,setSelectedApprover:I,selectFile:k,uploadedFile:R,setUploadedFile:b,businessService:m}))},[r,A,w,x,R]),r&&y.form?l.createElement(t.Modal,{headerBarMain:l.createElement(tl,{label:a(y.label.heading)}),headerBarEnd:l.createElement(ll,{onClick:s}),actionCancelLabel:a(y.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:a(y.label.submit),actionSaveOnSubmit:()=>{},isDisabled:r.showFinancialYearsModal?!x:_||(null==r?void 0:r.docUploadRequired)&&!R,formId:"modal-action"},T?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:y.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){if(null!=r&&r.showFinancialYearsModal)d({customFunctionToExecute:null==r?void 0:r.customFunctionToExecute,Assessment:{financialYear:null==x?void 0:x.name,propertyId:null==p?void 0:p.propertyId,tenantId:u,source:null==p?void 0:p.source,channel:null==p?void 0:p.channel,assessmentDate:Date.now()}});else{let t={action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,businessService:m,moduleName:v};t.assignes=null!=r&&r.isTerminateState||!O?[]:[O],R&&(t.documents=[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==h?void 0:h.name,fileStoreId:R}]),d({Property:{...p,workflow:t}})}},defaultValues:g,formId:"modal-action"})):l.createElement(t.Loader,null)},il=e=>l.createElement("h1",{className:"heading-m"},e.label),al=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),rl=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(al,null)),ul=e=>{var o,i;let{t:a,action:r,tenantId:u,closeModal:s,submitAction:d,applicationData:p,businessService:m}=e;const{data:v}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(o=r.assigneeRoles)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),{isLoading:E,data:_}=Digit.Hooks.pt.useMDMS(u,m,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'TL')]"}]}]}}),[T,f]=n.useState({}),[y,S]=n.useState({}),[g,P]=n.useState([]),[A,N]=n.useState({}),[O,I]=n.useState(null),[h,C]=n.useState(null),[R,b]=n.useState(null),[D,L]=n.useState([]),[w,M]=n.useState(null);function x(e){I(e.target.files[0])}return n.useEffect(()=>{var e;_&&_["egf-master"]&&L(null===(e=_["egf-master"])||void 0===e?void 0:e.FinancialYear)},[_]),n.useEffect(()=>{var e;P(null==v||null===(e=v.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[v]),n.useEffect(()=>{!function(){try{b(null);const e=function(){if(O){const e=function(){if(O.size>=5242880)b(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",O,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?C(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):b(a("CS_FILE_UPLOAD_ERROR"))})},function(){b(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[O]),n.useEffect(()=>{r&&f((e=>{let{t:n,action:o,approvers:i,selectedApprover:a,setSelectedApprover:r,selectFile:u,uploadedFile:s,setUploadedFile:d,businessService:c}=e,p=!0;return"SENDBACKTOCITIZEN"!=(null==o?void 0:o.action)&&"APPROVE"!=(null==o?void 0:o.action)||(p=!1),o.isTerminateState&&(p=!1),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==c?void 0:c.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"WF_EMPLOYEE_NEWTL_CANCEL"},form:[{body:[{label:p?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:p?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:p?l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:r,selected:a}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("TL_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:()=>{d(null)},message:s?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED")})}]}]}})({t:a,action:r,approvers:g,selectedApprover:A,setSelectedApprover:N,selectFile:x,uploadedFile:h,setUploadedFile:C,businessService:m}))},[r,g,D,w,h]),r&&T.form?l.createElement(t.Modal,{headerBarMain:l.createElement(il,{label:a(T.label.heading)}),headerBarEnd:l.createElement(rl,{onClick:s}),actionCancelLabel:a(T.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:a(T.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action"},E?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:T.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){p={...p,action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,assignee:null!=A&&A.uuid?[null==A?void 0:A.uuid]:null,wfDocuments:h?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:h}]:null},d({Licenses:[p]})},defaultValues:y,formId:"modal-action"})):l.createElement(t.Loader,null)},sl=e=>l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),dl=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),cl=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(dl,null)),pl=e=>{var o,i;let{t:a,action:r,tenantId:u,closeModal:s,submitAction:d,applicationData:p,businessService:m}=e;const{data:v,isLoading:E}=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(o=r.assigneeRoles)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),[_,T]=n.useState({}),[f,y]=n.useState({}),[S,g]=n.useState([]),[P,A]=n.useState({}),[N,O]=n.useState(null),[I,h]=n.useState(null),[C,R]=n.useState(null),b=!!Digit.Utils.browser.isMobile();function D(e){O(e.target.files[0])}return n.useEffect(()=>{var e;g(null==v||null===(e=v.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[v]),n.useEffect(()=>{!function(){try{R(null);const e=function(){if(N){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(N.size>=5242880)R(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=N&&N.type&&!e.test(null==N?void 0:N.type))R(a("NOT_SUPPORTED_FILE_TYPE"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",N,Digit.ULBService.getStateId()||(null==u?void 0:u.split(".")[0]))).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?h(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):R(a("CS_FILE_UPLOAD_ERROR"))})},function(){R(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[N]),n.useEffect(()=>{r&&T((e=>{let{t:n,action:o,approvers:i,selectedApprover:a,setSelectedApprover:r,selectFile:u,uploadedFile:s,setUploadedFile:d,businessService:c,error:p}=e,m=!0;return"SENDBACKTOCITIZEN"==(null==o?void 0:o.action)&&(m=!1),o.isTerminateState&&(m=!1),{label:{heading:"WF_"+(null==o?void 0:o.action)+"_APPLICATION",submit:"WF_"+(null==c?void 0:c.toUpperCase())+"_"+(null==o?void 0:o.action),cancel:"WF_EMPLOYEE_BPAREG_CANCEL"},form:[{body:[{label:m?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:m?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:m?l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:r,selected:a}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("BPA_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:()=>{d(null)},message:s?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:p})}]}]}})({t:a,action:r,approvers:S,selectedApprover:P,setSelectedApprover:A,selectFile:D,uploadedFile:I,setUploadedFile:h,businessService:m,error:C}))},[r,S,I,C]),r&&_.form?l.createElement(t.Modal,{headerBarMain:l.createElement(sl,{label:a(_.label.heading)}),headerBarEnd:l.createElement(cl,{onClick:s}),actionCancelLabel:a(_.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:a(_.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:b?{width:"720px"}:{},style:b?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:b?{paddingLeft:"5px"}:{}},E?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:_.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){p={...p,action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,assignee:null!=P&&P.uuid?[null==P?void 0:P.uuid]:null,wfDocuments:I?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==N?void 0:N.name,fileStoreId:I}]:null},d({Licenses:[p]},!1,{isStakeholder:!0,bpa:!1})},defaultValues:f,formId:"modal-action"})):l.createElement(t.Loader,null)},ml=e=>l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),vl=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),El=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(vl,null)),_l=e=>{var o,i,a,u,s,d,p,m,v,E,_,T;let{t:f,action:y,tenantId:S,closeModal:g,submitAction:P,applicationDetails:A,applicationData:N,businessService:O,workflowDetails:I}=e;Digit.Hooks.obps.useObpsAPI(null!==(o=N)&&void 0!==o&&null!==(i=o.landInfo)&&void 0!==i&&null!==(a=i.address)&&void 0!==a&&a.city?null===(u=N)||void 0===u||null===(s=u.landInfo)||void 0===s||null===(d=s.address)||void 0===d?void 0:d.city:S,!1);const{data:h,isLoading:C}=Digit.Hooks.useEmployeeSearch(S,{roles:null==I||null===(p=I.data)||void 0===p||null===(m=p.initialActionState)||void 0===m||null===(v=m.nextActions)||void 0===v||null===(E=v.filter(e=>(null==e?void 0:e.action)==(null==y?void 0:y.action)))||void 0===E||null===(_=E[0])||void 0===_||null===(T=_.assigneeRoles)||void 0===T?void 0:T.map(e=>({code:e})),isActive:!0},{enabled:!(null!=y&&y.isTerminateState)}),[R,b]=(r.useQueryClient(),n.useState({})),[D,L]=n.useState({}),[w,M]=n.useState([]),[x,U]=n.useState({}),[F,B]=n.useState(null),[k,H]=n.useState(null),[Y,W]=n.useState(null),[j,K]=n.useState(null),V=!!Digit.Utils.browser.isMobile();function z(e){B(e.target.files[0])}n.useEffect(()=>{var e;M(null==h||null===(e=h.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[h]),n.useEffect(()=>{!function(){try{W(null);const e=function(){if(F){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(F.size>=5242880)W(f("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=F&&F.type&&!e.test(null==F?void 0:F.type))W(f("NOT_SUPPORTED_FILE_TYPE"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",F,Digit.ULBService.getStateId()||(null==S?void 0:S.split(".")[0]))).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?H(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):W(f("CS_FILE_UPLOAD_ERROR"))})},function(){W(f("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[F]);const G=e=>{let t=[];return e&&e.map((e,n)=>{t.push({documentType:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_","."),fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:"",dropDownValues:{value:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_",".")}})}),t},X=e=>{let t=[];var n;for(n=0;n<(null==e?void 0:e.questionLength);n++){var l;t.push({remarks:e["Remarks_"+n],question:null==e?void 0:e.questionList[n].question,value:null==e||null===(l=e["question_"+n])||void 0===l?void 0:l.code})}return t},q=e=>{var t,n;let l=[],o=[];var i,a;return(null==e||null===(t=e.additionalDetails)||void 0===t||null===(n=t.fieldinspection_pending)||void 0===n?void 0:n.length)>0&&(o=null==e||null===(i=e.additionalDetails)||void 0===i?void 0:i.fieldinspection_pending),"FIELDINSPECTION_INPROGRESS"==e.status?(l=JSON.parse(sessionStorage.getItem("INSPECTION_DATA")),(null===(a=l)||void 0===a?void 0:a.length)>0&&l.map((e,t)=>{o.push({docs:G(e.Documents),date:e.InspectionDate,questions:X(e),time:null==e?void 0:e.InspectionTime})}),o=o.filter(e=>e.docs&&e.docs.length>0)):sessionStorage.removeItem("INSPECTION_DATA"),[...o]},$=e=>{let t=JSON.parse(sessionStorage.getItem("BPA_DOCUMENTS")),n=[];return t.map(e=>{var t,l,o,i,a,r;(null==e||null===(t=e.uploadedDocuments)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.values)||void 0===o?void 0:o.length)>0&&(n=[...n,...null==e||null===(i=e.uploadedDocuments)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.values]),(null==e||null===(r=e.newUploadedDocs)||void 0===r?void 0:r.length)>0&&(n=[...n,...null==e?void 0:e.newUploadedDocs])}),n},Z=()=>{var e;const t=Digit.SessionStorage.get("OBPS_APPROVAL_CHECKS"),n=Digit.SessionStorage.get("OBPS_NEW_APPROVALS");let l=null==t?void 0:t.reduce((e,t)=>null!=t&&t.checked?e.push(null==t?void 0:t.label)&&e:e,[]);return l=null===(e=l)||void 0===e?void 0:e.concat(null!==n?n.filter(e=>""!==e.label).map(e=>null==e?void 0:e.label):[]),l};return n.useEffect(()=>{y&&b((e=>{var n;let{t:o,action:i,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:s,uploadedFile:d,setUploadedFile:c,assigneeLabel:p,businessService:m,error:v}=e,E=!1;"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)&&"SKIP_PAYMENT"!=i.action&&"SEND_BACK_TO_CITIZEN"!=(null==i?void 0:i.action)&&"APPROVE"!=(null==i?void 0:i.action)||(E=!0);let _=!1;return"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)||(_=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+m+"_"+(null==i?void 0:i.action),cancel:"BPA_CITIZEN_CANCEL_BUTTON"},form:[{body:[{label:i.isTerminateState||E?null:o(p||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||E?null:l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:o("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:_,populators:{name:"comments"}},{label:""+o("WF_APPROVAL_UPLOAD_HEAD"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:s,onDelete:()=>{c(null)},message:d?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}})({t:f,action:y,approvers:w,selectedApprover:x,setSelectedApprover:U,selectFile:z,uploadedFile:k,setUploadedFile:H,businessService:O,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:Y}))},[y,w,j,k,Y]),y&&R.form?l.createElement(t.Modal,{headerBarMain:l.createElement(ml,{label:f(R.label.heading)}),headerBarEnd:l.createElement(El,{onClick:g}),actionCancelLabel:f(R.label.cancel),actionCancelOnSubmit:g,actionSaveLabel:f(R.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:V?{width:"720px"}:{},style:V?{minHeight:"45px",height:"auto",width:"44%"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:V?{paddingLeft:"5px"}:{}},C?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:R.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){try{var t,n,l,o,i,a;N={...N,documents:$(),additionalDetails:{...null===(t=N)||void 0===t?void 0:t.additionalDetails,fieldinspection_pending:q(N),pendingapproval:Z()},workflow:{action:null==y?void 0:y.action,comment:(null==e||null===(n=e.comments)||void 0===n?void 0:n.length)>0?null==e?void 0:e.comments:null,comments:(null==e||null===(l=e.comments)||void 0===l?void 0:l.length)>0?null==e?void 0:e.comments:null,assignee:null!=x&&x.uuid?[null==x?void 0:x.uuid]:null,assignes:null!=x&&x.uuid?[null==x?void 0:x.uuid]:null,varificationDocuments:k?[{documentType:(null==y?void 0:y.action)+" DOC",fileName:null==F?void 0:F.name,fileStoreId:k}]:null},action:null==y?void 0:y.action,comment:null==e?void 0:e.comments,assignee:null!=x&&x.uuid?[null==x?void 0:x.uuid]:null,wfDocuments:k?[{documentType:(null==y?void 0:y.action)+" DOC",fileName:null==F?void 0:F.name,fileStoreId:k}]:null};const r=null==A||null===(o=A.nocData)||void 0===o?void 0:o.map(e=>{const t=Digit.SessionStorage.get(null==e?void 0:e.nocType)||[];return{Noc:{...e,documents:[...null!=e&&e.documents?null==e?void 0:e.documents:[],...t||[]]}}});let u={sourceRefId:null==r||null===(i=r[0])||void 0===i||null===(a=i.Noc)||void 0===a?void 0:a.sourceRefId};return Promise.resolve(Digit.NOCSearch.all(S,u)).then(function(e){var t;let n=!0,l=!0;null==e||null===(t=e.Noc)||void 0===t||t.map(e=>{var t,o,i,a,r;"APPROVED"!==(null==e||null===(t=e.applicationStatus)||void 0===t?void 0:t.toUpperCase())&&"AUTO_APPROVED"!==(null==e||null===(o=e.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"REJECTED"!==(null==e||null===(i=e.applicationStatus)||void 0===i?void 0:i.toUpperCase())&&"AUTO_REJECTED"!==(null==e||null===(a=e.applicationStatus)||void 0===a?void 0:a.toUpperCase())&&"VOIDED"!==(null==e||null===(r=e.applicationStatus)||void 0===r?void 0:r.toUpperCase())||1!=n&&1!=l||("AIRPORT_AUTHORITY"===(null==e?void 0:e.nocType)?n=!1:"FIRE_NOC"===(null==e?void 0:e.nocType)&&(l=!1))});let o=[];r&&r.map(e=>{var t,i,a,r,u,s,d,c,p,m,v,E;("APPROVED"!=(null==e||null===(t=e.Noc)||void 0===t||null===(i=t.applicationStatus)||void 0===i?void 0:i.toUpperCase())&&"AUTO_APPROVED"!=(null==e||null===(a=e.Noc)||void 0===a||null===(r=a.applicationStatus)||void 0===r?void 0:r.toUpperCase())&&"REJECTED"!=(null==e||null===(u=e.Noc)||void 0===u||null===(s=u.applicationStatus)||void 0===s?void 0:s.toUpperCase())&&"AUTO_REJECTED"!=(null==e||null===(d=e.Noc)||void 0===d||null===(c=d.applicationStatus)||void 0===c?void 0:c.toUpperCase())&&"VOIDED"!=(null==e||null===(p=e.Noc)||void 0===p||null===(m=p.applicationStatus)||void 0===m?void 0:m.toUpperCase())&&"AIRPORT_AUTHORITY"===(null==e||null===(v=e.Noc)||void 0===v?void 0:v.nocType)&&n||"FIRE_NOC"===(null==e||null===(E=e.Noc)||void 0===E?void 0:E.nocType)&&l)&&o.push(e)}),P({BPA:N},(null==o?void 0:o.length)>0&&o,{isStakeholder:!1,bpa:!0})})}catch(e){return Promise.reject(e)}},defaultValues:D,formId:"modal-action"})):l.createElement(t.Loader,null)},Tl=e=>l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label),fl=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),yl=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(fl,null)),Sl=e=>{var o,a;let{t:u,action:s,tenantId:d,closeModal:p,submitAction:m,applicationData:v,businessService:E}=e;const{data:_,isLoading:T}=Digit.Hooks.useEmployeeSearch(d,{roles:null==s||null===(o=s.assigneeRoles)||void 0===o||null===(a=o.map)||void 0===a?void 0:a.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=s&&s.isTerminateState)}),[f,y]=(r.useQueryClient(),n.useState({})),[S,g]=n.useState({}),[P,A]=n.useState([]),[N,O]=n.useState({}),[I,h]=n.useState(null),[C,R]=n.useState(null),[b,D]=n.useState(null),L=!!Digit.Utils.browser.isMobile();function w(e){h(e.target.files[0])}return i.useHistory(),n.useEffect(()=>{var e;A(null==_||null===(e=_.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[_]),n.useEffect(()=>{!function(){try{D(null);const e=function(){if(I){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(I.size>=5242880)D(u("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=I&&I.type&&!e.test(null==I?void 0:I.type))D(u("NOT_SUPPORTED_FILE_TYPE"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("NOC",I,Digit.ULBService.getStateId()||(null==d?void 0:d.split(".")[0]))).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?R(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):D(u("CS_FILE_UPLOAD_ERROR"))})},function(){D(u("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[I]),n.useEffect(()=>{s&&y((e=>{var n;let{t:o,action:i,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:s,uploadedFile:d,setUploadedFile:c,assigneeLabel:p,businessService:m,error:v}=e,E=!1;"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)||(E=!0);let _=!1;return"APPROVE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)&&"AUTO_APPROVE"!=i.action&&"AUTO_REJECT"!=i.action||(_=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+m+"_"+(null==i?void 0:i.action),cancel:"CORE_LOGOUTPOPUP_CANCEL"},form:[{body:[{label:i.isTerminateState||_?null:o(p||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||_?null:l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:o("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:E,populators:{name:"comments"}},{label:""+o("WF_APPROVAL_UPLOAD_HEAD"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:s,onDelete:()=>{c(null)},showHint:!0,message:d?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:v})}]}]}})({t:u,action:s,approvers:P,selectedApprover:N,setSelectedApprover:O,selectFile:w,uploadedFile:C,setUploadedFile:R,businessService:E,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:b}))},[s,P,C,b]),s&&f.form?l.createElement(t.Modal,{headerBarMain:l.createElement(Tl,{label:u(f.label.heading)}),headerBarEnd:l.createElement(yl,{onClick:p}),actionCancelLabel:u(f.label.cancel),actionCancelOnSubmit:p,actionSaveLabel:u(f.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",isOBPSFlow:!0,popupStyles:L?{width:"720px"}:{},style:L?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:L?{paddingLeft:"5px"}:{}},T?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:f.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,l;let o=JSON.parse(sessionStorage.getItem("NewNOCDocs")),i=(null===(t=v)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)>0?[...null===(l=v)||void 0===l?void 0:l.documents]:[];o.map((e,t)=>{i.push(e)}),v={...v,workflow:{action:null==s?void 0:s.action,comment:null!=e&&e.comments?null==e?void 0:e.comments:null,assignee:null!=N&&N.uuid?[null==N?void 0:N.uuid]:null,documents:C?[{documentType:(null==s?void 0:s.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:C}]:null},documents:i},m({Noc:v},!1,{isNoc:!0})},defaultValues:S,formId:"modal-action"})):l.createElement(t.Loader,null)};function gl(e){var t=this.__data__=new Qt(e);this.size=t.size}gl.prototype.clear=function(){this.__data__=new Qt,this.size=0},gl.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},gl.prototype.get=function(e){return this.__data__.get(e)},gl.prototype.has=function(e){return this.__data__.has(e)},gl.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Qt){var l=n.__data__;if(!Jt||l.length<199)return l.push([e,t]),this.size=++n.size,this;n=this.__data__=new nn(l)}return n.set(e,t),this.size=n.size,this};var Pl=gl,Al=function(){try{var e=Wt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Nl=function(e,t,n){"__proto__"==t&&Al?Al(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ol=Object.prototype.hasOwnProperty,Il=function(e,t,n){var l=e[t];Ol.call(e,t)&&Xt(l,n)&&(void 0!==n||t in e)||Nl(e,t,n)},hl=function(e,t,n,l){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var r=t[i],u=l?l(n[r],e[r],r,n,e):void 0;void 0===u&&(u=e[r]),o?Nl(n,r,u):Il(n,r,u)}return n},Cl=function(e){return bt(e)&&"[object Arguments]"==Rt(e)},Rl=Object.prototype,bl=Rl.hasOwnProperty,Dl=Rl.propertyIsEnumerable,Ll=Cl(function(){return arguments}())?Cl:function(e){return bt(e)&&bl.call(e,"callee")&&!Dl.call(e,"callee")},wl=function(){return!1},Ml=W(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,o=l&&l.exports===n?gt.Buffer:void 0;e.exports=(o?o.isBuffer:void 0)||wl}),xl=/^(?:0|[1-9]\d*)$/,Ul=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&xl.test(e))&&e>-1&&e%1==0&&e<t},Fl=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Bl={};Bl["[object Float32Array]"]=Bl["[object Float64Array]"]=Bl["[object Int8Array]"]=Bl["[object Int16Array]"]=Bl["[object Int32Array]"]=Bl["[object Uint8Array]"]=Bl["[object Uint8ClampedArray]"]=Bl["[object Uint16Array]"]=Bl["[object Uint32Array]"]=!0,Bl["[object Arguments]"]=Bl["[object Array]"]=Bl["[object ArrayBuffer]"]=Bl["[object Boolean]"]=Bl["[object DataView]"]=Bl["[object Date]"]=Bl["[object Error]"]=Bl["[object Function]"]=Bl["[object Map]"]=Bl["[object Number]"]=Bl["[object Object]"]=Bl["[object RegExp]"]=Bl["[object Set]"]=Bl["[object String]"]=Bl["[object WeakMap]"]=!1;var kl=function(e){return function(t){return e(t)}},Hl=W(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,o=l&&l.exports===n&&yt.process,i=function(){try{return l&&l.require&&l.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),Yl=Hl&&Hl.isTypedArray,Wl=Yl?kl(Yl):function(e){return bt(e)&&Fl(e.length)&&!!Bl[Rt(e)]},jl=Object.prototype.hasOwnProperty,Kl=function(e,t){var n=ft(e),l=!n&&Ll(e),o=!n&&!l&&Ml(e),i=!n&&!l&&!o&&Wl(e),a=n||l||o||i,r=a?function(e,t){for(var n=-1,l=Array(e);++n<e;)l[n]=t(n);return l}(e.length,String):[],u=r.length;for(var s in e)!t&&!jl.call(e,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Ul(s,u))||r.push(s);return r},Vl=Object.prototype,zl=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Vl)},Gl=function(e,t){return function(n){return e(t(n))}},Xl=Gl(Object.keys,Object),ql=Object.prototype.hasOwnProperty,$l=function(e){return null!=e&&Fl(e.length)&&!xt(e)},Zl=function(e){return $l(e)?Kl(e):function(e){if(!zl(e))return Xl(e);var t=[];for(var n in Object(e))ql.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},Ql=Object.prototype.hasOwnProperty,Jl=function(e){return $l(e)?Kl(e,!0):function(e){if(!Mt(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=zl(e),n=[];for(var l in e)("constructor"!=l||!t&&Ql.call(e,l))&&n.push(l);return n}(e)},eo=W(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,o=l&&l.exports===n?gt.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,l=i?i(n):new e.constructor(n);return e.copy(l),l}}),to=function(){return[]},no=Object.prototype.propertyIsEnumerable,lo=Object.getOwnPropertySymbols,oo=lo?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var l=-1,o=null==t?0:t.length,i=0,a=[];++l<o;){var r=t[l];no.call(e,r)&&(a[i++]=r)}return a}(lo(e)))}:to,io=function(e,t){for(var n=-1,l=t.length,o=e.length;++n<l;)e[o+n]=t[n];return e},ao=Gl(Object.getPrototypeOf,Object),ro=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)io(t,oo(e)),e=ao(e);return t}:to,uo=function(e,t,n){var l=t(e);return ft(e)?l:io(l,n(e))},so=function(e){return uo(e,Zl,oo)},co=function(e){return uo(e,Jl,ro)},po=Wt(gt,"DataView"),mo=Wt(gt,"Promise"),vo=Wt(gt,"Set"),Eo=Wt(gt,"WeakMap"),_o=kt(po),To=kt(Jt),fo=kt(mo),yo=kt(vo),So=kt(Eo),go=Rt;(po&&"[object DataView]"!=go(new po(new ArrayBuffer(1)))||Jt&&"[object Map]"!=go(new Jt)||mo&&"[object Promise]"!=go(mo.resolve())||vo&&"[object Set]"!=go(new vo)||Eo&&"[object WeakMap]"!=go(new Eo))&&(go=function(e){var t=Rt(e),n="[object Object]"==t?e.constructor:void 0,l=n?kt(n):"";if(l)switch(l){case _o:return"[object DataView]";case To:return"[object Map]";case fo:return"[object Promise]";case yo:return"[object Set]";case So:return"[object WeakMap]"}return t});var Po=go,Ao=Object.prototype.hasOwnProperty,No=gt.Uint8Array,Oo=function(e){var t=new e.constructor(e.byteLength);return new No(t).set(new No(e)),t},Io=/\w*$/,ho=Pt?Pt.prototype:void 0,Co=ho?ho.valueOf:void 0,Ro=Object.create,bo=function(){function e(){}return function(t){if(!Mt(t))return{};if(Ro)return Ro(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Do=Hl&&Hl.isMap,Lo=Do?kl(Do):function(e){return bt(e)&&"[object Map]"==Po(e)},wo=Hl&&Hl.isSet,Mo=wo?kl(wo):function(e){return bt(e)&&"[object Set]"==Po(e)},xo={};xo["[object Arguments]"]=xo["[object Array]"]=xo["[object ArrayBuffer]"]=xo["[object DataView]"]=xo["[object Boolean]"]=xo["[object Date]"]=xo["[object Float32Array]"]=xo["[object Float64Array]"]=xo["[object Int8Array]"]=xo["[object Int16Array]"]=xo["[object Int32Array]"]=xo["[object Map]"]=xo["[object Number]"]=xo["[object Object]"]=xo["[object RegExp]"]=xo["[object Set]"]=xo["[object String]"]=xo["[object Symbol]"]=xo["[object Uint8Array]"]=xo["[object Uint8ClampedArray]"]=xo["[object Uint16Array]"]=xo["[object Uint32Array]"]=!0,xo["[object Error]"]=xo["[object Function]"]=xo["[object WeakMap]"]=!1;var Uo=function e(t,n,l,o,i,a){var r,u=1&n,s=2&n,d=4&n;if(l&&(r=i?l(t,o,i,a):l(t)),void 0!==r)return r;if(!Mt(t))return t;var c=ft(t);if(c){if(r=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ao.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!u)return function(e,t){var n=-1,l=e.length;for(t||(t=Array(l));++n<l;)t[n]=e[n];return t}(t,r)}else{var p=Po(t),m="[object Function]"==p||"[object GeneratorFunction]"==p;if(Ml(t))return eo(t,u);if("[object Object]"==p||"[object Arguments]"==p||m&&!i){if(r=s||m?{}:function(e){return"function"!=typeof e.constructor||zl(e)?{}:bo(ao(e))}(t),!u)return s?function(e,t){return hl(e,ro(e),t)}(t,function(e,t){return e&&hl(t,Jl(t),e)}(r,t)):function(e,t){return hl(e,oo(e),t)}(t,function(e,t){return e&&hl(t,Zl(t),e)}(r,t))}else{if(!xo[p])return i?t:{};r=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return Oo(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return function(e,t){var n=t?Oo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?Oo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,Io.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Set]":return new l;case"[object Symbol]":return Co?Object(Co.call(e)):{}}}(t,p,u)}}a||(a=new Pl);var v=a.get(t);if(v)return v;a.set(t,r),Mo(t)?t.forEach(function(o){r.add(e(o,n,l,o,t,a))}):Lo(t)&&t.forEach(function(o,i){r.set(i,e(o,n,l,i,t,a))});var E=c?void 0:(d?s?co:so:s?Jl:Zl)(t);return function(e,t){for(var n=-1,l=null==e?0:e.length;++n<l&&!1!==t(e[n],n););}(E||t,function(o,i){E&&(o=t[i=o]),Il(r,i,e(o,n,l,i,t,a))}),r},Fo=function(e){return Uo(e,5)};const Bo=e=>l.createElement("h1",{className:"heading-m"},e.label),ko=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Ho=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(ko,null)),Yo=function(e,t){void 0===t&&(t="dayend");try{const n=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),l=new Date(Date.UTC(n[1],n[2]-1,n[3]));return l.setMinutes(l.getMinutes()+l.getTimezoneOffset()),"dayend"===t&&(l.setHours(l.getHours()+24),l.setSeconds(l.getSeconds()-1)),l.getTime()}catch(t){return e}},Wo=e=>{var o,i;let{t:a,action:r,tenantId:s,closeModal:d,submitAction:p,applicationData:m,businessService:v}=e;const{data:E,isLoading:_}=Digit.Hooks.useEmployeeSearch(s,{roles:null==r||null===(o=r.assigneeRoles)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,e=>({code:e})),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),[T,f]=n.useState({}),[y,S]=n.useState({}),[g,P]=n.useState([]),[A,N]=n.useState({}),[O,I]=n.useState(null),[h,C]=n.useState(null),[R,b]=n.useState(null),D=window.Digit.Utils.browser.isMobile(),L=window.location.href.includes("/employee");function w(e){I(e.target.files[0])}return n.useEffect(()=>{var e;P(null==E||null===(e=E.Employees)||void 0===e?void 0:e.map(e=>{var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[E]),n.useEffect(()=>{!function(){try{b(null);const e=function(){if(O){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(O.size>=5242880)b(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=O&&O.type&&!e.test(null==O?void 0:O.type))b(a("NOT_SUPPORTED_FILE_TYPE"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("WS",O,Digit.ULBService.getCurrentTenantId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?C(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):b(a("CS_FILE_UPLOAD_ERROR"))})},function(e){console.error("Modal -> err ",e),b(a("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[O]),n.useEffect(()=>{var e,n,o,i;"DisconnectWSConnection"==(null===(e=m)||void 0===e||null===(n=e.processInstance)||void 0===n?void 0:n.businessService)||"DisconnectSWConnection"==(null===(o=m)||void 0===o||null===(i=o.processInstance)||void 0===i?void 0:i.businessService)?r&&f((e=>{var n;let{t:o,action:i,approvers:a,selectedApprover:r,setSelectedApprover:s,selectFile:d,uploadedFile:c,setUploadedFile:p,businessService:m,error:v}=e,E=!0,_=!1;return(null!=i&&null!==(n=i.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_DISCONNECTION"==(null==i?void 0:i.action)||"RESUBMIT_APPLICATION"==(null==i?void 0:i.action))&&(E=!1),i.isTerminateState&&(E=!1),"EXECUTE_DISCONNECTION"!=(null==i?void 0:i.action)&&"DISCONNECTION_EXECUTED"!=(null==i?void 0:i.action)||(_=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+(null==m?void 0:m.toUpperCase())+"_"+(null==i?void 0:i.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:E?o("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:E?o("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:E?l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:s,selected:r}):null},_&&{label:o("ES_FSM_ACTION_SERVICE_DATE"),isMandatory:!!_,type:"custom",populators:_?{name:"date",validation:{required:!0},defaultValue:Digit.Utils.date.getDate(),component:(e,n)=>l.createElement(t.DatePicker,u({onChange:e.onChange,date:e.value},n))}:null},{label:o("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:o("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:d,onDelete:()=>{p(null)},message:c?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),error:v,iserror:v,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}})({t:a,action:r,approvers:g,selectedApprover:A,setSelectedApprover:N,selectFile:w,uploadedFile:h,setUploadedFile:C,businessService:v,error:R})):r&&f((e=>{var n;let{t:o,action:i,approvers:a,selectedApprover:r,setSelectedApprover:u,selectFile:s,uploadedFile:d,setUploadedFile:c,businessService:p,error:m}=e,v=!0;return(null!=i&&null!==(n=i.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_CONNECTION"==(null==i?void 0:i.action))&&(v=!1),i.isTerminateState&&(v=!1),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+(null==p?void 0:p.toUpperCase())+"_"+(null==i?void 0:i.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:v?o("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:v?o("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:v?l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r}):null},{label:o("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:o("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:s,onDelete:()=>{c(null)},message:d?"1 "+o("ES_PT_ACTION_FILEUPLOADED"):o("CS_ACTION_NO_FILEUPLOADED"),error:m,iserror:m,showHintBelow:!0,hintText:"WS_HINT_TEXT_LABEL"})}]}]}})({t:a,action:r,approvers:g,selectedApprover:A,setSelectedApprover:N,selectFile:w,uploadedFile:h,setUploadedFile:C,businessService:v,error:R}))},[r,g,h,R]),r&&T.form?l.createElement(t.Modal,{headerBarMain:l.createElement(Bo,{label:a(T.label.heading)}),headerBarEnd:l.createElement(Ho,{onClick:d}),actionCancelLabel:a(T.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:a(T.label.submit),actionSaveOnSubmit:()=>{},formId:"modal-action",style:D&&L?{width:"100%",height:"auto"}:{}},_?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:T.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,l,o,i,a,u,d;if(null!==(t=m)&&void 0!==t&&t.isBillAmend){var c,v,E,_,T,f,y,S,g;const t={...null===(c=m)||void 0===c||null===(v=c.billAmendmentDetails)||void 0===v?void 0:v.additionalDetails,comments:null!=e&&e.comments?e.comments:null},n={...null===(E=m)||void 0===E?void 0:E.billAmendmentDetails,workflow:{businessId:null===(_=m)||void 0===_||null===(T=_.billAmendmentDetails)||void 0===T?void 0:T.amendmentId,action:null==r?void 0:r.action,tenantId:s,businessService:null!==(f=m)&&void 0!==f&&null!==(y=f.applicationType)&&void 0!==y&&y.includes("WATER")?"WS.AMENDMENT":"SW.AMENDMENT",moduleName:null!==(S=m)&&void 0!==S&&null!==(g=S.applicationType)&&void 0!==g&&g.includes("WATER")?"WS":"SW",assignes:null!=A&&A.uuid?[{uuid:null==A?void 0:A.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:h?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:h}]:[]},additionalDetails:t,comment:(null==e?void 0:e.comments)||"",wfDocuments:h?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:h}]:null,processInstance:{action:null==r?void 0:r.action,assignes:null!=A&&A.uuid?[{uuid:null==A?void 0:A.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:h?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:h}]:[]}};p({AmendmentUpdate:n})}else{if(m={...m,action:null==r?void 0:r.action,comment:(null==e?void 0:e.comments)||"",assignee:null!=A&&A.uuid?[null==A?void 0:A.uuid]:[],assignes:null!=A&&A.uuid?[{uuid:null==A?void 0:A.uuid}]:[],wfDocuments:h?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:h}]:null,processInstance:{...null===(n=m)||void 0===n?void 0:n.processInstance,action:null==r?void 0:r.action,assignes:null!=A&&A.uuid?[{uuid:null==A?void 0:A.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:h?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==O?void 0:O.name,fileStoreId:h}]:[]}},null!=e&&e.date&&null!==(l=m)&&void 0!==l&&null!==(o=l.applicationType)&&void 0!==o&&o.includes("DISCONNECT")){const t=Fo(null==e?void 0:e.date);m.disconnectionExecutionDate=Yo(t)}else if(null!=e&&e.date){const t=Fo(null==e?void 0:e.date);m.connectionExecutionDate=Yo(t)}if("DisconnectWSConnection"==(null===(i=m)||void 0===i||null===(a=i.processInstance)||void 0===a?void 0:a.businessService)||"DisconnectSWConnection"==(null===(u=m)||void 0===u||null===(d=u.processInstance)||void 0===d?void 0:d.businessService)||window.location.href.includes("disconnection")){var P;"WATER"==(null===(P=m)||void 0===P?void 0:P.serviceType)?p({WaterConnection:m,disconnectRequest:!0}):p({SewerageConnection:m,disconnectRequest:!0})}else{var N,I,C,R,b,D,L,w,M,x,U,F,B;const e=sessionStorage.getItem("Digit.ADHOC_ADD_REBATE_DATA"),t=e?JSON.parse(e):"";null!=t&&null!==(N=t.value)&&void 0!==N&&N.adhocPenalty&&(m.additionalDetails.adhocPenalty=parseInt(null==t||null===(I=t.value)||void 0===I?void 0:I.adhocPenalty)||""),null!=t&&null!==(C=t.value)&&void 0!==C&&C.adhocPenaltyComment&&(m.additionalDetails.adhocPenaltyComment=(null==t||null===(R=t.value)||void 0===R?void 0:R.adhocPenaltyComment)||""),null!=t&&null!==(b=t.value)&&void 0!==b&&b.adhocPenaltyReason&&(m.additionalDetails.adhocPenaltyReason=(null==t||null===(D=t.value)||void 0===D?void 0:D.adhocPenaltyReason)||""),null!=t&&null!==(L=t.value)&&void 0!==L&&L.adhocRebate&&(m.additionalDetails.adhocRebate=parseInt(null==t||null===(w=t.value)||void 0===w?void 0:w.adhocRebate)||""),null!=t&&null!==(M=t.value)&&void 0!==M&&M.adhocRebateComment&&(m.additionalDetails.adhocRebateComment=(null==t||null===(x=t.value)||void 0===x?void 0:x.adhocRebateComment)||""),null!=t&&null!==(U=t.value)&&void 0!==U&&U.adhocRebateReason&&(m.additionalDetails.adhocRebateReason=(null==t||null===(F=t.value)||void 0===F?void 0:F.adhocRebateReason)||""),"WATER"==(null===(B=m)||void 0===B?void 0:B.serviceType)?p({WaterConnection:m}):p({SewerageConnection:m})}}},defaultValues:y,formId:"modal-action"})):l.createElement(t.Loader,null)},jo=e=>null!=e&&e.businessService.includes("PT")?l.createElement(ol,e):null!=e&&e.businessService.includes("NewTL")||null!=e&&e.businessService.includes("TL")||null!=e&&e.businessService.includes("EDITRENEWAL")||null!=e&&e.businessService.includes("DIRECTRENEWAL")?l.createElement(ul,e):null!=e&&e.moduleCode.includes("BPAREG")?l.createElement(pl,e):null!=e&&e.moduleCode.includes("BPA")?l.createElement(_l,e):null!=e&&e.moduleCode.includes("NOC")?l.createElement(Sl,e):null!=e&&e.moduleCode.includes("WS")?l.createElement(Wo,e):void 0;function Ko(e){let{documents:n,svgStyles:i={},isSendBackFlow:a=!1,isHrLine:r=!1,titleStyles:u}=e;const{t:s}=o.useTranslation(),d=window.location.href.includes("stakeholder");return l.createElement("div",{style:{marginTop:"19px"}},!d&&(null==n?void 0:n.map((e,o)=>{var i;return l.createElement(l.Fragment,{key:o},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:u||{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},s(null==e?void 0:e.title)):null,l.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(i=e.values)||void 0===i?void 0:i.map((e,n)=>{var o;return l.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto",minWidth:"100px"},key:n},l.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.createElement(t.PDFSvg,null)),l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",textAlign:"center",color:"#505A5F"}},s(null==e?void 0:e.title)),a?null!=e&&null!==(o=e.documentType)&&void 0!==o&&o.includes("NOC")?l.createElement("p",{style:{textAlign:"center"}},s(null==e?void 0:e.documentType.split(".")[1])):l.createElement("p",{style:{textAlign:"center"}},s(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,s("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))),r&&(null==n?void 0:n.length)!=o+1?l.createElement("hr",{style:{color:"#D6D5D4",backgroundColor:"#D6D5D4",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)})),d&&(null==n?void 0:n.map((e,n)=>{var o;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},s(null==e?void 0:e.title)):null,l.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>l.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:null!=i&&i.minWidth?null==i?void 0:i.minWidth:"160px",marginRight:"20px"},key:n},l.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},s(null==e?void 0:e.title)),null!=e&&e.docInfo?l.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+s(null==e?void 0:e.docInfo)):null,l.createElement(t.PDFSvg,null),l.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400",textAlign:"center",color:"#505A5F"}},""+s(null==e?void 0:e.title))))):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,s("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}const Vo=e=>{var t,o;let{t:i,formData:a,applicationData:r,docs:u,bpaActionsDetails:s}=e;const d=(null==r?void 0:r.status)||"",c=(null==s||null===(t=s.data)||void 0===t?void 0:t.nextActions)||[],p=Digit.ULBService.getStateId(),[m,v]=n.useState((null==a||null===(o=a.documents)||void 0===o?void 0:o.documents)||[]),[E,_]=n.useState(null),[T,f]=n.useState([]),[y,S]=n.useState(!0),[g,P]=n.useState(!1),[A,N]=n.useState(!1),{isLoading:O,data:I}=Digit.Hooks.obps.useMDMS(p,"BPA",["DocTypeMapping"]),{isLoading:h,data:C}=Digit.Hooks.obps.useMDMS(p,"common-masters",["DocumentType"]);return n.useEffect(()=>{var e,t,n,l;let o=[];var i,a;null!=I&&null!==(e=I.BPA)&&void 0!==e&&e.DocTypeMapping&&(o=null==I||null===(i=I.BPA)||void 0===i||null===(a=i.DocTypeMapping)||void 0===a?void 0:a.filter(e=>{var t,n;return e.WFState==(null==r?void 0:r.status)?null==r?void 0:r.status:e.RiskType==(null==r?void 0:r.riskType)&&e.ServiceType==(null==r||null===(t=r.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==r||null===(n=r.additionalDetails)||void 0===n?void 0:n.applicationType)}));let s=[];null===(t=o)||void 0===t||null===(n=t[0])||void 0===n||null===(l=n.docTypes)||void 0===l||l.forEach(e=>{var t,n,l,o;let i=e.code;e.dropdownData=[],e.uploadedDocuments=[],null==C||null===(t=C["common-masters"])||void 0===t||null===(n=t.DocumentType)||void 0===n||n.forEach(t=>{let n=t.code.slice(0,i.length);i===n&&(e.hasDropdown=!0,t.i18nKey=t.code,e.dropdownData.push(t))}),e.uploadedDocuments[0]={},e.uploadedDocuments[0].values=[],null==u||null===(l=u[0])||void 0===l||null===(o=l.values)||void 0===o||o.map(t=>{var n,l;i===(null==t||null===(n=t.documentType)||void 0===n?void 0:n.split(".")[0])+"."+(null==t||null===(l=t.documentType)||void 0===l?void 0:l.split(".")[1])&&e.uploadedDocuments[0].values.push(t)}),s.push(e)}),sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(s)),f(s)},[!O,!h]),n.useEffect(()=>{let e=0;T.map(t=>{let n=!1;m.map(e=>{t.required&&t.code==e.documentType.split(".")[0]+"."+e.documentType.split(".")[1]&&(n=!0)}),!n&&t.required&&(e+=1)}),S("0"!=e&&0!=e||!(m.length>0))},[m,g]),n.useEffect(()=>{N("DOC_VERIFICATION_INPROGRESS"===d&&(null==c?void 0:c.length)>0)},[r,s]),l.createElement("div",null,null==T?void 0:T.map((e,t)=>l.createElement("div",null,l.createElement(zo,{key:t,index:t,document:e,t:i,error:E,setError:_,setDocuments:v,documents:m,setCheckRequiredFields:P,applicationStatus:d,actions:c,bpaTaxDocuments:T,checkEnablingDocs:A}))))};function zo(e){var o,i;let{t:a,document:r,setDocuments:u,documents:s,index:d,bpaTaxDocuments:c,checkEnablingDocs:p}=e;const m=null==s?void 0:s.filter(e=>{var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==r?void 0:r.code)})[0],v=Digit.ULBService.getStateId(),[E,_]=n.useState(m?{...m,active:!0,code:null==m?void 0:m.documentType,i18nKey:null==m?void 0:m.documentType}:1===(null==r||null===(o=r.dropdownData)||void 0===o?void 0:o.length)?null==r?void 0:r.dropdownData[0]:{}),[T,f]=n.useState(null),[y,S]=n.useState(()=>(null==m?void 0:m.fileStoreId)||null),[g,P]=n.useState([]);return n.useEffect(()=>{null!=E&&E.code&&u(e=>{var t;const n=null==e?void 0:e.filter(e=>(null==e?void 0:e.documentType)!==(null==E?void 0:E.code));return 0===(null==y?void 0:y.length)||null===y?n:[...null==n?void 0:n.filter(e=>(null==e?void 0:e.fileStoreId)!==y),{documentType:null==E?void 0:E.code,fileStoreId:y,documentUid:y,fileName:(null==T?void 0:T.name)||"",id:s?null===(t=s.find(e=>e.documentType===(null==E?void 0:E.code)))||void 0===t?void 0:t.id:void 0}]})},[y,E]),n.useEffect(()=>{try{g.length>0&&(sessionStorage.removeItem("BPA_DOCUMENTS"),r.newUploadedDocs=[],g.map(e=>{var t,n,l;null!=E&&E.code&&r.newUploadedDocs.push({documentType:null==E?void 0:E.code,fileStoreId:null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.fileStoreId,documentUid:null==e||null===(n=e.fileStoreId)||void 0===n?void 0:n.fileStoreId,tenantId:null==e||null===(l=e.fileStoreId)||void 0===l?void 0:l.tenantId})}),c[d]=r,sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(c)))}catch(e){Promise.reject(e)}},[g,E]),n.useEffect(()=>{},[T]),l.createElement("div",{style:{marginBottom:"24px",maxWidth:"950px",minWidth:"280px",background:"#FAFAFA",borderRadius:"4px",border:"1px solid #D6D5D4",padding:"8px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},""+a(null==r?void 0:r.code)),(null==r||null===(i=r.uploadedDocuments)||void 0===i?void 0:i.length)&&l.createElement(Ko,{documents:null==r?void 0:r.uploadedDocuments,svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}}),p?l.createElement("div",{style:{marginTop:"20px"}},l.createElement(t.LabelFieldPair,{style:{width:"100%"}},l.createElement(t.CardLabel,{style:{marginTop:"-10px",width:"100%"}},null!=r&&r.required?a(null==r?void 0:r.code)+"* ":""+a(null==r?void 0:r.code)),l.createElement(t.Dropdown,{className:"form-field",t:a,isMandatory:!1,option:null==r?void 0:r.dropdownData,selected:E,optionKey:"i18nKey",select:e=>_(e),style:{width:"100%"}})),l.createElement(t.LabelFieldPair,{style:{width:"100%"}},l.createElement(t.CardLabel,{className:"card-label-smaller",style:{width:"100%"}}),l.createElement("div",{className:"field",style:{width:"100%"}},l.createElement(t.MultiUploadWrapper,{module:"BPA",tenantId:v,getFormState:e=>((e,t)=>{let n=Object.fromEntries(t),l=Object.values(n);0!==Object.keys(n).length&&P(l),function(e){e&&f(e.file)}(l[l.length-1])})(0,e),t:a,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"})))):null)}function Go(e){let{fiReport:n,isCitizen:i=!1}=e;const{t:a}=o.useTranslation();return l.createElement(l.Fragment,null,l.createElement("div",{style:{marginTop:"10px"}},l.createElement(i?t.CardHeader:t.CardSectionHeader,{style:{fontSize:"24px"}},""+a("BPA_FI_REPORT")),n.map((e,o)=>{var i,r,u,s,d,c;return l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px",marginBottom:"24px"}},l.createElement(t.StatusTable,null,l.createElement(t.CardSectionHeader,{style:{fontSize:"20px"}},1==(null==n?void 0:n.length)?""+a("BPA_FI_REPORT"):a("BPA_FI_REPORT")+" - "+(o+1)),l.createElement(t.Row,{className:"border-none",label:""+a("BPA_FI_DATE_LABEL"),text:null!=e&&e.date?e.date.includes("-")?(null===(i=e.date)||void 0===i?void 0:i.split("-")[2])+"/"+(null===(r=e.date)||void 0===r?void 0:r.split("-")[1])+"/"+(null===(u=e.date)||void 0===u?void 0:u.split("-")[0]):null==e?void 0:e.date:"NA"}),l.createElement(t.Row,{className:"border-none",label:""+a("BPA_FI_TIME_LABEL"),text:null!=e&&e.time?null==e?void 0:e.time:"NA"}),(null==e||null===(s=e.questions)||void 0===s?void 0:s.length)&&(null==e||null===(d=e.questions)||void 0===d?void 0:d.map(e=>l.createElement("div",{style:{background:"white",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",marginTop:"10px"}},l.createElement(t.Row,{className:"border-none",label:""+a(""+e.question),text:null!=e&&e.value?null==e?void 0:e.value:"NA"}),l.createElement(t.Row,{className:"border-none",label:""+a("BPA_ENTER_REMARKS"),text:e.remarks?e.remarks:"NA"})))),l.createElement(Ko,{documents:(c=null==e?void 0:e.docs,[{title:"BPA_DOCUMENT_DETAILS_LABEL",values:null==c?void 0:c.map(e=>{var t;return{title:null==e||null===(t=e.documentType)||void 0===t?void 0:t.replaceAll(".","_"),documentType:null==e?void 0:e.documentType,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId,id:null==e?void 0:e.id,url:null==e?void 0:e.url}})}]),svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}})))})))}function Xo(e){let{t:o,document:i,setNocDocuments:a,setError:r,nocDocuments:u}=e;const s=null==u?void 0:u.filter(e=>{var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==i?void 0:i.code)})[0],d=Digit.ULBService.getStateId(),[p,m]=n.useState(),[v,E]=n.useState(null),[_,T]=n.useState(()=>(null==s?void 0:s.fileStoreId)||null);return n.useEffect(()=>{var e,t;null!=i&&null!==(e=i.dropdownData)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&t.code&&a(e=>{var t;const n=null==e?void 0:e.filter(e=>{var t,n;return(null==e?void 0:e.documentType)!==(null==i||null===(t=i.dropdownData)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.code)});return 0===(null==_?void 0:_.length)||null===_?n:[...null==n?void 0:n.filter(e=>(null==e?void 0:e.fileStoreId)!==_),{documentType:null==i||null===(t=i.dropdownData)||void 0===t?void 0:t[0].code,fileStoreId:_,documentUid:_,fileName:(null==v?void 0:v.name)||""}]})},[_]),n.useEffect(()=>{!function(){try{r(null);const e=function(){if(v){const e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(v.size>=5242880)r(o("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const t=function(){if(null!=v&&v.type&&!e.test(null==v?void 0:v.type))r(o("NOT_SUPPORTED_FILE_TYPE"));else{const e=c(function(){return T(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",v,Digit.ULBService.getStateId())).then(function(e){var t,n,l,i;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?T(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):r(o("CS_FILE_UPLOAD_ERROR"))})},function(){r(o("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[v]),l.createElement("div",{style:{}},l.createElement(t.LabelFieldPair,{style:{width:"98%",marginRight:"10px"}},l.createElement(t.CardLabel,{style:{width:"100%"}},null!=i&&i.required?o("TL_BUTTON_UPLOAD FILE")+"*":""+o("TL_BUTTON_UPLOAD FILE")),l.createElement("div",{className:"field",style:{width:"100%"}},l.createElement(t.MultiUploadWrapper,{module:"NOC",tenantId:d,getFormState:e=>(e=>{let t=Object.fromEntries(e),n=Object.values(t);!function(e){e&&E(e.file)}(n[n.length-1])})(e),t:o,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}))))}const qo=e=>{var o;let{t:i,noc:a,docs:r,isNoc:u,applicationData:s,NOCdata:d,bpaActionsDetails:c}=e;Digit.ULBService.getStateId();const p=Digit.ULBService.getStateId(),m=(null==s?void 0:s.status)||"",v=(null==c||null===(o=c.data)||void 0===o?void 0:o.nextActions)||[],{data:E}=Digit.Hooks.obps.useMDMS(p,"NOC",["DocumentTypeMapping"],{enabled:u}),{data:_}=Digit.Hooks.obps.useMDMS(p,"BPA",["DocTypeMapping"],{enabled:!u}),{data:T}=Digit.Hooks.obps.useMDMS(p,"common-masters",["DocumentType"]),[f,y]=n.useState([]),[S,g]=n.useState([]),[P,A]=n.useState(!1),[N,O]=Digit.Hooks.useSessionStorage(null==a?void 0:a.nocType,[]),[I,h]=n.useState(null),C=window.location.href.includes("/employee/");return n.useEffect(()=>{var e;y(null==T||null===(e=T["common-masters"])||void 0===e?void 0:e.DocumentType)},[T]),n.useEffect(()=>{var e,t,n;let l,o=[];var i,r,d,c;l=u?null==E||null===(i=E.NOC)||void 0===i||null===(r=i.DocumentTypeMapping)||void 0===r?void 0:r.filter(e=>(null==e?void 0:e.applicationType)===(null==a?void 0:a.applicationType)&&(null==e?void 0:e.nocType)===(null==a?void 0:a.nocType)):null==_||null===(d=_.BPA)||void 0===d||null===(c=d.DocTypeMapping)||void 0===c?void 0:c.filter(e=>{var t,n;return e.WFState==(null==s?void 0:s.status)&&e.RiskType==(null==s?void 0:s.riskType)&&e.ServiceType==(null==s||null===(t=s.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==s||null===(n=s.additionalDetails)||void 0===n?void 0:n.applicationType)}),null!==(e=l)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(n=t.docTypes)&&void 0!==n&&n[0]&&(l[0].docTypes[0].nocType=l[0].nocType,l[0].docTypes[0].additionalDetails={submissionDetails:null==a?void 0:a.additionalDetails,applicationStatus:null==a?void 0:a.applicationStatus,appNumberLink:null==a?void 0:a.applicationNo,nocNo:null==a?void 0:a.nocNo},o.push(l[0].docTypes[0]));let p=[];o&&o.length>0&&(o.map(e=>{let t=e.documentType;e.dropdownData=[],null==f||f.forEach(n=>{let l=n.code.slice(0,null==t?void 0:t.length);t===l&&(e.hasDropdown=!0,e.dropdownData.push(n))}),p.push(e)}),g(p))},[E,f]),n.useEffect(()=>{A("NOC_VERIFICATION_INPROGRESS"===m&&(null==v?void 0:v.length)>0)},[s,c]),l.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px 0px 16px 8px",background:"#FAFAFA",borderRadius:"5px",marginBottom:"24px",maxWidth:"950px"}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:C?""+i("BPA_"+(null==a?void 0:a.nocType)+"_HEADER"):i("BPA_"+(null==a?void 0:a.nocType)+"_HEADER"),labelStyle:{fontSize:"20px",width:"150%"}}),d&&d.map((e,n)=>{if(null!=e&&e.value)return l.createElement(t.Row,"STATUS"==(null==e?void 0:e.field)?{className:"border-none",label:C?""+i(null==e?void 0:e.title):i(null==e?void 0:e.title),text:i(null!=e&&e.value?null==e?void 0:e.value:"CS_NA"),textStyle:"APPROVED"==(null==e?void 0:e.value)||"AUTO_APPROVED"==(null==e?void 0:e.value)?{color:"#00703C"}:{color:"#D4351C"}}:{className:"border-none",label:C?""+i(null==e?void 0:e.title):i(null==e?void 0:e.title),text:i(null!=e&&e.value?null==e?void 0:e.value:"CS_NA")})})),l.createElement(Ko,{documents:r,svgStyles:{width:"80px",height:"100px",viewBox:"0 0 25 25",minWidth:"80px"}}),P&&(null==S?void 0:S.map((e,t)=>l.createElement(Xo,{key:t,document:e,t:i,error:I,setError:h,setNocDocuments:O,nocDocuments:N,checkEnablingDocs:P}))))},$o=e=>{let{permissions:o,t:i}=e;const[a,r,u]=Digit.Hooks.useSessionStorage("OBPS_APPROVAL_CHECKS",null==o?void 0:o.map(e=>({label:e,checked:!1}))),[s,d,c]=Digit.Hooks.useSessionStorage("OBPS_NEW_APPROVALS",[]);n.useEffect(()=>()=>{Digit.SessionStorage.del("OBPS_NEW_APPROVALS"),Digit.SessionStorage.del("OBPS_APPROVAL_CHECKS")},[]);const p=window.Digit.Utils.browser.isMobile();return l.createElement("div",null,l.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},i("BPA_PERMIT_CONDITIONS")),null==a?void 0:a.map((e,n)=>l.createElement(t.CheckBox,{key:n,styles:{margin:"20px 0 40px",maxWidth:p?"100%":"70%"},label:null==e?void 0:e.label,checked:null==e?void 0:e.checked,onChange:e=>((e,t,n)=>{const l=e.target.checked;r(()=>null==a?void 0:a.map((e,t)=>n===t?{...e,checked:l}:e))})(e,0,n),isLabelFirst:!0,index:n})),null==s?void 0:s.map((e,n)=>l.createElement("div",null,l.createElement(t.TextInput,{key:n,value:null==e?void 0:e.label,onChange:e=>((e,t)=>{d(()=>null==s?void 0:s.map((n,l)=>{var o;return t===l?{label:null==e||null===(o=e.target)||void 0===o?void 0:o.value}:n}))})(e,n),textInputStyle:{maxWidth:p?"96%":"830px",width:p?"96%":"830px"},style:p?{paddingRight:"10%"}:{},placeholder:i("BPA_ENTER_PERMIT_CONDITIONS_LABEL")}),l.createElement(t.LinkButton,{label:l.createElement("div",null,l.createElement("span",null,l.createElement(t.Close,{style:{float:"right",position:"relative",bottom:"32px",marginTop:"-22px",marginRight:p?"5%":"35%"}}))),style:{},onClick:e=>(e=>{const t=[...s];t.splice(e,1),d([...t])})(n)}))),l.createElement(t.LinkButton,{style:{color:"#a82227",maxWidth:p?"fit-content":"10%",marginRight:"3%"},label:i("BPA_ADD_MORE"),onClick:()=>{d([...s,{label:""}])}}))};function Zo(e){let{documents:i,svgStyles:a={},isSendBackFlow:r=!1}=e;const{t:u}=o.useTranslation(),[s,d]=n.useState(()=>[]),[c,p]=(Digit.ULBService.getCurrentTenantId(),n.useState({}));n.useEffect(()=>{var e;let t=[];null==i||i.forEach((e,n,l)=>{t=[...t,...e.values?e.values:[]]}),d(null===(e=t)||void 0===e?void 0:e.map(e=>null==e?void 0:e.fileStoreId))},[i]),n.useEffect(()=>{var e;null!=s&&s.length&&"BillAmend"===(null==i||null===(e=i[0])||void 0===e?void 0:e.BS)?Digit.UploadServices.Filefetch(s,Digit.ULBService.getCurrentTenantId()).then(e=>{p(null==e?void 0:e.data)}):null!=s&&s.length&&Digit.UploadServices.Filefetch(s,Digit.ULBService.getStateId()).then(e=>{p(null==e?void 0:e.data)})},[s]);const m=window.location.href.includes("employee/tl")||window.location.href.includes("/obps")||window.location.href.includes("employee/ws"),v=window.location.href.includes("stakeholder");return l.createElement("div",{style:{marginTop:"19px"}},!v&&(null==i?void 0:i.map((e,n)=>{var o;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:m?{marginTop:"32px",marginBottom:"18px",color:"#0B0C0C, 100%",fontSize:"24px",lineHeight:"30px"}:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},u(null==e?void 0:e.title)):null,l.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o,i;return l.createElement("a",{target:"_",href:null===(o=c[e.fileStoreId])||void 0===o?void 0:o.split(",")[0],style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},key:n},l.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.createElement(t.PDFSvg,null)),l.createElement("p",{style:m?{marginTop:"8px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F",textAlign:"center"}:{marginTop:"8px",fontWeight:"bold"}},u(null==e?void 0:e.title)),r?null!=e&&null!==(i=e.documentType)&&void 0!==i&&i.includes("NOC")?l.createElement("p",{style:{textAlign:"center"}},u(null==e?void 0:e.documentType.split(".")[1])):l.createElement("p",{style:{textAlign:"center"}},u(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,u("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})),v&&(null==i?void 0:i.map((e,n)=>{var o;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},u(null==e?void 0:e.title)):null,l.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o;return l.createElement("a",{target:"_",href:null===(o=c[e.fileStoreId])||void 0===o?void 0:o.split(",")[0],style:{minWidth:null!=a&&a.minWidth?null==a?void 0:a.minWidth:"160px",marginRight:"20px"},key:n},l.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},u(null==e?void 0:e.title)),null!=e&&e.docInfo?l.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+u(null==e?void 0:e.docInfo)):null,l.createElement(t.PDFSvg,null),l.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},""+u(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,u("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}function Qo(e){let{taxHeadEstimatesCalculation:n}=e;const{taxHeadEstimates:i}=n,{t:a}=o.useTranslation();return l.createElement("div",{style:{marginTop:"40px"}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:a("ES_PT_TITLE_TAX_HEADS"),text:a("ES_PT_TITLE_AMOUNT"),className:"border-none",textStyle:{fontWeight:"bold"}}),l.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),null==i?void 0:i.map((e,n)=>l.createElement(t.Row,{key:a(e.taxHeadCode),label:a(e.taxHeadCode),text:"₹ "+e.estimateAmount||"N/A",last:n===(null==i?void 0:i.length)-1,className:"border-none",textStyle:{color:"#505A5F"},labelStyle:{color:"#505A5F"}})),l.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),l.createElement(t.Row,{label:a("ES_PT_TITLE_TOTAL_DUE_AMOUNT"),text:"₹ "+(null==n?void 0:n.totalAmount)||"N/A",className:"border-none",textStyle:{fontSize:"24px",fontWeight:"bold"}})))}function Jo(e){let{floors:n}=e;const{t:i}=o.useTranslation();return l.createElement(l.Fragment,null,n.map(e=>{var n;return l.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},i(null==e?void 0:e.title)),null==e||null===(n=e.values)||void 0===n?void 0:n.map((e,n)=>{var o;return l.createElement(l.Fragment,{key:n},l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",color:"#505A5F",fontSize:"16px",marginTop:0!==n?"16px":"revert"}},i(e.title)),l.createElement(t.StatusTable,{style:{position:"relative",padding:"8px"}},l.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA",maxWidth:"100%"}},null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title),text:i(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none"})}))))}))}))}function ei(e){let{owners:n}=e;const{t:i}=o.useTranslation(),a=(null==n?void 0:n.length)||1;let r={marginTop:"19px"},u={position:"relative",padding:"8px"},s={justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"};return Number(a)>1?r={marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:Number(a)>1||(r={marginTop:"19px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"},u={position:"relative",marginTop:"19px"}),window.location.href.includes("obps")&&(r={...r,maxWidth:"950px"},r={...r,maxWidth:"950px"},s={}),l.createElement(l.Fragment,null,n.map((e,n)=>{var o;return l.createElement("div",{key:i(null==e?void 0:e.title),style:r},l.createElement(t.CardSubHeader,{style:Number(a)>1?{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},Number(a)>1?i(null==e?void 0:e.title)+" "+(n+1):i(null==e?void 0:e.title)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:u},l.createElement("div",{style:{maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o;return!0===e.map&&"N/A"!==e.value?l.createElement(t.Row,{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:"",privacy:null==e?void 0:e.privacy})}):l.createElement("span",null,l.createElement(t.Row,{key:i(e.title),label:""+i(e.title),text:i(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",textStyle:e.textStyle,privacy:null==e?void 0:e.privacy,rowContainerStyle:s}))}))))}))}const ti=e=>{var i,a,r;let{scrutinyDetails:u,paymentsList:s=[]}=e;const{t:d}=o.useTranslation(),c=e=>null!=e&&e.value&&null!=e&&e.isTransLate?l.createElement("span",{style:{color:"#00703C"}},d(null==e?void 0:e.value)):null!=e&&e.value&&null!=e&&e.isTransLate?d(null==e?void 0:e.value):null!=e&&e.value?null==e?void 0:e.value:void d("NA");return l.createElement(n.Fragment,null,!(null!=u&&u.isChecklist)&&l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px"}},l.createElement(t.StatusTable,null,l.createElement("div",null,null==u||null===(i=u.values)||void 0===i?void 0:i.map((e,n)=>null!=e&&e.isUnit?l.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red"}:{},key:""+e.title,label:""+d(""+e.title),text:null!=e&&e.value?c(e)+" "+d(null==e?void 0:e.isUnit):d("NA"),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):null==e||!e.isHeader||null!=e&&e.isUnit?null==e||!e.isSubTitle||null!=e&&e.isUnit?l.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen",wordBreak:"break-all"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red",wordBreak:"break-all"}:{wordBreak:"break-all"},key:""+e.title,label:""+d(""+e.title),text:c(e),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px",margin:"0px"}},d(null==e?void 0:e.title)):l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},d(null==e?void 0:e.title))),null==u||null===(a=u.permit)||void 0===a?void 0:a.map((e,n)=>l.createElement(t.CardLabel,{style:{fontWeight:"400"}},null==e?void 0:e.title))),l.createElement("div",null,null==u||null===(r=u.scruntinyDetails)||void 0===r?void 0:r.map((e,o)=>l.createElement(n.Fragment,null,l.createElement(t.Row,{className:"border-none",label:""+d(null==e?void 0:e.title),labelStyle:{width:"150%"}}),l.createElement("a",{href:null==e?void 0:e.value}," ",l.createElement(t.PDFSvg,null)," "),l.createElement("p",{style:{margin:"8px 0px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F"}},d(null==e?void 0:e.text))))))))},ni=e=>{var i,a,r,u,s;let{edcrDetails:d,applicationData:c}=e;const{t:p}=o.useTranslation(),m=window.Digit.Utils.browser.isMobile(),v=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],E=e=>{const t=e;return(e,n,l)=>e[t]},_=n.useMemo(()=>v.map(e=>({Header:p(""+e.name),accessor:E(e.id),id:e.id})));function T(e){var t;let n=[];return null==e||null===(t=e.building)||void 0===t||t.floors.map(e=>{var t,l,o,i,a,r,u,s;n.push({Floor:p("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:p(""+(null===(t=e.occupancies)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.type)),BuildupArea:null===(o=e.occupancies)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.builtUpArea,FloorArea:(null===(a=e.occupancies)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(s=u[0])||void 0===s?void 0:s.CarpetArea)||0,key:p("BPA_FLOOR_NAME_"+e.number)})}),n}function f(e){var t;let n=null==c||null===(t=c.landInfo)||void 0===t?void 0:t.unit,l="";if((null==n?void 0:n.length)>0){var o,i;let t=null===(o=n[e])||void 0===o||null===(i=o.usageCategory)||void 0===i?void 0:i.split(",");null!=t&&t.length&&(l=t.map(e=>e?""+p("BPA_SUBOCCUPANCYTYPE_"+function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,n);return e}(null==e?void 0:e.toUpperCase(),"-","_")):"NA").join(", "))}return l||"NA"}return l.createElement(n.Fragment,null,l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}},l.createElement(t.StatusTable,null,null==d||null===(i=d.values)||void 0===i?void 0:i.map((e,n)=>null!=e&&e.isHeader?l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},p(null==e?void 0:e.title)):l.createElement(t.Row,{className:"border-none",labelStyle:{width:"100%",fontSize:"20px"},key:""+e.title,label:""+p(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""}))),null==d||null===(a=d.subOccupancyTableDetails)||void 0===a||null===(r=a[0])||void 0===r||null===(u=r.value)||void 0===u||null===(s=u.planDetail)||void 0===s?void 0:s.blocks.map((e,n)=>{var o,i,a,r,u;return l.createElement("div",{key:n,style:(null==d||null===(o=d.subOccupancyTableDetails)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.value)||void 0===a||null===(r=a.planDetail)||void 0===r||null===(u=r.blocks)||void 0===u?void 0:u.length)>0?{marginBottom:"30px",background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}:{marginBottom:"30px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"18px",lineHeight:"19px"}},p("BPA_BLOCK_SUBHEADER")," ",n+1),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:""+p("BPA_SUB_OCCUPANCY_LABEL"),text:f(n)})),l.createElement("div",{style:window.location.href.includes("citizen")||m?{overflow:"scroll"}:{maxWidth:"950px",maxHeight:"280px"}},l.createElement(t.Table,{className:"customTable table-fixed-first-column table-border-style",t:p,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:T(e),columns:_,getCellProps:e=>({style:{}})})))})))},li=e=>{let{headComment:t,otherComment:n}=e;return l.createElement("div",{className:"checkpoint-comments-wrap"},l.createElement("h4",null,t),l.createElement("p",null,n))},oi=e=>{var n,i,a;let{data:r,OpenImage:u,privacy:s={}}=e;const{t:d}=o.useTranslation();return l.createElement("div",null,r.date&&l.createElement("p",null,r.date),l.createElement("p",null,r.name),r.mobileNumber&&l.createElement("span",{style:{display:"inline-flex",width:"fit-content",marginLeft:"10px"}},l.createElement(t.TelePhone,{mobile:r.mobileNumber,privacy:s}),l.createElement("p",null,"    ")),r.source&&l.createElement("p",null,d("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+r.source.toUpperCase())),r.comment&&l.createElement(li,{otherComment:null==r?void 0:r.otherComment,headComment:null==r?void 0:r.comment}),null!=r&&r.wfComment?l.createElement("div",null,null==r||null===(n=r.wfComment)||void 0===n?void 0:n.map(e=>l.createElement("div",{className:"TLComments"},l.createElement("h3",null,d("WF_COMMON_COMMENTS")),l.createElement("p",null,e)))):null,(null==r||null===(i=r.thumbnailsToShow)||void 0===i||null===(a=i.thumbs)||void 0===a?void 0:a.length)>0?l.createElement("div",{className:"TLComments"},l.createElement("h3",null,d("CS_COMMON_ATTACHMENTS")),l.createElement(t.DisplayPhotos,{srcs:null==r?void 0:r.thumbnailsToShow.thumbs,onClick:(e,t)=>{u(e,t,null==r?void 0:r.thumbnailsToShow)}})):null)};function ii(e){let{units:n}=e;const{t:i}=o.useTranslation();return l.createElement(l.Fragment,null,n.map((e,n)=>{var o;return l.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},i(null==e?void 0:e.title)+" "+(n+1)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},l.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title)+":",text:i(e.value)||"N/A",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}function ai(e){let{units:n}=e;const{t:i}=o.useTranslation();return l.createElement(l.Fragment,null,n.map((e,n)=>{var o;return l.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"9px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},i(null==e?void 0:e.title)+" "+(n+1)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},l.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(o=e.values)||void 0===o?void 0:o.map((e,n)=>{var o;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title)+":",text:i(e.value)||"NA",last:n===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}const ri=e=>{var i,a,r,u;let{wsAdditionalDetails:s}=e;const{t:d}=o.useTranslation();let c=(p=location.search)?(/^[?#]/.test(p)?p.slice(1):p).split("&").reduce((e,t)=>{let[n,l]=t.split("=");return e[n]=l?decodeURIComponent(l.replace(/\+/g," ")):"",e},{}):{};var p;const m=null==c?void 0:c.mode;var{connectionDetails:v,plumberDetails:E,roadCuttingDetails:_,activationDetails:T}=(null==s?void 0:s.additionalDetails)||{connectionDetails:[],plumberDetails:[]};return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},(null==s||null===(i=s.additionalDetails)||void 0===i?void 0:i.connectionDetails)&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},d("WS_COMMON_CONNECTION_DETAIL")),l.createElement("div",null,l.createElement("div",{className:"connection-details-new-value-wrapper"},null==v?void 0:v.map((e,n)=>l.createElement("div",null,l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+d(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))))),(null==s||null===(a=s.additionalDetails)||void 0===a?void 0:a.plumberDetails)&&"MODIFY"!=m&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},d("WS_COMMON_PLUMBER_DETAILS")),l.createElement("div",null,l.createElement("div",{className:"plumber-details-new-value-wrapper"},null==E?void 0:E.map((e,n)=>l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+d(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:"",privacy:e.privacy}))))),(null==s||null===(r=s.additionalDetails)||void 0===r?void 0:r.roadCuttingDetails)&&"MODIFY"!=m&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},d("WS_ROAD_CUTTING_DETAILS")),l.createElement("div",null,l.createElement("div",{className:"plumber-details-new-value-wrapper"},null==_?void 0:_.map(e=>{var n;return l.createElement("div",{style:(null==_?void 0:_.length)>1?{border:"1px solid #D6D5D4",background:"#FAFAFA",borderRadius:"4px",padding:"10px 10px 0px 10px",margin:"5px 0px"}:{}},null==e||null===(n=e.values)||void 0===n?void 0:n.map(e=>l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+d(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))})))),(null==s||null===(u=s.additionalDetails)||void 0===u?void 0:u.activationDetails)&&l.createElement(t.StatusTable,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px",marginBottom:"16px",marginTop:"32px"}},d("WS_ACTIVATION_DETAILS")),l.createElement("div",null,l.createElement("div",{className:"plumber-details-new-value-wrapper"},null==T?void 0:T.map((e,n)=>l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+d(""+e.title),text:null!=e&&e.oldValue?null==e?void 0:e.oldValue:null!=e&&e.value?null==e?void 0:e.value:""})))))))},ui=[{title:"PT_PENDING_DUES_FROM_EARLIER",value:"Pending dues from earlier"},{title:"PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",value:"Miscalculation of earlier Assessment"},{title:"PT_ONE_TIME_PENALITY",value:"One time penality"},{title:"PT_OTHERS",value:"Others"}],si=[{title:"PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",value:"Advanced Paid By Citizen Earlier"},{title:"PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",value:"Rebate provided by commissioner/EO"},{title:"PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",value:"Additional amount charged from the citizen"},{title:"PT_OTHERS",value:"Others"}],di=e=>{var i,a,r,s;let{wsAdditionalDetails:d}=e;const{t:c}=o.useTranslation(),[p,m,v]=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),[E,T,f]=Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA",{}),y=!(null==d||null===(i=d.additionalDetails)||void 0===i||!i.isPaid),[S,g]=n.useState(!1),[P,A]=n.useState(p||{}),[N,O]=n.useState(null),[I,h]=n.useState(d.additionalDetails.data?d.additionalDetails.data:{}),[C,R]=n.useState(d.additionalDetails.values?d.additionalDetails.values:[]),b=Digit.ULBService.getStateId();Digit.Hooks.ws.useMDMS(b,"BillingService",["TaxHeadMaster"]),n.useEffect(()=>{var e,t,n;const o={...null==d||null===(e=d.additionalDetails)||void 0===e||null===(t=e.appDetails)||void 0===t?void 0:t.additionalDetails};if((null==p||null===(n=p.billDetails)||void 0===n?void 0:n.length)>0){var i,a,r,u,s,c,v;const e=[{title:"WS_APPLICATION_FEE_HEADER",value:l.createElement("span",null,"₹",null==p||null===(i=p.billDetails)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.fee)},{title:"WS_SERVICE_FEE_HEADER",value:l.createElement("span",null,"₹",null==p||null===(r=p.billDetails)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.charge)},{title:"WS_TAX_HEADER",value:l.createElement("span",null,"₹",null==p||null===(s=p.billDetails)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.taxAmount)}];R(e),h(null==p||null===(v=p.billDetails)||void 0===v?void 0:v[0])}else m(o),A(o)},[]);let D={};const L=e=>l.createElement("h1",{className:"heading-m"},e.label),w=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),M=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(w,null)),x=function(e,t,n){void 0===t&&(t=!1);let l={...P};if("adhocPenalty"!=e&&"adhocRebate"!=e||!n.target.value)t?(l[e+"_data"]=n,l[e]=n.title,"PT_OTHERS"==n.title&&"adhocPenaltyReason"==e&&(l.adhocPenaltyComment=""),"PT_OTHERS"==n.title&&"adhocRebateReason"==e&&(l.adhocRebateComment="")):l[e]=n.target.value;else{var o,i;const t=0==(null==n||null===(o=n.target)||void 0===o?void 0:o.value)?1:Math.sign(null==n||null===(i=n.target)||void 0===i?void 0:i.value)||-1;l[e]=1==t?n.target.value:""}A(l)};return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},C&&l.createElement(t.StatusTable,null,l.createElement("div",null,null==C?void 0:C.map((e,n)=>l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+c(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""}))),l.createElement("hr",{style:{border:"1px solid #D6D5D4",color:"#D6D5D4",margin:"16px 0px"}}),l.createElement("div",null,l.createElement(t.Row,{className:"border-none",key:"WS_COMMON_TOTAL_AMT",label:""+c("WS_COMMON_TOTAL_AMT"),text:l.createElement("span",null,"₹",(null==I?void 0:I.totalAmount)||0),textStyle:{fontSize:"24px",fontWeight:"700"}}),l.createElement(t.Row,{className:"border-none",key:"CS_INBOX_STATUS_FILTER",label:""+c("CS_INBOX_STATUS_FILTER"),text:c(y?"WS_COMMON_PAID_LABEL":"WS_COMMON_NOT_PAID"),textStyle:y?{color:"#00703C"}:{color:"#D4351C"}}))),null!=d&&null!==(a=d.additionalDetails)&&void 0!==a&&a.isAdhocRebate?l.createElement("div",{onClick:e=>{g(!0)}},l.createElement("span",{style:{cursor:"pointer",color:"#a82227"}},c("WS_PAYMENT_ADD_REBATE_PENALTY"))):null,S&&l.createElement(t.Modal,{headerBarMain:l.createElement(L,{label:c("PT_ADD_REBATE_PENALITY")}),headerBarEnd:l.createElement(M,{onClick:()=>{A(p),g(!1)}}),actionCancelLabel:c("PT_CANCEL"),actionCancelOnSubmit:()=>{A(p),g(!1)},actionSaveLabel:c("PT_ADD"),actionSaveOnSubmit:e=>(e=>{const t=null!=P&&P.adhocPenalty?Number(null==P?void 0:P.adhocPenalty):0,n=null!=P&&P.adhocRebate?Number(null==P?void 0:P.adhocRebate):0;var l,o;if(t||n)if(n>(null==d||null===(l=d.additionalDetails)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.totalAmount))O({isError:!1,isWarning:!0,key:"error",message:c("ERR_WS_REBATE_GREATER_THAN_AMOUNT")});else{var i,a,r,u,s,p,v,E,f,y;const e=null==d||null===(i=d.additionalDetails)||void 0===i||null===(a=i.appDetails)||void 0===a?void 0:a.applicationNo,t=null==d||null===(r=d.additionalDetails)||void 0===r||null===(u=r.appDetails)||void 0===u?void 0:u.tenantId,n={...null==d||null===(s=d.additionalDetails)||void 0===s||null===(p=s.appDetails)||void 0===p?void 0:p.additionalDetails,...P};d.additionalDetails.appDetails.additionalDetails=n;const l={CalculationCriteria:"WATER"==(null==d||null===(v=d.additionalDetails)||void 0===v||null===(E=v.appDetails)||void 0===E?void 0:E.service)?[{applicationNo:e,tenantId:t,waterConnection:d.additionalDetails.appDetails}]:[{applicationNo:e,tenantId:t,sewerageConnection:d.additionalDetails.appDetails}],isconnectionCalculation:!1};let o="WATER"==(null==d||null===(f=d.additionalDetails)||void 0===f||null===(y=f.appDetails)||void 0===y?void 0:y.service)?"WS":"SW";Digit.WSService.wsCalculationEstimate(l,o).then((e,t)=>{var n,l,o,i,a,r,u,s,d,c,p,v,E,f,y;(null==e||null===(n=e.Calculation)||void 0===n||null===(l=n[0])||void 0===l||null===(o=l.taxHeadEstimates)||void 0===o?void 0:o.length)>0&&(null==e||null===(E=e.Calculation)||void 0===E||null===(f=E[0])||void 0===f||null===(y=f.taxHeadEstimates)||void 0===y||y.forEach(e=>e.amount=e.estimateAmount)),e.Calculation[0].billSlabData=_.groupBy(null==e||null===(i=e.Calculation)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.taxHeadEstimates,"category");const S=[{title:"WS_APPLICATION_FEE_HEADER",value:null===(r=e.Calculation)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.fee},{title:"WS_SERVICE_FEE_HEADER",value:null===(s=e.Calculation)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.charge},{title:"WS_TAX_HEADER",value:null===(c=e.Calculation)||void 0===c||null===(p=c[0])||void 0===p?void 0:p.taxAmount}];T(Fo(e.Calculation[0])),h(null==e||null===(v=e.Calculation)||void 0===v?void 0:v[0]),R(S),P.billDetails=null==e?void 0:e.Calculation,m(P),g(!1)}).catch(e=>{var t,n,l,o,i,a;O({isError:!0,isWarning:!1,key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(l=n.Errors[0])&&void 0!==l&&l.message?c(""+(null==e||null===(o=e.response)||void 0===o||null===(i=o.data)||void 0===i||null===(a=i.Errors[0])||void 0===a?void 0:a.code)):c("PT_COMMON_ADD_REBATE_PENALITY")})})}else O({isError:!1,isWarning:!0,key:"warning",message:c("ERR_WS_ENTER_ATLEAST_ONE_FIELD")})})(),hideSubmit:!1,popupStyles:{overflowY:"auto"}},l.createElement("div",null,l.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},l.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},c("PT_AD_PENALTY")),l.createElement(t.CardLabel,null,c("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{isMandatory:!0,option:ui,optionKey:"title",select:e=>x("adhocPenaltyReason",!0,e),selected:(null==P?void 0:P.adhocPenaltyReason_data)||"",isPropertyAssess:!0,name:"adhocPenaltyReason_data",t:c})),"PT_OTHERS"===(null==P||null===(r=P.adhocPenaltyReason_data)||void 0===r?void 0:r.title)&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,c("PT_REASON")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,u({style:{background:"#FAFAFA"},t:c,type:"text",isMandatory:!1,name:"adhocPenaltyComment",value:(null==P?void 0:P.adhocPenaltyComment)||"",onChange:e=>x("adhocPenaltyComment",!1,e)},D={isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:c("TL_NAME_ERROR_MESSAGE")})))),l.createElement(t.CardLabel,null,c("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,u({style:{background:"#FAFAFA"},t:c,type:"number",isMandatory:!1,name:"adhocPenalty",value:(null==P?void 0:P.adhocPenalty)||"",onChange:e=>x("adhocPenalty",!1,e)},D={isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:c("ERR_DEFAULT_INPUT_FIELD_MSG")})))),l.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},l.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},c("PT_AD_REBATE")),l.createElement(t.CardLabel,null,c("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{isMandatory:!0,option:si,optionKey:"title",select:e=>x("adhocRebateReason",!0,e),selected:(null==P?void 0:P.adhocRebateReason_data)||"",name:"adhocRebateReason_data",isPropertyAssess:!0,t:c})),"PT_OTHERS"===(null==P||null===(s=P.adhocRebateReason_data)||void 0===s?void 0:s.title)&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,c("PT_REASON")),l.createElement(t.TextInput,u({style:{background:"#FAFAFA"},t:c,type:"text",isMandatory:!1,name:"adhocRebateComment",value:(null==P?void 0:P.adhocRebateComment)||"",onChange:e=>x("adhocRebateComment",!1,e)},D={isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:c("TL_NAME_ERROR_MESSAGE")}))),l.createElement(t.CardLabel,null,c("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,u({style:{background:"#FAFAFA"},t:c,type:"number",isMandatory:!1,name:"adhocRebate",value:(null==P?void 0:P.adhocRebate)||"",onChange:e=>x("adhocRebate",!1,e)},D={isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:c("ERR_DEFAULT_INPUT_FIELD_MSG")})))))," "),N&&l.createElement(t.Toast,{style:{zIndex:"10000"},warning:null==N?void 0:N.isWarning,error:null==N||!N.isWarning,label:c(null==N?void 0:N.message),onClose:()=>{O(!1)},isDleteBtn:!0})))},ci=e=>{let{style:t}=e;return l.createElement("span",null,l.createElement("svg",{style:{...t},display:"inline",width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",fill:"#a82227"})))},pi=e=>{let{t:n,userType:o=!1,infoBannerLabel:i="",infoClickLable:a="",infoClickInfoLabel:r="",infoClickInfoLabel1:u=""}=e;o=o||Digit.SessionStorage.get("userType");const s=window.Digit.Utils.browser.isMobile();return l.createElement(l.Fragment,null,l.createElement("div",{style:s?{}:{width:"80%"}},l.createElement("div",{className:"info-banner-wrap",style:{color:"#3498DB",margin:"0px"}},l.createElement("div",null,l.createElement(t.InfoBannerIcon,null),l.createElement("h2",{style:{color:"#3498DB"}},n(i))),n(a)+" ",l.createElement(ci,{style:{display:"inline",marginBottom:"5px"}})," "+n(r),l.createElement("div",null," "+n(u)))))},mi=e=>{var i,a,r,u,s,d,c;let{wsAdditionalDetails:p}=e;const{t:m}=o.useTranslation(),[v,E]=n.useState(!1),[_,T]=n.useState({}),f=e=>l.createElement("h1",{className:"heading-m"},e.label),y=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),S=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(y,null));return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},null!=p&&null!==(i=p.additionalDetails)&&void 0!==i&&i.isViewBreakup?l.createElement("div",{onClick:e=>(()=>{var e;let t=p.additionalDetails.data||{};const n=sessionStorage.getItem("Digit.ADHOC_BILL_ADD_REBATE_DATA"),l=n?JSON.parse(n):{};null!=l&&null!==(e=l.value)&&void 0!==e&&e.totalAmount&&(t=null==l?void 0:l.value),T(t),E(!0)})(),style:{marginTop:"12px"}},l.createElement("span",{style:{cursor:"pointer",color:"#a82227"}},m("WS_PAYMENT_VIEW_BREAKUP"))):null,v&&l.createElement(t.Modal,{headerBarMain:l.createElement(f,{label:m("WS_CALCULATION_BREAKUP")}),headerBarEnd:l.createElement(S,{onClick:()=>{E(!1)}}),hideSubmit:!0,popupStyles:{overflowY:"auto"},headerBarMainStyle:{marginBottom:"0px"},popupModuleMianStyles:{paddingTop:"0px"}},l.createElement(t.StatusTable,{style:{padding:"10px",paddingTop:"0px"}},l.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},m("WS_APPLICATION_FEE_HEADER")),null==_||null===(a=_.billSlabData)||void 0===a||null===(r=a.FEE)||void 0===r?void 0:r.map(e=>l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+m(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT1",label:""+m("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==_?void 0:_.fee)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),l.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},m("WS_SERVICE_FEE_HEADER")),null==_||null===(u=_.billSlabData)||void 0===u||null===(s=u.CHARGES)||void 0===s?void 0:s.map(e=>l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+m(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT2",label:""+m("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==_?void 0:_.charge)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),null==_||null===(d=_.billSlabData)||void 0===d||null===(c=d.TAX)||void 0===c?void 0:c.map(e=>l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+m(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT3",label:""+m("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==_?void 0:_.totalAmount)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}})))))};function vi(e){var a,r,u,s,d,c,p,m,v,E,T;let{applicationDetails:f,workflowDetails:y,isDataLoading:S,applicationData:g,timelineStatusPrefix:P,showTimeLine:A=!0,statusAttribute:N="status",paymentsList:O,oldValue:I,isInfoLabel:h=!1}=e;const{t:C}=o.useTranslation();function R(e,t,n){var l;window.open(null==n||null===(l=n.fullImage)||void 0===l?void 0:l[0],"_blank")}const b=e=>{if(null==e||null==e||""==e)return"NA";const t=new Date(e);let n=t.getMonth()+1,l=t.getDate();return n=(n>9?"":"0")+n,l=(l>9?"":"0")+l,l+"/"+n+"/"+t.getFullYear()},D=function(e,t){if(void 0===t&&(t=0),"OPEN"===e.state||"INITIATED"===e.status&&!window.location.href.includes("/obps/")){var n;const e={date:b(null==g||null===(n=g.auditDetails)||void 0===n?void 0:n.createdTime),source:(null==g?void 0:g.channel)||""};return l.createElement(oi,{data:e})}if(window.location.href.includes("/obps/")||window.location.href.includes("/noc/")||window.location.href.includes("/ws/")){var o,i,a,r,u,s,d,c,p,m,v,E,T,y,S,P,A,N;const n={uuid:null==e||null===(o=e.assignes)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.uuid,fieldName:"mobileNumber",model:"User",showValue:!1,loadData:{serviceName:"/egov-workflow-v2/egov-wf/process/_search",requestBody:{},requestParam:{tenantId:null==f?void 0:f.tenantId,businessIds:null==f?void 0:f.applicationNo,history:!0},jsonPath:"ProcessInstances[0].assignes[0].mobileNumber",isArray:!1,d:e=>{let n="";return n="+91 "+_.get(e,"ProcessInstances["+t+"].assignes[0].mobileNumber"),n}}},O={date:null==e||null===(a=e.auditDetails)||void 0===a?void 0:a.lastModified,name:null==e||null===(r=e.assignes)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.name,mobileNumber:(null==g||null===(s=g.processInstance)||void 0===s||null===(d=s.assignes)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.uuid)===(null==e||null===(p=e.assignes)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.uuid)&&null!=g&&null!==(v=g.processInstance)&&void 0!==v&&null!==(E=v.assignes)&&void 0!==E&&null!==(T=E[0])&&void 0!==T&&T.mobileNumber?null==g||null===(y=g.processInstance)||void 0===y||null===(S=y.assignes)||void 0===S||null===(P=S[0])||void 0===P?void 0:P.mobileNumber:null==e||null===(A=e.assignes)||void 0===A||null===(N=A[0])||void 0===N?void 0:N.mobileNumber,comment:C(null==e?void 0:e.comment),wfComment:e.wfComment,thumbnailsToShow:null==e?void 0:e.thumbnailsToShow};return l.createElement(oi,{data:O,OpenImage:R,privacy:n})}{var O,I,h,D,L;const t={date:b(null==g||null===(O=g.auditDetails)||void 0===O?void 0:O.lastModifiedTime),name:null==e||null===(I=e.assignes)||void 0===I||null===(h=I[0])||void 0===h?void 0:h.name,wfComment:null==e?void 0:e.wfComment,mobileNumber:null==e||null===(D=e.assignes)||void 0===D||null===(L=D[0])||void 0===L?void 0:L.mobileNumber};return l.createElement(oi,{data:t})}},L=(e,t)=>e?t?e:C(e):C("NA"),w=window.location.href.includes("employee/tl")||window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc"),M=window.location.href.includes("employee/noc"),x=window.location.href.includes("employee/obps"),U=(window.location.href.includes("employee/ws"),()=>window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||w?{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}:{}),F=e=>null!=e&&e.skip?e.value:null!=e&&e.isUnit?null!=e&&e.value?L(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)+" "+C(null==e?void 0:e.isUnit):C("N/A"):null!=e&&e.value?L(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated):C("N/A");return l.createElement(t.Card,{style:{position:"relative"},className:"employeeCard-override"},h?l.createElement(pi,{t:C,userType:!1,infoBannerLabel:"CS_FILE_APPLICATION_INFO_LABEL",infoClickLable:"WS_CLICK_ON_LABEL",infoClickInfoLabel:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO_LABEL":"WS_CLICK_ON_INFO_LABEL",infoClickInfoLabel1:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO1_LABEL":""}):null,null==f||null===(a=f.applicationDetails)||void 0===a?void 0:a.map((e,o)=>{var a,r,u,s,d,c,p,m,v,E,_,T,S,g,P,A,N,h,R,b,D,L,B,k,H,Y,W,j,K,V,z,G,X,q,$,Z,Q,J,ee;return l.createElement(l.Fragment,{key:o},l.createElement("div",{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||window.location.href.includes("employee/ws")?{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}:w?{lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:{}},0!==o||e.asSectionHeader?l.createElement(l.Fragment,null,l.createElement(t.CardSectionHeader,{style:0==o&&w?{marginBottom:"16px",fontSize:"24px"}:{marginBottom:"16px",marginTop:"32px",fontSize:"24px"}},M?""+C(e.title):C(e.title),null!=e&&e.Component?l.createElement(e.Component,null):null)):l.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},C(e.title)),(null==e?void 0:e.isTable)&&l.createElement("table",{style:{tableLayout:"fixed",width:"100%",borderCollapse:"collapse"}},l.createElement("tr",{style:{textAlign:"left"}},null==e?void 0:e.headers.map(e=>l.createElement("th",{style:{padding:"10px",paddingLeft:"0px"}},C(e)))),null==e?void 0:e.tableRows.map((t,o)=>o===(null==e?void 0:e.tableRows.length)-1?l.createElement(n.Fragment,null,l.createElement("hr",{style:{width:"370%",marginTop:"15px"},className:"underline"}),l.createElement("tr",null,t.map(e=>l.createElement("td",{style:{textAlign:"left"}},C(e))))):l.createElement("tr",null,t.map(e=>l.createElement("td",{style:{paddingTop:"20px",textAlign:"left"}},C(e)))))),l.createElement(t.StatusTable,{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||w?{position:"relative",marginTop:"19px"}:{}},(null==e?void 0:e.title)&&!(null!=e&&e.title.includes("NOC"))&&(null==e||null===(a=e.values)||void 0===a?void 0:a.map((n,o)=>{var a,r;return!0===n.map&&"N/A"!==n.value?l.createElement(t.Row,{labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"},key:C(n.title),label:C(n.title),text:l.createElement("img",{src:C(n.value),alt:"",privacy:null==n?void 0:n.privacy})}):1==(null==n?void 0:n.isLink)?l.createElement(t.Row,{key:C(n.title),label:window.location.href.includes("tl")||window.location.href.includes("ws")?l.createElement("div",{style:{width:"200%"}},l.createElement(i.Link,{to:null==n?void 0:n.to},l.createElement("span",{className:"link",style:{color:"#a82227"}},C(null==n?void 0:n.title)))):M||x?""+C(n.title):C(n.title),text:l.createElement("div",null,l.createElement(i.Link,{to:null==n?void 0:n.to},l.createElement("span",{className:"link",style:{color:"#a82227"}},null==n?void 0:n.value))),last:o===(null==e||null===(r=e.values)||void 0===r?void 0:r.length)-1,caption:n.caption,className:"border-none",rowContainerStyle:U(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):l.createElement("div",null,window.location.href.includes("modify")?l.createElement(t.Row,{className:"border-none",key:""+n.title,label:""+C(""+n.title),privacy:null==n?void 0:n.privacy,text:null!=n&&n.oldValue?null==n?void 0:n.oldValue:null!=n&&n.value?null==n?void 0:n.value:"",labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}):l.createElement(t.Row,{key:C(n.title),label:C(n.title),text:F(n),last:o===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:n.caption,className:"border-none",privacy:null==n?void 0:n.privacy,rowContainerStyle:U(),labelStyle:{wordBreak:"break-all"},textStyle:{wordBreak:"break-all"}}))})))),(null==e?void 0:e.belowComponent)&&l.createElement(e.belowComponent,null),(null==e||null===(r=e.additionalDetails)||void 0===r?void 0:r.inspectionReport)&&l.createElement(ti,{scrutinyDetails:null==e?void 0:e.additionalDetails,paymentsList:O}),(null==f||null===(u=f.applicationData)||void 0===u||null===(s=u.additionalDetails)||void 0===s||null===(d=s.fieldinspection_pending)||void 0===d?void 0:d.length)>0&&(null==e||null===(c=e.additionalDetails)||void 0===c?void 0:c.fiReport)&&l.createElement(Go,{fiReport:null==f||null===(p=f.applicationData)||void 0===p||null===(m=p.additionalDetails)||void 0===m?void 0:m.fieldinspection_pending}),(null==e||null===(v=e.additionalDetails)||void 0===v?void 0:v.floors)&&l.createElement(Jo,{floors:null==e||null===(E=e.additionalDetails)||void 0===E?void 0:E.floors}),(null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.owners)&&l.createElement(ei,{owners:null==e||null===(T=e.additionalDetails)||void 0===T?void 0:T.owners}),(null==e||null===(S=e.additionalDetails)||void 0===S?void 0:S.units)&&l.createElement(ai,{units:null==e||null===(g=e.additionalDetails)||void 0===g?void 0:g.units}),(null==e||null===(P=e.additionalDetails)||void 0===P?void 0:P.accessories)&&l.createElement(ii,{units:null==e||null===(A=e.additionalDetails)||void 0===A?void 0:A.accessories}),(null==e||null===(N=e.additionalDetails)||void 0===N?void 0:N.permissions)&&(null==y||null===(h=y.data)||void 0===h||null===(R=h.nextActions)||void 0===R?void 0:R.length)>0&&l.createElement($o,{applicationData:null==f?void 0:f.applicationData,t:C,permissions:null==e||null===(b=e.additionalDetails)||void 0===b?void 0:b.permissions}),(null==e||null===(D=e.additionalDetails)||void 0===D?void 0:D.obpsDocuments)&&l.createElement(Vo,{t:C,applicationData:null==f?void 0:f.applicationData,docs:e.additionalDetails.obpsDocuments,bpaActionsDetails:y}),(null==e||null===(L=e.additionalDetails)||void 0===L?void 0:L.noc)&&l.createElement(qo,{t:C,isNoc:!0,NOCdata:e.values,applicationData:null==f?void 0:f.applicationData,docs:e.additionalDetails.noc,noc:null===(B=e.additionalDetails)||void 0===B?void 0:B.data,bpaActionsDetails:y}),(null==e||null===(k=e.additionalDetails)||void 0===k?void 0:k.scruntinyDetails)&&l.createElement(ti,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(H=e.additionalDetails)||void 0===H?void 0:H.buildingExtractionDetails)&&l.createElement(ti,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(Y=e.additionalDetails)||void 0===Y?void 0:Y.subOccupancyTableDetails)&&l.createElement(ni,{edcrDetails:null==e?void 0:e.additionalDetails,applicationData:null==f?void 0:f.applicationData}),(null==e||null===(W=e.additionalDetails)||void 0===W?void 0:W.documentsWithUrl)&&l.createElement(Ko,{documents:null==e||null===(j=e.additionalDetails)||void 0===j?void 0:j.documentsWithUrl}),(null==e||null===(K=e.additionalDetails)||void 0===K?void 0:K.documents)&&l.createElement(Zo,{documents:null==e||null===(V=e.additionalDetails)||void 0===V?void 0:V.documents}),(null==e||null===(z=e.additionalDetails)||void 0===z?void 0:z.taxHeadEstimatesCalculation)&&l.createElement(Qo,{taxHeadEstimatesCalculation:null==e||null===(G=e.additionalDetails)||void 0===G?void 0:G.taxHeadEstimatesCalculation}),(null==e?void 0:e.isWaterConnectionDetails)&&l.createElement(ri,{wsAdditionalDetails:e,oldValue:I}),(null==e||null===(X=e.additionalDetails)||void 0===X?void 0:X.redirectUrl)&&l.createElement("div",{style:{fontSize:"16px",lineHeight:"24px",fontWeight:"400",padding:"10px 0px"}},l.createElement(i.Link,{to:null==e||null===(q=e.additionalDetails)||void 0===q||null===($=q.redirectUrl)||void 0===$?void 0:$.url},l.createElement("span",{className:"link",style:{color:"#a82227"}},null==e||null===(Z=e.additionalDetails)||void 0===Z||null===(Q=Z.redirectUrl)||void 0===Q?void 0:Q.title))),(null==e||null===(J=e.additionalDetails)||void 0===J?void 0:J.estimationDetails)&&l.createElement(di,{wsAdditionalDetails:e,workflowDetails:y}),(null==e||null===(ee=e.additionalDetails)||void 0===ee?void 0:ee.estimationDetails)&&l.createElement(mi,{wsAdditionalDetails:e,workflowDetails:y}))}),A&&(null==y||null===(r=y.data)||void 0===r||null===(u=r.timeline)||void 0===u?void 0:u.length)>0&&l.createElement(l.Fragment,null,l.createElement(t.BreakLine,null),((null==y?void 0:y.isLoading)||S)&&l.createElement(t.Loader,null),!(null!=y&&y.isLoading)&&!S&&l.createElement(n.Fragment,null,l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},C("ES_APPLICATION_DETAILS_APPLICATION_TIMELINE")),null!=y&&null!==(s=y.data)&&void 0!==s&&s.timeline&&1===(null==y||null===(d=y.data)||void 0===d||null===(c=d.timeline)||void 0===c?void 0:c.length)?l.createElement(t.CheckPoint,{isCompleted:!0,label:C(""+P+(null==y||null===(p=y.data)||void 0===p||null===(m=p.timeline[0])||void 0===m?void 0:m.state)),customChild:D(null==y||null===(v=y.data)||void 0===v?void 0:v.timeline[0])}):l.createElement(t.ConnectingCheckPoints,null,(null==y||null===(E=y.data)||void 0===E?void 0:E.timeline)&&(null==y||null===(T=y.data)||void 0===T?void 0:T.timeline.map((e,n,o)=>{let i="";var a,r,u,s,d,c;return window.location.href.includes("/obps/")&&(i=null!=y&&null!==(a=y.data)&&void 0!==a&&null!==(r=a.timeline[n-1])&&void 0!==r&&null!==(u=r.state)&&void 0!==u&&u.includes("BACK_FROM")||null!=y&&null!==(s=y.data)&&void 0!==s&&null!==(d=s.timeline[n-1])&&void 0!==d&&null!==(c=d.state)&&void 0!==c&&c.includes("SEND_TO_CITIZEN")?"_NOT_DONE":"SEND_TO_ARCHITECT"===(null==e?void 0:e.performedAction)?"_BY_ARCHITECT_DONE":0==n?"":"_DONE"),l.createElement(l.Fragment,{key:n},l.createElement(t.CheckPoint,{keyValue:n,isCompleted:0===n,info:e.comment,label:C(""+P+("REOPEN"===(null==e?void 0:e.performedAction)?null==e?void 0:e.performedAction:null==e?void 0:e[N])+i),customChild:D(e,n)}))}))))))}function Ei(e){var n,o,i,a,r,u,s,d,c,p,m,v,E,_,T,f,y,S;let{t:g,showToast:P,closeToast:A,businessService:N}=e;if(null!=N&&N.includes("NewTL")||null!=N&&N.includes("TL")||null!=N&&N.includes("EDITRENEWAL")){var O;let e="";switch(null==P||null===(O=P.action)||void 0===O?void 0:O.action){case"SENDBACK":e="error"===(null==P?void 0:P.key)?null==P||null===(n=P.error)||void 0===n?void 0:n.message:g("TL_SENDBACK_CHECKLIST_MESSAGE_HEAD");break;case"FORWARD":e="error"===(null==P?void 0:P.key)?null==P||null===(o=P.error)||void 0===o?void 0:o.message:g("TL_FORWARD_SUCCESS_MESSAGE_MAIN");break;case"APPROVE":e="error"===(null==P?void 0:P.key)?null==P||null===(i=P.error)||void 0===i?void 0:i.message:g("TL_APPROVAL_CHECKLIST_MESSAGE_HEAD");break;case"SENDBACKTOCITIZEN":e="error"===(null==P?void 0:P.key)?null==P||null===(a=P.error)||void 0===a?void 0:a.message:g("TL_SENDBACK_TOCITIZEN_CHECKLIST_MESSAGE_HEAD");break;case"REJECT":e="error"===(null==P?void 0:P.key)?null==P||null===(r=P.error)||void 0===r?void 0:r.message:g("TL_APPROVAL_REJ_MESSAGE_HEAD");break;case"RESUBMIT":e="error"===(null==P?void 0:P.key)?null==P||null===(u=P.error)||void 0===u?void 0:u.message:g("TL_APPLICATION_RESUBMIT_SUCCESS_MESSAGE_MAIN");break;case"CANCEL":e="error"===(null==P?void 0:P.key)?null==P||null===(s=P.error)||void 0===s?void 0:s.message:g("TL_TL_CANCELLED_MESSAGE_HEAD");break;default:e="error"===(null==P?void 0:P.key)?null==P||null===(d=P.error)||void 0===d?void 0:d.message:g("ES_"+N+"_"+(null==P||null===(c=P.action)||void 0===c?void 0:c.action)+"_UPDATE_SUCCESS")}return l.createElement(l.Fragment,null,P&&l.createElement(t.Toast,{error:"error"===P.key,label:e,onClose:A}))}if(null!=N&&N.includes("BPA")||null!=N&&N.includes("BPA_LOW")||null!=N&&N.includes("BPA_OC")){var I;const e=function(e){var t;void 0===e&&(e=[]);let n=e[0];return n=2==(null===(t=e)||void 0===t?void 0:t.length)&&null!=N&&N.includes("BPA_OC")?g(e[1]):g(e[0]),n};let n="";switch(null==P||null===(I=P.action)||void 0===I?void 0:I.action){case"REVOCATE":n="error"===(null==P?void 0:P.key)?null==P||null===(p=P.error)||void 0===p?void 0:p.message:e(["BPA_APPROVAL_REVOCATED_MESSAGE_HEAD","BPA_APPROVAL_OC_REVOCATED_MESSAGE_HEAD"]);break;case"VERIFY_AND_FORWARD":n="error"===(null==P?void 0:P.key)?null==P||null===(m=P.error)||void 0===m?void 0:m.message:e(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_TO_CITIZEN":n="error"===(null==P?void 0:P.key)?null==P||null===(v=P.error)||void 0===v?void 0:v.message:e(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;case"APPROVE":n="error"===(null==P?void 0:P.key)?null==P||null===(E=P.error)||void 0===E?void 0:E.message:e(["BPA_APPROVAL_CHECKLIST_MESSAGE_HEAD"]);break;case"REJECT":n="error"===(null==P?void 0:P.key)?null==P||null===(_=P.error)||void 0===_?void 0:_.message:e(["BPA_APPROVAL_REJECTED_MESSAGE_HEAD","BPA_OC_APPROVAL_REJECTED_MESSAGE_HEAD"]);break;case"FORWARD":n="error"===(null==P?void 0:P.key)?null==P||null===(T=P.error)||void 0===T?void 0:T.message:e(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_FOR_DOCUMENT_VERIFICATION":case"SEND_BACK_FOR_FIELD_INSPECTION":n="error"===(null==P?void 0:P.key)?null==P||null===(f=P.error)||void 0===f?void 0:f.message:e(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;default:n="error"===(null==P?void 0:P.key)?null==P||null===(y=P.error)||void 0===y?void 0:y.message:g("ES_"+N+"_"+(null==P||null===(S=P.action)||void 0===S?void 0:S.action)+"_UPDATE_SUCCESS")}return l.createElement(l.Fragment,null,P&&l.createElement(t.Toast,{error:"error"===P.key,label:n,onClose:A}))}{var h,C;const e="error"===(null==P?void 0:P.key)?null==P||null===(h=P.error)||void 0===h?void 0:h.message:"ES_"+N+"_"+(null==P||null===(C=P.action)||void 0===C?void 0:C.action)+"_UPDATE_SUCCESS";return l.createElement(l.Fragment,null,P&&l.createElement(t.Toast,{error:"error"===P.key,label:g(e),onClose:A}))}}function _i(e){var i,a,r,u,s,d,c,p,m,v,E,_,T,f,y,S;let{workflowDetails:g,displayMenu:P,onActionSelect:A,setDisplayMenu:N,businessService:O,forcedActionPrefix:I,ActionBarStyle:h={},MenuStyle:C={}}=e;const{t:R}=o.useTranslation();let b=Digit.UserService.getUser();const D=n.useRef();if(window.location.href.includes("/obps")||window.location.href.includes("/noc")){const e=sessionStorage.getItem("Digit.citizen.userRequestObject"),t=e?JSON.parse(e):{};b=null==t?void 0:t.value}const L=null===(i=b)||void 0===i||null===(a=i.info)||void 0===a||null===(r=a.roles)||void 0===r?void 0:r.map(e=>e.code);let w=!1,M=!1,x=(null==g||null===(u=g.data)||void 0===u||null===(s=u.actionState)||void 0===s||null===(d=s.nextActions)||void 0===d?void 0:d.filter(e=>(null==L?void 0:L.some(t=>{var n;return null===(n=e.roles)||void 0===n?void 0:n.includes(t)}))||!e.roles))||(null==g||null===(c=g.data)||void 0===c||null===(p=c.nextActions)||void 0===p?void 0:p.filter(e=>(null==L?void 0:L.some(t=>{var n;return null===(n=e.roles)||void 0===n?void 0:n.includes(t)}))||!e.roles));return Digit.Hooks.useClickOutside(D,()=>{N(!1)},P),(window.location.href.includes("/obps")||window.location.href.includes("/noc"))&&1==(null==x?void 0:x.length)||null!=x&&null!==(m=x[0])&&void 0!==m&&null!==(v=m.redirectionUrl)&&void 0!==v&&v.pathname.includes("/pt/property-details/")&&1==(null==x?void 0:x.length)?(M=!1,w=!0):(null==x?void 0:x.length)>0&&(M=!0,w=!1),l.createElement(l.Fragment,null,!(null!=g&&g.isLoading)&&M&&!w&&l.createElement(t.ActionBar,{style:{...h}},P&&(null!=g&&null!==(E=g.data)&&void 0!==E&&null!==(_=E.actionState)&&void 0!==_&&_.nextActions||null!=g&&null!==(T=g.data)&&void 0!==T&&T.nextActions)?l.createElement(t.Menu,{localeKeyPrefix:I||"WF_EMPLOYEE_"+(null==O?void 0:O.toUpperCase()),options:x,optionKey:"action",t:R,onSelect:A,style:C}):null,l.createElement(t.SubmitBar,{ref:D,label:R("WF_TAKE_ACTION"),onSubmit:()=>N(!P)})),!(null!=g&&g.isLoading)&&!M&&w&&l.createElement(t.ActionBar,{style:{...h}},l.createElement("button",{style:{color:"#FFFFFF",fontSize:"18px"},className:"submit-bar",name:null==x||null===(f=x[0])||void 0===f?void 0:f.action,value:null==x||null===(y=x[0])||void 0===y?void 0:y.action,onClick:e=>{A((null==x?void 0:x[0])||{})}},R((I||"WF_EMPLOYEE_"+(null==O?void 0:O.toUpperCase()))+"_"+(null==x||null===(S=x[0])||void 0===S?void 0:S.action)))))}const Ti=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),fi=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Ti,null));function yi(e){let{action:n,closeWarningPopup:i}=e;const{t:a}=o.useTranslation(),r=window.Digit.Utils.browser.isMobile();return l.createElement(l.Fragment,null,l.createElement(t.Modal,{headerBarMain:l.createElement("h1",{className:"heading-m"},a("PT_DUES_ARE_PENDING")),headerBarEnd:l.createElement(fi,{onClick:()=>{i()}}),hideSubmit:!0,isDisabled:!1,popupStyles:r?{}:{width:"29%",marginTop:"auto"}},l.createElement(t.Card,null,l.createElement("div",{style:{marginBottom:"30px"}},l.createElement("h1",null,a("PT_YOU_HAVE")," ₹",null==n?void 0:n.AmountDueForPay," ",a("PT_DUE_WARNING_MSG2"))),l.createElement(t.Row,{rowContainerStyle:{display:"flex"},labelStyle:{fontSize:"24px",fontWeight:"700",marginRight:"10%"},textStyle:{fontSize:"24px",fontWeight:"700",marginBottom:"20px"},label:""+a("PT_AMOUNT_DUE"),text:"₹"+a(null==n?void 0:n.AmountDueForPay)}),l.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},l.createElement(t.ButtonSelector,{theme:"border",label:a("ES_PT_COMMON_CANCEL"),onSubmit:i,style:{marginLeft:"10px"}}),l.createElement(t.ButtonSelector,{label:a("PT_COLLECT"),onSubmit:()=>{var e;return window.location.assign(""+window.location.origin+(null==n||null===(e=n.redirectionUrl)||void 0===e?void 0:e.pathname))},style:{marginLeft:"10px"}})))),")")}const Si=e=>{var a;const u=Digit.ULBService.getCurrentTenantId(),s=Digit.ULBService.getStateId(),{t:d}=o.useTranslation(),p=i.useHistory();let{id:m}=i.useParams();const[v,E]=n.useState(!1),[_,T]=n.useState(null),[f,y]=n.useState(!1),[S,g]=n.useState(!1),[P,A]=n.useState(!1),{applicationDetails:N,showToast:O,setShowToast:I,isLoading:h,isDataLoading:C,applicationData:R,mutate:b,nocMutation:D,workflowDetails:L,businessService:w,closeToast:M,moduleCode:x,timelineStatusPrefix:U,forcedActionPrefix:F,statusAttribute:B,ActionBarStyle:k,MenuStyle:H,paymentsList:Y,showTimeLine:W=!0,oldValue:j,isInfoLabel:K=!1,clearDataDetails:V}=e;n.useEffect(()=>{O&&L.revalidate()},[O]);const z=r.useQueryClient(),G=()=>{T(null),y(!1)};return h||S?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,h?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(vi,{applicationDetails:N,workflowDetails:L,isDataLoading:C,applicationData:R,businessService:w,timelineStatusPrefix:U,statusAttribute:B,paymentsList:Y,showTimeLine:W,oldValue:j,isInfoLabel:K}),f?l.createElement(jo,{t:d,action:_,tenantId:u,state:s,id:m,applicationDetails:N,applicationData:null==N?void 0:N.applicationData,closeModal:G,submitAction:function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n={});try{let o=!1;function l(t){if(o)return t;b&&(g(!0),b(e,{onError:(e,t)=>{g(!1),I({key:"error",error:e}),setTimeout(M,5e3)},onSuccess:(e,t)=>{var l,o,i,a,r,u,s,c,m;sessionStorage.removeItem("WS_SESSION_APPLICATION_DETAILS"),g(!1),null!=n&&n.bpa&&(e.selectedAction=_,p.replace("/digit-ui/employee/obps/response",{data:e})),null!=n&&n.isStakeholder&&(e.selectedAction=_,p.push("/digit-ui/employee/obps/stakeholder-response",{data:e})),null!=n&&n.isNoc&&p.push("/digit-ui/employee/noc/response",{data:e}),(null==e||null===(l=e.Amendments)||void 0===l?void 0:l.length)>0?null!=t&&null!==(o=t.AmendmentUpdate)&&void 0!==o&&null!==(i=o.workflow)&&void 0!==i&&i.action.includes("SEND_BACK")?I({key:"success",label:d("ES_MODIFYSWCONNECTION_SEND_BACK_UPDATE_SUCCESS")}):null!=t&&null!==(a=t.AmendmentUpdate)&&void 0!==a&&null!==(r=a.workflow)&&void 0!==r&&r.action.includes("RE-SUBMIT")?I({key:"success",label:d("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")}):null!=t&&null!==(u=t.AmendmentUpdate)&&void 0!==u&&null!==(s=u.workflow)&&void 0!==s&&s.action.includes("APPROVE")?I({key:"success",label:d("ES_MODIFYSWCONNECTION_APPROVE_UPDATE_SUCCESS")}):null!=t&&null!==(c=t.AmendmentUpdate)&&void 0!==c&&null!==(m=c.workflow)&&void 0!==m&&m.action.includes("REJECT")&&I({key:"success",label:d("ES_MODIFYWSCONNECTION_REJECT_UPDATE_SUCCESS")}):(I({key:"success",action:_}),V&&setTimeout(V,3e3),setTimeout(M,5e3),z.clear(),z.refetchQueries("APPLICATION_SEARCH"))}})),G()}g(!0),"function"==typeof(null==e?void 0:e.customFunctionToExecute)&&(null==e||e.customFunctionToExecute({...e}));const i=function(){if(!1!==t&&D){var e;const n=null===(e=t)||void 0===e?void 0:e.map(e=>null==D?void 0:D.mutateAsync(e)),l=c(function(){return g(!0),Promise.resolve(Promise.all(n)).then(function(e){e&&e.map(e=>{var t,n;Digit.SessionStorage.del(null==e||null===(t=e.Noc)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.nocType)})})},function(e){var t,n,l,i,a,r,u,s,c,p,m,v;g(!1);let E=null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(l=n.Errors)&&void 0!==l&&null!==(i=l[0])&&void 0!==i&&i.code?d(null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||null===(u=r.Errors)||void 0===u||null===(s=u[0])||void 0===s?void 0:s.code):(null==e||null===(c=e.response)||void 0===c||null===(p=c.data)||void 0===p||null===(m=p.Errors)||void 0===m||null===(v=m[0])||void 0===v?void 0:v.message)||e;G(),I({key:"error",error:{message:E}}),setTimeout(M,5e3),o=!0});if(l&&l.then)return l.then(function(){})}}();return Promise.resolve(i&&i.then?i.then(l):l(i))}catch(e){return Promise.reject(e)}},actionData:null==L||null===(a=L.data)||void 0===a?void 0:a.timeline,businessService:w,workflowDetails:L,moduleCode:x}):null,P?l.createElement(yi,{action:_,workflowDetails:L,businessService:w,isWarningPop:P,closeWarningPopup:()=>{A(!1)}}):null,l.createElement(Ei,{t:d,showToast:O,closeToast:M,businessService:w}),l.createElement(_i,{workflowDetails:L,displayMenu:v,onActionSelect:function(e){if(e)if(null!=e&&e.isToast)I({key:"error",error:{message:null==e?void 0:e.toastMessage}}),setTimeout(M,5e3);else if(null!=e&&e.isWarningPopUp)A(!0);else if(null!=e&&e.redirectionUrll){var t,n,l,o,i;if("ACTIVATE_CONNECTION"===(null==e||null===(t=e.redirectionUrll)||void 0===t?void 0:t.action))p.push(""+(null==e||null===(l=e.redirectionUrll)||void 0===l?void 0:l.pathname),JSON.stringify({data:null==e||null===(o=e.redirectionUrll)||void 0===o?void 0:o.state,url:""+(null===(i=location)||void 0===i?void 0:i.pathname)+location.search}));else if("RE-SUBMIT-APPLICATION"===(null==e||null===(n=e.redirectionUrll)||void 0===n?void 0:n.action)){var a,r;p.push(""+(null==e||null===(a=e.redirectionUrll)||void 0===a?void 0:a.pathname),{data:null==e||null===(r=e.redirectionUrll)||void 0===r?void 0:r.state})}else{var u;window.location.assign(window.location.origin+"/digit-ui/employee/payment/collect/"+(null==e||null===(u=e.redirectionUrll)||void 0===u?void 0:u.pathname))}}else if(null!=e&&e.redirectionUrl){var s,d;p.push({pathname:null===(s=e.redirectionUrl)||void 0===s?void 0:s.pathname,state:{...null===(d=e.redirectionUrl)||void 0===d?void 0:d.state}})}else y(!0);T(e),E(!1)},setDisplayMenu:E,businessService:w,forcedActionPrefix:F,ActionBarStyle:k,MenuStyle:H})))},gi=e=>{var a,u,s,d,p,m,v,E,_,T,f,y,S,g,P,A,N,O,I;let{propertyId:h,acknowledgementIds:C,workflowDetails:R,mutate:b}=e;const{t:D}=o.useTranslation(),[L,w]=n.useState(!1),[M,x]=n.useState(!1),U=Digit.ULBService.getCurrentTenantId(),F=Digit.ULBService.getStateId(),{data:B}=Digit.Hooks.useStore.getInitData(),{tenants:k}=B||{},[Y,W]=n.useState("PT.MUTATION"),K=i.useHistory(),[V,z]=n.useState(!1),{isLoading:G,data:X}=Digit.Hooks.pt.usePropertySearch({filters:{acknowledgementIds:C},tenantId:U},{filters:{acknowledgementIds:C},tenantId:U}),[q,$]=n.useState(null),[Z,Q]=n.useState(null),J=mn(X,"Properties",[]);let ee=J&&J.length>0&&J[0]||{};const te=ee;sessionStorage.setItem("pt-property",JSON.stringify(te));const ne=r.useQueryClient(),{isLoading:le,data:oe}=Digit.Hooks.pt.usePropertySearch({tenantId:U,filters:{propertyIds:h,audit:!0}},{enabled:!0}),{data:ie,isLoading:ae}=Digit.Hooks.useRecieptSearch({tenantId:U,businessService:"PT.MUTATION",consumerCodes:C,isEmployee:!0},{enabled:!!C}),[re,ue]=n.useState({}),[se,de]=n.useState(!1),[ce,pe]=n.useState(null),{data:me}=Digit.Hooks.pt.useApplicationDetail(D,U,h);n.useEffect(function(){try{const e=function(){if(C)return Promise.resolve(Digit.PaymentService.searchBill(U,{Service:Y,consumerCode:C})).then(function(e){const t=function(){if(!e.Bill.length)return Promise.resolve(Digit.PTService.ptCalculateMutation({Property:null==me?void 0:me.applicationData},U)).then(function(e){var t;$((null==e||null===(t=e[C])||void 0===t?void 0:t.totalAmount)||D("CS_NA")),Q(D("PT_MUT_BILL_ACTIVE"))});var t,n,l;$((null==e||null===(t=e.Bill[0])||void 0===t?void 0:t.totalAmount)||D("CS_NA")),Q(D("PT_MUT_BILL_"+(null==e||null===(n=e.Bill[0])||void 0===n||null===(l=n.status)||void 0===l?void 0:l.toUpperCase())))}();if(t&&t.then)return t.then(function(){})})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[U,C,Y]),n.useEffect(()=>{ve()},[oe,me,re]),n.useEffect(()=>{me&&ue(j.cloneDeep(me))},[me]);const ve=()=>{var e,t;if(oe&&Object.keys(re).length&&"ACTIVE"!==(null==me||null===(e=me.applicationData)||void 0===e?void 0:e.status)&&"MUTATION"===(null==me||null===(t=me.applicationData)||void 0===t?void 0:t.creationReason)&&(null==re||!re.applicationDetails.find(e=>"PT_MUTATION_TRANSFEROR_DETAILS"===e.title))){var n;let e=null===(n=re.applicationDetails)||void 0===n?void 0:n.filter(e=>"PT_OWNERSHIP_INFO_SUB_HEADER"===e.title),t=En.reduce((e,t)=>[...e,...t.body],[]).find(e=>"TransfererDetails"===e.component);e.unshift({title:"PT_MUTATION_TRANSFEROR_DETAILS",belowComponent:()=>l.createElement(TransfererDetails,{userType:"employee",formData:{originalData:oe[0]},config:t})}),ue({...re,applicationDetails:e})}},Ee=()=>{pe(null),de(!1)};if(ee.workflow||(ee.workflow={id:null,tenantId:U,businessService:"PT.MUTATION",businessId:null==te?void 0:te.acknowldgementNumber,action:"",moduleName:"PT",state:null,comment:null,documents:null,assignes:null}),ee&&ee.owners&&ee.owners.length>0){let e=[],t=[];ee.owners.map(n=>{n.documentUid=n.documents?n.documents[0].documentUid:"NA",n.documentType=n.documents?n.documents[0].documentType:"NA","ACTIVE"==n.status?e.push(n):t.push(n)}),ee.ownersInit=t,ee.ownersTemp=e}if(ee.ownershipCategoryTemp=ee.ownershipCategory,ee.ownershipCategoryInit="NA",mn(te,"Properties[0].ownershipCategory","").startsWith("INSTITUTION")&&(ee.institutionTemp=ee.institution),oe&&Array.isArray(mn(oe,"Properties",[]))&&mn(oe,"Properties",[]).length>0){const e=mn(oe,"Properties",[]),t="ACTIVE"==ee.status?1:0,n=e.filter(e=>"ACTIVE"==e.status).sort((e,t)=>t.auditDetails.lastModifiedTime-e.auditDetails.lastModifiedTime)[t];ee.ownershipCategoryInit=n.ownershipCategory,ee.ownersInit=n.owners.filter(e=>"ACTIVE"==e.status),ee.ownershipCategoryInit.startsWith("INSTITUTION")&&(ee.institutionInit=n.institution)}let _e=mn(ee,"ownersTemp",[]),Te=mn(ee,"ownersInit",[]),fe=(mn(ee,"institutionTemp",[]),mn(ee,"institutionInit",[])),ye=[];ye=null==te?void 0:te.units,ye&&ye.sort((e,t)=>{let n=e.floorNo,l=t.floorNo;return e.floorNo<0&&(n=-20*e.floorNo),t.floorNo<0&&(l=-20*t.floorNo),n>l?1:-1});let Se=[];if(Se=null==te?void 0:te.documents,G||le||V)return l.createElement(t.Loader,null);let ge=D("CS_NA");if(null!=ee&&null!==(a=ee.additionalDetails)&&void 0!==a&&a.documentDate){var Pe;const e=new Date(null==ee||null===(Pe=ee.additionalDetails)||void 0===Pe?void 0:Pe.documentDate),t=Digit.Utils.date.monthNames[e.getMonth()];ge=e.getDate()+" "+t+" "+e.getFullYear()}let Ae=[];return Ae.push({label:D("MT_APPLICATION"),onClick:()=>function(){try{const e=te||{},t=k.find(t=>t.code===e.tenantId);return Promise.resolve(tt({...e},t,D)).then(function(e){Digit.Utils.pdf.generate(e)})}catch(e){return Promise.reject(e)}}()}),ie&&(null==ie?void 0:ie.Payments.length)>0&&0==ae&&Ae.push({label:D("MT_FEE_RECIEPT"),onClick:()=>{var e;return function(e){let{tenantId:t,payments:n,...l}=e;try{let e={filestoreIds:[null==n?void 0:n.fileStoreId]};return Promise.resolve(Digit.PaymentService.generatePdf(t,{Payments:[{...n}]},"consolidatedreceipt")).then(function(n){return e=n,Promise.resolve(Digit.PaymentService.printReciept(t,{fileStoreIds:e.filestoreIds[0]})).then(function(t){var n;window.open(t[null===(n=e)||void 0===n?void 0:n.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}({tenantId:null==ie||null===(e=ie.Payments[0])||void 0===e?void 0:e.tenantId,payments:null==ie?void 0:ie.Payments[0]})}}),"MUTATION"===(null==X||null===(u=X.Properties)||void 0===u||null===(s=u[0])||void 0===s?void 0:s.creationReason)&&"ACTIVE"===(null==X||null===(d=X.Properties)||void 0===d||null===(p=d[0])||void 0===p?void 0:p.status)&&Ae.push({label:D("MT_CERTIFICATE"),onClick:()=>function(){try{var e;return Promise.resolve(Digit.PaymentService.generatePdf(U,{Properties:[null==X||null===(e=X.Properties)||void 0===e?void 0:e[0]]},"ptmutationcertificate")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(U,{fileStoreIds:e.filestoreIds[0]})).then(function(t){window.open(t[null==e?void 0:e.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}()}),l.createElement(l.Fragment,null,l.createElement("div",{className:"cardHeaderWithOptions",style:{marginRight:"auto"}},l.createElement(t.Header,{styles:{fontSize:"32px",marginLeft:"12px"}},D("PT_MUTATION_APPLICATION_DETAILS")),l.createElement("div",null,l.createElement("div",null,Ae&&Ae.length>0&&l.createElement(t.MultiLink,{onHeadClick:()=>x(!M),displayOptions:M,options:Ae,className:"multilinkWrapper",style:{top:"90px"}})))),l.createElement(t.Card,null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:D("PT_APPLICATION_NUMBER_LABEL"),text:null==ee?void 0:ee.acknowldgementNumber,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:D("PT_SEARCHPROPERTY_TABEL_PTUID"),text:null==ee?void 0:ee.propertyId,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:D("PT_APPLICATION_CHANNEL_LABEL"),text:D("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+(null==ee?void 0:ee.channel))}),l.createElement(t.Row,{label:D("PT_FEE_AMOUNT"),text:q,textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{label:D("PT_PAYMENT_STATUS"),text:Z,textStyle:{whiteSpace:"pre"}})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},D("PT_PROPERTY_ADDRESS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:D("PT_PROPERTY_ADDRESS_PINCODE"),text:(null==ee||null===(m=ee.address)||void 0===m?void 0:m.pincode)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_COMMON_CITY"),text:(null==ee||null===(v=ee.address)||void 0===v?void 0:v.city)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_COMMON_LOCALITY_OR_MOHALLA"),text:D(""+(null==ee||null===(E=ee.address)||void 0===E||null===(_=E.locality)||void 0===_?void 0:_.area))||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_PROPERTY_ADDRESS_STREET_NAME"),text:(null==ee||null===(T=ee.address)||void 0===T?void 0:T.street)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_DOOR_OR_HOUSE"),text:(null==ee||null===(f=ee.address)||void 0===f?void 0:f.doorNo)||D("CS_NA")})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},D("PT_MUTATION_TRANSFEROR_DETAILS")),l.createElement("div",null,Array.isArray(Te)&&Te.map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},1!=Te.length&&l.createElement("span",null,D("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:D("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||D("CS_NA")}),l.createElement(t.Row,{label:D("Guardian Name"),text:(null==e?void 0:e.fatherOrHusbandName)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType.toLowerCase())||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||D("CS_NA")}))))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},D("PT_MUTATION_TRANSFEREE_DETAILS")),l.createElement("div",null,fe.length?Array.isArray(_e)&&_e.map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},1!=_e.length&&l.createElement("span",null,D("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:D("PT_INSTITUTION_NAME"),text:(null==fe?void 0:fe.name)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_TYPE_OF_INSTITUTION"),text:""+D(null==fe?void 0:fe.type)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_NAME_AUTHORIZED_PERSON"),text:(null==fe?void 0:fe.nameOfAuthorizedPerson)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_LANDLINE_NUMBER"),text:(null==e?void 0:e.altContactNumber)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_INSTITUTION_DESIGNATION"),text:(null==fe?void 0:fe.designation)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||D("CS_NA")})))):Array.isArray(_e)&&_e.map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},1!=_e.length&&l.createElement("span",null,D("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:D("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_COMMON_GENDER_LABEL"),text:D(null==e?void 0:e.gender)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_FORM3_RELATIONSHIP"),text:D(null==e?void 0:e.relationship)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType).toLowerCase()||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_FORM3_OWNERSHIP_TYPE"),text:""+D(null!=ee&&ee.ownershipCategoryTemp?"PT_OWNERSHIP_"+(null==ee?void 0:ee.ownershipCategoryTemp):"CS_NA")}))))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},D("PT_MUTATION_DETAILS")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:D("PT_MUTATION_PENDING_COURT"),text:(null==ee||null===(y=ee.additionalDetails)||void 0===y?void 0:y.isMutationInCourt)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_DETAILS_COURT_CASE"),text:(null==ee||null===(S=ee.additionalDetails)||void 0===S?void 0:S.caseDetails)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_PROP_UNDER_GOV_AQUISITION"),text:(null==ee||null===(g=ee.additionalDetails)||void 0===g?void 0:g.isPropertyUnderGovtPossession)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_DETAILS_GOV_AQUISITION"),text:D("CS_NA")})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},D("PT_REGISTRATION_DETAILS")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:D("PT_REASON_PROP_TRANSFER"),text:""+D(null==ee||null===(P=ee.additionalDetails)||void 0===P?void 0:P.reasonForTransfer)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_PROP_MARKET_VALUE"),text:(null==ee||null===(A=ee.additionalDetails)||void 0===A?void 0:A.marketValue)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_REG_NUMBER"),text:(null==ee||null===(N=ee.additionalDetails)||void 0===N?void 0:N.documentNumber)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_DOC_ISSUE_DATE"),text:ge}),l.createElement(t.Row,{label:D("PT_REG_DOC_VALUE"),text:(null==ee||null===(O=ee.additionalDetails)||void 0===O?void 0:O.documentValue)||D("CS_NA")}),l.createElement(t.Row,{label:D("PT_REMARKS"),text:D("CS_NA")})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px",fontWeight:"700",lineHeight:"28px",margin:"20px 0px"}},D("PT_COMMON_DOCS")),l.createElement("div",null,Array.isArray(Se)?Se.length>0&&l.createElement(Et,{property:ee}):l.createElement(t.StatusTable,null,l.createElement(t.Row,{text:D("PT_NO_DOCUMENTS_MSG")}))),l.createElement(H,{application:te,id:C,userType:"employee"}),se?l.createElement(jo,{t:D,action:ce,tenantId:U,state:F,id:C,applicationDetails:re,applicationData:null==re?void 0:re.applicationData,closeModal:Ee,submitAction:function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n={});try{let o=!1;function l(t){if(o)return t;b&&(z(!0),b(e,{onError:(e,t)=>{z(!1),setShowToast({key:"error",error:e}),setTimeout(closeToast,5e3)},onSuccess:(e,t)=>{z(!1),null!=n&&n.bpa&&(e.selectedAction=ce,K.replace("/digit-ui/employee/obps/response",{data:e})),null!=n&&n.isStakeholder&&(e.selectedAction=ce,K.push("/digit-ui/employee/obps/stakeholder-response",{data:e})),null!=n&&n.isNoc&&K.push("/digit-ui/employee/noc/response",{data:e}),ne.clear(),ne.refetchQueries("APPLICATION_SEARCH")}})),Ee()}z(!0),"function"==typeof(null==e?void 0:e.customFunctionToExecute)&&(null==e||e.customFunctionToExecute({...e}));const i=function(){if(!1!==t&&nocMutation){var e;const n=null===(e=t)||void 0===e?void 0:e.map(e=>{var t;return null===(t=nocMutation)||void 0===t?void 0:t.mutateAsync(e)}),l=c(function(){return z(!0),Promise.resolve(Promise.all(n)).then(function(e){e&&e.map(e=>{var t,n;Digit.SessionStorage.del(null==e||null===(t=e.Noc)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.nocType)})})},function(e){var t,n,l,i,a,r,u,s,d,c,p,m;z(!1);let v=null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(l=n.Errors)&&void 0!==l&&null!==(i=l[0])&&void 0!==i&&i.code?D(null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||null===(u=r.Errors)||void 0===u||null===(s=u[0])||void 0===s?void 0:s.code):(null==e||null===(d=e.response)||void 0===d||null===(c=d.data)||void 0===c||null===(p=c.Errors)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.message)||e;Ee(),setShowToast({key:"error",error:{message:v}}),setTimeout(closeToast,5e3),o=!0});if(l&&l.then)return l.then(function(){})}}();return Promise.resolve(i&&i.then?i.then(l):l(i))}catch(e){return Promise.reject(e)}},actionData:null==R||null===(I=R.data)||void 0===I?void 0:I.timeline,businessService:Y,workflowDetails:R,moduleCode:"PT"}):null,l.createElement(_i,{workflowDetails:R,displayMenu:L,onActionSelect:function(e){var t;if(e)if(null!=e&&e.redirectionUrll)window.location.assign(window.location.origin+"/digit-ui/employee/payment/collect/"+(null==e||null===(t=e.redirectionUrll)||void 0===t?void 0:t.pathname));else if(null!=e&&e.redirectionUrl){var n,l;K.push({pathname:null===(n=e.redirectionUrl)||void 0===n?void 0:n.pathname,state:{...null===(l=e.redirectionUrl)||void 0===l?void 0:l.state}})}else de(!0);pe(e),w(!1)},setDisplayMenu:w,businessService:Y,forcedActionPrefix:"WF_EMPLOYEE_PT.CREATE"})))};var Pi=l.memo(()=>{var e,a,r,u,s,d,c,p,m,v,E,_,T,f,y,S,g,P,A,N,O,I,h,C;const{t:R}=o.useTranslation(),{data:b}=Digit.Hooks.useStore.getInitData(),D=Digit.ULBService.getCurrentTenantId(),{tenants:L}=b||{},{id:w}=i.useParams(),[M,x]=n.useState(null),[U,F]=n.useState({}),[B,k]=n.useState(!1),[H,Y]=n.useState(!1),[W,K]=n.useState("PT.CREATE");sessionStorage.setItem("applicationNoinAppDetails",w);const{isLoading:V,data:z}=Digit.Hooks.pt.useApplicationDetail(R,D,w),{mutate:G}=Digit.Hooks.pt.useApplicationActions(D);let X=Digit.Hooks.useWorkflowDetails({tenantId:(null==z?void 0:z.tenantId)||D,id:null==z||null===(e=z.applicationData)||void 0===e?void 0:e.acknowldgementNumber,moduleCode:W,role:"PT_CEMP"});const{data:q}=Digit.Hooks.pt.usePropertySearch({tenantId:D,filters:{propertyIds:w,audit:!0}},{enabled:H,select:e=>{var t;return null===(t=e.Properties)||void 0===t?void 0:t.filter(e=>"ACTIVE"===e.status)}}),$=l.useCallback(()=>{var e,t;if(q&&Object.keys(U).length&&"ACTIVE"!==(null==z||null===(e=z.applicationData)||void 0===e?void 0:e.status)&&"MUTATION"===(null==z||null===(t=z.applicationData)||void 0===t?void 0:t.creationReason)&&(null==U||!U.applicationDetails.find(e=>"PT_MUTATION_TRANSFEROR_DETAILS"===e.title))){var n;let e=null===(n=U.applicationDetails)||void 0===n?void 0:n.filter(e=>"PT_OWNERSHIP_INFO_SUB_HEADER"===e.title),t=En.reduce((e,t)=>[...e,...t.body],[]).find(e=>"TransfererDetails"===e.component);e.unshift({title:"PT_MUTATION_TRANSFEROR_DETAILS",belowComponent:()=>l.createElement(Sn,{userType:"employee",formData:{originalData:q[0]},config:t})}),F({...U,applicationDetails:e})}},[F,U,q,z,q,En]);n.useEffect(()=>{var e,t;z&&(F(j.cloneDeep(z)),"ACTIVE"!==(null==z||null===(e=z.applicationData)||void 0===e?void 0:e.status)&&"MUTATION"===(null==z||null===(t=z.applicationData)||void 0===t?void 0:t.creationReason)&&Y(!0))},[z]),n.useEffect(()=>{var e;$(),"ACTIVE"===(null==U||null===(e=U.applicationData)||void 0===e?void 0:e.status)&&Z&&"PT.CREATE"==W&&K("PT.UPDATE")},[q,z,U]),n.useEffect(()=>{var e,t,n,l,o,i;null===(e=X)||void 0===e||null===(t=e.data)||void 0===t||!t.applicationBusinessService||"PT.CREATE"===(null===(n=X)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.applicationBusinessService)&&"PT.UPDATE"===W||K(null===(o=X)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.applicationBusinessService)},[X.data]);const Z=Digit.UserService.hasAccess(["PT_CEMP"])||!1;var Q,J,ee,te,ne,le,oe,ie,ae,re,ue,se,de,ce;"ACTIVE"===(null==U||null===(a=U.applicationData)||void 0===a?void 0:a.status)&&Z&&(X={...X,data:{...null===(Q=X)||void 0===Q?void 0:Q.data,actionState:{nextActions:[{action:"VIEW_DETAILS",redirectionUrl:{pathname:"/digit-ui/employee/pt/property-details/"+w},tenantId:Digit.ULBService.getStateId()}]}}}),!Z||null===(r=X)||void 0===r||null===(u=r.data)||void 0===u||null===(s=u.actionState)||void 0===s||!s.isStateUpdatable||null!==(d=X)&&void 0!==d&&null!==(c=d.data)&&void 0!==c&&null!==(p=c.actionState)&&void 0!==p&&null!==(m=p.nextActions)&&void 0!==m&&m.find(e=>"UPDATE"===e.action)||(null!==(J=X)&&void 0!==J&&null!==(ee=J.data)&&void 0!==ee&&null!==(te=ee.actionState)&&void 0!==te&&te.nextActions||(X.data.actionState.nextActions=[]),null===(ne=X)||void 0===ne||null===(le=ne.data)||void 0===le||null===(oe=le.actionState)||void 0===oe||oe.nextActions.push({action:"UPDATE",redirectionUrl:{pathname:"/digit-ui/employee/pt/modify-application/"+w,state:{workflow:{action:"REOPEN",moduleName:"PT",businessService:W}}},tenantId:Digit.ULBService.getStateId()})),"PT_PROPERTY_APPLICATION_NO"!==(null==U||null===(v=U.applicationDetails)||void 0===v||null===(E=v[0])||void 0===E||null===(_=E.values)||void 0===_?void 0:_[0].title)&&(null==U||null===(ie=U.applicationDetails)||void 0===ie||ie.unshift({values:[{title:"PT_PROPERTY_APPLICATION_NO",value:null==U||null===(ae=U.applicationData)||void 0===ae?void 0:ae.acknowldgementNumber},{title:"PT_SEARCHPROPERTY_TABEL_PTUID",value:null==U||null===(re=U.applicationData)||void 0===re?void 0:re.propertyId},{title:"ES_APPLICATION_CHANNEL",value:"ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+(null==U||null===(ue=U.applicationData)||void 0===ue?void 0:ue.channel)}]})),Z&&"PT.MUTATION"===(null===(T=X)||void 0===T||null===(f=T.data)||void 0===f?void 0:f.applicationBusinessService)&&null!==(y=X)&&void 0!==y&&null!==(S=y.data)&&void 0!==S&&null!==(g=S.actionState)&&void 0!==g&&null!==(P=g.nextActions)&&void 0!==P&&P.find(e=>"PAY"===e.action)&&(X.data.actionState.nextActions=null===(se=X)||void 0===se||null===(de=se.data)||void 0===de||null===(ce=de.actionState)||void 0===ce?void 0:ce.nextActions.map(e=>{var t;return"PAY"===e.action?{action:"PAY",forcedName:"WF_EMPLOYEE_PT.MUTATION_PAY",redirectionUrl:{pathname:"/digit-ui/employee/payment/collect/PT.MUTATION/"+(null==U||null===(t=U.applicationData)||void 0===t?void 0:t.acknowldgementNumber)}}:e}));const pe=null===(A=X.data)||void 0===A||null===(N=A.timeline)||void 0===N?void 0:N.reduce((e,t)=>{let{wfDocuments:n}=t;return n?[...e,...n]:e},[]);let me=null==U||null===(O=U.applicationDetails)||void 0===O||null===(I=O.find(e=>"PT_OWNERSHIP_INFO_SUB_HEADER"===e.title))||void 0===I||null===(h=I.additionalDetails)||void 0===h?void 0:h.documents;var ve;!me||null==pe||!pe.length||null!=me&&me.find(e=>"PT_WORKFLOW_DOCS"===e.title)||(U.applicationDetails.find(e=>"PT_OWNERSHIP_INFO_SUB_HEADER"===e.title).additionalDetails.documents=[...me,{title:"PT_WORKFLOW_DOCS",values:null==pe||null===(ve=pe.map)||void 0===ve?void 0:ve.call(pe,e=>({...e,title:e.documentType}))}]);let Ee=[{order:1,label:R("PT_APPLICATION"),onClick:()=>function(){try{const e=null==U?void 0:U.applicationData,t=L.find(t=>t.code===e.tenantId);return Promise.resolve(tt(e,t,R)).then(function(e){Digit.Utils.pdf.generate(e)})}catch(e){return Promise.reject(e)}}()}];var _e;return"MUTATION"===(null==z||null===(C=z.applicationData)||void 0===C?void 0:C.creationReason)?l.createElement(gi,{propertyId:w,acknowledgementIds:null==U||null===(_e=U.applicationData)||void 0===_e?void 0:_e.acknowldgementNumber,workflowDetails:X,mutate:G}):l.createElement("div",null,l.createElement("div",{className:"employee-application-details",style:{marginBottom:"15px"}},l.createElement(t.Header,{styles:{marginLeft:"0px",paddingTop:"10px",fontSize:"32px"}},R("PT_APPLICATION_TITLE")),Ee&&Ee.length>0&&l.createElement(t.MultiLink,{className:"multilinkWrapper employee-mulitlink-main-div",onHeadClick:()=>k(!B),displayOptions:B,options:Ee,downloadBtnClassName:"employee-download-btn-className",optionsClassName:"employee-options-btn-className"})),l.createElement(Si,{applicationDetails:U,isLoading:V,isDataLoading:V,applicationData:null==U?void 0:U.applicationData,mutate:G,workflowDetails:X,businessService:W,moduleCode:"PT",showToast:M,setShowToast:x,closeToast:()=>{x(null)},timelineStatusPrefix:"ES_PT_COMMON_STATUS_",forcedActionPrefix:"WF_EMPLOYEE_PT.CREATE",statusAttribute:"state",MenuStyle:{color:"#FFFFFF",fontSize:"18px"}}))});const Ai=e=>{const{propertyId:t,userType:n}=e;return l.createElement(yn,{propertyId:t,userType:n})},Ni=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),Oi=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Ni,null)),Ii=e=>{let{applicationData:a}=e;const{t:r}=o.useTranslation(),u=i.useHistory(),{state:s}=i.useLocation(),[d,c]=n.useState(!1),[p,m,v]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1),[E,_,T]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",{}),{data:f,isLoading:y}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","CommonFieldsConfig");n.useEffect(()=>{m(!1),T()},[]);const S={originalData:a,address:null==a?void 0:a.address,owners:null==a?void 0:a.owners.map(e=>({...e,ownerType:{code:e.ownerType,i18nKey:e.ownerType},relationship:{code:e.relationship,i18nKey:"PT_FORM3_"+e.relationship},gender:{code:e.gender,i18nKey:"PT_FORM3_"+e.gender,value:e.gender}}))};if(sessionStorage.setItem("PropertyInitials",JSON.stringify(null==S?void 0:S.originalData)),y)return l.createElement(t.Loader,null);const g=f||ct;return l.createElement(t.FormComposer,{heading:r("PT_UPDATE_PROPERTY"),isDisabled:!d,label:r("ES_COMMON_APPLICATION_SUBMIT"),config:g.map(e=>({...e,body:[...e.body.filter(e=>!e.hideInEmployee),{withoutLabel:!0,type:"custom",populators:{name:"originalData",component:(e,t)=>l.createElement(l.Fragment,null)}}]})),fieldStyle:{marginRight:0},onSubmit:e=>{var t,n,l,o,i,r,d,c,p,m,v,E,_,T;const f={...a,address:{...null==a?void 0:a.address,...null==e?void 0:e.address,city:null==e||null===(t=e.address)||void 0===t||null===(n=t.city)||void 0===n?void 0:n.name},propertyType:null==e||null===(l=e.PropertyType)||void 0===l?void 0:l.code,creationReason:"PT.UPDATE"===(null==s||null===(o=s.workflow)||void 0===o?void 0:o.businessService)||null==(null==a?void 0:a.documents)?"UPDATE":null==a?void 0:a.creationReason,usageCategory:null!=e&&null!==(i=e.usageCategoryMinor)&&void 0!==i&&i.subuagecode?null==e||null===(r=e.usageCategoryMinor)||void 0===r?void 0:r.subuagecode:null==e||null===(d=e.usageCategoryMajor)||void 0===d?void 0:d.code,usageCategoryMajor:null==e||null===(c=e.usageCategoryMajor)||void 0===c?void 0:c.code.split(".")[0],usageCategoryMinor:(null==e||null===(p=e.usageCategoryMajor)||void 0===p?void 0:p.code.split(".")[1])||null,noOfFloors:Number(null==e?void 0:e.noOfFloors),landArea:Number(null==e?void 0:e.landarea),superBuiltUpArea:Number(null==e?void 0:e.landarea),source:"MUNICIPAL_RECORDS",channel:"CFC_COUNTER",documents:null!=a&&a.documents?null==a?void 0:a.documents.map(t=>{var n,l;let o=t.documentType.split("."),i=null==e||null===(n=e.documents)||void 0===n||null===(l=n.documents)||void 0===l?void 0:l.find(e=>e.documentType.includes(o[0]+"."+o[1]));return{...t,...i}}):(null==e||null===(m=e.documents)||void 0===m?void 0:m.documents.length)>0?null==e||null===(v=e.documents)||void 0===v?void 0:v.documents:null,units:[...(null==a||null===(E=a.units)||void 0===E?void 0:E.map(e=>({...e,active:!1})))||[],...(null==e||null===(_=e.units)||void 0===_?void 0:_.map(e=>({...e,active:!0})))||[]],workflow:null==s?void 0:s.workflow,applicationStatus:"UPDATE"};"OPEN"===(null==s||null===(T=s.workflow)||void 0===T?void 0:T.action)&&(f.units=f.units.filter(e=>e.active)),u.push("/digit-ui/employee/pt/response",{Property:f,key:"UPDATE",action:"SUBMIT"})},defaultValues:S,onFormValueChange:(e,t,n)=>{1==Object.keys(n.errors).length&&n.errors.documents?c(!0):c(!Object.keys(n.errors).length)}})},hi=(e,t,n,l,o)=>o((l?"E":"C")+"S_PT_RESPONSE_"+(t||"CREATE")+"_"+e+(n?"":"_ERROR")),Ci=(e,t,n,l)=>hi("ACTION",e,t,n,l),Ri=(e,t,n,l)=>hi("LABEL",e,t,n,l),bi=e=>{var n,o,i,a,r,u,s,d,c;return l.createElement(t.Banner,{message:Ci((null==e||null===(n=e.data)||void 0===n||null===(o=n.Properties)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.applicationStatus)||e.action,e.isSuccess,e.isEmployee,e.t),applicationNumber:null==e||null===(a=e.data)||void 0===a||null===(r=a.Properties)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.acknowldgementNumber,info:Ri((null===(s=e.data)||void 0===s||null===(d=s.Properties)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.applicationStatus)||e.action,e.isSuccess,e.isEmployee,e.t),successful:e.isSuccess})},Di=e=>{let{applicationData:a}=e;const{t:r}=o.useTranslation(),[u,s]=n.useState(!1),{data:d}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","MutationDocuments"),c={originalData:a},[p,m,v]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1),[E,_,T]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",{});n.useEffect(()=>{m(!1),T()},[]);const f=i.useHistory(),y=En;return l.createElement(t.FormComposer,{heading:r("ES_TITLE_MUTATE_PROPERTY"),isDisabled:!u,label:r("ES_COMMON_APPLICATION_SUBMIT"),config:y.map(e=>({...e,body:[...e.body.filter(e=>!e.hideInEmployee),{withoutLabel:!0,type:"custom",populators:{name:"originalData",component:(e,t)=>l.createElement(l.Fragment,null)}}]})),fieldStyle:{marginRight:0},onSubmit:e=>{var t,n,l,o,i,a,r,u;e.originalData.owners=null===(t=e.originalData)||void 0===t||null===(n=t.owners)||void 0===n?void 0:n.filter(e=>"ACTIVE"==e.status);let{additionalDetails:s}=e,c=(null==e||null===(l=e.originalData)||void 0===l||null===(o=l.documents)||void 0===o?void 0:o.filter(e=>{var t;return!(null!=d&&null!==(t=d.PropertyTax)&&void 0!==t&&t.MutationDocuments.some(t=>e.documentType.includes(t.code)))}))||[];const p={Property:{...e.originalData,creationReason:"MUTATION",owners:[...null===(i=e.originalData)||void 0===i||null===(a=i.owners)||void 0===a?void 0:a.map(t=>({...t,landlineNumber:e.owners[0].altContactNumber,altContactNumber:e.owners[0].altContactNumber,status:"INACTIVE"})),...e.owners.map(t=>{var n,l,o,i;let a={},r=t.gender.code,u=t.ownerType.code,s=t.relationship.code;if(a.documents=[null==e||null===(n=e.documents)||void 0===n||null===(l=n.documents)||void 0===l?void 0:l.find(e=>{var t;return null===(t=e.documentType)||void 0===t?void 0:t.includes("OWNER.IDENTITYPROOF")})],t.documents){let{documentUid:e,documentType:n}=t.documents;a.documents=[...a.documents,{documentUid:e,documentType:n.code,fileStoreId:e}]}return{...t,gender:r,ownerType:u,relationship:s,inistitutetype:null==t||null===(o=t.institution)||void 0===o||null===(i=o.type)||void 0===i?void 0:i.code,landlineNumber:null==t?void 0:t.altContactNumber,...a,status:"ACTIVE"}})],additionalDetails:{...s,isMutationInCourt:null===(r=s.isMutationInCourt)||void 0===r?void 0:r.code,reasonForTransfer:null==s?void 0:s.reasonForTransfer.code,isPropertyUnderGovtPossession:s.isPropertyUnderGovtPossession.code,documentDate:new Date(null==s?void 0:s.documentDate).getTime(),marketValue:Number(null==s?void 0:s.marketValue)},ownershipCategory:e.ownershipCategory.code,documents:[...c,...null==e||null===(u=e.documents)||void 0===u?void 0:u.documents.map(e=>e.documentType.includes("OWNER.TRANSFERREASONDOCUMENT")?{...e,documentType:e.documentType.split(".")[2]}:e)],workflow:{action:"OPEN",businessService:"PT.MUTATION",moduleName:"PT",tenantId:e.originalData.tenantId}}};p.Property.ownershipCategory.includes("INDIVIDUAL")||(p.Property.institution={nameOfAuthorizedPerson:e.owners[0].name,name:e.owners[0].institution.name,designation:e.owners[0].designation,tenantId:e.originalData.tenantId,type:e.owners[0].institution.type.code}),f.replace("/digit-ui/employee/pt/response",{Property:p.Property,key:"UPDATE",action:"SUBMIT"})},defaultValues:c,onFormValueChange:(e,t,n)=>{var l,o,i,a;if(s(!Object.keys(n.errors).length),!Object.keys(n.errors).length){let{additionalDetails:e}=t,{documentDate:n,documentNumber:l,documentValue:o,isMutationInCourt:i,isPropertyUnderGovtPossession:a,marketValue:r,reasonForTransfer:u}=e;s(!!(n&&l&&o&&i&&a&&r&&u))}null!=t&&null!==(l=t.ownershipCategory)&&void 0!==l&&null!==(o=l.code)&&void 0!==o&&null!==(i=o.includes)&&void 0!==i&&i.call(o,"MULTIPLE")&&(null==t||null===(a=t.owners)||void 0===a?void 0:a.length)<2&&s(!1)}})},Li=e=>{const{t:t}=o.useTranslation();return t(null!=e&&e.isSuccess?"CS_PROPERTY_FEEDBACK_SUCCESS":"CS_PROPERTY_FEEDBACK_FAILED")},wi=e=>l.createElement(t.Banner,{message:Li(e),applicationNumber:"",style:e.isMobile?{width:"unset"}:{width:"740px"},successful:null==e?void 0:e.isSuccess}),Mi={PTLandArea:e=>{var o;let{t:i,config:a,onSelect:r,formData:s}=e,c={};const[p,m]=n.useState(null===(o=s.landArea)||void 0===o?void 0:o.floorarea),[v,E]=n.useState(null);return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{config:a,onChange:function(e){e.target.value.length>1024?E("CS_COMMON_LANDMARK_MAX_LENGTH"):(E(null),m(e.target.value))},forcedError:i(v),onSelect:()=>{r("landArea",{floorarea:p})},onSkip:()=>r(),t:i,isDisabled:v||!p,showErrorBelowChildren:!0},l.createElement(t.CardLabel,null,""+i("PT_PLOT_SIZE_SQUARE_FEET_LABEL")),l.createElement(t.TextInput,u({t:i,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"floorarea",value:p,onChange:function(e){m(e.target.value)}},c={pattern:"^([0-9]){0,8}$",type:"number",title:i("PT_PLOT_SIZE_ERROR_MESSAGE")}))))},PTCheckPage:e=>{var a,r;let{onSubmit:u,value:s={}}=e;const{t:c}=o.useTranslation(),{address:p,PropertyType:m,units:v=[{}],landarea:E,landArea:_,ownershipCategory:T,IsAnyPartOfThisFloorUnOccupied:f,selfOccupied:y,owners:S,isEditProperty:P,isUpdateProperty:A}=(i.useHistory(),s),N=P||A?"edit-application":"new-application";R(null==y?void 0:y.i18nKey),b(null==f?void 0:f.i18nKey),C(null==m?void 0:m.i18nKey);const[O,I]=n.useState(!1);return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:4}):null,l.createElement(t.Card,null,l.createElement(t.CardHeader,null,c("PT_CHECK_CHECK_YOUR_ANSWERS")),l.createElement("div",null,l.createElement(t.CardText,null,c("PT_CHECK_CHECK_YOUR_ANSWERS_TEXT")),l.createElement(t.CardSubHeader,null,c("PT_PROPERTY_ADDRESS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:c("PT_PROPERTY_ADDRESS_SUB_HEADER"),text:(null!=p&&p.doorNo?(null==p?void 0:p.doorNo)+", ":"")+" "+(null!=p&&p.street?(null==p?void 0:p.street)+", ":"")+(null!=p&&p.landmark?(null==p?void 0:p.landmark)+", ":"")+c(null==p?void 0:p.locality.code)+", "+c(null==p?void 0:p.city.code)+","+(c(null==p?void 0:p.pincode)?""+p.pincode:" "),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/pincode"})}),l.createElement(t.Row,{label:c("PT_PROOF_OF_ADDRESS_SUB_HEADER"),text:""+((null==p||null===(a=p.documents)||void 0===a||null===(r=a.ProofOfAddress)||void 0===r?void 0:r.name)&&g(p.documents.ProofOfAddress.name)||"na"),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/proof"})})),l.createElement(t.CardSubHeader,null,c("PT_OWNERSHIP_DETAILS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:c("PT_FORM3_OWNERSHIP_TYPE"),text:c(h("PT_OWNERSHIP_"+(null==T?void 0:T.code))),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/owner-ship-details@0"})})),l.createElement("div",null,S&&S.map&&S.map((e,n)=>{var o,i,a,r,u,s,d,p;return l.createElement("div",{key:n},1!=S.length&&l.createElement(t.CardSubHeader,null,c("PT_OWNER_SUB_HEADER")," - ",n+1),l.createElement("div",null,"INSTITUTIONALPRIVATE"==(null==T?void 0:T.value)||"INSTITUTIONALGOVERNMENT"==(null==T?void 0:T.value)?l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:c("PT_COMMON_INSTITUTION_NAME"),text:""+c(h(null==e?void 0:e.inistitutionName)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:c("PT_TYPE_OF_INSTITUTION"),text:""+c(h(null==e||null===(o=e.inistitutetype)||void 0===o?void 0:o.code)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:c("PT_OWNER_NAME"),text:""+c(h(null==e?void 0:e.name)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:""+c("PT_COMMON_AUTHORISED_PERSON_DESIGNATION"),text:""+c(h(null==e?void 0:e.designation)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:""+c("PT_FORM3_MOBILE_NUMBER"),text:""+c(h(null==e?void 0:e.mobileNumber)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:""+c("PT_OWNERSHIP_INFO_TEL_PHONE_NO"),text:""+c(h(null==e?void 0:e.altContactNumber)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:""+c("PT_FORM3_EMAIL_ID"),text:""+c(h(null==e?void 0:e.emailId)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/inistitution-details/"+n})}),l.createElement(t.Row,{label:""+c("PT_OWNERSHIP_INFO_CORR_ADDR"),text:""+c(h(null==e?void 0:e.permanentAddress)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/institutional-owner-address/"+n})}),l.createElement(t.Row,{label:""+c("PT_COMMON_SAME_AS_PROPERTY_ADDRESS"),text:""+c(h(null==e?void 0:e.isCorrespondenceAddress)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/institutional-owner-address/"+n})}),l.createElement(t.Row,{label:c("PT_PROOF_IDENTITY_HEADER"),text:""+((null==e||null===(i=e.documents.proofIdentity)||void 0===i?void 0:i.name)&&g(e.documents.proofIdentity.name)||"na"),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/institutional-proof-of-identity/"+n})})):l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:c("PT_OWNER_NAME"),text:""+c(h(null==e?void 0:e.name)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/owner-details/"+n})}),l.createElement(t.Row,{label:c("PT_FORM3_GENDER"),text:""+c(h(null==e||null===(a=e.gender)||void 0===a?void 0:a.code)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/owner-details/"+n})}),l.createElement(t.Row,{label:""+c("PT_FORM3_MOBILE_NUMBER"),text:""+c(h(null==e?void 0:e.mobileNumber)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/owner-details/"+n})}),l.createElement(t.Row,{label:c("PT_FORM3_GUARDIAN_NAME"),text:""+c(h(null==e?void 0:e.fatherOrHusbandName)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/owner-details/"+n})}),l.createElement(t.Row,{label:c("PT_FORM3_RELATIONSHIP"),text:""+c(h(null==e||null===(r=e.relationship)||void 0===r?void 0:r.code)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/owner-details/"+n})}),l.createElement(t.Row,{label:c("PT_SPECIAL_OWNER_CATEGORY"),text:""+c(h(null==e||null===(u=e.ownerType)||void 0===u?void 0:u.code)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/special-owner-category/"+n})}),l.createElement(t.Row,{label:""+c("PT_OWNERS_ADDRESS"),text:""+c(h(null==e?void 0:e.permanentAddress)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/owner-address/"+n})}),l.createElement(t.Row,{label:""+c("PT_COMMON_SAME_AS_PROPERTY_ADDRESS"),text:""+c(h(null==e?void 0:e.isCorrespondenceAddress)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/owner-address/"+n})}),"NONE"!==(null==e||null===(s=e.ownerType)||void 0===s?void 0:s.code)?l.createElement(t.Row,{label:c("PT_SPECIAL_OWNER_CATEGORY_PROOF_HEADER"),text:""+((null==e||null===(d=e.documents.specialProofIdentity)||void 0===d?void 0:d.name)&&g(e.documents.specialProofIdentity.name)||"na"),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/special-owner-category-proof/"+n})}):"",l.createElement(t.Row,{label:c("PT_PROOF_IDENTITY_HEADER"),text:""+((null==e||null===(p=e.documents.proofIdentity)||void 0===p?void 0:p.name)&&g(e.documents.proofIdentity.name)||"na"),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/proof-of-identity/"+n})}))))})),l.createElement(t.CardSubHeader,null,c("PT_ASSESMENT_INFO_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:c("PT_ASSESMENT1_PROPERTY_TYPE"),text:""+c(h(null==m?void 0:m.i18nKey)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/property-type"})}),"VACANT"!==(null==m?void 0:m.code)&&l.createElement(t.Row,{label:c("PT_ASSESMENT1_PLOT_SIZE"),text:""+(null==_?void 0:_.floorarea),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/landarea"})}),"VACANT"===(null==m?void 0:m.code)&&l.createElement(t.Row,{label:c("PT_ASSESMENT1_PLOT_SIZE"),text:""+(null==E?void 0:E.floorarea),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/PtUnits"})}),"VACANT"!==(null==m?void 0:m.code)&&v.sort((e,t)=>e.floorNo-t.floorNo).map((e,n)=>{var o,i,a,r;return l.createElement("div",null,v.length>1&&l.createElement(t.CardSubHeader,null,c("PT_UNIT"),"-",n),l.createElement(t.Row,{label:c("PT_BUILT_UP_AREA"),text:""+(null==e||null===(o=e.constructionDetail)||void 0===o?void 0:o.builtUpArea),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/PtUnits"})}),l.createElement(t.Row,{label:c("PT_ASSESMENT_INFO_OCCUPLANCY"),text:c("PROPERTYTAX_OCCUPANCYTYPE_"+(null==e?void 0:e.occupancyType)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/PtUnits"})}),l.createElement(t.Row,{label:c("PT_FORM2_USAGE_TYPE"),text:c("PROPERTYTAX_BILLING_SLAB_"+((null==e||null===(i=e.usageCategory)||void 0===i?void 0:i.split(".").length)>2?null==e||null===(a=e.usageCategory)||void 0===a?void 0:a.split(".")[1]:null==e||null===(r=e.usageCategory)||void 0===r?void 0:r.split(".")[0])),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/PtUnits"})})," ",(null==e?void 0:e.unitType)&&l.createElement(t.Row,{label:c("PT_FORM2_SUB_USAGE_TYPE"),text:c("PROPERTYTAX_BILLING_SLAB_"+(null==e?void 0:e.unitType)),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/PtUnits"})}),l.createElement(t.Row,{label:c("PT_FLOOR_NO"),text:""+(null==e?void 0:e.floorNo),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/PtUnits"})}),(null==e?void 0:e.arv)&&l.createElement(t.Row,{label:c("PT_PROPERTY_ANNUAL_RENT_LABEL"),text:""+(null==e?void 0:e.arv),actionButton:l.createElement(Xe,{jumpTo:"/digit-ui/citizen/pt/property/"+N+"/PtUnits"})}))})),l.createElement(t.CheckBox,{label:c("PT_FINAL_DECLARATION_MESSAGE"),onChange:()=>{I(!O)},styles:{height:"auto"}})),l.createElement(t.SubmitBar,{label:c("PT_COMMON_BUTTON_SUBMIT"),onSubmit:u,disabled:!O})))},PTAcknowledgement:e=>{var a,r,u,s,d;let{data:c,onSuccess:p}=e;const{t:m}=o.useTranslation(),v=window.location.href.includes("property-mutation"),E=Digit.ULBService.getCurrentTenantId(),_=Digit.Hooks.pt.usePropertyAPI(null!=c&&null!==(a=c.address)&&void 0!==a&&a.city?null===(r=c.address)||void 0===r||null===(u=r.city)||void 0===u?void 0:u.code:E,!window.location.href.includes("edit-application")&&!v),{data:T}=Digit.Hooks.useStore.getInitData(),{tenants:f}=(i.useRouteMatch(),T||{});return n.useEffect(()=>{try{var e,t,n,l,o;let i=v?null===(e=c.Property)||void 0===e?void 0:e.address.tenantId:null!=c&&null!==(t=c.address)&&void 0!==t&&t.city?null===(n=c.address)||void 0===n||null===(l=n.city)||void 0===l?void 0:l.code:i;c.tenantId=i;let a=window.location.href.includes("edit-application")?function(e,t){var n,l,o,i,a,r,u,s,d,c,p,m,v,E,_,T,f,y,S;void 0===e&&(e={});let g=e.isResdential,P=e.PropertyType,N=e.selfOccupied,O=e.Subusagetypeofrentedarea||null,h=e.subusagetype||null,C=e.IsAnyPartOfThisFloorUnOccupied||null,R=(null===(n=e)||void 0===n||null===(l=n.floordetails)||void 0===l?void 0:l.builtUpArea)||null,b=null===(o=e)||void 0===o?void 0:o.noOfFloors,D=null===(i=e)||void 0===i?void 0:i.noOofBasements,L=null===(a=e)||void 0===a?void 0:a.units;e.units=null===(r=e)||void 0===r||null===(u=r.units)||void 0===u?void 0:u.map(e=>{var t;return{...e,unitType:null==e||null===(t=e.unitType)||void 0===t?void 0:t.code}});let w=Array.isArray(null===(s=e)||void 0===s?void 0:s.units)&&null!==(d=e)&&void 0!==d&&d.units[-1]?null===(c=e)||void 0===c?void 0:c.units[-1]:null,k=Array.isArray(null===(p=e)||void 0===p?void 0:p.units)&&null!==(m=e)&&void 0!==m&&m.units[-2]?null===(v=e)||void 0===v?void 0:v.units[-2]:null;e=(e=>{var t;const{address:n,owners:l}=e;let o=[];var i,a,r,u,s,d,c,p;return null!=n&&null!==(t=n.documents.ProofOfAddress)&&void 0!==t&&t.id?o.push({fileStoreId:(null==n||null===(i=n.documents.ProofOfAddress)||void 0===i?void 0:i.fileStoreId)||"",documentType:(null==n||null===(a=n.documents.ProofOfAddress)||void 0===a||null===(r=a.documentType)||void 0===r?void 0:r.code)||"",id:(null==n||null===(u=n.documents.ProofOfAddress)||void 0===u?void 0:u.id)||"",status:(null==n||null===(s=n.documents.ProofOfAddress)||void 0===s?void 0:s.status)||""}):o.push({fileStoreId:(null==n||null===(d=n.documents.ProofOfAddress)||void 0===d?void 0:d.fileStoreId)||"",documentType:(null==n||null===(c=n.documents.ProofOfAddress)||void 0===c||null===(p=c.documentType)||void 0===p?void 0:p.code)||""}),l&&l.length>0&&l.map(e=>{e.documents.map(e=>{o.push(e)})}),e.documents=o,e})(e=function(e){var t,n,l,o;void 0===e&&(e=[]);const{institution:i,owners:a}=e;var r,u,s,d;if("INSTITUTIONALPRIVATE"===(null===(t=e)||void 0===t||null===(n=t.ownershipCategory)||void 0===n?void 0:n.value)||"INSTITUTIONALGOVERNMENT"===(null===(l=e)||void 0===l||null===(o=l.ownershipCategory)||void 0===o?void 0:o.value)){if("INSTITUTIONALPRIVATE"===(null===(r=e)||void 0===r||null===(u=r.ownershipCategory)||void 0===u?void 0:u.value)||"INSTITUTIONALGOVERNMENT"===(null===(s=e)||void 0===s||null===(d=s.ownershipCategory)||void 0===d?void 0:d.value)){var c,p,m,v,E,_,T,f,y,S;i.designation=null===(c=a[0])||void 0===c?void 0:c.designation,i.name=null===(p=a[0])||void 0===p?void 0:p.inistitutionName,i.nameOfAuthorizedPerson=null===(m=a[0])||void 0===m?void 0:m.name,i.tenantId=null===(v=e)||void 0===v||null===(E=v.address)||void 0===E||null===(_=E.city)||void 0===_?void 0:_.code,i.type=null===(T=a[0])||void 0===T||null===(f=T.inistitutetype)||void 0===f?void 0:f.value;let t=[];var g,P;null!==(y=a[0])&&void 0!==y&&null!==(S=y.documents.proofIdentity)&&void 0!==S&&S.fileStoreId&&a[0].documents.proofIdentity.id?t.push({fileStoreId:a[0].documents.proofIdentity.fileStoreId||"",documentType:(null===(g=a[0].documents.proofIdentity.documentType)||void 0===g?void 0:g.code)||"",id:a[0].documents.proofIdentity.id||"",status:a[0].documents.proofIdentity.status||""}):t.push({fileStoreId:a[0].documents.proofIdentity.fileStoreId||"",documentType:(null===(P=a[0].documents.proofIdentity.documentType)||void 0===P?void 0:P.code)||""}),e.owners.forEach(e=>{var n,l,o,i,r,u,s,d,c;e.altContactNumber=null===(n=a[0])||void 0===n?void 0:n.altContactNumber,e.correspondenceAddress=null===(l=a[0])||void 0===l?void 0:l.permanentAddress,e.designation=null===(o=a[0])||void 0===o?void 0:o.designation,e.emailId=null===(i=a[0])||void 0===i?void 0:i.emailId,e.isCorrespondenceAddress=null===(r=a[0])||void 0===r?void 0:r.isCorrespondenceAddress,e.mobileNumber=null===(u=a[0])||void 0===u?void 0:u.mobileNumber,e.name=null===(s=a[0])||void 0===s?void 0:s.name,e.ownerType=(null===(d=a[0])||void 0===d||null===(c=d.ownerType)||void 0===c?void 0:c.code)||"NONE",e.documents=t}),e.institution=i}}else e.owners.forEach(e=>{var t,n,l,o,i;let a=[];var r,u,s,d;"NONE"!=(null==e||null===(t=e.ownerType)||void 0===t?void 0:t.code)&&a.push(e.documents.specialProofIdentity.id?{fileStoreId:e.documents.specialProofIdentity.fileStoreId||"",documentType:(null===(r=e.documents.specialProofIdentity.documentType)||void 0===r?void 0:r.code)||"",id:e.documents.specialProofIdentity.id||"",status:e.documents.specialProofIdentity.status||""}:{fileStoreId:e.documents.specialProofIdentity.fileStoreId||"",documentType:(null===(u=e.documents.specialProofIdentity.documentType)||void 0===u?void 0:u.code)||""}),null!=e&&null!==(n=e.documents.proofIdentity)&&void 0!==n&&n.fileStoreId&&a.push(e.documents.proofIdentity.id?{fileStoreId:e.documents.proofIdentity.fileStoreId||"",documentType:(null===(s=e.documents.proofIdentity.documentType)||void 0===s?void 0:s.code)||"",id:e.documents.proofIdentity.id||"",status:e.documents.proofIdentity.status||""}:{fileStoreId:e.documents.proofIdentity.fileStoreId||"",documentType:(null===(d=e.documents.proofIdentity.documentType)||void 0===d?void 0:d.code)||""}),e.gender=null==e||null===(l=e.gender)||void 0===l?void 0:l.code,e.ownerType=null==e||null===(o=e.ownerType)||void 0===o?void 0:o.code,e.relationship=null==e||null===(i=e.relationship)||void 0===i?void 0:i.code,e.documents=a});return e}(e=A(e))),(e=I(e)).address.city=e.address.city?e.address.city:t("TENANT_TENANTS_"+M(null===(E=e)||void 0===E?void 0:E.tenantId.toUpperCase(),".","_"));const H={Property:{id:e.id,accountId:e.accountId,acknowldgementNumber:e.acknowldgementNumber,propertyId:e.propertyId,status:e.status||"INWORKFLOW",tenantId:e.tenantId,address:e.address,ownershipCategory:null===(_=e)||void 0===_||null===(T=_.ownershipCategory)||void 0===T?void 0:T.value,owners:e.owners,institution:e.institution||null,documents:e.documents||[],...e.propertyDetails,additionalDetails:{inflammable:!1,heightAbove36Feet:!1,isResdential:g,propertyType:P,selfOccupied:N,Subusagetypeofrentedarea:O,subusagetype:h,IsAnyPartOfThisFloorUnOccupied:C,builtUpArea:R,noOfFloors:b,noOofBasements:D,unit:L,basement1:w,basement2:k},creationReason:B(e),source:"MUNICIPAL_RECORDS",channel:"CITIZEN",workflow:F(e)}};let Y=JSON.parse(sessionStorage.getItem("propertyInitialObject"));if(U(null==Y?void 0:Y.units)&&x(null===(f=H.Property)||void 0===f?void 0:f.units)&&null!==(y=e)&&void 0!==y&&y.isEditProperty){var W;Y.units=Y.units.filter(e=>e.active);let e=Y.units.map(e=>({...e,active:!1}));null===(W=H.Property)||void 0===W||W.units.push(...e)}return U(null==Y?void 0:Y.owners)&&x(null===(S=H.Property)||void 0===S?void 0:S.owners)&&(H.Property.owners=[...Y.owners]),null!=Y&&Y.auditDetails&&(H.Property.auditDetails={...Y.auditDetails}),H}(c,m):v?c:function(e){var t,n,l,o,i,a,r,u,s,d,c,p,m;void 0===e&&(e={});let v=e.isResdential,E=e.PropertyType,_=e.selfOccupied,T=e.Subusagetypeofrentedarea||null,f=e.subusagetype||null,y=e.IsAnyPartOfThisFloorUnOccupied||null,S=(null===(t=e)||void 0===t||null===(n=t.floordetails)||void 0===n?void 0:n.builtUpArea)||null,g=null===(l=e)||void 0===l?void 0:l.noOfFloors,P=null===(o=e)||void 0===o?void 0:o.noOofBasements,N=null===(i=e)||void 0===i?void 0:i.units,O=Array.isArray(null===(a=e)||void 0===a?void 0:a.units)&&null!==(r=e)&&void 0!==r&&r.units[-1]?null===(u=e)||void 0===u?void 0:u.units[-1]:null,h=Array.isArray(null===(s=e)||void 0===s?void 0:s.units)&&null!==(d=e)&&void 0!==d&&d.units[-2]?null===(c=e)||void 0===c?void 0:c.units[-2]:null;return e=(e=>{const{address:t,owners:n}=e;let l={},o=[];var i,a;if(n&&n.length>0)if("INSTITUTIONALPRIVATE"===(null==e||null===(i=e.ownershipCategory)||void 0===i?void 0:i.value)||"INSTITUTIONALGOVERNMENT"===(null==e||null===(a=e.ownershipCategory)||void 0===a?void 0:a.value)){var r,u,s,d,c,p,m,v,E,_,T,f,y,S,g,P,A;l.designation=null===(r=n[0])||void 0===r?void 0:r.designation,l.name=null===(u=n[0])||void 0===u?void 0:u.inistitutionName,l.nameOfAuthorizedPerson=null===(s=n[0])||void 0===s?void 0:s.name,l.tenantId=null==t||null===(d=t.city)||void 0===d?void 0:d.code,l.type=null===(c=n[0])||void 0===c||null===(p=c.inistitutetype)||void 0===p?void 0:p.value;let i=[];var N,O,I,h,C;null!==(m=n[0])&&void 0!==m&&null!==(v=m.documents.proofIdentity)&&void 0!==v&&v.fileStoreId&&i.push({fileStoreId:(null===(N=n[0])||void 0===N||null===(O=N.documents.proofIdentity)||void 0===O?void 0:O.fileStoreId)||"",documentType:(null===(I=n[0])||void 0===I||null===(h=I.documents.proofIdentity)||void 0===h||null===(C=h.documentType)||void 0===C?void 0:C.code)||""}),o.push({altContactNumber:null===(E=n[0])||void 0===E?void 0:E.altContactNumber,correspondenceAddress:null===(_=n[0])||void 0===_?void 0:_.permanentAddress,designation:null===(T=n[0])||void 0===T?void 0:T.designation,emailId:null===(f=n[0])||void 0===f?void 0:f.emailId,isCorrespondenceAddress:null===(y=n[0])||void 0===y?void 0:y.isCorrespondenceAddress,mobileNumber:null===(S=n[0])||void 0===S?void 0:S.mobileNumber,name:null===(g=n[0])||void 0===g?void 0:g.name,ownerType:(null===(P=n[0])||void 0===P||null===(A=P.ownerType)||void 0===A?void 0:A.code)||"NONE",documents:i}),e.institution=l,e.owners=o}else n.map(e=>{var t,n,l,i,a;let r=[];var u,s,d,c,p,m;"NONE"!=(null==e||null===(t=e.ownerType)||void 0===t?void 0:t.code)&&r.push({fileStoreId:(null==e||null===(u=e.documents.specialProofIdentity)||void 0===u?void 0:u.fileStoreId)||"",documentType:(null==e||null===(s=e.documents.specialProofIdentity)||void 0===s||null===(d=s.documentType)||void 0===d?void 0:d.code)||""}),null!=e&&null!==(n=e.documents.proofIdentity)&&void 0!==n&&n.fileStoreId&&r.push({fileStoreId:(null==e||null===(c=e.documents.proofIdentity)||void 0===c?void 0:c.fileStoreId)||"",documentType:(null==e||null===(p=e.documents.proofIdentity)||void 0===p||null===(m=p.documentType)||void 0===m?void 0:m.code)||""}),o.push({emailId:null==e?void 0:e.emailId,fatherOrHusbandName:null==e?void 0:e.fatherOrHusbandName,gender:null==e||null===(l=e.gender)||void 0===l?void 0:l.value,isCorrespondenceAddress:null==e?void 0:e.isCorrespondenceAddress,mobileNumber:null==e?void 0:e.mobileNumber,name:null==e?void 0:e.name,ownerType:(null==e||null===(i=e.ownerType)||void 0===i?void 0:i.code)||"NONE",permanentAddress:null==e?void 0:e.permanentAddress,relationship:null==e||null===(a=e.relationship)||void 0===a?void 0:a.code,documents:r})}),e.owners=o;return e})(e=(e=>{var t;const{address:n,owners:l}=e;let o=[];var i,a,r,u,s,d,c,p;return null!=n&&null!==(t=n.documents.ProofOfAddress)&&void 0!==t&&t.id?o.push({fileStoreId:(null==n||null===(i=n.documents.ProofOfAddress)||void 0===i?void 0:i.fileStoreId)||"",documentType:(null==n||null===(a=n.documents.ProofOfAddress)||void 0===a||null===(r=a.documentType)||void 0===r?void 0:r.code)||"",id:(null==n||null===(u=n.documents.ProofOfAddress)||void 0===u?void 0:u.id)||"",status:(null==n||null===(s=n.documents.ProofOfAddress)||void 0===s?void 0:s.status)||""}):o.push({fileStoreId:(null==n||null===(d=n.documents.ProofOfAddress)||void 0===d?void 0:d.fileStoreId)||"",documentType:(null==n||null===(c=n.documents.ProofOfAddress)||void 0===c||null===(p=c.documentType)||void 0===p?void 0:p.code)||""}),l&&l.length>0&&l.map(e=>{var t,n,l,i,a,r,u,s,d,c,p,m,v,E;e.documents&&e.documents.proofIdentity&&(null!=e&&null!==(t=e.documents.proofIdentity)&&void 0!==t&&t.id?o.push({fileStoreId:(null==e?void 0:e.documents.proofIdentity.fileStoreId)||"",documentType:(null==e||null===(n=e.documents.proofIdentity.documentType)||void 0===n?void 0:n.code)||"",id:(null==e||null===(l=e.documents.proofIdentity)||void 0===l?void 0:l.id)||"",status:(null==e||null===(i=e.documents.proofIdentity)||void 0===i?void 0:i.status)||""}):o.push({fileStoreId:(null==e?void 0:e.documents.proofIdentity.fileStoreId)||"",documentType:(null==e||null===(a=e.documents.proofIdentity.documentType)||void 0===a?void 0:a.code)||""})),e.documents&&e.documents.specialProofIdentity&&(null!=e&&null!==(r=e.documents.specialProofIdentity)&&void 0!==r&&r.id?o.push({fileStoreId:(null==e||null===(u=e.documents.specialProofIdentity)||void 0===u?void 0:u.fileStoreId)||"",documentType:(null==e||null===(s=e.documents.specialProofIdentity)||void 0===s||null===(d=s.documentType)||void 0===d?void 0:d.code)||"",id:(null==e||null===(c=e.documents.specialProofIdentity)||void 0===c?void 0:c.id)||"",status:(null==e||null===(p=e.documents.specialProofIdentity)||void 0===p?void 0:p.status)||""}):o.push({fileStoreId:(null==e||null===(m=e.documents.specialProofIdentity)||void 0===m?void 0:m.fileStoreId)||"",documentType:(null==e||null===(v=e.documents.specialProofIdentity)||void 0===v||null===(E=v.documentType)||void 0===E?void 0:E.code)||""}))}),e.documents=o,e})(e)),e=A(e),{Property:{tenantId:(e=I(e)).tenantId,address:e.address,ownershipCategory:null===(p=e)||void 0===p||null===(m=p.ownershipCategory)||void 0===m?void 0:m.value,owners:e.owners,institution:e.institution||null,documents:e.documents||[],...e.propertyDetails,additionalDetails:{inflammable:!1,heightAbove36Feet:!1,isResdential:v,propertyType:E,selfOccupied:_,Subusagetypeofrentedarea:T,subusagetype:f,IsAnyPartOfThisFloorUnOccupied:y,builtUpArea:S,noOfFloors:g,noOofBasements:P,unit:N,basement1:O,basement2:h},creationReason:B(e),source:"MUNICIPAL_RECORDS",channel:"CITIZEN"}}}(c);a.Property.tenantId=(null==a||null===(o=a.Property)||void 0===o?void 0:o.tenantId)||i,_.mutate(a,{onSuccess:p})}catch(e){}},[]),_.isLoading||_.isIdle?l.createElement(t.Loader,null):l.createElement(t.Card,null,l.createElement(ot,{t:m,data:_.data,isSuccess:_.isSuccess,isLoading:_.isIdle||_.isLoading}),_.isSuccess&&l.createElement(t.CardText,null,m("CS_FILE_PROPERTY_RESPONSE")),!_.isSuccess&&l.createElement(t.CardText,null,m("CS_FILE_PROPERTY_FAILED_RESPONSE")),l.createElement(t.StatusTable,null,_.isSuccess&&l.createElement(t.Row,{rowContainerStyle:lt,last:!0,label:m("PT_COMMON_TABLE_COL_PT_ID"),text:null==_||null===(s=_.data)||void 0===s||null===(d=s.Properties[0])||void 0===d?void 0:d.propertyId,textStyle:{whiteSpace:"pre",width:"60%"}})),_.isSuccess&&l.createElement(t.SubmitBar,{label:m("PT_DOWNLOAD_ACK_FORM"),onSubmit:function(){try{const{Properties:e=[]}=_.data;let t=e&&e[0]||{};const n=f.find(e=>e.code===t.tenantId);let l=t.tenantId||l;return Promise.resolve(Digit.PTService.search({tenantId:l,filters:{propertyIds:null==t?void 0:t.propertyId,status:"INACTIVE"}})).then(function(e){var l,o,i;return t.transferorDetails=(null==e||null===(l=e.Properties)||void 0===l?void 0:l[0])||[],t.isTransferor=!0,t.transferorOwnershipCategory=null==e||null===(o=e.Properties)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.ownershipCategory,Promise.resolve(tt({...t},n,m)).then(function(e){Digit.Utils.pdf.generate(e)})})}catch(e){return Promise.reject(e)}}}),l.createElement(i.Link,{to:"/digit-ui/citizen"},l.createElement(t.LinkButton,{label:m("CORE_COMMON_GO_TO_HOME")})))},PropertyTax:e=>{var n,o;let{t:i,config:a,onSelect:r}=e;Digit.ULBService.getCurrentTenantId();const u=Digit.ULBService.getStateId();sessionStorage.removeItem("docReqScreenByBack");const s=null!=a&&a.isMutation?["MutationDocuments"]:"Documents",{isLoading:d,data:c={}}=Digit.Hooks.pt.usePropertyMDMS(u,"PropertyTax",s);let p=null==c||null===(n=c.PropertyTax)||void 0===n?void 0:n[null!=a&&a.isMutation?s[0]:s];return null!=a&&a.isMutation||(p=null===(o=p)||void 0===o?void 0:o.filter(e=>e["digit-citizen"])),l.createElement(l.Fragment,null,l.createElement(t.Card,null,l.createElement(t.CardHeader,null,i(a.isMutation?"PT_REQIURED_DOC_TRANSFER_OWNERSHIP":"PT_DOC_REQ_SCREEN_HEADER")),l.createElement("div",null,l.createElement(t.CardText,{className:"primaryColor"},i("PT_DOC_REQ_SCREEN_SUB_HEADER")),l.createElement(t.CardText,{className:"primaryColor"},i("PT_DOC_REQ_SCREEN_TEXT")),l.createElement(t.CardText,{className:"primaryColor"},i("PT_DOC_REQ_SCREEN_SUB_TEXT")),l.createElement(t.CardSubHeader,null,i("PT_DOC_REQ_SCREEN_LABEL")),l.createElement(t.CardText,{className:"primaryColor"},i("PT_DOC_REQ_SCREEN_LABEL_TEXT")),l.createElement("div",null,d&&l.createElement(t.Loader,null),Array.isArray(p)?p.map(null!=a&&a.isMutation?(e,n)=>{let{code:o,dropdownData:a}=e;return l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,n+1,". ",i(o)),l.createElement(t.CardText,{className:"primaryColor"},a.map(e=>i(null==e?void 0:e.code)).join(", ")))}:(e,n)=>{let{code:o,dropdownData:a}=e;return l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,n+1,". ",i("PROPERTYTAX_"+M(o,".","_")+"_HEADING")),a.map(e=>l.createElement(t.CardText,{className:"primaryColor"},i("PROPERTYTAX_"+M(null==e?void 0:e.code,".","_")+"_LABEL"))))}):null)),l.createElement("span",null,l.createElement(t.SubmitBar,{label:i("PT_COMMON_NEXT"),onSubmit:r}))))},PTSelectPincode:e=>{var o;let{t:a,config:r,onSelect:s,formData:c={},userType:p}=e;const m=Digit.Hooks.pt.useTenants(),{pathname:v}=i.useLocation(),E=v.includes("modify"),[_,T]=n.useState(()=>{var e,t,n;return E&&"employee"===p?(null==c||null===(e=c.originalData)||void 0===e||null===(t=e.address)||void 0===t?void 0:t.pincode)||"":(null==c||null===(n=c.address)||void 0===n?void 0:n.pincode)||""});let f=(null==c?void 0:c.isEditProperty)||!1;null!=c&&c.isUpdateProperty&&(f=!0);const y=[{label:"PT_PROPERTY_ADDRESS_PINCODE",type:"text",name:"pincode",disable:f,validation:{minlength:6,maxlength:7,pattern:"[0-9]+",max:"9999999",title:a("PT_PROPERTY_ADDRESS_PINCODE_INVALID")}}],[S,g]=n.useState(null),[P,A]=n.useState("");function N(e){T(e.target.value),g(null),A("");let t=Digit.Utils.getPattern("Pincode").test(e.target.value);"employee"===p&&(e.target.value&&!t&&A(a("ERR_DEFAULT_INPUT_FIELD_MSG")),t&&((null==m?void 0:m.find(t=>{var n;return null===(n=t.pincode)||void 0===n?void 0:n.find(t=>t.toString()===e.target.value)}))||A(a("PT_COMMON_PINCODE_NOT_SERVICABLE"))),s(r.key,{...c.address,pincode:e.target.value}))}return n.useEffect(()=>{var e;null!=c&&null!==(e=c.address)&&void 0!==e&&e.pincode&&T(c.address.pincode)},[null==c||null===(o=c.address)||void 0===o?void 0:o.pincode]),"employee"===p?null==y?void 0:y.map((e,n)=>l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller"},a(e.label)),l.createElement("div",{className:"field"},l.createElement(t.TextInput,u({key:e.name,value:_,onChange:N},e.validation,{disable:E,autoFocus:E})))),P?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},P):null)):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{t:a,config:{...r,inputs:y},onSelect:function(e){try{return(null==m?void 0:m.find(t=>{var n;return null===(n=t.pincode)||void 0===n?void 0:n.find(t=>t==(null==e?void 0:e.pincode))}))?s(r.key,{pincode:_}):g("PT_COMMON_PINCODE_NOT_SERVICABLE"),Promise.resolve()}catch(e){return Promise.reject(e)}},_defaultValues:{pincode:_},onChange:N,onSkip:()=>s(),forcedError:a(S),isDisabled:!_||f}))},PTSelectAddress:e=>{var o;let{t:r,config:u,onSelect:s,userType:c,formData:p,setError:m,clearErrors:v,formState:E}=e;const _=Digit.Hooks.pt.useTenants();let T=Digit.ULBService.getCurrentTenantId();const{pathname:f}=i.useLocation(),y=f.includes("modify");let S=(null==p?void 0:p.isEditProperty)||!1;y&&(S=!0),null!=p&&p.isUpdateProperty&&(S=!0);const{pincode:g}=(null==p?void 0:p.address)||"",P="employee"===c?_.filter(e=>e.code===T):g?_.filter(e=>{var t;return null==e||null===(t=e.pincode)||void 0===t?void 0:t.some(e=>e==g)}):_,[A,N]=n.useState(()=>{var e;return(null==p||null===(e=p.address)||void 0===e?void 0:e.city)||null}),{data:O}=Digit.Hooks.useBoundaryLocalities(null==A?void 0:A.code,"revenue",{enabled:!!A},r),[I,h]=n.useState(),[C,R]=n.useState();n.useEffect(()=>{if("employee"===c&&y&&null!=I&&I.length){var e,t,n;const l=null==p||null===(e=p.originalData)||void 0===e||null===(t=e.address)||void 0===t||null===(n=t.locality)||void 0===n?void 0:n.code,o=null==I?void 0:I.filter(e=>e.code===l)[0];x("locality",o)}},[I]),n.useEffect(()=>{P&&1===P.length&&N(P[0])},[P]),n.useEffect(()=>{if(A&&O){var e,t;let l=O,o=[];var n;null!=p&&null!==(e=p.address)&&void 0!==e&&e.locality&&R(p.address.locality),null!=p&&null!==(t=p.address)&&void 0!==t&&t.pincode&&(o=l.filter(e=>{var t;return null===(t=e.pincode)||void 0===t?void 0:t.find(e=>e==p.address.pincode)}),null!=p&&null!==(n=p.address)&&void 0!==n&&n.locality||R()),h(()=>o.length>0?o:l),1===o.length&&(R(o[0]),"employee"===c&&s(u.key,{...p[u.key],locality:o[0]}))}},[A,null==p||null===(o=p.address)||void 0===o?void 0:o.pincode,O]);const{control:b,formState:D,watch:L,setError:w,clearErrors:M,setValue:x}=a.useForm(),U=L(),{errors:F}=D,B={width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"};var k,H;return n.useEffect(()=>{if("employee"===c){let e=Object.keys(U);const t={};e.forEach(e=>{var n;return t[e]=null===(n=p[u.key])||void 0===n?void 0:n[e]}),j.isEqual(U,t)||s(u.key,{...p[u.key],...U});for(let e in U)U[e]||null!=D&&D.errors[e]?U[e]&&D.errors[e]&&M([e]):w(e,{type:e.toUpperCase()+"_REQUIRED",message:r("CORE_COMMON_REQUIRED_ERRMSG")})}},[U]),n.useEffect(()=>{if("employee"===c){var e,t;const n=!!Object.keys(D.errors).lengtha;!n||null!==(e=E.errors)&&void 0!==e&&e[u.key]?!n&&null!==(t=E.errors)&&void 0!==t&&t[u.key]&&v(u.key):m(u.key,{type:"required"})}},[D]),"employee"===c?l.createElement("div",null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},r("MYCITY_CODE_LABEL")+" *"),l.createElement(a.Controller,{name:"city",defaultValue:1===(null==P?void 0:P.length)?P[0]:A,control:b,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,disable:S||1===(null==P?void 0:P.length),option:P,select:e.onChange,optionKey:"code",onBlur:e.onBlur,t:r})})),l.createElement(t.CardLabelError,{style:B},D.touched.city?null==F||null===(k=F.city)||void 0===k?void 0:k.message:""),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},r("PT_LOCALITY_LABEL")+" *"),l.createElement(a.Controller,{name:"locality",defaultValue:null,control:b,render:e=>l.createElement(t.Dropdown,{className:"form-field",selected:e.value,option:I,select:e.onChange,onBlur:e.onBlur,optionKey:"i18nkey",t:r,disable:S||!1})})),l.createElement(t.CardLabelError,{style:B},D.touched.locality?null==F||null===(H=F.locality)||void 0===H?void 0:H.message:"")):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?window.location.href.includes("/citizen/pt/property/property-mutation")?l.createElement(d,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{config:u,onSelect:function(){s(u.key,{city:A,locality:C})},t:r,isDisabled:!C},l.createElement("div",null,l.createElement(t.CardLabel,null,r("MYCITY_CODE_LABEL")+" "),l.createElement("span",{className:"form-pt-dropdown-only"},l.createElement(t.RadioOrSelect,{options:P.sort((e,t)=>e.name.localeCompare(t.name)),selectedOption:A,optionKey:"i18nKey",onSelect:function(e){R(null),h(null),N(e)},t:r,isPTFlow:!0,disabled:S})),A&&I&&l.createElement(t.CardLabel,null,r("PT_LOCALITY_LABEL")+" "),A&&I&&l.createElement("span",{className:"form-pt-dropdown-only"},l.createElement(t.RadioOrSelect,{dropdownStyle:{paddingBottom:"20px"},isMandatory:u.isMandatory,options:I.sort((e,t)=>e.name.localeCompare(t.name)),selectedOption:C,optionKey:"i18nkey",onSelect:function(e){var t;null!=p&&null!==(t=p.address)&&void 0!==t&&t.locality&&(p.address.locality=e),R(e),"employee"===c&&s(u.key,{...p[u.key],locality:e})},t:r,labelKey:"",disabled:S})))))},PTSelectStreet:e=>{let{t:o,config:i,onSelect:r,userType:s,formData:c,formState:p,setError:m,clearErrors:v}=e;const[E,_]=n.useState({index:-1,type:""}),{control:T,formState:f,watch:y,trigger:S}=a.useForm(),g=y(),{errors:P}=f,A=window.location.href.includes("tl/new-application")||window.location.href.includes("tl/renew-application-details"),N=window.location.href.includes("edit-application")||window.location.href.includes("tl/renew-application-details");let O;window.location.href.includes("tl")?(O=i.inputs,i.inputs[0].disable=window.location.href.includes("edit-application"),i.inputs[1].disable=window.location.href.includes("edit-application")):O=[{label:"PT_PROPERTY_ADDRESS_STREET_NAME",type:"text",name:"street",validation:{pattern:"[a-zA-Z0-9 !@#$%^&*()_+-={};':\\\\|,.<>/?]{1,64}",title:o("CORE_COMMON_STREET_INVALID")}},{label:"PT_PROPERTY_ADDRESS_HOUSE_NO",type:"text",name:"doorNo",validation:{pattern:"[a-zA-Z0-9 !@#$%^&*()_+-={};':\\\\|,.<>/?]{1,64}",title:o("CORE_COMMON_DOOR_INVALID")}}];const I=e=>{let{validation:t,name:n,messages:l}=e;if(t){let{pattern:e,maxlength:o,minlength:i,required:a}=t||{};return{pattern:t=>{if(e){var o;if(e instanceof RegExp)return!!e.test(t)||(null==l?void 0:l.pattern)||n.toUpperCase()+"_PATTERN";if("string"==typeof e)return!(null===(o=new RegExp(e))||void 0===o||!o.test(t))||(null==l?void 0:l.pattern)||n.toUpperCase()+"_PATTERN"}return!0},required:e=>!a||!!e||(null==l?void 0:l.required)||n.toUpperCase()+"_REQUIRED",minLength:e=>!i||(null==e?void 0:e.length)>=i||(null==l?void 0:l.minlength)||n.toUpperCase()+"_MINLENGTH",maxLength:e=>!o||(null==e?void 0:e.length)<=o||(null==l?void 0:l.maxlength)||n.toUpperCase()+"_MAXLENGTH"}}return{}};var h;return n.useEffect(()=>{S()},[]),n.useEffect(()=>{var e;"employee"===s&&(Object.keys(P).length&&!j.isEqual((null===(e=p.errors[i.key])||void 0===e?void 0:e.type)||{},P)?m(i.key,{type:P}):!Object.keys(P).length&&p.errors[i.key]&&v(i.key))},[P]),n.useEffect(()=>{const e=Object.keys(g),t={};e.forEach(e=>{var n;return t[e]=null===(n=c[i.key])||void 0===n?void 0:n[e]}),j.isEqual(g,t)||(r(i.key,{...c[i.key],...g}),S())},[g]),"employee"===s?null===(h=O)||void 0===h?void 0:h.map((e,n)=>{var r;return l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller"},A?o(e.label)+":":o(e.label),i.isMandatory?" * ":null),l.createElement("div",{className:"field"},l.createElement(a.Controller,{control:T,defaultValue:null==c||null===(r=c.address)||void 0===r?void 0:r[e.name],name:e.name,rules:{validate:I(e)},render:o=>l.createElement(t.TextInput,u({id:e.name,key:e.name,value:o.value,onChange:e=>{_({index:n}),o.onChange(e.target.value)},onBlur:o.onBlur,disable:N,autoFocus:(null==E?void 0:E.index)==n},e.validation))})))}):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{config:{...i,inputs:O},_defaultValues:{street:null==c?void 0:c.address.street,doorNo:null==c?void 0:c.address.doorNo},onSelect:e=>r(i.key,e),onSkip:()=>r(),t:o}))},Proof:e=>{var o,a,r,u,s,p,m,v,E,_,T;let{t:f,config:y,onSelect:S,formData:g}=e;const{pathname:P}=i.useLocation(),A=P.includes("property-mutation");let N=window.location.href.split("/").pop();const[O,I]=n.useState(A?null==g||null===(u=g[y.key])||void 0===u?void 0:u.fileStoreId:(null==g||null===(o=g.address)||void 0===o||null===(a=o.documents)||void 0===a||null===(r=a.ProofOfAddress)||void 0===r?void 0:r.fileStoreId)||null),[h,C]=n.useState(null==g||null===(s=g.address)||void 0===s||null===(p=s.documents)||void 0===p?void 0:p.ProofOfAddress),[R,b]=n.useState(null),D=(Digit.ULBService.getCurrentUlb(),(null==g?void 0:g.isUpdateProperty)||!1),L=(null==g?void 0:g.isEditProperty)||!1,[w,x]=n.useState(A?null==g||null===(_=g[y.key])||void 0===_?void 0:_.documentType:(null==g||null===(m=g.address)||void 0===m||null===(v=m.documents)||void 0===v||null===(E=v.ProofOfAddress)||void 0===E?void 0:E.documentType)||null);let U=[];Digit.ULBService.getCurrentTenantId();const F=Digit.ULBService.getStateId(),{data:B={}}=Digit.Hooks.pt.usePropertyMDMS(F,"PropertyTax","Documents"),k=null==B||null===(T=B.PropertyTax)||void 0===T?void 0:T.Documents,H=Array.isArray(k)&&k.filter(e=>e.code.includes("ADDRESSPROOF"));var Y;H.length>0&&(U=null===(Y=H[0])||void 0===Y?void 0:Y.dropdownData,U.forEach(e=>{e.i18nKey=M(e.code,".","_")})),n.useEffect(()=>{!function(){try{b(null);const e=function(){if(h){const e=function(){if(h.size>=2e6)b(f("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",h,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?I(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):b(f("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[h]);const W=window.location.href.includes("citizen/pt/property/property-mutation/")?l.createElement(d,{currentStep:3,flow:"PT_MUTATE"}):l.createElement(d,{currentStep:1});return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?W:null,l.createElement(t.FormStep,{config:y,onSelect:()=>{let e=O,t=h;t&&(t.documentType=w),t&&(t.fileStoreId=e||null);let n=A?{}:null==g?void 0:g.address;n&&n.documents||(n.documents=[]),n.documents.ProofOfAddress=t,S(y.key,A?{documentType:w,fileStoreId:e}:n,"",N)},onSkip:()=>S(),t:f,isDisabled:!D&&!L&&(!O||!w||R)},l.createElement(t.CardLabelDesc,null,f("PT_UPLOAD_RESTRICTIONS_TYPES")),l.createElement(t.CardLabelDesc,null,f("PT_UPLOAD_RESTRICTIONS_SIZE")),l.createElement(t.CardLabel,null,""+f("PT_CATEGORY_DOCUMENT_TYPE")),l.createElement(t.Dropdown,{t:f,isMandatory:!1,option:U,selected:w,optionKey:"i18nKey",select:function(e){x(e)},placeholder:f("PT_MUTATION_SELECT_DOC_LABEL")}),l.createElement(t.UploadFile,{id:"pt-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf",onUpload:function(e){C(e.target.files[0])},onDelete:()=>{I(null)},message:O?"1 "+f("PT_ACTION_FILEUPLOADED"):f("PT_ACTION_NO_FILEUPLOADED"),error:R}),R?l.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},R):"",l.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},SelectOwnerShipDetails:e=>{let{t:o,config:a,onSelect:r,userType:u,formData:s,onBlur:c,formState:p,setError:m,clearErrors:v}=e;Digit.ULBService.getCurrentTenantId();const E=Digit.ULBService.getStateId(),_=(null==s?void 0:s.isUpdateProperty)||!1;let T=(null==s?void 0:s.isEditProperty)||!1;const[f,y]=n.useState(null==s?void 0:s.ownershipCategory),[S,g]=n.useState(!0),{data:P,isLoading:A}=Digit.Hooks.pt.usePropertyMDMS(E,"PropertyTax","SubOwnerShipCategory"),{data:N,isLoading:O}=Digit.Hooks.pt.usePropertyMDMS(E,"PropertyTax","OwnerShipCategory"),I=[];let h=["INDIVIDUAL"],C={},R={};const{pathname:b}=i.useLocation(),D=b.includes("/modify-application/");function L(e){const{name:t,code:n}=e;return{label:t,value:n,code:n}}function w(e){var t,n;return"employee"===u?null==e||null===(t=e.filter(e=>e.code.split(".").length<=2))||void 0===t||null===(n=t.splice(0,4))||void 0===n?void 0:n.map(e=>({...e,i18nKey:"PT_OWNERSHIP_"+(e.value.split(".")[1]?e.value.split(".")[1]:e.value.split(".")[0])})):e&&e.length&&e.splice(0,4).map(e=>({...e,i18nKey:"PT_OWNERSHIP_"+(e.value.split(".")[1]?e.value.split(".")[1]:e.value.split(".")[0])}))}function M(e){y(e)}function x(){let e=window.location.href.charAt(window.location.href.length-1);sessionStorage.setItem("ownershipCategory",null==f?void 0:f.value),r(a.key,f,"",e,null,{routeKey:null==f?void 0:f.value})}return n.useEffect(()=>{if(!A&&P&&N){const e=P.filter(e=>{var t;return e.code===((null==s||null===(t=s.ownershipCategory)||void 0===t?void 0:t.value)||(null==s?void 0:s.ownershipCategory))})[0];y(e)}},[null==s?void 0:s.ownershipCategory,P]),n.useEffect(()=>{"employee"===u&&D&&!A&&!O&&N&&(M(w(I).filter(e=>{var t;return e.code===(null==s||null===(t=s.originalData)||void 0===t?void 0:t.ownershipCategory)})[0]),g(!1))},[A,O,N]),N&&N.length>0&&N.map(e=>{C[e.code]=e}),P&&P.length>0&&P.map(e=>{R[e.code]=e}),C&&R&&Object.keys(C).forEach(e=>{const t=C[e].code;-1!==h.indexOf(t)?Object.keys(R).filter(e=>t===R[e].ownerShipCategory).forEach(e=>{I.push(L(R[e]))}):I.push(L(C[e]))}),n.useEffect(()=>{"employee"===u&&(f?v(a.key):m(a.key,{type:"required",message:o("CORE_COMMON_REQUIRED_ERRMSG")}),x())},[f]),"employee"===u&&D&&S?l.createElement(t.Loader,null):"employee"===u?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller",style:D?{color:"#B1B4B6"}:{}},o("PT_PROVIDE_OWNERSHIP_DETAILS")+" *"),l.createElement(t.Dropdown,{className:"form-field",selected:1===(null===(U=w(I))||void 0===U?void 0:U.length)?w(I)[0]:f,disable:1===(null===(F=w(I))||void 0===F?void 0:F.length)||D,option:w(I),select:M,optionKey:"i18nKey",onBlur:c,t:o})),null!==(B=p.touched)&&void 0!==B&&B[a.key]?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(k=p.errors[a.key])||void 0===k?void 0:k.message):null):l.createElement(l.Fragment,null,window.location.href.includes("/citizen/pt/property/property-mutation")?l.createElement(d,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(d,{currentStep:2}),l.createElement(t.FormStep,{t:o,config:a,onSelect:x,onSkip:()=>r(),isDisabled:!f},l.createElement("div",null,l.createElement(t.RadioButtons,{isMandatory:a.isMandatory,options:w(I)||[],selectedOption:f,optionsKey:"i18nKey",onSelect:M,value:f,labelKey:"PT_OWNERSHIP",isDependent:!0,disabled:_||T}))));var U,F,B,k},SelectOwnerDetails:e=>{var o,a,r,s,c,p;let{t:m,config:v,onSelect:E,userType:_,formData:T,ownerIndex:f}=e;const{pathname:y}=i.useLocation(),S=y.includes("/modify-application/"),g=y.includes("/property-mutation/");let P=g?f:window.location.href.charAt(window.location.href.length-1),A={};const[N,O]=n.useState(T.owners&&T.owners[P]&&T.owners[P].name||(null==T||null===(o=T.owners)||void 0===o?void 0:o.name)||""),[I,h]=n.useState(T.owners&&T.owners[P]&&T.owners[P].email||(null==T||null===(a=T.owners)||void 0===a?void 0:a.emailId)||""),[C,R]=n.useState(T.owners&&T.owners[P]&&T.owners[P].gender||(null==T||null===(r=T.owners)||void 0===r?void 0:r.gender)),[b,D]=n.useState(T.owners&&T.owners[P]&&T.owners[P].mobileNumber||(null==T||null===(s=T.owners)||void 0===s?void 0:s.mobileNumber)||""),[L,w]=n.useState(T.owners&&T.owners[P]&&T.owners[P].fatherOrHusbandName||(null==T||null===(c=T.owners)||void 0===c?void 0:c.fatherOrHusbandName)||""),[M,x]=n.useState(T.owners&&T.owners[P]&&T.owners[P].relationship||(null==T||null===(p=T.owners)||void 0===p?void 0:p.relationship)||{}),U=(null==T?void 0:T.isUpdateProperty)||!1;let F=(null==T?void 0:T.isEditProperty)||!1;Digit.ULBService.getCurrentTenantId();const B=Digit.ULBService.getStateId(),{data:k}=Digit.Hooks.pt.useGenderMDMS(B,"common-masters","GenderType");let H=[];function Y(e){O(e.target.value)}function W(e){R(e)}function j(e){D(e.target.value)}function K(e){w(e.target.value)}function V(e){x(e)}k&&k.map(e=>{H.push({i18nKey:"PT_COMMON_GENDER_"+e.code,code:""+e.code,value:""+e.code})});const z=()=>{let e,t=T.owners&&T.owners[P];if("employee"===_)e={...t,name:N,gender:C,mobileNumber:b,fatherOrHusbandName:L,relationship:M,emailId:I},E(v.key,{...T[v.key],...e},!1,P);else{if(g)return e={...t,name:N,gender:C,mobileNumber:b,fatherOrHusbandName:L,relationship:M},void E("",e);e={...t,name:N,gender:C,mobileNumber:b,fatherOrHusbandName:L,relationship:M},E(v.key,e,!1,P)}},G=[{name:"HUSBAND",code:"HUSBAND",i18nKey:"PT_RELATION_HUSBAND"},{name:"Father",code:"FATHER",i18nKey:"PT_RELATION_FATHER"}];return n.useEffect(()=>{"employee"===_&&z()},[N,C,b,L,M]),"employee"===_?l.createElement("div",null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:S?{color:"#B1B4B6"}:{}},""+m("PT_FORM3_MOBILE_NUMBER")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,u({type:"text",t:m,isMandatory:!1,name:"mobileNumber",value:b,onChange:j,ValidationRequired:!0},A={isRequired:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:m("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")},{disable:S})))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:S?{color:"#B1B4B6"}:{}},""+m("PT_OWNER_NAME")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,u({t:m,type:"text",isMandatory:!1,name:"name",value:N,onChange:Y,ValidationRequired:!0},A={isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"tel",title:m("PT_NAME_ERROR_MESSAGE")},{disable:S})))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:S?{color:"#B1B4B6"}:{}},""+m("PT_FORM3_GUARDIAN_NAME")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,u({t:m,type:"text",isMandatory:!1,name:"fatherOrHusbandName",value:L,onChange:K,ValidationRequired:!0},A={pattern:"^[a-zA-Z-.`' ]*$",title:m("PT_NAME_ERROR_MESSAGE")},{disable:S})))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:S?{color:"#B1B4B6"}:{}},""+m("PT_FORM3_RELATIONSHIP")),l.createElement(t.Dropdown,{className:"form-field",selected:1===(null==M?void 0:M.length)?M[0]:M,disable:1===(null==M?void 0:M.length)||S,option:G,select:V,optionKey:"i18nKey",t:m,name:"relationship"})),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:S?{color:"#B1B4B6"}:{}},""+m("PT_FORM3_GENDER")),l.createElement(t.Dropdown,{className:"form-field",selected:1===(null==C?void 0:C.length)?C[0]:C,disable:1===(null==C?void 0:C.length)||S,option:H,select:W,optionKey:"code",t:m,name:"gender"})),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:S?{color:"#B1B4B6"}:{}},""+m("PT_OWNER_EMAIL")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{t:m,type:"email",isMandatory:!1,optionKey:"i18nKey",name:"email",value:I,onChange:function(e){h(e.target.value)},disable:S})))):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?window.location.href.includes("/citizen/pt/property/property-mutation")?l.createElement(d,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(d,{currentStep:2}):null,l.createElement(t.FormStep,{config:v,onSelect:z,onSkip:()=>E(),t:m,isDisabled:!(N&&b&&C&&M&&L)},l.createElement("div",null,l.createElement(t.CardLabel,null,""+m("PT_OWNER_NAME")),l.createElement(t.TextInput,u({t:m,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"name",value:N,onChange:Y,disable:U||F,ValidationRequired:!0},A={isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:m("PT_NAME_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+m("PT_FORM3_GENDER")),l.createElement(t.RadioButtons,{t:m,options:H,optionsKey:"code",name:"gender",value:C,selectedOption:C,onSelect:W,isDependent:!0,labelKey:"PT_COMMON_GENDER",disabled:U||F}),l.createElement(t.CardLabel,null,""+m("PT_FORM3_MOBILE_NUMBER")),l.createElement(t.MobileNumber,{value:b,name:"mobileNumber",onChange:e=>j({target:{value:e}}),disable:U||F,required:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:m("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")}),l.createElement(t.CardLabel,null,""+m("PT_FORM3_GUARDIAN_NAME")),l.createElement(t.TextInput,u({t:m,type:"text",isMandatory:!1,optionKey:"i18nKey",name:"fatherOrHusbandName",value:L,onChange:K,disable:U||F,ValidationRequired:!0},A={isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:m("PT_NAME_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+m("PT_FORM3_RELATIONSHIP")),l.createElement(t.RadioButtons,{t:m,optionsKey:"i18nKey",name:"relationship",options:G,value:M,selectedOption:M,onSelect:V,isDependent:!0,labelKey:"PT_RELATION",disabled:U||F}))))},SelectSpecialOwnerCategoryType:e=>{var o,a;let{t:r,config:u,onSelect:s,userType:c,formData:p,ownerIndex:m}=e;const{pathname:v}=i.useLocation(),E=v.includes("/modify-application/");let _=v.includes("property-mutation")?m:window.location.href.charAt(window.location.href.length-1);Digit.ULBService.getCurrentTenantId();const T=Digit.ULBService.getStateId(),f=(null==p?void 0:p.isUpdateProperty)||!1;let y=(null==p?void 0:p.isEditProperty)||!1;const[S,g]=n.useState(p.owners&&p.owners[_]&&(null===(o=p.owners[_])||void 0===o?void 0:o.ownerType)||(null===(a=p.owners)||void 0===a?void 0:a.ownerType)||{}),{data:P,isLoading:A}=Digit.Hooks.pt.usePropertyMDMS(T,"PropertyTax","OwnerType");function N(e){g(e)}P&&P.sort((e,t)=>e.name.localeCompare(t.name)),(null==P?void 0:P.length)>0&&(null==P||P.forEach((e,t)=>{e.order="NONE"==e.code?0:t+1}),P.sort(function(e,t){return e.order-t.order})),n.useEffect(()=>{"employee"===c&&s(u.key,{...p[u.key],ownerType:S})},[S]);const O=[{label:"PT_SPECIAL_OWNER_CATEGORY",type:"text",name:"ownerSpecialCategory",validation:{}}];return A?l.createElement(t.Loader,null):"employee"===c?null==O?void 0:O.map((e,n)=>l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller",style:E?{color:"#B1B4B6"}:{}},r(e.label)),l.createElement(t.Dropdown,{className:"form-field",selected:1===(null==P?void 0:P.length)?P[0]:S,disable:1===(null==P?void 0:P.length)||E,option:P,select:N,optionKey:"i18nKey",t:r}))):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?window.location.href.includes("/citizen/pt/property/property-mutation")?l.createElement(d,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(d,{currentStep:2}):null,l.createElement(t.FormStep,{t:r,config:u,onSelect:function(){let e=p.owners&&p.owners[_];e.ownerType=S,s(u.key,e,"",_)},onSkip:()=>s(),isDisabled:!S},l.createElement("div",null,l.createElement(t.RadioButtons,{t:r,optionsKey:"i18nKey",isMandatory:u.isMandatory,options:P||[],selectedOption:S,onSelect:N,labelKey:"PROPERTYTAX_OWNERTYPE",isDependent:!0,disabled:f||y}))))},SelectOwnerAddress:e=>{var o,a,r,u;let{t:s,config:c,onSelect:p,userType:m,formData:v,ownerIndex:E=0}=e;const{pathname:_}=i.useLocation(),T=_.includes("/modify-application/"),f=_.includes("property-mutation");let y=f?E:window.location.href.charAt(window.location.href.length-1);const[S,g]=n.useState(v.owners&&v.owners[y]&&(null===(o=v.owners[y])||void 0===o?void 0:o.permanentAddress)||(null===(a=v.owners[y])||void 0===a?void 0:a.correspondenceAddress)||(null==v||null===(r=v.owners)||void 0===r?void 0:r.permanentAddress)||""),[P,A]=n.useState(v.owners&&v.owners[y]&&(null===(u=v.owners[y])||void 0===u?void 0:u.isCorrespondenceAddress)),N=(null==v?void 0:v.isUpdateProperty)||!1;let O=(null==v?void 0:v.isEditProperty)||!1;function I(e){g(e.target.value)}function h(e){if(1==e.target.checked){var t,n,l,o,i,a,r,u;const e=f?null==v||null===(t=v.searchResult)||void 0===t||null===(n=t.property)||void 0===n?void 0:n.address:null==v?void 0:v.address;let d={doorNo:null==e?void 0:e.doorNo,street:null==e?void 0:e.street,landmark:null==e?void 0:e.landmark,locality:null==e||null===(l=e.locality)||void 0===l?void 0:l.i18nkey,city:null==e||null===(o=e.city)||void 0===o?void 0:o.code,pincode:null==e?void 0:e.pincode},c=null!=v&&null!==(i=v.searchResult)&&void 0!==i&&null!==(a=i.data)&&void 0!==a&&a.property_address?null==v||null===(r=v.searchResult)||void 0===r||null===(u=r.data)||void 0===u?void 0:u.property_address:"";for(const e in d)c+="pincode"==e?d[e]?d[e]:"":d[e]?s(d[e])+", ":"";g(c)}else g("");A(e.target.checked)}const C=()=>{if("employee"===m)p(c.key,{...v[c.key],permanentAddress:S,isCorrespondenceAddress:P},y);else{let e=v.owners&&v.owners[y];e.permanentAddress=S,e.isCorrespondenceAddress=P,p(c.key,f?[e]:e,"",y)}};if(n.useEffect(()=>{!P&&N&&h({target:{checked:!0}})}),n.useEffect(()=>{"employee"===m&&C()},[S]),"employee"===m)return l.createElement(t.LabelFieldPair,{key:y},l.createElement(t.CardLabel,{className:"card-label-smaller",style:T?{color:"#B1B4B6"}:{}},s("PT_OWNERS_ADDRESS")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{name:"address",onChange:I,value:S,disable:T})));const R=window.location.href.includes("citizen/pt/property/property-mutation/")?l.createElement(d,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(d,{currentStep:2});return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?R:null,l.createElement(t.FormStep,{config:c,t:s,onSelect:C,isDisabled:!S},l.createElement(t.TextArea,{isMandatory:!1,optionKey:"i18nKey",t:s,name:"address",onChange:I,value:S,disable:N||O}),l.createElement(t.CheckBox,{label:s("PT_COMMON_SAME_AS_PROPERTY_ADDRESS"),onChange:h,value:P,checked:P||!1,style:{paddingTop:"10px"},disable:N||O})))},SelectInistitutionOwnerDetails:e=>{let{t:o,config:a,onSelect:r,formData:s}=e;const{pathname:c}=i.useLocation(),p=(c.includes("/modify-application/"),c.includes("property-mutation"));let m={};Digit.ULBService.getCurrentTenantId();const[v,E]=n.useState(s.owners&&s.owners[0]&&s.owners[0].inistitutionName),[_,T]=n.useState(s.owners&&s.owners[0]&&s.owners[0].inistitutetype),[f,y]=n.useState(s.owners&&s.owners[0]&&s.owners[0].name),[S,g]=n.useState(s.owners&&s.owners[0]&&s.owners[0].designation),[P,A]=n.useState(s.owners&&s.owners[0]&&s.owners[0].mobileNumber),[N,O]=n.useState(s.owners&&s.owners[0]&&s.owners[0].altContactNumber),[I,h]=n.useState(s.owners&&s.owners[0]&&s.owners[0].emailId),C=(null==s?void 0:s.isUpdateProperty)||!1;let R=(null==s?void 0:s.isEditProperty)||!1;const b=window.location.href.includes("citizen/pt/property/property-mutation/")?l.createElement(d,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(d,{currentStep:2});return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?b:null,l.createElement(t.FormStep,{config:a,t:o,onSelect:()=>{let e=s.owners&&s.owners[0];if(e)e.inistitutionName=v,e.inistitutetype=_,e.name=f,e.designation=S,e.mobileNumber=P,e.altContactNumber=N,e.emailId=I,r(a.key,p?[e]:e,!1,0);else{let t={...e,inistitutionName:v,inistitutetype:_,name:f,designation:S,mobileNumber:P,altContactNumber:N,emailId:I};r(a.key,p?[t]:t,!1,0)}},isDisabled:!(v&&_&&f&&S&&P&&N)},l.createElement("div",null,l.createElement(t.CardLabel,null,""+o("PT_COMMON_INSTITUTION_NAME")),l.createElement(t.TextInput,u({isMandatory:!1,optionKey:"i18nKey",t:o,name:"institutionName",onChange:function(e){E(e.target.value)},value:v,disable:C||R},m={isRequired:!0,pattern:"^[a-zA-Z_@./()#&+- ]*$",title:o("PT_NAME_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+o("PT_TYPE_OF_INSTITUTION")),l.createElement(t.Dropdown,{t:o,isMandatory:!1,option:(()=>{var e;let t={},n=JSON.parse(sessionStorage.getItem("getSubPropertyOwnerShipCategory")),l=null==n||null===(e=n.PropertyTax)||void 0===e?void 0:e.SubOwnerShipCategory;l&&l.length>0&&l.map(e=>{t[e.code]=e});const i=[],a=s.ownershipCategory.value||"";return t&&Object.keys(t).filter(e=>t[e].ownerShipCategory===a).forEach(e=>{i.push((e=>{const{name:t,code:n}=e;return{label:t,value:n,code:o("PROPERTYTAX_BILLING_SLAB_"+n)}})(t[e]))}),i.sort((e,t)=>e.label.localeCompare(t.label)),i})()||[],selected:_,optionKey:"code",select:function(e){T(e)},disabled:C||R}),l.createElement(t.CardHeader,null,o("PT_AUTH_PERSON_DETAILS")),l.createElement(t.CardLabel,null,""+o("PT_OWNER_NAME")),l.createElement(t.TextInput,u({isMandatory:!1,optionKey:"i18nKey",t:o,name:"name",onChange:function(e){y(e.target.value)},value:f,disable:C||R},m={isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",title:o("PT_NAME_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+o("PT_COMMON_AUTHORISED_PERSON_DESIGNATION")),l.createElement(t.TextInput,u({isMandatory:!1,optionKey:"i18nKey",t:o,name:"designation",onChange:function(e){g(e.target.value)},value:S,disable:C||R},m={isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",title:o("PT_DESIGNATION_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+o("PT_FORM3_MOBILE_NUMBER")),l.createElement(t.TextInput,u({isMandatory:!1,optionKey:"i18nKey",t:o,name:"setMobileNo",onChange:function(e){A(e.target.value)},value:P,type:"tel",disable:C||R},m={isRequired:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:o("CORE_COMMON_APPLICANT_ALT_NUMBER_INVALID")})),l.createElement(t.CardLabel,null,""+o("PT_OWNERSHIP_INFO_TEL_PHONE_NO")),l.createElement(t.TextInput,u({isMandatory:!1,optionKey:"i18nKey",t:o,name:"altContactNumber",onChange:function(e){O(e.target.value)},value:N,type:"tel",disable:C||R},m={isRequired:!0,pattern:"^[0-9]{11}$",type:"tel",title:o("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")})),l.createElement(t.CardLabel,null,o("PT_FORM3_EMAIL_ID")),l.createElement(t.TextInput,{isMandatory:!1,optionKey:"i18nKey",t:o,name:"email",onChange:function(e){h(e.target.value)},type:"email",value:I,disable:C||R}))))},SelectProofIdentity:e=>{var o,a,r,u,s,p,m;let{t:v,config:E,onSelect:_,formData:T,ownerIndex:f=0,addNewOwner:y}=e;const{pathname:S}=i.useLocation(),g=S.includes("property-mutation");let P=g?f:window.location.href.charAt(window.location.href.length-1);const[A,N]=n.useState(()=>{var e,t,n;return(null==T||null===(e=T.owners[P])||void 0===e||null===(t=e.documents)||void 0===t||null===(n=t.proofIdentity)||void 0===n?void 0:n.fileStoreId)||null}),[O,I]=n.useState(null==T||null===(o=T.owners[P])||void 0===o||null===(a=o.documents)||void 0===a?void 0:a.proofIdentity),[h,C]=n.useState(null),R=(Digit.ULBService.getCurrentUlb(),(null==T?void 0:T.isUpdateProperty)||!1);let b=(null==T?void 0:T.isEditProperty)||!1;const[D,L]=n.useState(null==T||null===(r=T.owners[P])||void 0===r||null===(u=r.documents)||void 0===u||null===(s=u.proofIdentity)||void 0===s?void 0:s.documentType);let w=[];Digit.ULBService.getCurrentTenantId();const x=Digit.ULBService.getStateId(),{data:U={}}=Digit.Hooks.pt.usePropertyMDMS(x,"PropertyTax","Documents"),F=null==U||null===(p=U.PropertyTax)||void 0===p?void 0:p.Documents,B=Array.isArray(F)&&F.filter(e=>e.code.includes("IDENTITYPROOF"));var k;B.length>0&&(w=null===(k=B[0])||void 0===k?void 0:k.dropdownData,w.forEach(e=>{e.i18nKey=M(e.code,".","_")})),n.useEffect(()=>{!function(){try{C(null);const e=function(){if(O){const e=function(){if(O.size>=2e6)C(v("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",O,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?N(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):C(v("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[O]);const[H,Y]=n.useState(null),W=window.location.href.includes("citizen/pt/property/property-mutation/")?l.createElement(d,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(d,{currentStep:3});return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?W:null,l.createElement(t.FormStep,{t:v,config:E,onSelect:()=>{var e,t,n,l;if(Y(null),"INDIVIDUAL.MULTIPLEOWNERS"===(null==T||null===(e=T.ownershipCategory)||void 0===e?void 0:e.code)&&(null==T||null===(t=T.owners)||void 0===t?void 0:t.length)<=1&&"0"==P&&!g)Y("PT_MULTI_OWNER_ADD_ERR_MSG");else if(g&&(null==T||null===(n=T.owners)||void 0===n?void 0:n.length)<=1&&"INDIVIDUAL.MULTIPLEOWNERS"===(null==T||null===(l=T.ownershipCategory)||void 0===l?void 0:l.code))Y("PT_MULTI_OWNER_ADD_ERR_MSG");else{let e=A,t=O;t&&(t.documentType=D,t.fileStoreId=e||null);let n=T.owners&&T.owners[P];n&&n.documents?n.documents.proofIdentity=g?{documentType:D,fileStoreId:e}:t:g?(n.documents={},n.documents.proofIdentity={documentType:D,fileStoreId:e}):(n.documents=[],n.documents.proofIdentity=t),_(E.key,g?[n]:n,"",P)}},onSkip:()=>_(),forcedError:v(H),isDisabled:!R&&!b&&(H||!A||!D||h),onAdd:function(){if(g){if(!A||!D)return void C(v("ERR_DEFAULT_INPUT_FIELD_MSG"));let e=T.owners&&T.owners[P];return e&&e.documents||(e.documents={}),e.documents.proofIdentity={documentType:D,fileStoreId:A},void y(e)}let e=parseInt(P)+1,t=A,n=O;n&&(n.documentType=D,n.fileStoreId=t||null);let l=T.owners&&T.owners[P];l&&l.documents||(l.documents=[]),l.documents.proofIdentity=n,_("owner-details",{},!1,e,!0)},isMultipleAllow:"INDIVIDUAL.MULTIPLEOWNERS"==(null==T||null===(m=T.ownershipCategory)||void 0===m?void 0:m.value)},l.createElement(t.CardLabelDesc,null,v("PT_UPLOAD_RESTRICTIONS_TYPES")),l.createElement(t.CardLabelDesc,null,v("PT_UPLOAD_RESTRICTIONS_SIZE")),l.createElement(t.CardLabel,null,""+v("PT_CATEGORY_DOCUMENT_TYPE")),l.createElement(t.Dropdown,{t:v,isMandatory:!1,option:w,selected:D,optionKey:"i18nKey",select:function(e){L(e)},placeholder:v("PT_MUTATION_SELECT_DOC_LABEL")}),l.createElement(t.UploadFile,{id:"pt-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf",onUpload:function(e){I(e.target.files[0])},onDelete:()=>{N(null)},message:A?"1 "+v("PT_ACTION_FILEUPLOADED"):v("PT_ACTION_NO_FILEUPLOADED"),error:h}),h?l.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},h):"",l.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},SelectSpecialProofIdentity:e=>{var o,a,r,u,s,p;let{t:m,config:v,onSelect:E,formData:_,ownerIndex:T}=e;const{pathname:f}=i.useLocation();f.includes("/modify-application/");let y=f.includes("property-mutation")?T:window.location.href.charAt(window.location.href.length-1);const[S,g]=n.useState(()=>{var e,t,n;return(null==_||null===(e=_.owners[y])||void 0===e||null===(t=e.documents)||void 0===t||null===(n=t.specialProofIdentity)||void 0===n?void 0:n.fileStoreId)||null}),[P,A]=n.useState(null==_||null===(o=_.owners[y])||void 0===o||null===(a=o.documents)||void 0===a?void 0:a.specialProofIdentity),[N,O]=n.useState(null),I=(Digit.ULBService.getCurrentUlb(),(null==_?void 0:_.isUpdateProperty)||!1);let h=(null==_?void 0:_.isEditProperty)||!1;const[C,R]=n.useState(null==_||null===(r=_.owners[y])||void 0===r||null===(u=r.documents)||void 0===u||null===(s=u.specialProofIdentity)||void 0===s?void 0:s.documentType);let b=[];Digit.ULBService.getCurrentTenantId();const D=Digit.ULBService.getStateId(),{data:L={}}=Digit.Hooks.pt.usePropertyMDMS(D,"PropertyTax","Documents"),w=null==L||null===(p=L.PropertyTax)||void 0===p?void 0:p.Documents,x=Array.isArray(w)&&w.filter(e=>e.code.includes("SPECIALCATEGORYPROOF"));var U,F;function B(e){R(e)}return x.length>0&&(b=null===(U=x[0])||void 0===U?void 0:U.dropdownData,b.forEach(e=>{e.i18nKey=M(e.code,".","_")}),b=null===(F=b)||void 0===F?void 0:F.filter(e=>{var t,n;return e.parentValue.includes(null==_||null===(t=_.owners[y])||void 0===t||null===(n=t.ownerType)||void 0===n?void 0:n.code)}),1==b.length&&C!=b[0]&&B(b[0])),n.useEffect(()=>{_.owners&&_.owners[y]&&"NONE"===_.owners[y].ownerType.code&&E("",{},!0,y)},[_.owners&&_.owners[y]&&_.owners[y].ownerType.code]),n.useEffect(()=>{!function(){try{O(null);const e=function(){if(P){const e=function(){if(P.size>=2e6)O(m("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",P,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?g(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):O(m("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[P]),l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?window.location.href.includes("/citizen/pt/property/property-mutation")?l.createElement(d,{currentStep:1,flow:"PT_MUTATE"}):l.createElement(d,{currentStep:3}):null,l.createElement(t.FormStep,{config:v,onSelect:()=>{let e=S,t=P;t&&(t.documentType=C,t.fileStoreId=e||null);let n=_.owners&&_.owners[y];n&&n.documents||(n.documents={}),n.documents.specialProofIdentity=t,E(v.key,n,"",y)},onSkip:()=>E(),t:m,isDisabled:!I&&!h&&(!S||!C||N)},l.createElement(t.CardLabelDesc,null,m("PT_UPLOAD_RESTRICTIONS_TYPES")),l.createElement(t.CardLabelDesc,null,m("PT_UPLOAD_RESTRICTIONS_SIZE")),l.createElement(t.CardLabel,null,""+m("PT_CATEGORY_DOCUMENT_TYPE")),l.createElement(t.Dropdown,{t:m,isMandatory:!1,option:b,selected:C,optionKey:"i18nKey",select:B,placeholder:m("PT_MUTATION_SELECT_DOC_LABEL")}),l.createElement(t.UploadFile,{id:"pt-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf",onUpload:function(e){A(e.target.files[0])},onDelete:()=>{g(null)},message:S?"1 "+m("PT_ACTION_FILEUPLOADED"):m("PT_ACTION_NO_FILEUPLOADED"),error:N}),N?l.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},N):"",l.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},PTSelectGeolocation:e=>{var o,i,a;let{t:r,config:u,onSelect:s,formData:c={}}=e;const[p,m]=n.useState((null==c||null===(o=c.address)||void 0===o?void 0:o.pincode)||""),[v,E]=n.useState((null==c||null===(i=c.address)||void 0===i?void 0:i.geoLocation)||{}),_=Digit.Hooks.pt.useTenants(),[T,f]=n.useState(null),y=(null==c?void 0:c.isEditProperty)||!1,S=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:g={}}=Digit.Hooks.pt.usePropertyMDMS(S,"PropertyTax","MapConfig"),A=null==g||null===(a=g.PropertyTax)||void 0===a?void 0:a.MapConfig;let N=A?A[0]:{};return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.LocationSearchCard,{header:r("PT_GEOLOCATON_HEADER"),cardText:r("PT_GEOLOCATION_TEXT"),nextText:r("PT_COMMON_NEXT"),skipAndContinueText:r("CORE_COMMON_SKIP_CONTINUE"),skip:()=>s(),t:r,position:v,onSave:()=>s(u.key,{geoLocation:v,pincode:p}),onChange:(e,t)=>((e,t)=>{f(null),(null==_?void 0:_.find(t=>{var n;return null===(n=t.pincode)||void 0===n?void 0:n.find(t=>t==e)}))?(m(e),E(t)):(f("PT_COMMON_PINCODE_NOT_SERVICABLE"),m(""),E({}))})(e,t),disabled:""===p||y,forcedError:r(T),cardBodyStyle:P,isPTDefault:!0,PTdefaultcoord:N}))},PTWFApplicationTimeline:H,PTWFCaption:k,PTWFReason:e=>{let{headComment:t,otherComment:n}=e;return l.createElement("div",{className:"checkpoint-comments-wrap"},l.createElement("h4",null,t),l.createElement("p",null,n))},IsThisFloorSelfOccupied:e=>{let o,i,{t:a,config:r,onSelect:u,formData:s}=e,d=window.location.href.split("/").pop();return Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId(),isNaN(d)?[o,i]=n.useState(null==s?void 0:s.selfOccupied):[o,i]=n.useState(s.units&&s.units[d]&&s.units[d].selfOccupied),l.createElement(t.FormStep,{t:a,config:r,onSelect:function(){var e,t;let n=window.location.href.split("/").pop();if("PT_COMMON_YES"===(null==s||null===(e=s.isResdential)||void 0===e?void 0:e.i18nKey)||"PROPERTYTAX_BILLING_SLAB_NONRESIDENTIAL"==(null==s||null===(t=s.usageCategoryMajor)||void 0===t?void 0:t.i18nKey)?sessionStorage.setItem("IsThisFloorSelfOccupied",o.i18nKey+"1"):sessionStorage.setItem("IsThisFloorSelfOccupied",o.i18nKey),isNaN(n))u("selfOccupied",o);else{let e={...s.units&&s.units[n],selfOccupied:o};u(r.key,e,!1,n)}},onSkip:()=>u(),isDisabled:!o},l.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:[{i18nKey:"PT_FULLY_RENTED_OUT",code:"RENTED"},{i18nKey:"PT_PARTIALLY_RENTED_OUT",code:"RENTED"},{i18nKey:"PT_YES_IT_IS_SELFOCCUPIED",code:"SELFOCCUPIED"}],selectedOption:o,onSelect:function(e){i(e)}}))},ProvideSubUsageType:e=>{var o,i;let{t:a,config:r,onSelect:u,userType:s,formData:c}=e,p=window.location.href.split("/").pop();Digit.ULBService.getCurrentTenantId();const m=Digit.ULBService.getStateId();let v,E;var _;isNaN(p)?[v,E]=n.useState(null===(_=c.subusagetype)||void 0===_?void 0:_.SubUsageType):[v,E]=n.useState(c.units&&c.units[p]&&c.units[p].SubUsageType);const{data:T={}}=Digit.Hooks.pt.usePropertyMDMS(m,"PropertyTax","UsageCategory")||{};let f,y=[];y=(null==T||null===(o=T.PropertyTax)||void 0===o?void 0:o.UsageCategory)||[];let S=[];function g(){let e=(()=>{for(f=0;f<y.length;f++){var e,t,n;if((null===(e=y[f])||void 0===e?void 0:e.code.split(".").pop())===(null===(t=v)||void 0===t?void 0:t.i18nKey.split("_").pop()))return null===(n=y[f])||void 0===n?void 0:n.code}})();if(isNaN(p)){var t;"employee"===s?u(r.key,{SubUsageType:v,subuagecode:e}):("PT_YES_IT_IS_SELFOCCUPIED"===(null==c||null===(t=c.selfOccupied)||void 0===t?void 0:t.i18nKey)?sessionStorage.setItem("subusagetypevar","yes"):sessionStorage.setItem("subusagetypevar","no"),u("subusagetype",{SubUsageType:v,subuagecode:e}))}else{var n;let t=c.units&&c.units[p],l={...t,SubUsageType:v,subuagecode:e};"PT_YES_IT_IS_SELFOCCUPIED"===(null==t||null===(n=t.selfOccupied)||void 0===n?void 0:n.i18nKey)?sessionStorage.setItem("subusagetypevar","yes"):sessionStorage.setItem("subusagetypevar","no"),u(r.key,l,!1,p)}}const[P,A]=n.useState([]);return n.useEffect(()=>{var e;"employee"===s&&(["RESIDENTIAL","NONRESIDENTIAL.OTHERS","MIXED"].includes(null==c||null===(e=c.usageCategoryMajor)||void 0===e?void 0:e.code)?A([]):A([{label:"PT_ASSESSMENT_FLOW_SUBUSAGE_HEADER",type:"dropdown",name:"subusagetype",validation:{}}]))},[null==c||null===(i=c.usageCategoryMajor)||void 0===i?void 0:i.code]),n.useEffect(()=>{"employee"===s&&g()},[v]),"employee"===s?null:l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{t:a,config:r,onSelect:g,onSkip:()=>u(),isDisabled:!v},l.createElement(t.CardLabel,null,a("PT_SUB_USAGE_TYPE_LABEL")),l.createElement("div",{className:"form-pt-dropdown-only"},function(e){var t,n;if("employee"===s)return null==e||null===(t=e.map(e=>{var t;const n=null==e?void 0:e.code.split(".");return n[1]==(null==c||null===(t=c.usageCategoryMajor)||void 0===t?void 0:t.i18nKey.split("_")[3])&&4==n.length?{i18nKey:"COMMON_PROPSUBUSGTYPE_NONRESIDENTIAL_"+n[1]+"_"+n[n.length-1]}:{filter:!0}}))||void 0===t||null===(n=t.filter(e=>!(null!=e&&e.filter)))||void 0===n?void 0:n.sort((e,t)=>a(e.i18nKey).localeCompare(a(t.i18nKey)));for(f=0;f<e.length;f++){var l;Array.isArray(e)&&e.length>0&&e[f].code.split(".")[1]==(null==c||null===(l=c.usageCategoryMajor)||void 0===l?void 0:l.i18nKey.split("_")[3])&&4==e[f].code.split(".").length&&S.push({i18nKey:"COMMON_PROPSUBUSGTYPE_NONRESIDENTIAL_"+e[f].code.split(".")[1]+"_"+e[f].code.split(".")[e[f].code.split(".").length-1]})}return S.sort((e,t)=>a(e.i18nKey).localeCompare(a(t.i18nKey))),S}(y)&&l.createElement(t.RadioOrSelect,{isMandatory:r.isMandatory,selectedOption:v,options:S||{},t:a,optionKey:"i18nKey",onSelect:function(e){E(e)}}))),l.createElement(t.CitizenInfoLabel,{info:a("CS_FILE_APPLICATION_INFO_LABEL"),text:a("PT_SUB_USAGE_TYPE_INFO_MSG")}))},RentalDetails:e=>{let o,i,a,r,{t:s,config:c,onSelect:p,formData:m}=e,v=window.location.href.split("/").pop(),E={};var _,T;isNaN(v)?([o,a]=n.useState(null===(_=m.Constructiondetails)||void 0===_?void 0:_.RentArea),[i,r]=n.useState(null===(T=m.Constructiondetails)||void 0===T?void 0:T.AnnualRent)):([o,a]=n.useState(m.units&&m.units[v]&&m.units[v].RentArea),[i,r]=n.useState(m.units&&m.units[v]&&m.units[v].AnnualRent)),Digit.ULBService.getCurrentTenantId();const f=Digit.ULBService.getStateId(),{data:y}=Digit.Hooks.pt.usePropertyMDMS(f,"PropertyTax","RentalDetails");var S,g,P,A;y&&(c.texts.cardText=null!=y&&null!==(S=y.PropertyTax)&&void 0!==S&&null!==(g=S.RentalDetails[0])&&void 0!==g&&g.code?"PT_ASSESSMENT_FLOW_RENTAL_DETAIL_"+(null==y||null===(P=y.PropertyTax)||void 0===P||null===(A=P.RentalDetails[0])||void 0===A?void 0:A.code):"");const[N,O]=n.useState(null),[I,h]=n.useState(null);return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{config:(c.texts.headerCaption="COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==m||null===(C=m.PropertyType)||void 0===C?void 0:C.i18nKey)?"PT_FLOOR_DETAILS_HEADER":"PROPERTYTAX_FLOOR_"+v+"_DETAILS",c),onSelect:()=>{if(isNaN(v))p("Constructiondetails",{RentArea:o,AnnualRent:i});else{let e={...m.units&&m.units[v],RentArea:o,AnnualRent:i};p(c.key,e,!1,v)}},onSkip:()=>p(),forcedError:s(N)||s(I),t:s,isDisabled:N||I||!o||!i,showErrorBelowChildren:!0},l.createElement(t.CardLabel,null,""+s("PT_FLOOR_DETAILS_RENTED_AREA_LABEL")),l.createElement(t.TextInput,u({t:s,isMandatory:!1,type:"number",optionKey:"i18nKey",name:"RentArea",value:o,onChange:function(e){var t,n,l,o;if(a(e.target.value),O(null),h(null),"BUILTUP.INDEPENDENTPROPERTY"===(null==m||null===(t=m.PropertyType)||void 0===t?void 0:t.code)){var i,r;let t=parseInt((null==m||null===(i=m.units[v])||void 0===i?void 0:i.floorarea)||0)+parseInt(e.target.value);parseInt(null==m||null===(r=m.units[v])||void 0===r?void 0:r.builtUpArea)<t&&O("PT_TOTUNITAREA_LESS_THAN_BUILTUP_ERR_MSG")}"BUILTUP.SHAREDPROPERTY"===(null==m||null===(n=m.PropertyType)||void 0===n?void 0:n.code)&&parseInt(null==m||null===(l=m.floordetails)||void 0===l?void 0:l.builtUpArea)<parseInt(e.target.value)+parseInt((null==m||null===(o=m.landarea)||void 0===o?void 0:o.floorarea)||"0")&&O("PT_RENTED_AREA_LESS_THAN_BUILTUP"),0==parseInt(e.target.value)&&h("PT_AREA_NOT_0_MSG")}},E={pattern:"^([0-9]){0,8}$",type:"number",title:s("PT_RENT_AREA_ERROR_MESSAGE")})),l.createElement(t.CardLabel,null,""+s("PT_FLOOR_DETAILS_ANNUAL_RENT_LABEL")),l.createElement(t.TextInput,u({t:s,isMandatory:!1,type:"number",optionKey:"i18nKey",name:"AnnualRent",value:i,onChange:function(e){r(e.target.value)}},E={pattern:"^([0-9]){0,8}$",type:"number",title:s("PT_BUILT_AREA_ERROR_MESSAGE")}))),l.createElement(t.CitizenInfoLabel,{info:s("CS_FILE_APPLICATION_INFO_LABEL"),text:s("PT_RENTAL_AREA_INFO_MSG")}));var C},ProvideSubUsageTypeOfRentedArea:e=>{var o;let{t:i,config:a,onSelect:r,formData:u}=e,s=window.location.href.split("/").pop();Digit.ULBService.getCurrentTenantId();const c=Digit.ULBService.getStateId();let p,m;var v;isNaN(s)?[p,m]=n.useState((null===(v=u.Subusagetypeofrentedarea)||void 0===v?void 0:v.SubUsageTypeOfRentedArea)||""):[p,m]=n.useState(u.units&&u.units[s]&&u.units[s].SubUsageTypeOfRentedArea||"");const{data:E={}}=Digit.Hooks.pt.usePropertyMDMS(c,"PropertyTax","UsageCategory")||{};let _,T=[];T=(null==E||null===(o=E.PropertyTax)||void 0===o?void 0:o.UsageCategory)||[];let f=[];return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{t:i,config:a,onSelect:function(){let e=(()=>{for(_=0;_<T.length;_++){var e,t;if((null===(e=T[_])||void 0===e?void 0:e.code.split(".").pop())===p.i18nKey.split("_").pop())return null===(t=T[_])||void 0===t?void 0:t.code}})();if(isNaN(s))r("Subusagetypeofrentedarea",{SubUsageTypeOfRentedArea:p,Subusagetypeofrentedareacode:e});else{let t={...u.units&&u.units[s],SubUsageTypeOfRentedArea:p,Subusagetypeofrentedareacode:e};r(a.key,t,!1,s)}},onSkip:()=>r(),isDisabled:!p},l.createElement(t.CardLabel,null,i("PT_SUB_USAGE_TYPE_LABEL")),l.createElement("div",{className:"form-pt-dropdown-only"},function(e){for(_=0;_<e.length;_++)Array.isArray(e)&&e.length>0&&e[_].code.split(".")[1]==(null==u?void 0:u.usageCategoryMajor.i18nKey.split("_")[3])&&4==e[_].code.split(".").length&&f.push({i18nKey:"COMMON_PROPSUBUSGTYPE_NONRESIDENTIAL_"+e[_].code.split(".")[1]+"_"+e[_].code.split(".")[e[_].code.split(".").length-1]});return f.sort((e,t)=>i(e.i18nKey).localeCompare(i(t.i18nKey))),f}(T)&&l.createElement(t.RadioOrSelect,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,options:f||[],selectedOption:p,onSelect:function(e){m(e)}}))),l.createElement(t.CitizenInfoLabel,{info:i("CS_FILE_APPLICATION_INFO_LABEL"),text:i("PT_SUB_USAGE_TYPE_INFO_MSG")}))},IsAnyPartOfThisFloorUnOccupied:e=>{let o,i,{t:a,config:r,onSelect:u,formData:s}=e,d=window.location.href.split("/").pop();return Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId(),isNaN(d)?[o,i]=n.useState(null==s?void 0:s.IsAnyPartOfThisFloorUnOccupied):[o,i]=n.useState(s.units&&s.units[d]&&s.units[d].IsAnyPartOfThisFloorUnOccupied),l.createElement(t.FormStep,{t:a,config:(r.texts.headerCaption="COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==s||null===(c=s.PropertyType)||void 0===c?void 0:c.i18nKey)?"PT_FLOOR_DETAILS_HEADER":"PROPERTYTAX_FLOOR_"+d+"_DETAILS",r),onSelect:function(){let e=window.location.href.split("/").pop();if(isNaN(e))sessionStorage.setItem("IsAnyPartOfThisFloorUnOccupied",o.i18nKey),u("IsAnyPartOfThisFloorUnOccupied",o);else{sessionStorage.setItem("IsAnyPartOfThisFloorUnOccupied",o.i18nKey);let d={...s.units&&s.units[e],IsAnyPartOfThisFloorUnOccupied:o};var t,n,l,i,a;if(u(r.key,d,!1,e),"PT_COMMON_NO"===o.i18nKey)if("PT_GROUND_PLUS_ONE_OPTION"===(null==s||null===(t=s.noOfFloors)||void 0===t?void 0:t.i18nKey)&&e<1&&e>-1){let t=parseInt(e)+1;u("floordetails",{},!0,t,!0)}else if("PT_GROUND_PLUS_TWO_OPTION"===(null==s||null===(n=s.noOfFloors)||void 0===n?void 0:n.i18nKey)&&e<2&&e>-1){let t=parseInt(e)+1;u("floordetails",{},!0,t,!0)}else("PT_ONE_BASEMENT_OPTION"===(null==s||null===(l=s.noOofBasements)||void 0===l?void 0:l.i18nKey)||"PT_TWO_BASEMENT_OPTION"===(null==s||null===(i=s.noOofBasements)||void 0===i?void 0:i.i18nKey))&&e>-1?u("floordetails",{},!0,"-1",!0):"PT_TWO_BASEMENT_OPTION"===(null==s||null===(a=s.noOofBasements)||void 0===a?void 0:a.i18nKey)&&-2!=e&&u("floordetails",{},!0,"-2",!0)}},onSkip:()=>u(),isDisabled:!o},l.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:[{i18nKey:"PT_COMMON_YES",code:"UNOCCUPIED"},{i18nKey:"PT_COMMON_NO",code:"UNOCCUPIED"}],selectedOption:o,onSelect:function(e){i(e)}}));var c},UnOccupiedArea:e=>{let o,i,{t:a,config:r,onSelect:s,userType:d,formData:c}=e,p=window.location.href.split("/").pop();var m;isNaN(p)?[o,i]=n.useState(null==c||null===(m=c.UnOccupiedArea)||void 0===m?void 0:m.UnOccupiedArea):[o,i]=n.useState(c.units&&c.units[p]&&c.units[p].UnOccupiedArea);let v={};const[E,_]=n.useState(null),[T,f]=n.useState(null);return l.createElement(t.FormStep,{config:(r.texts.headerCaption="COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==c||null===(y=c.PropertyType)||void 0===y?void 0:y.i18nKey)?"PT_FLOOR_DETAILS_HEADER":"PROPERTYTAX_FLOOR_"+p+"_DETAILS",r),onChange:function(e){if(e.target.value.length>1024)setError("CS_COMMON_LANDMARK_MAX_LENGTH");else if(setError(null),i(e.target.value),"employee"===d){var t,n;const l=null==e||null===(t=e.target)||void 0===t?void 0:t.value,o=null==e||null===(n=e.target)||void 0===n?void 0:n.id;s(o,l)}},onSelect:()=>{if(isNaN(p))s("UnOccupiedArea",{UnOccupiedArea:o});else{var e,t,n,l,i;let a={...c.units&&c.units[p],UnOccupiedArea:o};if(s(r.key,a,!1,p),"PT_GROUND_PLUS_ONE_OPTION"===(null==c||null===(e=c.noOfFloors)||void 0===e?void 0:e.i18nKey)&&p<1&&p>-1){let e=parseInt(p)+1;s("floordetails",{},!0,e,!0)}else if("PT_GROUND_PLUS_TWO_OPTION"===(null==c||null===(t=c.noOfFloors)||void 0===t?void 0:t.i18nKey)&&p<2&&p>-1){let e=parseInt(p)+1;s("floordetails",{},!0,e,!0)}else("PT_ONE_BASEMENT_OPTION"===(null==c||null===(n=c.noOofBasements)||void 0===n?void 0:n.i18nKey)||"PT_TWO_BASEMENT_OPTION"===(null==c||null===(l=c.noOofBasements)||void 0===l?void 0:l.i18nKey))&&p>-1?s("floordetails",{},!0,"-1",!0):"PT_TWO_BASEMENT_OPTION"===(null==c||null===(i=c.noOofBasements)||void 0===i?void 0:i.i18nKey)&&-2!=p&&s("floordetails",{},!0,"-2",!0)}},forcedError:a(E)||a(T),onSkip:()=>s(),t:a,isDisabled:E||T||!o,showErrorBelowChildren:!0},l.createElement(t.CardLabel,null,""+a("PT_UNOCCUPIED_AREA_SQ_FEET_LABEL")),l.createElement(t.TextInput,u({t:a,isMandatory:!1,type:"number",optionKey:"i18nKey",name:"RentArea",value:o,onChange:function(e){var t,n,l,o,a,r,u,s;if(i(e.target.value),_(null),f(null),"BUILTUP.INDEPENDENTPROPERTY"===(null==c||null===(t=c.PropertyType)||void 0===t?void 0:t.code)){var d,m,v,E,T,y;let t=parseInt((null==c||null===(d=c.units[p])||void 0===d?void 0:d.floorarea)||0)+parseInt((null==c||null===(m=c.units[p])||void 0===m?void 0:m.RentArea)||0)+parseInt(e.target.value);parseInt(null==c||null===(v=c.units[p])||void 0===v?void 0:v.builtUpArea)<t?_("PT_TOTUNITAREA_LESS_THAN_BUILTUP_ERR_MSG"):"PT_YES_IT_IS_SELFOCCUPIED"===(null==c||null===(E=c.units[p])||void 0===E||null===(T=E.selfOccupied)||void 0===T?void 0:T.i18nKey)&&parseInt(null==c||null===(y=c.units[p])||void 0===y?void 0:y.builtUpArea)==parseInt(e.target.value)&&_("PT_BUILTUP_UNOCCUPIED_AREA_NOT_SAME")}"BUILTUP.SHAREDPROPERTY"===(null==c||null===(n=c.PropertyType)||void 0===n?void 0:n.code)&&parseInt(null==c||null===(l=c.floordetails)||void 0===l?void 0:l.builtUpArea)<parseInt(e.target.value)+parseInt((null==c||null===(o=c.landarea)||void 0===o?void 0:o.floorarea)||"0")+parseInt((null==c||null===(a=c.Constructiondetails)||void 0===a?void 0:a.RentArea)||"0")?_("PT_TOTUNITAREA_LESS_THAN_BUILTUP_ERR_MSG"):"BUILTUP.SHAREDPROPERTY"===(null==c||null===(r=c.PropertyType)||void 0===r?void 0:r.code)&&"PT_YES_IT_IS_SELFOCCUPIED"===(null==c||null===(u=c.selfOccupied)||void 0===u?void 0:u.i18nKey)&&parseInt(null==c||null===(s=c.floordetails)||void 0===s?void 0:s.builtUpArea)==parseInt(e.target.value)&&_("PT_BUILTUP_UNOCCUPIED_AREA_NOT_SAME"),0==parseInt(e.target.value)&&f("PT_AREA_NOT_0_MSG")}},v={pattern:"^([0-9]){0,8}$",type:"number",title:a("PT_BUILT_AREA_ERROR_MESSAGE")})));var y},Area:e=>{let o,a,{t:r,config:s,onSelect:c,userType:p,formData:m,setError:v,clearErrors:E,formState:_,onBlur:T}=e,f=window.location.href.split("/").pop();var y;isNaN(f)?[o,a]=n.useState(null===(y=m.landarea)||void 0===y?void 0:y.floorarea):[o,a]=n.useState(m.units&&m.units[f]&&m.units[f].floorarea);const[S,g]=n.useState(null),[P,A]=n.useState(null),[N,O]=n.useState(null),{pathname:I}=i.useLocation(),h=I.includes("modify");function C(e){e.target.value.length>1024?g("CS_COMMON_LANDMARK_MAX_LENGTH"):(g(null),a(e.target.value))}n.useEffect(()=>{"employee"===p&&(Number(o)?isNaN(o)?v(s.key,{type:"invalid",message:r("ERR_DEFAULT_INPUT_FIELD_MSG")}):E(s.key):v(s.key,{type:"required",message:r("CORE_COMMON_REQUIRED_ERRMSG")}),c(s.key,o))},[o]),n.useEffect(()=>{var e;h&&"employee"===p&&a(null==m||null===(e=m.originalData)||void 0===e?void 0:e.landArea)},[]);const R=[{label:"PT_PLOT_SIZE_SQUARE_FEET_LABEL",type:"text",name:"area",validation:{}}];return"employee"===p?null==R?void 0:R.map((e,n)=>{var i,a;return l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller"},r(e.label)+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,u({key:e.name,id:e.name,value:o,onChange:C},e.validation,{onBlur:T})))),_.touched[s.key]?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(i=_.errors)||void 0===i||null===(a=i[s.key])||void 0===a?void 0:a.message):null)}):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{config:s,onChange:C,forcedError:r(P)||r(N),onSelect:()=>{if(isNaN(f)){var e,t,n,l;"PT_COMMON_YES"!==(null==m||null===(e=m.isResdential)||void 0===e?void 0:e.i18nKey)&&"PROPERTYTAX_BILLING_SLAB_NONRESIDENTIAL"!=(null==m||null===(t=m.usageCategoryMajor)||void 0===t?void 0:t.i18nKey)||"COMMON_PROPTYPE_VACANT"===(null==m||null===(n=m.PropertyType)||void 0===n?void 0:n.i18nKey)?"VACANT"===(null==m||null===(l=m.PropertyType)||void 0===l?void 0:l.code)?sessionStorage.setItem("area","vacant"):sessionStorage.setItem("area","no"):sessionStorage.setItem("area","yes"),c("landarea",{floorarea:o})}else{var i,a,r;let e=m.units&&m.units[f];"PT_COMMON_YES"!==(null==m||null===(i=m.isResdential)||void 0===i?void 0:i.i18nKey)&&"PROPERTYTAX_BILLING_SLAB_NONRESIDENTIAL"!=(null==m||null===(a=m.usageCategoryMajor)||void 0===a?void 0:a.i18nKey)||"COMMON_PROPTYPE_VACANT"===(null==m||null===(r=m.PropertyType)||void 0===r?void 0:r.i18nKey)?sessionStorage.setItem("area","no"):sessionStorage.setItem("area","yes");let t={...e,floorarea:o};c(s.key,t,!1,f)}},onSkip:()=>c(),t:r,isDisabled:P||N||!o,showErrorBelowChildren:!0},l.createElement(t.CardLabel,null,""+r("PT_PLOT_SIZE_SQUARE_FEET_LABEL")),l.createElement(t.TextInput,u({t:r,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"floorarea",value:o,onChange:function(e){var t,n,l,o;a(e.target.value),A(null),O(null),"BUILTUP.INDEPENDENTPROPERTY"===(null==m||null===(t=m.PropertyType)||void 0===t?void 0:t.code)&&parseInt(null==m||null===(n=m.units[f])||void 0===n?void 0:n.builtUpArea)<e.target.value&&A("PT_TOTUNITAREA_LESS_THAN_BUILTUP_ERR_MSG"),"BUILTUP.SHAREDPROPERTY"===(null==m||null===(l=m.PropertyType)||void 0===l?void 0:l.code)&&parseInt(null==m||null===(o=m.floordetails)||void 0===o?void 0:o.builtUpArea)<e.target.value&&A("PT_SELFOCCUPIED_AREA_LESS_THAN_BUILTUP"),0==parseInt(e.target.value)&&O("PT_AREA_NOT_0_MSG")}},{pattern:"^([0-9]){0,8}$",type:"number",title:r("PT_PLOT_SIZE_ERROR_MESSAGE")}))))},IsResidential:e=>{let{t:o,config:i,onSelect:a,formData:r}=e;const[u,s]=n.useState(null==r?void 0:r.isResdential);return l.createElement(t.FormStep,{t:o,config:i,onSelect:function(){sessionStorage.setItem("isResdential",u.i18nKey),a(i.key,u)},onSkip:()=>a(),isDisabled:!u},l.createElement(t.RadioButtons,{t:o,optionsKey:"i18nKey",isMandatory:i.isMandatory,options:[{i18nKey:"PT_COMMON_YES",code:"RESIDENTIAL"},{i18nKey:"PT_COMMON_NO",code:"NONRESIDENTIAL"}],selectedOption:u,onSelect:function(e){s(e)}}))},PropertyType:e=>{var o;let{t:a,config:r,onSelect:u,userType:s,formData:c,setError:p,clearErrors:m,formState:v,onBlur:E}=e;const[_,T]=n.useState(null==c?void 0:c.PropertyType),f=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:y={},isLoading:S}=Digit.Hooks.pt.usePropertyMDMS(f,"PropertyTax","PTPropertyType")||{};let g,P=[];P=null==y||null===(o=y.PropertyTax)||void 0===o?void 0:o.PropertyType;let A=[];function N(e){var t,n;if("employee"===s)return null==e||null===(t=e.filter(e=>"VACANT"===e.code||e.code.split(".").length>1))||void 0===t||null===(n=t.map(e=>({i18nKey:"COMMON_PROPTYPE_"+M(null==e?void 0:e.code,".","_"),code:null==e?void 0:e.code})))||void 0===n?void 0:n.sort((e,t)=>e.i18nKey.split("_").pop().localeCompare(t.i18nKey.split("_").pop()));if(Array.isArray(e)&&e.length>0)for(g=0;g<e.length;g++)1!=g&&4!=g&&Array.isArray(e)&&e.length>0&&A.push({i18nKey:"COMMON_PROPTYPE_"+M(e[g].code,".","_"),code:e[g].code});return A.sort((e,t)=>e.i18nKey.split("_").pop().localeCompare(t.i18nKey.split("_").pop())),A}const{pathname:O}=i.useLocation(),I=O.includes("modify");function h(e){T(e)}function C(){sessionStorage.setItem("PropertyType",null==_?void 0:_.i18nKey),u(r.key,_)}n.useEffect(()=>{if(I&&"employee"===s&&y){var e,t;const n=null==c||null===(e=c.originalData)||void 0===e?void 0:e.propertyType,l=null===(t=N(P))||void 0===t?void 0:t.filter(e=>e.code===n)[0];T(l)}},[S]),n.useEffect(()=>{"employee"===s&&(C(),_?m(r.key):p(r.key,{type:"required",message:a("CORE_COMMON_REQUIRED_ERRMSG")}))},[_]);const R=[{label:"PT_ASSESMENT_INFO_TYPE_OF_BUILDING",type:"text",name:"propertyType",validation:{}}];return S?l.createElement(t.Loader,null):"employee"===s?null==R?void 0:R.map((e,n)=>{var o,i,u,s;return l.createElement(l.Fragment,{key:n},l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},a(e.label)+" *"),l.createElement(t.Dropdown,{className:"form-field",selected:1===(null===(o=N(P))||void 0===o?void 0:o.length)?N(P)[0]:_,disable:1===(null===(i=N(P))||void 0===i?void 0:i.length),option:N(P),select:h,optionKey:"i18nKey",onBlur:E,t:a})),v.touched[r.key]?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(u=v.errors)||void 0===u||null===(s=u[r.key])||void 0===s?void 0:s.message):null)}):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{t:a,config:r,onSelect:C,onSkip:()=>u(),isDisabled:!_},l.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:N(P)||{},selectedOption:_,onSelect:h})),l.createElement(t.CitizenInfoLabel,{info:a("CS_FILE_APPLICATION_INFO_LABEL"),text:a("PT_PROPERTY_TYPE_INFO_MSG")}))},PropertyUsageType:e=>{var o,a,r;let{t:u,config:s,onSelect:d,userType:c,formData:p,formState:m,setError:v,clearErrors:E,onBlur:_}=e;const[T,f]=n.useState(null!=p&&p.usageCategoryMajor&&"NONRESIDENTIAL.OTHERS"===(null==p||null===(o=p.usageCategoryMajor)||void 0===o?void 0:o.code)?{code:""+(null==p||null===(a=p.usageCategoryMajor)||void 0===a?void 0:a.code),i18nKey:"PROPERTYTAX_BILLING_SLAB_OTHERS"}:null==p?void 0:p.usageCategoryMajor),y=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:S={},isLoading:g}=Digit.Hooks.pt.usePropertyMDMS(y,"PropertyTax","UsageCategory")||{};let P,A=[];A=(null==S||null===(r=S.PropertyTax)||void 0===r?void 0:r.UsageCategory)||[];let N=[];const{pathname:O}=i.useLocation(),I=O.includes("modify");function h(e){var t;if("employee"===c)return null==e||null===(t=e.filter(e=>(null==e?void 0:e.code.split(".").length)<=2&&"NONRESIDENTIAL"!==e.code))||void 0===t?void 0:t.map(e=>{const t=null==e?void 0:e.code.split(".");return 2==t.length?{i18nKey:"PROPERTYTAX_BILLING_SLAB_"+t[1],code:null==e?void 0:e.code}:{i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null==e?void 0:e.code),code:null==e?void 0:e.code}});for(P=0;P<10;P++)Array.isArray(e)&&e.length>0&&"NONRESIDENTIAL"==e[P].code.split(".")[0]&&2==e[P].code.split(".").length&&N.push({i18nKey:"PROPERTYTAX_BILLING_SLAB_"+e[P].code.split(".")[1],code:e[P].code});return N}function C(e){f(e)}function R(){"PROPERTYTAX_BILLING_SLAB_OTHERS"===(null==T?void 0:T.i18nKey)?(T.i18nKey="PROPERTYTAX_BILLING_SLAB_NONRESIDENTIAL",d(s.key,T)):d(s.key,T)}var b,D,L;return n.useEffect(()=>{if(!g&&I&&"employee"===c){var e;const t=null==p||null===(e=p.originalData)||void 0===e?void 0:e.usageCategory,n=h(A).filter(e=>e.code===t)[0];f(n)}},[g]),n.useEffect(()=>{"employee"===c&&(T?E(s.key):v(s.key,{type:"required",message:u("CORE_COMMON_REQUIRED_ERRMSG")}),R())},[T]),"employee"===c?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},u("PT_ASSESMENT_INFO_USAGE_TYPE")+" *"),l.createElement(t.Dropdown,{className:"form-field",selected:T,disable:1===(null===(b=h(A))||void 0===b?void 0:b.length),option:h(A),select:e=>{C(e)},optionKey:"i18nKey",onBlur:_,t:u})),m.touched[s.key]?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},null===(D=m.errors)||void 0===D||null===(L=D[s.key])||void 0===L?void 0:L.message):null):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(Timeline,{currentStep:1}):null,l.createElement(t.FormStep,{t:u,config:s,onSelect:R,onSkip:()=>d(),isDisabled:!T},l.createElement("div",null,l.createElement(t.RadioButtons,{t:u,optionsKey:"i18nKey",isMandatory:s.isMandatory,options:h(A)||{},selectedOption:T,onSelect:C}))),l.createElement(t.CitizenInfoLabel,{info:u("CS_FILE_APPLICATION_INFO_LABEL"),text:u("PT_USAGE_TYPE_INFO_MSG",T)}))},GroundFloorDetails:e=>{let o,i,a,r,{t:s,config:d,onSelect:c,formData:p}=e,m=window.location.href.split("/").pop(),v={};var E,_;isNaN(m)?([o,a]=n.useState(null===(E=p.floordetails)||void 0===E?void 0:E.plotSize),[i,r]=n.useState(null===(_=p.floordetails)||void 0===_?void 0:_.builtUpArea)):([o,a]=n.useState(p.units&&p.units[m]&&p.units[m].plotSize),[i,r]=n.useState(p.units&&p.units[m]&&p.units[m].builtUpArea));const[T,f]=n.useState(null),[y,S]=n.useState(null);return l.createElement(l.Fragment,null,l.createElement(t.FormStep,{config:(d.texts.header="COMMON_PROPTYPE_BUILTUP_SHAREDPROPERTY"===(null==p||null===(g=p.PropertyType)||void 0===g?void 0:g.i18nKey)?"PT_FLOOR_DETAILS_HEADER":"PROPERTYTAX_FLOOR_"+m+"_DETAILS",d),header:"ground",onSelect:()=>{if(isNaN(m))sessionStorage.setItem("propertyArea","multiple"),c("floordetails",{plotSize:o,builtUpArea:i});else{let e=p.units&&p.units[m]||null;if(null!==e)e.builtUpArea=i,e.plotSize=o,c(d.key,e,"",m);else{let e={plotSize:o,builtUpArea:i};sessionStorage.setItem("propertyArea","multiple"),c(d.key,e,"",m)}}},onSkip:()=>c(),t:s,forcedError:s(T)||s(y),isDisabled:T||y||!i&&(!o||!i),showErrorBelowChildren:!0},("0"===m||isNaN(m))&&l.createElement("div",null,l.createElement(t.CardLabel,null,""+s("PT_FLOOR_DETAILS_PLOT_SIZE_LABEL")),l.createElement(t.TextInput,u({t:s,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"PlotSize",value:o,onChange:function(e){a(e.target.value),f(null),S(null),e.target.value&&parseInt(i)>parseInt(e.target.value)&&f("PT_BUILTUPAREA_PLOTSIZE_ERROR_MSG"),0==parseInt(e.target.value)&&S("PT_AREA_NOT_0_MSG")}},v={pattern:"^([0-9]){0,8}$",type:"number",title:s("PT_PLOT_SIZE_ERROR_MESSAGE")}))),l.createElement(t.CardLabel,null,""+s("PT_FLOOR_DETAILS_BUILT_UP_AREA_LABEL")),l.createElement(t.TextInput,u({t:s,type:"number",isMandatory:!1,optionKey:"i18nKey",name:"BuiltUpArea",value:i,onChange:function(e){var t,n,l;r(e.target.value),f(null),S(null),"COMMON_PROPTYPE_BUILTUP_INDEPENDENTPROPERTY"===(null==p||null===(t=p.PropertyType)||void 0===t?void 0:t.i18nKey)&&"0"!=m?null!=p&&null!==(n=p.units[0])&&void 0!==n&&n.plotSize&&parseInt(e.target.value)>parseInt(null==p||null===(l=p.units[0])||void 0===l?void 0:l.plotSize)&&f("PT_BUILTUPAREA_PLOTSIZE_ERROR_MSG"):o&&parseInt(e.target.value)>parseInt(o)&&f("PT_BUILTUPAREA_PLOTSIZE_ERROR_MSG"),0==parseInt(e.target.value)&&S("PT_AREA_NOT_0_MSG")}},v={pattern:"^([0-9]){0,8}$",type:"number",title:s("PT_BUILT_AREA_ERROR_MESSAGE")}))),l.createElement(t.CitizenInfoLabel,{info:s("CS_FILE_APPLICATION_INFO_LABEL"),text:s("PT_FLOOR_AREA_INFO_MSG")}));var g},PropertyFloorDetails:e=>{var o,i;let{t:a,config:r,onSelect:u,formData:s,userType:c}=e;const[p,m]=n.useState(null==s?void 0:s.noOfFloors),v=Digit.ULBService.getStateId(),{data:E={}}=Digit.Hooks.pt.usePropertyMDMS(v,"PropertyTax","Floor")||{};function _(){let e=window.location.href.charAt(window.location.href.length-1);u(r.key,p,"",e)}return null==E||null===(o=E.PropertyTax)||void 0===o||null===(i=o.Floor)||void 0===i||i.filter(e=>(null==e?void 0:e.code)>0),n.useEffect(()=>{"employee"===c&&_()},[p]),"employee"===c?null:l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{t:a,config:r,onSelect:_,onSkip:()=>u(),isDisabled:!p,isMultipleAllow:!0},l.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:[{i18nKey:"PT_GROUND_FLOOR_OPTION",code:0},{i18nKey:"PT_GROUND_PLUS_ONE_OPTION",code:1},{i18nKey:"PT_GROUND_PLUS_TWO_OPTION",code:2}],selectedOption:p,onSelect:function(e){m(e)}})),l.createElement(t.CitizenInfoLabel,{info:a("CS_FILE_APPLICATION_INFO_LABEL"),text:a("PT_USAGE_TYPE_INFO_MSG")}))},PropertyBasementDetails:e=>{let{t:o,config:i,onSelect:a,formData:r}=e;const[u,s]=n.useState(null==r?void 0:r.noOofBasements);return l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{t:o,config:i,onSelect:function(){sessionStorage.setItem("noOofBasements",u.i18nKey),a(i.key,u)},onSkip:()=>a(),isDisabled:!u,isMultipleAllow:!0},l.createElement(t.RadioButtons,{t:o,optionsKey:"i18nKey",isMandatory:i.isMandatory,options:[{code:0,i18nKey:"PT_NO_BASEMENT_OPTION"},{code:1,i18nKey:"PT_ONE_BASEMENT_OPTION"},{code:2,i18nKey:"PT_TWO_BASEMENT_OPTION"}],selectedOption:u,onSelect:s})),l.createElement(t.CitizenInfoLabel,{info:o("CS_FILE_APPLICATION_INFO_LABEL"),text:o("PT_BASEMENT_NUMBER_INFO_MSG",u)}))},PropertyInformation:()=>{var e,a,r,u,s,d,c,p,m;const{t:v}=o.useTranslation(),{propertyIds:_}=i.useParams();var T=window.Digit.Utils.browser.isMobile();const[f,S]=n.useState(!1),g=Digit.ULBService.getCurrentTenantId(),{data:P}=Digit.Hooks.useCommonMDMS(Digit.ULBService.getStateId(),"PropertyTax",["UpdateNumber"],{select:e=>{var t,n;return null==e||null===(t=e.PropertyTax)||void 0===t||null===(n=t.UpdateNumber)||void 0===n?void 0:n[0]},retry:!1,enable:!1}),{isLoading:A,data:N}=Digit.Hooks.pt.usePropertySearch({filters:{propertyIds:_,tenantId:g}},{filters:{propertyIds:_,tenantId:g}}),{data:O}=Digit.Hooks.pt.usePropertySearch({tenantId:g,filters:{propertyIds:_,audit:!0}},{enabled:f,select:e=>{var t;return null===(t=e.Properties.filter(e=>"ACTIVE"===e.status))||void 0===t?void 0:t.sort((e,t)=>t.auditDetails.lastModifiedTime-e.auditDetails.lastModifiedTime)}}),[I,h]=n.useState(!1),[C,R]=n.useState({loading:!1,loaded:!1,canLoad:!1}),[b,D]=n.useState({}),[L,w]=n.useState(()=>(null==N?void 0:N.Properties[0])||" "),x=Digit.Hooks.pt.usePropertyAPI(null==L?void 0:L.tenantId,!1);let U=[];null==L||null===(e=L.documents)||void 0===e||e.filter(e=>e.documentType.includes("SPECIALCATEGORYPROOF")).map(e=>{U.push(e)}),n.useEffect(()=>{var e;N&&(w(null==N?void 0:N.Properties[0]),"ACTIVE"!==(null==N||null===(e=N.Properties[0])||void 0===e?void 0:e.status)&&S(!0))},[N]),n.useEffect(()=>{if(null!=O&&O[0]){var e;const t=(null==O?void 0:O[0])||{};t.owners=null==t||null===(e=t.owners)||void 0===e?void 0:e.filter(e=>"ACTIVE"==e.status),w(t)}},[f,O]),sessionStorage.setItem("pt-property",JSON.stringify(L));let F=[];F=null==L?void 0:L.documents;let B=[],k=[];if(k=null==L?void 0:L.owners,B=null==L?void 0:L.units,B&&B.sort((e,t)=>{let n=e.floorNo,l=t.floorNo;return e.floorNo<0&&(n=-20*e.floorNo),t.floorNo<0&&(l=-20*t.floorNo),n>l?1:-1}),A)return l.createElement(t.Loader,null);"ACTIVE"!=(null==L?void 0:L.status)||C.loading||C.loaded||C.canLoad||R({loading:!1,loaded:!1,canLoad:!0}),null==C||!C.canLoad||C.loading||C.loaded||(R({loading:!0,loaded:!1,canLoad:!0}),function(e,t,n,l){try{Promise.resolve(Digit.PTService.assessmentSearch({tenantId:e,filters:{propertyIds:t}})).then(function(o){function i(){n(a),l({loading:!1,loaded:!0,canLoad:!0})}let a={};const r=function(n){if((null==o||null===(n=o.Assessments)||void 0===n?void 0:n.length)>0)return Promise.resolve(Digit.PaymentService.fetchBill(e,{businessService:"PT",consumerCode:t})).then(function(e){a=e})}();return r&&r.then?r.then(i):i()})}catch(e){return Promise.reject(e)}}((null==L?void 0:L.tenantId)||g,_,D,R));let H,Y=0;H=B&&(null===(a=B[0])||void 0===a?void 0:a.floorNo);const W=e=>{let{jumpTo:n,style:a}=e;const{t:r}=o.useTranslation(),u=i.useHistory();return l.createElement(t.LinkButton,{style:a,label:r("PT_OWNER_HISTORY"),className:"check-page-link-button",onClick:function(){u.push(n)}})},j=null===(r=Digit)||void 0===r||null===(u=r.ComponentRegistryService)||void 0===u?void 0:u.getComponent("UpdateNumber");return l.createElement(l.Fragment,null,l.createElement(t.Header,null,v("PT_PROPERTY_INFORMATION")),l.createElement("div",null,l.createElement(t.Card,null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:v("PT_PROPERTY_PTUID"),text:""+(L.propertyId||v("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:v("CS_COMMON_TOTAL_AMOUNT_DUE"),text:"₹"+v(Tn(b))})),l.createElement(t.CardSubHeader,null,v("PT_PROPERTY_ADDRESS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:v("PT_PROPERTY_ADDRESS_PINCODE"),text:""+((null===(s=L.address)||void 0===s?void 0:s.pincode)||v("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:v("PT_COMMON_CITY"),text:""+(v(y(null==L?void 0:L.tenantId))||v("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:v("PT_COMMON_LOCALITY_OR_MOHALLA"),text:""+v(null==L||null===(d=L.address)||void 0===d||null===(c=d.locality)||void 0===c?void 0:c.name)||v("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:v("PT_PROPERTY_ADDRESS_STREET_NAME"),text:""+((null===(p=L.address)||void 0===p?void 0:p.street)||v("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:v("PT_PROPERTY_ADDR_DOOR_HOUSE_NO"),text:""+((null===(m=L.address)||void 0===m?void 0:m.doorNo)||v("CS_NA"))})),l.createElement(t.CardSubHeader,null,v("PT_PROPERTY_ASSESSMENT_DETAILS_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:v("PT_COMMON_PROPERTY_TYPE"),text:""+v(E(null==L?void 0:L.propertyType))||v("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:v("PT_ASSESMENT1_PLOT_SIZE"),text:L.landArea+" sq.ft"||v("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:v("PT_ASSESMENT_INFO_NO_OF_FLOOR"),text:""+(L.noOfFloors||v("CS_NA"))})),l.createElement("div",null,Array.isArray(B)&&B.length>0&&B.map((e,n)=>{var o,i,a;return l.createElement("div",{key:n},(H!==(null==e?void 0:e.floorNo)?Y=1:Y+=1)&&1===Y&&l.createElement(t.CardSubHeader,null,v("PROPERTYTAX_FLOOR_"+(null==e?void 0:e.floorNo))),l.createElement("div",{style:{border:"groove",marginBottom:"10px"}},l.createElement(t.CardSubHeader,null,v("ES_APPLICATION_DETAILS_UNIT")," ",Y),(H=null==e?void 0:e.floorNo)>-5&&l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:v("PT_ASSESSMENT_UNIT_USAGE_TYPE"),text:""+v(("RESIDENTIAL"!==L.usageCategory?"COMMON_PROPUSGTYPE_NONRESIDENTIAL_":"COMMON_PROPUSGTYPE_")+(null!=L&&null!==(o=L.usageCategory)&&void 0!==o&&o.split(".")[1]?null==L||null===(i=L.usageCategory)||void 0===i?void 0:i.split(".")[1]:L.usageCategory))||v("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:v("PT_OCCUPANY_TYPE_LABEL"),text:""+v("PROPERTYTAX_OCCUPANCYTYPE_"+(null==e?void 0:e.occupancyType))||v("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:v("PT_BUILTUP_AREA_LABEL"),text:""+((null==e||null===(a=e.constructionDetail)||void 0===a?void 0:a.builtUpArea)+" sq.ft"||v("CS_NA"))}),"RENTED"==e.occupancyType&&l.createElement(t.Row,{className:"border-none",label:v("PT_FORM2_TOTAL_ANNUAL_RENT"),text:""+((null==e?void 0:e.arv)&&"₹"+(null==e?void 0:e.arv)||v("CS_NA"))}))))})),l.createElement(t.CardSubHeader,null,v("PT_COMMON_PROPERTY_OWNERSHIP_DETAILS_HEADER")),l.createElement("div",null,Array.isArray(k)&&k.map((e,n)=>{var o,i,a,r,u,s,d,c,p,m,E,_;return l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,1!=k.length&&l.createElement("span",null,v("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,(null==L?void 0:L.institution)&&(null==L||null===(o=L.institution)||void 0===o?void 0:o.name)&&l.createElement(t.Row,{className:"border-none",label:v("PT_INSTITUTION_NAME"),text:""+((null==L||null===(i=L.institution)||void 0===i?void 0:i.name)||v("CS_NA"))}),(null==L?void 0:L.institution)&&(null==L||null===(a=L.institution)||void 0===a?void 0:a.type)&&l.createElement(t.Row,{className:"border-none",label:v("PT_INSTITUTION_TYPE"),text:""+(v("COMMON_MASTERS_OWNERSHIPCATEGORY_"+(null==L||null===(r=L.institution)||void 0===r?void 0:r.type))||v("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:v("PT_COMMON_APPLICANT_NAME_LABEL"),textStyle:T?{marginLeft:"27%",marginRight:"5%",wordBreak:"break-word"}:{marginLeft:"18%"},text:""+((null==e?void 0:e.name)||v("CS_NA")),actionButtonStyle:{marginRight:"-10px"},actionButton:l.createElement(W,{style:{marginRight:"-10px"},jumpTo:"/digit-ui/citizen/pt/property/owner-history/"+L.tenantId+"/"+L.propertyId})}),l.createElement(t.Row,{className:"border-none",label:v("PT_COMMON_GENDER_LABEL"),text:""+(null!=e&&e.gender?null==e?void 0:e.gender.toLowerCase():v("CS_NA"))}),(null==L?void 0:L.institution)&&l.createElement(t.Row,{className:"border-none",label:v("PT_LANDLINE_NUMBER_FLOATING_LABEL"),text:""+((null==e?void 0:e.altContactNumber)||v("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:v("PT_FORM3_MOBILE_NUMBER"),text:""+v(null==e?void 0:e.mobileNumber)||v("CS_NA"),textStyle:T?{marginLeft:"16%"}:{marginLeft:"12%"},actionButton:"ACTIVE"===(null==L?void 0:L.status)&&(null==e?void 0:e.mobileNumber)&&(null===(u=Digit.UserService.getUser())||void 0===u||null===(s=u.info)||void 0===s?void 0:s.mobileNumber)&&e.mobileNumber===(null===(d=Digit.UserService.getUser())||void 0===d||null===(c=d.info)||void 0===c?void 0:c.mobileNumber)&&l.createElement("div",{onClick:()=>h({name:null==e?void 0:e.name,mobileNumber:null==e?void 0:e.mobileNumber,ownerIndex:n})},l.createElement(t.EditIcon,null))}),(null==L?void 0:L.institution)&&(null==L||null===(p=L.institution)||void 0===p?void 0:p.designation)&&l.createElement(t.Row,{className:"border-none",label:v("Designation"),text:""+((null==L||null===(m=L.institution)||void 0===m?void 0:m.designation)||v("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:v("PT_FORM3_GUARDIAN_NAME"),text:""+((null==e?void 0:e.fatherOrHusbandName)||v("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:v("PT_FORM3_OWNERSHIP_TYPE"),text:""+v(null!=L&&L.ownershipCategory?"PT_OWNERSHIP_"+(null==L?void 0:L.ownershipCategory):"CS_NA")}),l.createElement(t.Row,{className:"border-none",label:v("PT_FORM3_RELATIONSHIP"),text:""+((null==e?void 0:e.relationship)||v("CS_NA"))}),U&&U.length>0&&l.createElement(t.Row,{className:"border-none",label:v("PT_SPL_CAT_DOC_TYPE"),text:""+v(M(null===(E=U[n])||void 0===E?void 0:E.documentType,".","_"))||v("NA")}),U&&U.length>0&&l.createElement(t.Row,{className:"border-none",label:v("PT_SPL_CAT_DOC_ID"),text:""+v(null===(_=U[n])||void 0===_?void 0:_.id)||v("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:v("PT_MUTATION_AUTHORISED_EMAIL"),text:null!=e&&e.emailId?null==e?void 0:e.emailId:""+v("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:v("PT_OWNERSHIP_INFO_CORR_ADDR"),text:""+v(null==e?void 0:e.correspondenceAddress)||v("CS_NA")}),0==(null==U?void 0:U.length)&&l.createElement(t.Row,{className:"border-none",label:v("PT_SPL_CAT"),text:v("CS_NONE")})))})),l.createElement(t.CardSubHeader,null,v("PT_COMMON_DOCS")),l.createElement("div",null,Array.isArray(F)?F.length>0&&l.createElement(Et,{property:L}):l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",text:v("PT_NO_DOCUMENTS_MSG")}))),l.createElement("div",null,"ACTIVE"===(null==L?void 0:L.status)&&!f&&l.createElement("div",{style:{marginTop:"1em",bottom:"0px",width:"100%",marginBottom:"1.2em"}},l.createElement(i.Link,{to:{pathname:"/digit-ui/citizen/pt/property/edit-application/action=UPDATE/"+L.propertyId}},l.createElement(t.SubmitBar,{label:v("PT_UPDATE_PROPERTY_BUTTON")})))),I&&l.createElement(t.PopUp,{className:"updatenumber-warper-citizen"},l.createElement(j,{showPopup:h,name:null==I?void 0:I.name,UpdateNumberConfig:P,mobileNumber:null==I?void 0:I.mobileNumber,t:v,onValidation:(e,t)=>{let n={...L};n.owners[null==I?void 0:I.ownerIndex].mobileNumber=e.mobileNumber,n.creationReason="UPDATE",n.workflow=null,x.mutate({Property:n},{onError:()=>{},onSuccess:function(e){try{return t(),setTimeout(()=>{window.location.reload()},3e3),Promise.resolve()}catch(e){return Promise.reject(e)}}})}})))))},ProvideFloorNo:e=>{var o;let{t:i,config:a,onSelect:r,formData:u}=e;window.location.href.split("/").pop(),Digit.ULBService.getCurrentTenantId();const s=Digit.ULBService.getStateId(),[d,c]=n.useState((null==u?void 0:u.Floorno)||""),{data:p}=Digit.Hooks.pt.usePropertyMDMS(s,"PropertyTax","Floor")||{};let m,v=[];v=null==p||null===(o=p.PropertyTax)||void 0===o?void 0:o.Floor;let E=[];return l.createElement(t.FormStep,{t:i,config:a,onSelect:function(){r(a.key,d)},onSkip:()=>r(),isDisabled:!d},l.createElement(t.CardLabel,null,i("PT_FLOOR_NUMBER_LABEL")),l.createElement("div",{className:"form-pt-dropdown-only"},E&&l.createElement(t.RadioOrSelect,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,options:function(e){for(m=0;Array.isArray(e)&&m<e.length;m++)E.push({i18nKey:"PROPERTYTAX_FLOOR_"+M(e[m].code,"-","_")});return E}(v)||{},selectedOption:d,onSelect:function(e){c(e)}})))},PropertyOwnerHistory:yn,TransferDetails:yn,Units:e=>{var o,a,r,u,s,d,c,p,m,v,E;let{t:_,config:T,onSelect:f,formData:y,setError:S,formState:g,clearErrors:P}=e;const{pathname:A}=i.useLocation(),N=A.includes("modify");let O=window.Digit.Utils.browser.isMobile();const I=Digit.ULBService.getCurrentTenantId(),[h,C]=n.useState((null==y?void 0:y.units)||[{key:Date.now(),order:1,floorNo:null,occupancyType:null,tenantId:I,usageCategory:null,builtUpArea:""}]),R=Digit.ULBService.getStateId(),[b,D]=n.useState({index:-1}),[L,w]=n.useState(!0),{data:x,isLoading:U}=Digit.Hooks.pt.usePropertyMDMS(R,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory"])||{};let F=[];F=(null==x||null===(o=x.PropertyTax)||void 0===o||null===(a=o.UsageCategory)||void 0===a?void 0:a.filter(e=>"MIXED"!==(null==e?void 0:e.code)))||[];let B=[];B=null==x||null===(r=x.PropertyTax)||void 0===r?void 0:r.Floor;let k=[];k=(null==x||null===(u=x.PropertyTax)||void 0===u?void 0:u.OccupancyType.map(e=>({i18nKey:"PROPERTYTAX_OCCUPANCYTYPE_"+(null==e?void 0:e.code),...e})))||[];let H=[];function Y(e){return H=(null==e?void 0:e.map(e=>({i18nKey:"PROPERTYTAX_FLOOR_"+M(null==e?void 0:e.code,"-","_"),code:null==e?void 0:e.code})))||[],H}n.useEffect(()=>{if(!U&&N&&x){var e,t,n;let l=null==y||null===(e=y.originalData)||void 0===e||null===(t=e.units)||void 0===t||null===(n=t.filter(e=>e.active))||void 0===n?void 0:n.map((e,t)=>{let{occupancyType:n,usageCategory:l,constructionDetail:o,floorNo:i,arv:a}=e;n=k.filter(e=>(null==e?void 0:e.code)===n)[0];let r=W(F).filter(e=>(null==e?void 0:e.code)===l)[0];i=Y(B).filter(e=>(null==e?void 0:e.code)==i)[0];let u=Date.now()+t;return{floorNo:i,occupancyType:n,usageCategory:r,key:u,order:t+1,builtUpArea:o.builtUpArea,existingUsageCategory:l,arv:a}});C(l||[]),w(!1)}},[U]);const W=e=>{var t;return null==e||null===(t=e.filter(e=>(null==e?void 0:e.code.split(".").length)<=2&&"NONRESIDENTIAL"!==(null==e?void 0:e.code)))||void 0===t?void 0:t.map(e=>{const t=null==e?void 0:e.code.split(".");return 2==t.length?{i18nKey:"PROPERTYTAX_BILLING_SLAB_"+t[1],code:null==e?void 0:e.code}:{i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null==e?void 0:e.code),code:null==e?void 0:e.code}})},j=e=>F.filter(t=>(null==t?void 0:t.code.includes(null==e?void 0:e.code))&&4===(null==t?void 0:t.code.split(".").length)).map(e=>{const t=null==e?void 0:e.code.split(".");return{i18nKey:"COMMON_PROPSUBUSGTYPE_NONRESIDENTIAL_"+t[1]+"_"+t[3],code:null==e?void 0:e.code}}),V=()=>{C(e=>e.map((e,t)=>({...e,order:t+1})))},z=e=>{var t,n;C(t=>t.filter(t=>t.key!==e.key)),(null===(t=g.errors)||void 0===t||null===(n=t.units)||void 0===n?void 0:n.type)==e.key&&P("units"),V()};return n.useEffect(()=>{var e;"VACANT"===(null==y||null===(e=y.PropertyType)||void 0===e?void 0:e.code)&&g.errors[T.key]&&P(T.key)},[null==y?void 0:y.PropertyType]),n.useEffect(()=>{!function(){var e;let t=null==h?void 0:h.map(e=>{var t,n,l;return{occupancyType:null==e||null===(t=e.occupancyType)||void 0===t?void 0:t.code,floorNo:null==e||null===(n=e.floorNo)||void 0===n?void 0:n.code,constructionDetail:{builtUpArea:null==e?void 0:e.builtUpArea},tenantId:Digit.ULBService.getCurrentTenantId(),usageCategory:null==e||null===(l=e.usageCategory)||void 0===l?void 0:l.code}});t=null===(e=t)||void 0===e?void 0:e.map((e,t)=>"RENTED"===e.occupancyType?{...e,arv:h[t].arv}:e),f(T.key,t)}(),(()=>{var e,t;if("BUILTUP.INDEPENDENTPROPERTY"!==(null==y||null===(e=y.PropertyType)||void 0===e?void 0:e.code)){var n,l;if("units_missing"===(null===(n=g.errors[T.key])||void 0===n?void 0:n.type)&&P(T.key),null!=y&&null!==(l=y.PropertyType)&&void 0!==l&&l.code.includes("BUILTUP")){let e=h.reduce((e,t)=>t.floorNo?e[t.floorNo]?e:{...e,[t.floorNo]:1}:e,{});f("noOfFloors",Object.keys(e).length);let t=h.reduce((e,t)=>{let{floorNo:n,builtUpArea:l}=t;if(!n)return e;let o=Number(l)||0;return e[null==n?void 0:n.code]=isNaN(null==e?void 0:e[null==n?void 0:n.code])?o:e[null==n?void 0:n.code]+o,e},{});Object.keys(t).reduce((e,n)=>t[n]<=e?e:t[n],0)>Number(null==y?void 0:y.landarea)?S(T.key,{type:"landArea extended",message:_("PT_BUILTUPAREA_GRATER_THAN_LANDAREA")}):P(T.key)}return}if(null===(t=B)||void 0===t||!t.length)return;let o=h.reduce((e,t)=>{var n;return Math.min(e,Number(null===(n=t.floorNo)||void 0===n?void 0:n.code)||Number(0))},Number(0)),i=h.reduce((e,t)=>{var n;return Math.max(e,Number(null===(n=t.floorNo)||void 0===n?void 0:n.code)||Number(0))},Number(0)),a=h.reduce((e,t)=>{let{floorNo:n,builtUpArea:l}=t;if(!n)return e;let o=Number(l)||0;return e[null==n?void 0:n.code]=isNaN(null==e?void 0:e[null==n?void 0:n.code])?o:e[null==n?void 0:n.code]+o,e},{}),r=Object.keys(a).reduce((e,t)=>a[t]<=e?e:a[t],0);const u=H.filter(e=>{let t=Number(null==e?void 0:e.code);return t<i&&t>o||t===i||t===o});let s=[...u];u.forEach(e=>{h.some(t=>{var n;return(null===(n=t.floorNo)||void 0===n?void 0:n.code)===(null==e?void 0:e.code)})?s=s.filter(t=>(null==t?void 0:t.code)!==(null==e?void 0:e.code)):s.some(t=>(null==t?void 0:t.code)===(null==e?void 0:e.code))||s.push(e)}),s.length&&h.some(e=>{var t;return null==e||null===(t=e.floorNo)||void 0===t?void 0:t.code})?S(T.key,{type:"units_missing",message:"PT_FLOORS_MISSING_UNITS."+s.map(e=>null==e?void 0:e.code).join()}):r>Number(null==y?void 0:y.landarea)?S(T.key,{type:"landArea extended",message:_("PT_BUILTUPAREA_GRATER_THAN_LANDAREA")}):P(T.key),f("noOfFloors",i+1)})()},[h,y.PropertyType,y.landarea]),L&&N?l.createElement(t.Loader,null):"VACANT"!==(null==y||null===(s=y.PropertyType)||void 0===s?void 0:s.code)&&null!=y&&null!==(d=y.PropertyType)&&void 0!==d&&d.code&&null!=y&&null!==(c=y.usageCategoryMajor)&&void 0!==c&&c.code?l.createElement("div",null,null==h?void 0:h.map((e,t)=>l.createElement(K,{t:_,key:e.key,unit:e,allUnits:h,setUnits:C,index:t,stateId:R,focusIndex:b,setFocusIndex:D,isMobile:O,getfloorlistdata:Y,floorlist:B,occupencyOptions:k,formData:y,handleRemoveUnit:z,formState:g,setError:S,clearErrors:P,usageCategoryMajorMenu:W,subUsageCategoryMenu:j})),l.createElement(t.LinkButton,{label:_("PT_ADD_UNIT"),onClick:()=>{C(e=>[...e,{key:Date.now(),floorNo:null,occupancyType:null,tenantId:I,usageCategory:null,builtUpArea:null==y?void 0:y.landarea,order:e.length+1}]),V()},style:{color:"orange",width:"175px"}}),["units_missing","landArea extended"].includes(null===(p=g.errors)||void 0===p||null===(m=p[T.key])||void 0===m?void 0:m.type)?l.createElement(t.CardLabelError,{style:{width:"70%",marginLeft:"30%",fontSize:"12px",marginTop:"-21px"}},_(null===(v=g.errors)||void 0===v?void 0:v[T.key].message.split(".")[0])+"-\n           "+((null===(E=g.errors)||void 0===E?void 0:E[T.key].message.split(".")[1])||" ")):null):null},SelectAltContactNumber:e=>{var o;let{t:a,config:r,onSelect:u,formData:s}=e;const[d,c]=n.useState(null==s||null===(o=s.owners)||void 0===o?void 0:o.altContactNumber),{pathname:p}=i.useLocation(),m=p.includes("/modify-application/");return n.useEffect(()=>{u(r.key,{...s[r.key],altContactNumber:d})},[d]),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller",style:m?{color:"#B1B4B6"}:{}},a("ES_PT_ALT_CONTACT_NUMBER")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{name:"altContactNumber",onChange:e=>c(e.target.value),value:d,disable:m})))},SelectDocuments:e=>{var o,a,r,u,s;let{t:d,config:c,onSelect:p,formData:m,setError:v,clearErrors:E,formState:_}=e;Digit.ULBService.getCurrentTenantId();const T=Digit.ULBService.getStateId(),[f,y]=n.useState((null==m||null===(o=m.documents)||void 0===o?void 0:o.documents)||[]),[S,g]=n.useState(null);let P="create";const{pathname:A}=i.useLocation(),N=A.includes("/modify-application/"),O=A.includes("/property-mutate/");N&&(P="update");const I=JSON.parse(sessionStorage.getItem("PropertyInitials")),{isLoading:h,data:C}=Digit.Hooks.pt.usePropertyMDMS(T,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory","MutationDocuments"]),R=null==C||null===(a=C.PropertyTax)||void 0===a?void 0:a.MutationDocuments,b=null==C||null===(r=C.PropertyTax)||void 0===r?void 0:r.Documents,D=O?null==R||null===(u=R.map)||void 0===u?void 0:u.call(R,e=>b.find(t=>e.code===t.code)||e):null==C||null===(s=C.PropertyTax)||void 0===s?void 0:s.Documents;return n.useEffect(()=>{p(c.key,{documents:f,propertyTaxDocumentsLength:null==D?void 0:D.length})},[f]),h?l.createElement(t.Loader,null):l.createElement("div",null,O?l.createElement(t.CardSectionHeader,null,d("PT_MUTATION_DOCUMENTS_HEADER")," "):null,null==D?void 0:D.map((e,t)=>l.createElement(V,{key:t,document:e,action:P,t:d,id:"pt-document-"+t,error:S,setError:g,setDocuments:y,documents:f,formData:m,setFormError:v,clearFormErrors:E,config:c,formState:_,propertyInitialValues:I})),S&&l.createElement(t.Toast,{label:S,onClose:()=>g(null),error:!0}))},PTEmployeeOwnershipDetails:e=>{var a,r,s;let{config:d,onSelect:c,formData:p,setError:m,formState:v,clearErrors:E}=e;const{t:_}=o.useTranslation(),{pathname:T}=i.useLocation(),f=T.includes("/modify-application/"),[y,S]=n.useState((null==p?void 0:p.owners)||[z()]),[g,P]=n.useState({index:-1,type:""}),A=(Digit.ULBService.getCurrentTenantId(),Digit.ULBService.getStateId()),{data:N}=Digit.Hooks.pt.usePropertyMDMS(A,"PropertyTax",["UsageCategory","OccupancyType","Floor","OwnerType","OwnerShipCategory","Documents","SubOwnerShipCategory","OwnerShipCategory"]),{data:O}=Digit.Hooks.pt.usePTGenderMDMS(A,"common-masters","GenderType");let I=[];O&&O.map(e=>{I.push({i18nKey:"PT_FORM3_"+e.code,code:""+e.code,value:""+e.code})}),n.useEffect(()=>{c(null==d?void 0:d.key,y)},[y]),n.useEffect(()=>{null!=p&&p.owners||S([z()])},[null==p||null===(a=p.ownershipCategory)||void 0===a?void 0:a.code]);const h={focusIndex:g,allOwners:y,setFocusIndex:P,removeOwner:e=>{S(t=>t.filter(t=>t.key!=e.key))},formData:p,formState:v,setOwners:S,mdmsData:N,t:_,setError:m,clearErrors:E,config:d,menu:I,isEditScreen:f};return null!=p&&null!==(r=p.ownershipCategory)&&void 0!==r&&r.code?l.createElement(l.Fragment,null,y.map((e,t)=>l.createElement(G,u({key:e.key,index:t,owner:e},h))),f||"INDIVIDUAL.MULTIPLEOWNERS"!==(null==p||null===(s=p.ownershipCategory)||void 0===s?void 0:s.code)?null:l.createElement(t.LinkButton,{label:"Add Owner",onClick:()=>{const e=z();S(t=>[...t,e])},style:{color:"orange"}})):null},SearchPropertyCitizen:Ke,SearchResultCitizen:Ge,TransfererDetails:Sn,OwnerMutate:e=>{var t;const{onSelect:o,formData:a,config:r}=e,{pathname:s}=i.useLocation(),[d,c]=Digit.Hooks.useSessionStorage("PT_MUTATE_MULTIPLE_OWNERS",[gn()]),[p,m]=Digit.Hooks.useSessionStorage("PT_MUTATE_MULTIPLE_OWNERS_LAST_PATH","/0/"+Pn[0].route),{path:v}=i.useRouteMatch(),E="INDIVIDUAL.MULTIPLEOWNERS"===(null==a||null===(t=a.ownershipCategory)||void 0===t?void 0:t.code),_=i.useHistory();n.useEffect(()=>{d.length||c([gn()])},[]),n.useEffect(()=>{!E&&d.length>1&&(c([d[0]]),o(r.key,[d[0]]),_.replace(v+"/0/"+Pn[0].route))},[E]),n.useEffect(()=>{p!==s.split(v)[1]&&m(s.split(v)[1])},[s]);const T=n.useRef();n.useEffect(()=>{T.current=[...d].length});const f=T.current;n.useEffect(()=>{d.length>f&&_.push(v+"/"+(d.length-1)+"/"+Pn[0].route)},[d]);const y={addNewOwner:()=>{const e=gn();E&&c(t=>[...t,e])},removeOwner:e=>{c(t=>t.filter(t=>t.key!=e.key))},setOwners:c,owners:d,...e,propsConfig:r};return l.createElement(l.Fragment,null,l.createElement(i.Switch,null,d.map((e,t)=>l.createElement(i.Route,{key:e.key,path:v+"/"+t},l.createElement(An,u({owner:e,ownerIndex:t},y)))),l.createElement(i.Route,null,s!=""+v+p&&""!=p?l.createElement(i.Redirect,{to:""+v+p}):null)))},PTComments:e=>{var o;const{t:i,config:a,onSelect:r,userType:u,formData:s}=e,[c,p]=n.useState(null==s||null===(o=s[a.key])||void 0===o?void 0:o.remarks);return"employee"===u?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},i("PT_MUTATION_REMARKS")),l.createElement("div",{className:"field"},l.createElement(t.TextArea,{onChange:e=>p(e.target.value),value:c})))):l.createElement(l.Fragment,null,l.createElement(d,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:i,config:a,onSelect:()=>{r(a.key,{...null==s?void 0:s[a.key],remarks:c})},onSkip:()=>{}},l.createElement("div",null,l.createElement(t.TextArea,{onChange:e=>p(e.target.value),value:c}))))},IsMutationPending:e=>{var o,i;const{t:a,config:r,onSelect:u,userType:s,formData:c,setError:p,clearErrors:m,errors:v}=e,[E,_]=n.useState(null==c||null===(o=c[r.key])||void 0===o?void 0:o.isMutationInCourt),[T,f]=n.useState((null==c||null===(i=c[r.key])||void 0===i?void 0:i.caseDetails)||""),y=()=>{u(r.key,{...null==c?void 0:c[r.key],isMutationInCourt:E,caseDetails:T})};return n.useEffect(()=>{"NO"===(null==E?void 0:E.code)&&null!=T&&T.length&&f(""),"employee"===s&&(E?null!=v&&v[r.key]&&m(r.key):p(r.key,{type:"Required"}),y())},[E,T]),"employee"===s?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"}},l.createElement("div",{className:"field",style:{width:"55%"}},l.createElement(t.CheckBox,{label:a("PT_MUTATION_COURT_PENDING_OR_NOT")+"*",name:"isMutationInCourt",onChange:function(e){_(1==e.target.checked?{code:"YES"}:{code:"NO"})},checked:"YES"===(null==E?void 0:E.code),style:{paddingBottom:"10px",paddingTop:"3px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#0b0c0c"}}))),l.createElement(t.LabelFieldPair,{style:{marginBottom:"50px"}},l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},a("PT_MUTATION_COURT_CASE_DETAILS")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{disable:"YES"!==(null==E?void 0:E.code),value:T,onChange:e=>f(e.target.value)})))):l.createElement(l.Fragment,null,l.createElement(d,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:a,config:r,onSelect:y,onSkip:()=>{},isDisabled:!E},l.createElement("div",null,l.createElement(t.RadioButtons,{t:a,optionsKey:"i18nKey",isMandatory:r.isMandatory,options:[{code:"YES"},{code:"NO"}],selectedOption:E,onSelect:e=>{_(e)},labelKey:"PT_MUTATION_PENDING",isDependent:!0}),l.createElement(t.CardLabel,null,a("PT_MUTATION_COURT_CASE_DETAILS")),l.createElement(t.TextInput,{disable:"YES"!==(null==E?void 0:E.code),value:T,onChange:e=>f(e.target.value)}))))},PropertyMarketValue:e=>{var o;const{t:i,config:a,onSelect:r,userType:u,formData:s,setError:c,clearErrors:p,errors:m}=e,[v,E]=n.useState(null==s||null===(o=s[a.key])||void 0===o?void 0:o.marketValue);n.useEffect(()=>{"employee"===u&&(v?null!=m&&m[a.key]&&p(a.key):c(a.key,{type:"Required"}),_())},[v]);const _=()=>{r(a.key,{...null==s?void 0:s[a.key],marketValue:v})};return"employee"===u?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},i("PT_MUTATION_MARKET_VALUE")+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{type:"number",min:0,onChange:e=>E(e.target.value),value:v})))):l.createElement(l.Fragment,null,l.createElement(d,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:i,config:a,onSelect:_,onSkip:()=>{},isDisabled:!v},l.createElement("div",{className:"field-container"},l.createElement("span",{className:"citizen-card-input citizen-card-input--front"},"₹"),l.createElement(t.TextInput,{type:"number",min:0,onChange:e=>E(e.target.value),value:v}))))},PTReasonForTransfer:e=>{var o;const{t:i,config:a,onSelect:r,userType:u,formData:s,setError:c,clearErrors:p,errors:m}=e,{data:v}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","ReasonForTransfer",{}),[E,_]=n.useState([]);n.useEffect(()=>{if(v){let e=v.PropertyTax.ReasonForTransfer.map(e=>({...e,i18nKey:"PROPERTYTAX_REASONFORTRANSFER_"+e.code}));_(e)}},[v]);const[T,f]=n.useState(null==s||null===(o=s[a.key])||void 0===o?void 0:o.reasonForTransfer),y=()=>{r(a.key,{...null==s?void 0:s[a.key],reasonForTransfer:T})};return n.useEffect(()=>{"employee"===u&&(T?null!=m&&m[a.key]&&p(a.key):c(a.key,{type:"Required"}),y())},[T]),"employee"===u?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},i("PT_MUTATION_TRANSFER_REASON")+" *"),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{t:i,option:E,optionKey:"i18nKey",select:f,selected:T})))):l.createElement(l.Fragment,null,l.createElement(d,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:i,config:a,onSelect:y,onSkip:()=>{},isDisabled:!T},l.createElement("div",null,l.createElement(t.RadioOrSelect,{t:i,optionKey:"i18nKey",isMandatory:a.isMandatory,options:E,onSelect:f,selectedOption:T,optionCardStyles:{maxHeight:"50vh",overflow:"auto",zIndex:100}}))))},PTRegistrationDocument:e=>{var o,i,a;const{t:r,config:u,onSelect:s,userType:c,formData:p,setError:m,clearErrors:v,errors:E}=e,[_,T]=n.useState(null==p||null===(o=p[u.key])||void 0===o?void 0:o.documentNumber),[f,y]=n.useState(null==p||null===(i=p[u.key])||void 0===i?void 0:i.documentValue),[S,g]=n.useState(null==p||null===(a=p[u.key])||void 0===a?void 0:a.documentDate),[P,A]=n.useState(null),N=e=>{A(null);let t=(new Date).getFullYear()+"-"+((new Date).getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+"-"+(new Date).getDate().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});new Date(e).getTime()<=new Date(t).getTime()?g(e):A("PT_DOCUMENT_DATE_ERROR_MESSAGE")},O=()=>{s(u.key,{...null==p?void 0:p[u.key],documentNumber:_,documentValue:f,documentDate:S})};return n.useEffect(()=>{var e;"employee"!==c||null!=E&&E[u.key]||!P?P||"invalid"!==(null==E||null===(e=E[u.key])||void 0===e?void 0:e.type)||v(u.key):m(u.key,{type:"invalid"})},[P]),n.useEffect(()=>{var e;"employee"===c&&(S&&_&&f?"Required"===(null==E||null===(e=E[u.key])||void 0===e?void 0:e.type)&&v(u.key):m(u.key,{type:"Required"}),O())},[_,f,S]),"employee"===c?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},r("PT_MUTATION_DOCUMENT_NO")+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{type:"number",min:0,value:_,onChange:e=>T(e.target.value)}))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},r("PT_MUTATION_DOCUMENT_VALUE")+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{type:"number",min:0,value:f,onChange:e=>y(e.target.value)}))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},r("PT_MUTATION_DOCUMENT_ISSUE_DATE")+" *"),l.createElement("div",{className:"field"},l.createElement(t.DatePicker,{max:(new Date).toLocaleDateString(),date:S,onChange:N}))),P?l.createElement(t.CardLabelError,{style:{marginLeft:"30%"}},r(P)):null):l.createElement(l.Fragment,null,l.createElement(d,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:r,config:u,onSelect:O,onSkip:()=>{},isDisabled:!(_&&f&&S)},l.createElement(t.CardLabel,null,r("PT_MUTATION_DOCUMENT_NO")),l.createElement(t.TextInput,{type:"number",min:0,value:_,onChange:e=>T(e.target.value)}),l.createElement(t.CardLabel,null,r("PT_MUTATION_DOCUMENT_VALUE")),l.createElement(t.TextInput,{type:"number",min:0,value:f,onChange:e=>y(e.target.value)}),l.createElement(t.CardLabel,null,r("PT_MUTATION_DOCUMENT_ISSUE_DATE")),l.createElement(t.DatePicker,{max:(new Date).toLocaleDateString(),date:S,onChange:N,style:{maxWidth:540}}),P?l.createElement(t.CardLabelError,null,r(P)):null))},UnderStateAquire:e=>{var o,i;let{...a}=e;const{t:r,config:u,onSelect:s,userType:c,formData:p,setError:m,clearErrors:v,errors:E}=a,[_,T]=n.useState(null==p||null===(o=p[u.key])||void 0===o?void 0:o.isPropertyUnderGovtPossession),[f,y]=n.useState(null==p||null===(i=p[u.key])||void 0===i?void 0:i.govtAcquisitionDetails);n.useEffect(()=>{"NO"===(null==_?void 0:_.code)&&null!=f&&f.length&&y(""),"employee"===c&&(_?null!=E&&E[u.key]&&v(u.key):m(u.key,{type:"Required"}),S())},[_,f]);const S=()=>{s(u.key,{...null==p?void 0:p[u.key],isPropertyUnderGovtPossession:_,govtAcquisitionDetails:f})};return"employee"===c?l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"}},l.createElement("div",{className:"field",style:{width:"55%"}},l.createElement(t.CheckBox,{label:r("PT_MUTATION_STATE_ACQUISITION")+"*",name:"isPropertyUnderGovtPossession",onChange:function(e){T(1==e.target.checked?{code:"YES"}:{code:"NO"})},checked:"YES"===(null==_?void 0:_.code),style:{paddingBottom:"10px",paddingTop:"3px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#0b0c0c"}}))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"},className:"card-label-smaller"},r("PT_MUTATION_GOVT_ACQUISITION_DETAILS")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{disable:"YES"!==(null==_?void 0:_.code),value:f,onChange:e=>y(e.target.value)})))):l.createElement(l.Fragment,null,l.createElement(d,{currentStep:2,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{t:r,config:u,onSelect:S,onSkip:()=>{},isDisabled:!(null!=_&&_.code)},l.createElement(t.RadioButtons,{t:r,optionsKey:"i18nKey",isMandatory:u.isMandatory,options:[{code:"YES"},{code:"NO"}],selectedOption:_,onSelect:e=>{T(e)},labelKey:"PT_MUTATION_STATE_ACQUISITION",isDependent:!0}),l.createElement(t.CardLabel,null,r("PT_MUTATION_GOVT_ACQUISITION_DETAILS")),l.createElement(t.TextInput,{disable:"YES"!==(null==_?void 0:_.code),value:f,onChange:e=>y(e.target.value)})))},TransferProof:e=>{var o,a,r;let{t:u,config:s,onSelect:p,formData:m}=e;const{pathname:v}=i.useLocation();v.includes("property-mutation");let E=window.location.href.split("/").pop();const[_,T]=n.useState((null==m||null===(o=m[s.key])||void 0===o?void 0:o.fileStoreId)||null),[f,y]=n.useState(null),[S,g]=n.useState(null),[P,A]=(Digit.ULBService.getCurrentUlb(),n.useState((null==m||null===(a=m[s.key])||void 0===a?void 0:a.documentType)||null));let N=[];Digit.ULBService.getCurrentTenantId();const O=Digit.ULBService.getStateId(),{data:I}=Digit.Hooks.pt.useMDMS(O,"PropertyTax","MutationDocuments"),h=null==I||null===(r=I.PropertyTax)||void 0===r?void 0:r.MutationDocuments,C=Array.isArray(h)&&h.filter(e=>e.code.includes("OWNER.TRANSFERREASONDOCUMENT"));var R;return C.length>0&&(N=null===(R=C[0])||void 0===R?void 0:R.dropdownData.filter(e=>{var t,n;return e.code.includes(null==m||null===(t=m.additionalDetails)||void 0===t||null===(n=t.reasonForTransfer)||void 0===n?void 0:n.code)}),N.forEach(e=>{e.i18nKey=M(e.code,".","_")})),n.useEffect(()=>{!function(){try{g(null);const e=function(){if(f){const e=function(){if(f.size>=2e6)g(u("PT_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("property-upload",f,Digit.ULBService.getStateId())).then(function(e){var t,n,l,o;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?T(null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId):g(u("PT_FILE_UPLOAD_ERROR"))})},function(){});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[f]),l.createElement(l.Fragment,null,l.createElement(d,{currentStep:3,flow:"PT_MUTATE"}),l.createElement(t.FormStep,{config:s,onSelect:()=>{p(s.key,{fileStoreId:_,documentType:P},"",E)},onSkip:()=>p(),t:u,isDisabled:!_||!P||S},l.createElement(t.CardLabelDesc,null,u("PT_UPLOAD_RESTRICTIONS_TYPES")),l.createElement(t.CardLabelDesc,null,u("PT_UPLOAD_RESTRICTIONS_SIZE")),l.createElement(t.CardLabel,null,""+u("PT_CATEGORY_DOCUMENT_TYPE")),l.createElement(t.Dropdown,{t:u,isMandatory:!1,option:N,selected:P,optionKey:"i18nKey",select:function(e){A(e)},placeholder:u("PT_MUTATION_SELECT_DOC_LABEL")}),l.createElement(t.UploadFile,{id:"ptm-doc",extraStyleName:"propertyCreate",accept:".jpg,.png,.pdf",onUpload:function(e){y(e.target.files[0])},onDelete:()=>{T(null)},message:_?"1 "+u("PT_ACTION_FILEUPLOADED"):u("PT_ACTION_NO_FILEUPLOADED"),error:S}),S?l.createElement("div",{style:{height:"20px",width:"100%",fontSize:"20px",color:"red",marginTop:"5px"}},S):"",l.createElement("div",{style:{disabled:"true",height:"20px",width:"100%"}})))},UpdateNumber:e=>{var o,i,r,u;let{showPopup:s,t:d,onValidation:p,mobileNumber:m,name:v,UpdateNumberConfig:E}=e;const _=Digit.ULBService.getStateId(),[T,f]=n.useReducer(hn,{...In,name:v,mobileNumber:m}),y=null===(o=Digit)||void 0===o||null===(i=o.ComponentRegistryService)||void 0===i?void 0:i.getComponent("SelectOtp"),S=n.useCallback(function(e){try{f({type:"resettoast"});let t=(null==E?void 0:E.invalidNumber)===(null==e?void 0:e.mobileNumber)&&"PTUPNO_INVALIDNO_HEADER";return t=(null==e?void 0:e.mobileNumber)===T.mobileNumber?"PT_SEC_SAME_NUMBER":t,Promise.resolve(function(){if(t)f({type:"warning",value:t});else{const t={mobileNumber:null==e?void 0:e.mobileNumber,tenantId:_,userType:"CITIZEN"},n=function(){if(0==T.otpSentTo)return Promise.resolve(Cn({otp:{...t,...On}},_)).then(function(n){let[l,o]=n;const i=function(){if(o)return Promise.resolve(Cn({otp:{...t,name:null==T?void 0:T.name,...Nn}},_)).then(function(t){let[n,l]=t;f(l?{type:"error",value:l}:{type:"otpsent",value:null==e?void 0:e.mobileNumber,isNewUser:!0})});f({type:"otpsent",value:null==e?void 0:e.mobileNumber})}();if(i&&i.then)return i.then(function(){})});g(e,e=>{f({type:"success",value:"PT_MOBILE_NUM_UPDATED_SUCCESS"})})}();if(n&&n.then)return n.then(function(){})}}())}catch(e){return Promise.reject(e)}},[T]),g=function(e,t){try{return Promise.resolve(c(function(){f({type:"verifyotp"});const{mobileNumber:n,otp:l}=e,o=null!=T&&T.isNewUser?Promise.resolve(Digit.UserService.registerUser({name:null==T?void 0:T.name,username:n,otpReference:l,tenantId:_},_)).then(function(n){let{...l}=n;p&&p(e,t)}):Promise.resolve(Digit.UserService.authenticate({username:n,password:l,tenantId:_,userType:"CITIZEN"})).then(function(n){let{...l}=n;p&&p(e,t)});if(o&&o.then)return o.then(function(){})},function(){f({type:"verifiedotp"})}))}catch(e){return Promise.reject(e)}},P=n.useCallback(function(){try{const e={mobileNumber:null==T?void 0:T.otpSentTo,tenantId:_,userType:"CITIZEN"},t=null!=T&&T.isNewUser?Promise.resolve(Cn({otp:{...e,...Nn}},_)).then(function(){}):Promise.resolve(Cn({otp:{...e,...On}},_)).then(function(){});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[T]),{register:A,control:N,handleSubmit:O,getValues:I,formState:h}=a.useForm({defaultValues:{mobileNumber:"",otp:""}});return l.createElement("div",{className:"popup-module updatePropertyNumber"},l.createElement("div",{className:"popup-close-icon",onClick:()=>s(!1)},l.createElement(t.CloseSvg,null)),l.createElement(t.Header,null,d("PTUPNO_HEADER")),l.createElement(t.SearchForm,{onSubmit:S,handleSubmit:O},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:d("PTUPNO_OWNER_NAME"),text:""+((null==T?void 0:T.name)||d("CS_NA"))}),l.createElement(t.Row,{label:d("PTUPNO_CURR_NO"),text:""+((null==T?void 0:T.mobileNumber)||d("CS_NA"))}),l.createElement(t.CardLabel,{style:{marginBottom:"8px"}},d("PT_UPDATE_NEWNO")),l.createElement(t.MobileNumber,{className:"field pt-update-no-field",name:"mobileNumber",inputRef:A({value:I("mobileNumber"),shouldUnregister:!0,required:"MANDATORY_MOBILE",minLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},maxLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}}),disable:(null==T?void 0:T.otpSentTo)&&!0}),l.createElement(t.CardLabelError,{style:{marginTop:"-10px"}},d(null==h||null===(r=h.errors)||void 0===r||null===(u=r.mobileNumber)||void 0===u?void 0:u.message)),(null==T?void 0:T.otpSentTo)&&l.createElement(a.Controller,{control:N,name:"otp",rules:{required:"MANDATORY_OTP",minLength:{value:6,message:"CORE_COMMON_OTP_ERROR"}},render:(e,t)=>l.createElement(y,{userType:"employee",config:{header:"OTPVERIFICATION",cardText:"ENTEROTP",nextText:"Next",submitBarLabel:"Next"},onOtpChange:t=>{e.onChange(t)},onResend:P,error:!T.invalid,t:d,otp:e.value})})),T.showToast&&l.createElement(t.Toast,{error:T.error,warning:T.warning,label:d(T.message),onClose:()=>{f({type:"resettoast"})}}),l.createElement(t.SubmitBar,{label:d(null!=T&&T.otpSentTo?"PTUPNO_VERUPD_NO":"PTUPNO_SENDOTP"),submit:!0,disabled:T.disable})))},EmployeeUpdateOwnerNumber:e=>{let{t:o,onValidation:i,mobileNumber:r,name:s,UpdateNumberConfig:d}=e;const[p,m]=n.useReducer(bn,{...Rn,name:s,mobileNumber:r}),[v,E]=n.useState(null),[_,T]=n.useState(null),[f,y]=n.useState(null);function S(e){var t,n;null!=e&&null!==(t=e.target)&&void 0!==t&&null!==(n=t.files)&&void 0!==n&&n[0]?E({[e.target.id]:e.target.files[0]}):E(null)}n.useEffect(()=>{!function(){try{y(null);const e=function(){if(v){var e;let t=null===(e=Object.keys(v))||void 0===e?void 0:e[0];const n=function(){if(v[t].size>=5242880)y(o("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{const e=c(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",v[t],Digit.ULBService.getStateId())).then(function(e){var n,l;(null==e||null===(n=e.data)||void 0===n||null===(l=n.files)||void 0===l?void 0:l.length)>0?T(n=>{var l,o;return{...n,[t]:null==e||null===(l=e.data)||void 0===l||null===(o=l.files[0])||void 0===o?void 0:o.fileStoreId}}):y(o("CS_FILE_UPLOAD_ERROR"))})},function(){y(o("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(n&&n.then)return n.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[v]);const g=n.useCallback(function(e){try{m({type:"resettoast"});let t=(null==d?void 0:d.invalidNumber)===(null==e?void 0:e.mobileNumber)&&"PTUPNO_INVALIDNO_HEADER";return t=(null==e?void 0:e.mobileNumber)===p.mobileNumber?"PT_SEC_SAME_NUMBER":t,t?(m({type:"warning",value:t}),Promise.resolve()):(i&&i(e,e=>{m({type:"success",value:"PT_MOBILE_NUM_UPDATED_SUCCESS"})}),Promise.resolve())}catch(e){return Promise.reject(e)}},[p]),P=(a.useForm({defaultValues:{mobileNumber:""}}),n.useMemo(()=>((e,n,o,i,a)=>{var r;const s=(null==a||null===(r=a.documents)||void 0===r?void 0:r.map(a=>({label:e(a.code),populators:l.createElement("div",{style:{marginBottom:"2rem"}},l.createElement(t.UploadFile,u({id:a.documentType},a.inputProps,{onUpload:n,onDelete:()=>{o(e=>({...e,[null==a?void 0:a.documentType]:null}))},message:null!=i&&i[null==a?void 0:a.documentType]?"1 "+e("HR_ACTION_FILEUPLOADED"):e("HR_ACTION_NO_FILEUPLOADED")})),l.createElement("span",null,e("PT_ATTACH_RESTRICTIONS_SIZE")))})))||[];return[{body:[{label:e("PTUPNO_CURR_NO"),type:"mobileNumber",populators:{name:"mobileNumber",validation:{required:"MANDATORY_MOBILE",minLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},maxLength:{value:10,message:"CORE_COMMON_MOBILE_ERROR"},pattern:{value:/[6789][0-9]{9}/,message:"CORE_COMMON_MOBILE_ERROR"}}}},...s]}]})(o,S,T,_,d),[o,T,_,d]));return l.createElement("div",{className:"popup-module updateNumberEmployee"},l.createElement(t.FormComposer,{config:P,noBoxShadow:!0,inline:!0,submitInForm:!0,onSubmit:e=>g({...e,..._}),label:"ES_COMMON_UPDATE",defaultValues:{mobileNumber:""},formId:"modal-action"},l.createElement("div",null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:o("PTUPNO_OWNER_NAME"),text:""+((null==p?void 0:p.name)||o("CS_NA"))}),l.createElement(t.Row,{label:o("PTUPNO_CURR_NO"),text:""+((null==p?void 0:p.mobileNumber)||o("CS_NA"))})))),p.showToast&&l.createElement(t.Toast,{error:p.error,warning:p.warning,label:o(p.message),onClose:()=>{m({type:"resettoast"})}}))},PropertySearchForm:e=>{let{tenantId:n,t:o,onSubmit:i,onReset:r,searchBy:s,PTSearchFields:d,setSearchBy:c,payload:p}=e;const{register:m,control:v,handleSubmit:E,watch:_,getValues:T,formState:f}=a.useForm({defaultValues:{...p}}),y=_(),S=(null==d?void 0:d[s])||{};return sessionStorage.removeItem("revalidateddone"),l.createElement("div",{className:"PropertySearchForm"},l.createElement(t.SearchForm,{onSubmit:i,className:"pt-property-search",handleSubmit:E},l.createElement(it,{keys:Object.keys(d||{}),searchBy:s,onReset:r,t:o,onSwitch:c}),S&&Object.keys(S).map(e=>{var i,r,s;let d=S[e],c=(null==d?void 0:d.validation)||{};return l.createElement(t.SearchField,{key:e,className:"pt-form-field"},l.createElement("label",null,o(null==d?void 0:d.label),null!=d&&null!==(i=d.validation)&&void 0!==i&&i.required?"*":""),"custom"===(null==d?void 0:d.type)?l.createElement(a.Controller,{name:e,defaultValue:null==y?void 0:y[e],rules:d.validation,control:v,render:(t,o)=>l.createElement(d.customComponent,u({selectLocality:e=>{t.onChange(e)},tenantId:n,selected:null==y?void 0:y[e]},d.customCompProps))}):"number"===(null==d?void 0:d.type)?l.createElement("div",null,l.createElement(t.MobileNumber,{name:"mobileNumber",inputRef:m({value:T(e),shouldUnregister:!0,...c}),type:"number",componentInFront:l.createElement("div",{className:"employee-card-input employee-card-input--front"},"+91")})):l.createElement(t.TextInput,{name:e,type:null==d?void 0:d.type,inputRef:m({value:T(e),shouldUnregister:!0,...c})}),l.createElement(t.CardLabelError,{style:{marginTop:"-10px",marginBottom:"-10px"}},o(null==f||null===(r=f.errors)||void 0===r||null===(s=r[e])||void 0===s?void 0:s.message)))}),l.createElement("div",{className:"pt-search-action"},l.createElement(t.SearchField,{className:"pt-search-action-reset"},l.createElement("p",{style:{color:"#a82227"},onClick:()=>{r({})}},o("ES_COMMON_CLEAR_ALL"))),l.createElement(t.SearchField,{className:"pt-search-action-submit"},l.createElement(t.SubmitBar,{label:o("ES_COMMON_SEARCH"),submit:!0})))))},PropertySearchResults:e=>{var o,a,r,u;let{tenantId:s,t:d,payload:c,showToast:p,setShowToast:m,ptSearchConfig:v}=e;const E=i.useHistory(),[_,T]=n.useState({...c}),[f,y]=n.useState(!1),[S,g]=n.useState(!1),[P,A]=n.useState(null),[N,O]=n.useState(0),{data:I,isLoading:h,error:C,revalidate:R}=Digit.Hooks.pt.usePropertySearchWithDue({tenantId:s,filters:_,configs:{enabled:Object.keys(c).length>0,retry:!1,retryOnMount:!1,staleTime:Infinity}}),b=Digit.Hooks.pt.usePropertyAPI(s,!1),D=null===(o=Digit)||void 0===o||null===(a=o.ComponentRegistryService)||void 0===a?void 0:a.getComponent("EmployeeUpdateOwnerNumber"),{data:L}=Digit.Hooks.useCommonMDMS(Digit.ULBService.getStateId(),"PropertyTax",["UpdateNumber"],{select:e=>{var t,n;return null==e||null===(t=e.PropertyTax)||void 0===t||null===(n=t.UpdateNumber)||void 0===n?void 0:n[0]},retry:!1,enable:!1}),w=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),M=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(w,null)),x=n.useMemo(()=>[{Header:d("PT_COMMON_TABLE_COL_PT_ID"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/employee/pt/ptsearch/property-details/"+t.original.propertyId},t.original.propertyId)))}},{Header:d("PT_COMMON_TABLE_COL_OWNER_NAME"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return rt(""+t.original.owners.map(e=>e.name).join(",")||"")}},{Header:d("ES_INBOX_LOCALITY"),disableSortBy:!0,Cell:e=>{let{row:t}=e;return rt(d(t.original.locality)||"")}},{Header:d("PT_COMMON_TABLE_COL_STATUS_LABEL"),Cell:e=>{var t;let{row:n}=e;return rt(d((null==n||null===(t=n.original)||void 0===t?void 0:t.status)||"NA"))},disableSortBy:!0},{Header:d("PT_AMOUNT_DUE"),Cell:e=>{var t,n;let{row:l}=e;return rt(null!=l&&null!==(t=l.original)&&void 0!==t&&t.due?"₹ "+(null==l||null===(n=l.original)||void 0===n?void 0:n.due):d("PT_NA"))},disableSortBy:!0},{Header:d("ES_SEARCH_ACTION"),disableSortBy:!0,Cell:e=>{var t;let{row:n}=e;return l.createElement("div",null,(null===(t=n.original)||void 0===t?void 0:t.due)>0&&Digit.Utils.didEmployeeHasRole("PT_CEMP")?l.createElement("span",{className:"link"},l.createElement("a",{style:{textDecoration:"none"},onClick:()=>(e=>{let t=!1,{owners:n}=e;n=n&&n.filter(e=>"ACTIVE"==e.status),n&&n.map((e,n)=>{let l=e.mobileNumber;(l==(null==L?void 0:L.invalidNumber)||!l.match(null==L?void 0:L.invalidPattern)&&l==JSON.parse(getUserInfo()).mobileNumber)&&(t=!0,O(n))}),t?(y(!0),A(e)):(R(),E.push("/digit-ui/employee/payment/collect/PT/"+(null==e?void 0:e.propertyId)))})(n.original)},d("ES_PT_COLLECT_TAX"))):null)}}],[]);let U=window.Digit.Utils.browser.isMobile();if(h)return p&&m(null),l.createElement(t.Loader,null);var F,B,k,H;if(C)return!p&&m({error:!0,label:(null==C||null===(F=C.response)||void 0===F||null===(B=F.data)||void 0===B||null===(k=B.Errors)||void 0===k||null===(H=k[0])||void 0===H?void 0:H.code)||C}),null;const Y=n.memo(Digit.ComponentRegistryService.getComponent("PTEmptyResultInbox")),W=Object.values((null==I?void 0:I.FormattedData)||{})||[];return null!=v&&v.ptSearchCount&&c.locality&&W&&W.length>v.ptSearchCount?(!p&&m({error:!0,label:"PT_MODIFY_SEARCH_CRITERIA"}),null):l.createElement(l.Fragment,null,0===(null==I||null===(r=I.Properties)||void 0===r?void 0:r.length)?l.createElement(Y,{data:!0}):U?l.createElement(t.DetailsCard,{data:function(e){var t;return void 0===e&&(e=[]),null===(t=e)||void 0===t?void 0:t.map(e=>{const t={};return x.forEach(n=>{n.Cell&&(t[n.Header]=n.Cell({row:{original:e}}))}),t})}(W),t:d}):l.createElement(t.Table,{t:d,data:W,totalRecords:null==I||null===(u=I.Properties)||void 0===u?void 0:u.length,columns:x,getCellProps:e=>({style:{padding:"20px 18px",fontSize:"16px"}}),manualPagination:!1,disableSort:!0}),f?l.createElement(t.Modal,{headerBarMain:l.createElement("h1",{className:"heading-m"},d(S?"PTUPNO_HEADER":"PT_INVALID_MOBILE_NO")),headerBarEnd:l.createElement(M,{onClick:()=>{y(!1),g(!1)}}),hideSubmit:!0,isDisabled:!1,popupStyles:{width:"50%",marginTop:"auto"}},S&&l.createElement(D,{showPopup:y,name:null==S?void 0:S.name,UpdateNumberConfig:L,mobileNumber:null==S?void 0:S.mobileNumber,t:d,onValidation:(e,t)=>{let n={...P};n.owners[null==S?void 0:S.index].mobileNumber=e.mobileNumber,n.creationReason="UPDATE",n.workflow=null;let l={...e};delete l.mobileNumber,n.documents=[...n.documents,...Object.keys(l).map(e=>({documentType:e,documentUid:l[e],fileStoreId:l[e]}))],b.mutate({Property:n},{onError:()=>{},onSuccess:function(e){try{return t(),setTimeout(()=>{window.location.reload()},3e3),Promise.resolve()}catch(e){return Promise.reject(e)}}})}}),!S&&l.createElement(at,{propertyId:null==P?void 0:P.propertyId,userType:"employee",skipNContinue:()=>{E.push("/digit-ui/employee/payment/collect/PT/"+(null==P?void 0:P.propertyId))},updateMobileNumber:()=>{var e,t;const n=N;y(!0),g({name:null==P||null===(e=P.owners[n])||void 0===e?void 0:e.name,mobileNumber:null==P||null===(t=P.owners[n])||void 0===t?void 0:t.mobileNumber,index:n})}})):null)},PTMyPayments:Q,SelectPTUnits:dt,PTNewApplication:()=>{const e=Digit.ULBService.getCurrentTenantId(),a=Digit.Hooks.pt.useTenants(),{t:r}=o.useTranslation(),[u,s]=n.useState(!1),d=i.useHistory(),[c,p,m]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1),[v,E,_]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",{}),{data:T,isLoading:f}=Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","CommonFieldsConfig");if(n.useEffect(()=>{p(!1),_()},[]),f)return l.createElement(t.Loader,null);const y=T||ct;return l.createElement(t.FormComposer,{heading:r("ES_TITLE_NEW_PROPERTY_APPLICATION"),isDisabled:!u,label:r("ES_COMMON_APPLICATION_SUBMIT"),config:y.map(e=>({...e,body:e.body.filter(e=>!e.hideInEmployee)})),fieldStyle:{marginRight:0},onSubmit:t=>{var n,l,o,i,a,r,u,s,c,p,m,v,E;const _={tenantId:e,address:{...null==t?void 0:t.address,city:null==t||null===(n=t.address)||void 0===n||null===(l=n.city)||void 0===l?void 0:l.name,locality:{code:null==t||null===(o=t.address)||void 0===o||null===(i=o.locality)||void 0===i?void 0:i.code,area:null==t||null===(a=t.address)||void 0===a||null===(r=a.locality)||void 0===r?void 0:r.area}},usageCategory:null==t?void 0:t.usageCategoryMajor.code,usageCategoryMajor:null==t||null===(u=t.usageCategoryMajor)||void 0===u?void 0:u.code.split(".")[0],usageCategoryMinor:(null==t||null===(s=t.usageCategoryMajor)||void 0===s?void 0:s.code.split(".")[1])||null,landArea:Number(null==t?void 0:t.landarea),superBuiltUpArea:Number(null==t?void 0:t.landarea),propertyType:null==t||null===(c=t.PropertyType)||void 0===c?void 0:c.code,noOfFloors:Number(null==t?void 0:t.noOfFloors),ownershipCategory:null==t||null===(p=t.ownershipCategory)||void 0===p?void 0:p.code,owners:null==t?void 0:t.owners.map(e=>{var n,l,o;let i,{name:a,mobileNumber:r,designation:u,altContactNumber:s,emailId:d,correspondenceAddress:c,isCorrespondenceAddress:p,ownerType:m,fatherOrHusbandName:v}=e;var E,_;i=null!=t&&null!==(n=t.ownershipCategory)&&void 0!==n&&n.code.includes("INDIVIDUAL")?{name:a,mobileNumber:r,correspondenceAddress:c,permanentAddress:null==t||null===(E=t.address)||void 0===E||null===(_=E.locality)||void 0===_?void 0:_.name,relationship:null==e?void 0:e.relationship.code,fatherOrHusbandName:v,gender:null==e?void 0:e.gender.code,emailId:d}:{name:a,mobileNumber:r,designation:u,altContactNumber:s,emailId:d,correspondenceAddress:c,isCorrespondenceAddress:p,ownerType:m},null!==(l=i)&&void 0!==l&&l.correspondenceAddress||(i.correspondenceAddress="");const T={...i,ownerType:null==e||null===(o=e.ownerType)||void 0===o?void 0:o.code};if("NONE"!==T.ownerType){var f,y;const{documentType:n,documentUid:l}=null==e?void 0:e.documents;T.documents=[{documentUid:l,documentType:n.code,fileStoreId:l},null==t||null===(f=t.documents)||void 0===f||null===(y=f.documents)||void 0===y?void 0:y.find(e=>{var t;return null===(t=e.documentType)||void 0===t?void 0:t.includes("OWNER.IDENTITYPROOF")})]}else{var S,g;T.documents=[null==t||null===(S=t.documents)||void 0===S||null===(g=S.documents)||void 0===g?void 0:g.find(e=>{var t;return null===(t=e.documentType)||void 0===t?void 0:t.includes("OWNER.IDENTITYPROOF")})]}return T}),channel:"CFC_COUNTER",creationReason:"CREATE",source:"MUNICIPAL_RECORDS",units:"VACANT"!==(null==t||null===(m=t.PropertyType)||void 0===m?void 0:m.code)?null==t?void 0:t.units:[],documents:null==t||null===(v=t.documents)||void 0===v?void 0:v.documents,applicationStatus:"CREATE"};var T,f,y,S,g,P;null!=t&&null!==(E=t.ownershipCategory)&&void 0!==E&&E.code.includes("INDIVIDUAL")||(_.institution={name:null===(T=t.owners)||void 0===T?void 0:T[0].institution.name,type:null===(f=t.owners)||void 0===f||null===(y=f[0].institution.type)||void 0===y||null===(S=y.code)||void 0===S?void 0:S.split(".")[1],designation:null===(g=t.owners)||void 0===g?void 0:g[0].designation,nameOfAuthorizedPerson:null===(P=t.owners)||void 0===P?void 0:P[0].name,tenantId:Digit.ULBService.getCurrentTenantId()}),d.replace("/digit-ui/employee/pt/response",{Property:_})},defaultValues:{},onFormValueChange:(e,t,n)=>{var l,o,i,r,u,d;s(!Object.keys(n.errors).length),1===Object.keys(n.errors).length&&"arv"===(null===(l=n.errors)||void 0===l||null===(o=l.units)||void 0===o?void 0:o.message)&&s(!(null!=t&&t.units.some(e=>"RENTED"===e.occupancyType&&!e.arv))),null!=t&&null!==(i=t.ownershipCategory)&&void 0!==i&&null!==(r=i.code)&&void 0!==r&&r.includes("MULTIPLEOWNERS")&&(null==t||null===(u=t.owners)||void 0===u?void 0:u.length)<2&&s(!1);let c=null==t||null===(d=t.address)||void 0===d?void 0:d.pincode;c&&(Digit.Utils.getPattern("Pincode").test(c)||s(!1),(null==a?void 0:a.find(e=>{var t;return null===(t=e.pincode)||void 0===t?void 0:t.find(e=>e.toString()===c)}))||s(!1))}})},ApplicationDetails:Pi,PTPropertyDetails:()=>{var e,a,r,u,s,d;const{t:c}=o.useTranslation(),p=Digit.ULBService.getCurrentTenantId(),{id:m}=i.useParams(),[v,E]=n.useState(null),[_,T]=n.useState({}),[f,y]=n.useState(!1),[S,g]=n.useState(!1),[P,A]=n.useState(!1),N=Digit.UserService.hasAccess(["PT_CEMP"])||!1,[O,I]=n.useState("PT.CREATE"),h=i.useHistory();sessionStorage.setItem("propertyIdinPropertyDetail",m);const[C,R]=l.useState(window.innerWidth<=780);let{isLoading:b,data:D}=Digit.Hooks.pt.useApplicationDetail(c,p,m);const{data:L,isLoading:w,revalidate:M}=Digit.Hooks.useFetchBillsForBuissnessService({businessService:"PT",consumerCode:m}),{data:x}=Digit.Hooks.pt.usePropertySearch({tenantId:p,filters:{propertyIds:m,audit:!0}},{enabled:f,select:e=>{var t;return null===(t=e.Properties.filter(e=>"ACTIVE"===e.status))||void 0===t?void 0:t.sort((e,t)=>t.auditDetails.lastModifiedTime-e.auditDetails.lastModifiedTime)}}),U=Digit.Hooks.pt.usePropertyAPI(p,!1),{data:F}=Digit.Hooks.useCommonMDMS(Digit.ULBService.getStateId(),"PropertyTax",["UpdateNumber"],{select:e=>{var t,n;return null==e||null===(t=e.PropertyTax)||void 0===t||null===(n=t.UpdateNumber)||void 0===n?void 0:n[0]},retry:!1,enable:!1});l.useEffect(()=>{const e=()=>{window.innerWidth<=780&&!C?R(!0):window.innerWidth>780&&C&&R(!1)};return window.addEventListener("resize",()=>{e()}),()=>{window.removeEventListener("resize",()=>{e()})}}),n.useEffect(()=>{var e;D&&!f&&(T(j.cloneDeep(D)),"ACTIVE"!==(null==D||null===(e=D.applicationData)||void 0===e?void 0:e.status)&&y(!0))},[D]),n.useEffect(()=>{if(f&&null!=x&&x.length&&Object.keys(_).length){var e;const t=null==x?void 0:x[0];if(t.owners=null==t||null===(e=t.owners)||void 0===e?void 0:e.filter(e=>"ACTIVE"==e.status),t){let e=null==_?void 0:_.transformToAppDetailsForEmployee({property:t,t:c});T({..._,applicationDetails:e})}}},[x,f,D]);let B=Digit.Hooks.useWorkflowDetails({tenantId:(null==D?void 0:D.tenantId)||p,id:null==D||null===(e=D.applicationData)||void 0===e?void 0:e.acknowldgementNumber,moduleCode:"PT.UPDATE",role:"PT_CEMP"});var k,H,Y,W,K,V,z,G,X,q,$,Z,Q,J;if(n.useEffect(()=>{var e,t,n,l;null!==(e=B)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.applicationBusinessService&&I(null===(n=B)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.applicationBusinessService)},[B.data]),null!=_&&_.applicationDetails&&(_.applicationDetails=null==_||null===(k=_.applicationDetails)||void 0===k?void 0:k.map(e=>{var n;return"PT_OWNERSHIP_INFO_SUB_HEADER"===e.title?("ACTIVE"===(null==D||null===(n=D.applicationData)||void 0===n?void 0:n.status)&&e.additionalDetails.owners.map((e,n)=>{e.values.map(e=>{"PT_OWNERSHIP_INFO_MOBILE_NO"==e.title&&(e.textStyle={display:"flex",wordBreak:"revert"},e.caption=l.createElement("span",{onClick:()=>{var e,t,l,o;g(e=>!e),A({name:null==_||null===(e=_.applicationData)||void 0===e||null===(t=e.owners[n])||void 0===t?void 0:t.name,mobileNumber:null==_||null===(l=_.applicationData)||void 0===l||null===(o=l.owners[n])||void 0===o?void 0:o.mobileNumber,index:n})},style:{cursor:"pointer",display:"inline-flex",paddingLeft:"20px"}},l.createElement(t.EditIcon,null)))})}),{...e,Component:()=>l.createElement(t.LinkLabel,{onClick:()=>{g(e=>!e)},style:{display:"inline",marginLeft:"25px"}},c("PT_VIEW_HISTORY"))}):e})),n.useEffect(()=>{var e,n,o,i,a,r;return"PT_TOTAL_DUES"!==(null==_||null===(e=_.applicationDetails)||void 0===e||null===(n=e[0])||void 0===n||null===(o=n.values)||void 0===o?void 0:o[1].title)&&(null==_||null===(i=_.applicationDetails)||void 0===i||i.unshift({title:" ",asSectionHeader:!0,belowComponent:()=>l.createElement(t.LinkLabel,{onClick:()=>h.push({pathname:"/digit-ui/employee/pt/payment-details/"+m}),style:C?{marginTop:"15px",marginLeft:"0px"}:{marginTop:"15px"}},c("PT_VIEW_PAYMENT")),values:[{title:"PT_PROPERTY_PTUID",value:m},{title:"PT_TOTAL_DUES",value:null!=L&&null!==(a=L.Bill[0])&&void 0!==a&&a.totalAmount?"₹ "+(null==L||null===(r=L.Bill[0])||void 0===r?void 0:r.totalAmount):"N/A"}]})),()=>{var e,t,n;"PT_TOTAL_DUES"==(null==_||null===(e=_.applicationDetails)||void 0===e||null===(t=e[0])||void 0===t||null===(n=t.values)||void 0===n?void 0:n[1].title)&&"done"!==sessionStorage.getItem("revalidateddone")&&(null==_||_.applicationDetails.shift(),sessionStorage.setItem("revalidateddone","done"),M())}},[L,_]),"ACTIVE"===(null==D||null===(a=D.applicationData)||void 0===a?void 0:a.status)&&(B={...B,data:{...null===(H=B)||void 0===H?void 0:H.data,actionState:{nextActions:N?[{action:"ASSESS_PROPERTY",forcedName:"PT_ASSESS",showFinancialYearsModal:!0,customFunctionToExecute:e=>{delete e.customFunctionToExecute,h.replace({pathname:"/digit-ui/employee/pt/ptsearch/assessment-details/"+m,state:{...e}})},tenantId:Digit.ULBService.getStateId()},{action:null!=L&&null!==(Y=L.Bill[0])&&void 0!==Y&&Y.totalAmount?"PT_TOTALDUES_PAY":"MUTATE_PROPERTY",forcedName:"PT_OWNERSHIP_TRANSFER",AmountDueForPay:null==L||null===(W=L.Bill[0])||void 0===W?void 0:W.totalAmount,isWarningPopUp:!(null==L||null===(K=L.Bill[0])||void 0===K||!K.totalAmount),redirectionUrl:{pathname:null!=L&&null!==(V=L.Bill[0])&&void 0!==V&&V.totalAmount?"/digit-ui/employee/payment/collect/PT/"+m:"/digit-ui/employee/pt/property-mutate-docs-required/"+m,state:null},tenantId:Digit.ULBService.getStateId()}]:[]}}}),"ACTIVE"===(null==_||null===(r=_.applicationData)||void 0===r?void 0:r.status)&&N&&("PT.CREATE"==O&&I("PT.UPDATE"),null!==(z=B)&&void 0!==z&&null!==(G=z.data)&&void 0!==G&&null!==(X=G.actionState)&&void 0!==X&&null!==(q=X.nextActions)&&void 0!==q&&q.find(e=>"UPDATE"===e.action)||null===($=B)||void 0===$||null===(Z=$.data)||void 0===Z||null===(Q=Z.actionState)||void 0===Q||null===(J=Q.nextActions)||void 0===J||J.push({action:"UPDATE",redirectionUrl:{pathname:"/digit-ui/employee/pt/modify-application/"+m,state:{workflow:{action:"OPEN",moduleName:"PT",businessService:"PT.UPDATE"}}},tenantId:Digit.ULBService.getStateId()})),w)return l.createElement(t.Loader,null);const ee=null===(u=Digit)||void 0===u||null===(s=u.ComponentRegistryService)||void 0===s?void 0:s.getComponent("EmployeeUpdateOwnerNumber");return l.createElement("div",null,l.createElement(t.Header,null,c("PT_PROPERTY_INFORMATION")),l.createElement(Si,{applicationDetails:_,isLoading:b,isDataLoading:b,applicationData:null==_?void 0:_.applicationData,mutate:null,workflowDetails:"ACTIVE"===(null==_||null===(d=_.applicationData)||void 0===d?void 0:d.status)?B:{},businessService:"PT",showToast:v,setShowToast:E,closeToast:()=>{E(null)},showTimeLine:!1,timelineStatusPrefix:"ES_PT_COMMON_STATUS_",forcedActionPrefix:"WF_EMPLOYEE_PT.CREATE"}),S?l.createElement(t.Modal,{headerBarMain:l.createElement("h1",{className:"heading-m"},c(P?"PTUPNO_HEADER":"PT_OWNER_HISTORY")),headerBarEnd:l.createElement(Oi,{onClick:()=>{g(!1),A(!1)}}),hideSubmit:!0,isDisabled:!1,popupStyles:P?{width:C?"473px":"50%"}:{width:"75%"}},P&&l.createElement(ee,{showPopup:g,name:null==P?void 0:P.name,UpdateNumberConfig:F,mobileNumber:null==P?void 0:P.mobileNumber,t:c,onValidation:(e,t)=>{let n={...null==_?void 0:_.applicationData};n.owners[null==P?void 0:P.index].mobileNumber=e.mobileNumber,n.creationReason="UPDATE",n.workflow=null;let l={...e};delete l.mobileNumber,n.documents=[...n.documents,...Object.keys(l).map(e=>({documentType:e,documentUid:l[e],fileStoreId:l[e]}))],U.mutate({Property:n},{onError:{},onSuccess:function(e){try{return t(),setTimeout(()=>{window.location.reload()},3e3),Promise.resolve()}catch(e){return Promise.reject(e)}}})}}),!P&&l.createElement(Ai,{propertyId:m,userType:"employee"})):null)},PTAssessmentDetails:()=>{var e,a,u,s,d,c,p,m,v,E,_,T,f,y,S,g,P,A,N,O,I,h,C,R,b,D,L,M,x,U,F;const{t:B}=o.useTranslation(),k=Digit.ULBService.getCurrentTenantId(),{id:H}=i.useParams(),Y=Digit.ULBService.getStateId(),W=i.useLocation(),K=null==W||null===(e=W.state)||void 0===e?void 0:e.Assessment,[V,z]=n.useState(null),G=r.useQueryClient(),X=i.useHistory(),[q,$]=n.useState({}),Z=window.Digit.Utils.browser.isMobile(),[Q,J]=n.useState(!1),[ee,te]=n.useState(null),[ne,le]=n.useState(null),oe=n.useRef(),ie=n.useRef(),ae=n.useRef(),re=n.useRef();let{isLoading:ue,data:se}=Digit.Hooks.pt.useApplicationDetail(B,k,H);const{isLoading:de,mutate:ce}=Digit.Hooks.pt.usePropertyAssessment(k),{isLoading:pe,data:me,mutate:ve}=Digit.Hooks.pt.usePtCalculationEstimate(k),{data:Ee}=Digit.Hooks.pt.usePropertyMDMS(Y,"PropertyTax","ChargeSlabs");let _e;_e||(_e=null==me?void 0:me.Calculation[0]);const Te=Digit.Hooks.useFetchBillsForBuissnessService({businessService:"PT",consumerCode:H,tenantId:k},{enabled:!!H});n.useEffect(()=>{ve({Assessment:K})},[]),n.useEffect(()=>{se&&$(j.cloneDeep(se))},[se]);let fe=Digit.Hooks.useWorkflowDetails({tenantId:(null==se?void 0:se.tenantId)||k,id:null==se||null===(a=se.applicationData)||void 0===a?void 0:a.acknowldgementNumber,moduleCode:"PT",role:"PT_CEMP"});null==q||null===(u=q.applicationDetails)||void 0===u||u.shift(),null==q||null===(s=q.applicationDetails)||void 0===s||s.unshift({title:"PT_ESTIMATE_DETAILS_HEADER",values:[{title:"PT_PROPERTY_PTUID",value:H},{title:"ES_PT_TITLE_BILLING_PERIOD",value:null==W||null===(d=W.state)||void 0===d||null===(c=d.Assessment)||void 0===c?void 0:c.financialYear}],additionalDetails:{taxHeadEstimatesCalculation:null==me?void 0:me.Calculation[0]}});const ye=()=>{z(null)};if(pe||de||null==se||!se.applicationDetails)return l.createElement(t.Loader,null);let Se=null==se||null===(p=se.applicationData)||void 0===p?void 0:p.address;var ge,Pe,Ae,Ne,Oe,Ie,he;Se=null!==(m=Se)&&void 0!==m&&m.doorNo?(null===(ge=Se)||void 0===ge?void 0:ge.doorNo)+","+(null===(Pe=Se)||void 0===Pe||null===(Ae=Pe.locality)||void 0===Ae?void 0:Ae.area)+","+(null===(Ne=Se)||void 0===Ne?void 0:Ne.city):(null===(Oe=Se)||void 0===Oe||null===(Ie=Oe.locality)||void 0===Ie?void 0:Ie.area)+","+(null===(he=Se)||void 0===he?void 0:he.city);const Ce=e=>l.createElement("h1",{className:"heading-m"},e.label),Re=()=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})),be=e=>l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Re,null)),De=e=>{te(e)};return l.createElement("div",null,l.createElement(t.Header,null,B("PT_TX_ASSESSMENT")),l.createElement(Si,{applicationDetails:{applicationDetails:[{title:"PT_ESTIMATE_DETAILS_HEADER",values:[{title:"PT_PROPERTY_PTUID",value:H},{title:"PT_ADDRESS",value:Se},{title:"ES_PT_TITLE_BILLING_PERIOD",value:null==W||null===(v=W.state)||void 0===v||null===(E=v.Assessment)||void 0===E?void 0:E.financialYear},{title:"PT_BILLING_DUE_DATE",value:w(null==Te||null===(_=Te.data)||void 0===_||null===(T=_.Bill)||void 0===T||null===(f=T[0])||void 0===f||null===(y=f.billDetails)||void 0===y||null===(S=y[0])||void 0===S?void 0:S.expiryDate,"PT")||B("CS_NA")}]},{title:"PT_TAX_ESTIMATION_HEADER",additionalDetails:{taxHeadEstimatesCalculation:null==me?void 0:me.Calculation[0]}},{belowComponent:()=>l.createElement(t.LinkLabel,{onClick:()=>{J(!0)},style:Z?{color:"#a82227",marginLeft:"0px"}:{color:"#a82227"}},B("PT_ADD_REBATE_PENALITY"))},{title:"PT_ASSESMENT_INFO_SUB_HEADER",values:[{title:"PT_ASSESMENT_INFO_TYPE_OF_BUILDING",value:(Le=null==se||null===(g=se.applicationData)||void 0===g?void 0:g.propertyType,"PROPERTYTAX_BILLING_SLAB_"+(null==Le?void 0:Le.split(".")[0]))},{title:"PT_ASSESMENT_INFO_USAGE_TYPE",value:(e=>"PROPERTYTAX_BILLING_SLAB_"+e)(null==se||null===(P=se.applicationData)||void 0===P?void 0:P.usageCategory)},{title:"PT_ASSESMENT_INFO_PLOT_SIZE",value:null==se||null===(A=se.applicationData)||void 0===A?void 0:A.landArea},{title:"PT_ASSESMENT_INFO_NO_OF_FLOOR",value:null==se||null===(N=se.applicationData)||void 0===N?void 0:N.noOfFloors}],additionalDetails:{floors:null==se||null===(O=se.applicationData)||void 0===O||null===(I=O.units)||void 0===I||null===(h=I.filter(e=>e.active))||void 0===h||null===(C=h.sort)||void 0===C||null===(R=C.call(h,(e,t)=>e.floorNo-t.floorNo))||void 0===R?void 0:R.map((e,t)=>{var n,l;const o=[{title:B("ES_APPLICATION_DETAILS_UNIT")+" "+(t+1),value:""},{title:"Floor No",value:null==e?void 0:e.floorNo},{title:"PT_ASSESSMENT_UNIT_USAGE_TYPE",value:"PROPERTYTAX_BILLING_SLAB_"+("RESIDENTIAL"!=(null==e?void 0:e.usageCategory)?null==e||null===(n=e.usageCategory)||void 0===n?void 0:n.split(".")[1]:null==e?void 0:e.usageCategory)},{title:"PT_ASSESMENT_INFO_OCCUPLANCY",value:null==e?void 0:e.occupancyType},{title:"PT_FORM2_BUILT_AREA",value:null==e||null===(l=e.constructionDetail)||void 0===l?void 0:l.builtUpArea}];return"RENTED"===e.occupancyType&&o.push({title:"PT_FORM2_TOTAL_ANNUAL_RENT",value:e.arv}),{title:"",values:[{title:"",values:o}]}})}},{belowComponent:()=>{var e,n,o,i,a;return l.createElement("div",{style:{marginTop:"19px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",color:"#0B0C0C",fontSize:"24px"}},B("PT_CALC_DETAILS"),l.createElement("br",null)),l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",color:"#0B0C0C",fontSize:"16px",marginTop:"revert"}},B("PT_CALC_LOGIC_HEADER")),l.createElement(t.CardText,{style:{fontSize:"16px"}},B("PT_CALC_LOGIC")),l.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA"}},l.createElement("div",{className:"row border-none"},l.createElement("h2",null,B("PT_APPLICABLE_CHARGE_SLABS"))),l.createElement(t.StatusTable,null,null==se||null===(e=se.applicationData)||void 0===e||null===(n=e.units)||void 0===n||null===(o=n.filter(e=>e.active))||void 0===o||null===(i=o.sort)||void 0===i||null===(a=i.call(o,(e,t)=>e.floorNo-t.floorNo))||void 0===a?void 0:a.map((e,n)=>{var o,i,a,r;return l.createElement(t.Row,{label:B("PROPERTYTAX_FLOOR_"+(null==e?void 0:e.floorNo))+" "+B("PT_UNIT")+" - "+(n+1),text:(null==Ee?void 0:Ee.PropertyTax)&&(null==Ee||null===(o=Ee.PropertyTax)||void 0===o||null===(i=o.ChargeSlabs)||void 0===i||null===(a=i.filter(t=>t.floorNo==e.floorNo))||void 0===a||null===(r=a[0])||void 0===r?void 0:r.name)})}))))}}]},showTimeLine:!1,isLoading:ue,isDataLoading:ue,applicationData:null==q?void 0:q.applicationData,mutate:null,workflowDetails:G.getQueryData(["PT_ASSESSMENT",H,null==W||null===(b=W.state)||void 0===b||null===(D=b.Assessment)||void 0===D?void 0:D.financialYear])?{...fe,data:{...fe.data,nextActions:[]}}:fe,businessService:"PT",assessmentMutate:ce,ptCalculationEstimateMutate:ve,showToast:V,setShowToast:z,closeToast:ye,timelineStatusPrefix:"ES_PT_COMMON_STATUS_",forcedActionPrefix:"WF_EMPLOYEE_PT.CREATE"}),Q&&l.createElement(t.Modal,{headerBarMain:l.createElement(Ce,{label:B("PT_ADD_REBATE_PENALITY")}),headerBarEnd:l.createElement(be,{onClick:()=>{J(!1),me.Calculation[0]=_e,te(null),le(null)}}),actionCancelLabel:B("PT_CANCEL"),actionCancelOnSubmit:()=>{me.Calculation[0]=_e,te(null),le(null),J(!1)},actionSaveLabel:B("PT_ADD"),actionSaveOnSubmit:()=>function(){var e,t=null==me||null===(e=me.Calculation[0])||void 0===e?void 0:e.totalAmount;const[n,l]=[parseInt(oe.current.value),parseInt(ie.current.value)];if(ee&&n>0)if("Others"!==De.value)if(n<t){var o,i,a=n;me.Calculation[0].taxHeadEstimates[6]={taxHeadCode:"PT_TIME_PENALTY",estimateAmount:(null===(o=me.Calculation[0].taxHeadEstimates[6])||void 0===o?void 0:o.estimateAmount)+n,category:"TAX"},K.additionalDetails={adhocPenalty:a,adhocPenaltyReason:ee.value},me.Calculation[0].totalAmount=(null==me||null===(i=me.Calculation[0])||void 0===i?void 0:i.totalAmount)+n}else alert("Penality cannot exceed total amount");else if(n<t){var r,u;a=n,me.Calculation[0].taxHeadEstimates[6]={taxHeadCode:"PT_TIME_PENALTY",estimateAmount:(null===(r=me.Calculation[0].taxHeadEstimates[6])||void 0===r?void 0:r.estimateAmount)+n,category:"TAX"},K.additionalDetails={adhocPenalty:a,adhocPenaltyReason:re.current.value},me.Calculation[0].totalAmount=(null==me||null===(u=me.Calculation[0])||void 0===u?void 0:u.totalAmount)+n}else alert("Penality cannot exceed total amount");var s,d,c,p;ne&&l&&("Others"!==ne.value?l>0&&(l<t?(me.Calculation[0].taxHeadEstimates[5]={taxHeadCode:"PT_TIME_REBATE",estimateAmount:(null===(s=me.Calculation[0].taxHeadEstimates[5])||void 0===s?void 0:s.estimateAmount)+l,category:"TAX"},K.additionalDetails={adhocExemption:l,adhocExemptionReason:ne.value},me.Calculation[0].totalAmount=(null==me||null===(d=me.Calculation[0])||void 0===d?void 0:d.totalAmount)-l):alert("Adhoc Exemption cannot be greater than the estimated tax for the given property")):l>0&&(l<t?(me.Calculation[0].taxHeadEstimates[5]={taxHeadCode:"PT_TIME_REBATE",estimateAmount:(null===(c=me.Calculation[0].taxHeadEstimates[5])||void 0===c?void 0:c.estimateAmount)-l,category:"TAX"},K.additionalDetails={adhocExemption:l,adhocExemptionReason:ae.current.value},me.Calculation[0].totalAmount=(null==me||null===(p=me.Calculation[0])||void 0===p?void 0:p.totalAmount)-l):alert("Adhoc Exemption cannot be greater than the estimated tax for the given property"))),te(null),le(null),J(!1)}(),hideSubmit:!1},l.createElement("div",null,l.createElement(t.Card,null,l.createElement(t.CardSectionHeader,null,B("PT_AD_PENALTY")),l.createElement(t.CardLabel,null,B("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement(t.Dropdown,{isMandatory:!0,option:[{title:"PT_PENDING_DUES_FROM_EARLIER",value:"Pending dues from earlier"},{title:"PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",value:"Miscalculation of earlier Assessment"},{title:"PT_ONE_TIME_PENALITY",value:"One time penality"},{title:"PT_OTHERS",value:"Others"}],optionKey:"value",select:De,selected:ee,isPropertyAssess:!0,t:B})))),ee&&"Others"===ee.value&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,B("PT_REASON")),l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement("input",{type:"type",className:"employee-card-input false focus-visible undefined",ref:re})))),l.createElement(t.CardLabel,null,B("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement("input",{key:"firstTemp",type:"number",className:"employee-card-input false focus-visible undefined",ref:oe}))))),l.createElement(t.Card,null,l.createElement(t.CardSectionHeader,null,B("PT_AD_REBATE")),l.createElement(t.CardLabel,null,B("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement(t.Dropdown,{isMandatory:!0,option:[{title:"PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",value:"Advanced Paid By Citizen Earlier"},{title:"PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",value:"Rebate provided by commissioner/EO"},{title:"PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",value:"Additional amount charged from the citizen"},{title:"PT_OTHERS",value:"Others"}],optionKey:"value",select:e=>{le(e)},selected:ne,isPropertyAssess:!0,t:B})))),ne&&"Others"===ne.value&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,B("PT_REASON")),l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement("input",{type:"type",className:"employee-card-input false focus-visible undefined",ref:ae})))),l.createElement(t.CardLabel,null,B("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement("div",{className:"field-container"},l.createElement("div",{className:"text-input field"},l.createElement("input",{type:"number",className:"employee-card-input false focus-visible undefined",ref:ie}))))))),G.getQueryData(["PT_ASSESSMENT",H,null==W||null===(L=W.state)||void 0===L||null===(M=L.Assessment)||void 0===M?void 0:M.financialYear])?l.createElement(t.ActionBar,null,l.createElement(t.SubmitBar,{disabled:!((null==Te||null===(x=Te.data)||void 0===x||null===(U=x.Bill)||void 0===U||null===(F=U[0])||void 0===F?void 0:F.totalAmount)>0),label:B("PT_PROCEED_PAYMENT"),onSubmit:()=>{X.push("/digit-ui/employee/payment/collect/PT/"+H)}})):l.createElement(t.ActionBar,null,l.createElement(t.SubmitBar,{label:B("PT_ASSESS_PROPERTY_BUTTON"),onSubmit:()=>{var e,t;G.getQueryData(["PT_ASSESSMENT",H,null==W||null===(e=W.state)||void 0===e||null===(t=e.Assessment)||void 0===t?void 0:t.financialYear])||ce({Assessment:K},{onError:(e,t)=>{var n,l,o,i,a,r;z({key:"error",action:(null==e||null===(n=e.response)||void 0===n||null===(l=n.data)||void 0===l||null===(o=l.Errors[0])||void 0===o?void 0:o.message)||e.message,error:{message:(null==e||null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.Errors[0])||void 0===r?void 0:r.code)||e.message}}),setTimeout(ye,5e3)},onSuccess:(e,t)=>{var n,l,o;sessionStorage.setItem("IsPTAccessDone",null==e||null===(n=e.Assessments)||void 0===n||null===(l=n[0])||void 0===l||null===(o=l.auditDetails)||void 0===o?void 0:o.lastModifiedTime),z({key:"success",action:{action:"ASSESSMENT"}}),setTimeout(ye,5e3),X.push("/digit-ui/employee/payment/collect/PT/"+H)}})}})));var Le},PTEditApplication:()=>{const e=Digit.ULBService.getCurrentTenantId(),{t:t}=o.useTranslation();let{id:n}=i.useParams();const{isLoading:a,data:r}=Digit.Hooks.pt.useApplicationDetail(t,e,n);return r&&!a?l.createElement(Ii,{applicationData:null==r?void 0:r.applicationData,tenantId:e}):null},PTResponse:e=>{const{t:a}=o.useTranslation(),u=r.useQueryClient(),[s,d]=(i.useHistory(),n.useState(null)),[c,p]=n.useState(null),[m,v]=n.useState(!1),[E,_,T]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED",!1),[f,y,S]=Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA",!1),g=Digit.ULBService.getCurrentTenantId(),{state:P}=e.location,A=Digit.Hooks.pt.usePropertyAPI(g,"UPDATE"!==P.key),{data:N}=Digit.Hooks.useStore.getInitData(),{tenants:O}=N||{},{data:I}=Digit.Hooks.pt.usePropertySearch({tenantId:g,filters:{propertyIds:P.Property.propertyId,audit:!0}},{enabled:m,select:e=>{var t;return null===(t=e.Properties)||void 0===t?void 0:t.filter(e=>"ACTIVE"===e.status)}});return n.useEffect(()=>{A.data&&A.isSuccess&&y(A.data)},[A.data]),n.useEffect(()=>{E||A.mutate({Property:null==P?void 0:P.Property},{onError:(e,t)=>{var n,l,o;p({key:"error"}),d((null==e||null===(n=e.response)||void 0===n||null===(l=n.data)||void 0===l||null===(o=l.Errors[0])||void 0===o?void 0:o.message)||null)},onSuccess:function(e){try{var t;return _(!0),u.clear(),"MUTATION"===(null==e||null===(t=e.Properties[0])||void 0===t?void 0:t.creationReason)&&v(!0),Promise.resolve()}catch(e){return Promise.reject(e)}}})},[]),A.isLoading||A.isIdle&&!E?l.createElement(t.Loader,null):l.createElement("div",null,l.createElement(t.Card,null,l.createElement(bi,{t:a,data:(null==A?void 0:A.data)||f,action:null==P?void 0:P.action,isSuccess:!!Object.keys(f||{}).length||(null==A?void 0:A.isSuccess),isLoading:A.isIdle&&!E||(null==A?void 0:A.isLoading),isEmployee:e.parentRoute.includes("employee")}),l.createElement(t.CardText,null,((e,t,n,l)=>hi("DISPLAY",e,t,n,l))(P.action,(A.isSuccess||!!f)&&!A.isError,e.parentRoute.includes("employee"),a)),(A.isSuccess||!!f)&&!A.isError&&l.createElement(t.SubmitBar,{style:{overflow:"hidden"},label:a("PT_DOWNLOAD_ACK_FORM"),onSubmit:function(){try{const{Properties:e=[]}=A.data||f,t=e&&e[0]||{},n=O.find(e=>e.code===t.tenantId);let l=t.tenantId||l;return Promise.resolve(Digit.PTService.search({tenantId:l,filters:{propertyIds:null==t?void 0:t.propertyId,status:"INACTIVE"}})).then(function(e){var l,o,i;return t.transferorDetails=(null==e||null===(l=e.Properties)||void 0===l?void 0:l[0])||[],t.isTransferor=!0,t.transferorOwnershipCategory=null==e||null===(o=e.Properties)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.ownershipCategory,Promise.resolve(tt({...t,auditData:I},n,a)).then(function(e){Digit.Utils.pdf.generate(e)})})}catch(e){return Promise.reject(e)}}})),c&&l.createElement(t.Toast,{error:"error"===c.key,label:s,onClose:()=>{p(null),d(null)}}),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:e.parentRoute.includes("employee")?"/digit-ui/employee":"/digit-ui/citizen"},l.createElement(t.SubmitBar,{label:a("CORE_COMMON_GO_TO_HOME")}))))},PTTransferOwnership:()=>{const e=Digit.ULBService.getCurrentTenantId(),{t:t}=o.useTranslation();let{id:n}=i.useParams();const{isLoading:a,data:r}=Digit.Hooks.pt.useApplicationDetail(t,e,n);return r&&!a?l.createElement(Di,{applicationData:null==r?void 0:r.applicationData,tenantId:e}):null},PTDocsRequired:()=>{Digit.ULBService.getCurrentTenantId();const e=Digit.ULBService.getStateId(),{t:a}=o.useTranslation(),r=i.useHistory(),{id:u}=i.useParams(),[s,d]=n.useState([]),{isLoading:c,data:p}=Digit.Hooks.pt.usePropertyMDMS(e,"PropertyTax",["MutationDocuments"]);return n.useEffect(()=>{var e;p&&d(null==p||null===(e=p.PropertyTax)||void 0===e?void 0:e.MutationDocuments)},[p]),c?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(t.Header,null,a("PT_REQIURED_DOC_TRANSFER_OWNERSHIP")),l.createElement(t.Card,null,s.map((e,n)=>{const o=e.code.split("."),i=e.dropdownData;return l.createElement(l.Fragment,{key:n},l.createElement(t.CardSectionHeader,{style:{marginTop:"38px",marginBottom:"16px"}},a(o[0]+"."+o[1])),i.map((e,n)=>l.createElement(l.Fragment,{key:n},l.createElement(t.CardLabel,{style:{fontWeight:700}},n+1+". "+a(e.code)))),l.createElement(t.CardText,{className:"docsDescription"},a(o[0]+"."+o[1]+"."+o[1]+"_DESCRIPTION")))})),l.createElement(t.ActionBar,null,l.createElement(t.SubmitBar,{style:{display:"block",marginLeft:"auto"},label:a("PT_TRANSFER_OWNERSHIP"),onSubmit:()=>{r.push("/digit-ui/employee/pt/property-mutate/"+u)}})))},PTCreateProperty:e=>{var n,a,u,s;const d=r.useQueryClient(),c=i.useRouteMatch(),{t:p}=o.useTranslation(),{pathname:m}=i.useLocation(),v=i.useHistory(),E=Digit.ULBService.getStateId();let _=[];const[T,f,y]=Digit.Hooks.useSessionStorage("PT_CREATE_PROPERTY",{});let{data:S,isLoading:g}=Digit.Hooks.pt.useMDMS(E,"PropertyTax","CommonFieldsConfig");function P(e,t,n,l,o){if(void 0===o&&(o=!1),"owners"===e){let n=T.owners||[];n[l]=t,f({...T,[e]:[...n]})}else if("units"===e){let e=T.units||[];e=t,f({...T,units:e})}else f({...T,[e]:{...T[e],...t}});((e,t,n,l)=>{let o,i=m.split("/").pop(),a=i.charAt(i.length-1),r=!1;Number(parseInt(i))||"0"==i||"-1"==i?"-1"==i||"-2"==i?(i=m.slice(0,-3),i=i.split("/").pop(),r=!0):(i=m.slice(0,-2),i=i.split("/").pop(),r=!0):r=!1,isNaN(a)||(r=!0);let{nextStep:u={}}=_.find(e=>e.route===i);"object"==typeof u&&null!=u&&0!=r&&(u=u[sessionStorage.getItem("ownershipCategory")]?u[sessionStorage.getItem("ownershipCategory")]+"/"+t:u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]?""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]=="un-occupied-area"?u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]+"/"+t:""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]:u[sessionStorage.getItem("subusagetypevar")]?u[sessionStorage.getItem("subusagetypevar")]+"/"+t:u[sessionStorage.getItem("area")]?""+u[sessionStorage.getItem("area")]!="map"?u[sessionStorage.getItem("area")]+"/"+t:""+u[sessionStorage.getItem("area")]:u[sessionStorage.getItem("IsThisFloorSelfOccupied")]?u[sessionStorage.getItem("IsThisFloorSelfOccupied")]+"/"+t:u[sessionStorage.getItem("noOofBasements")]+"/"+t),"object"==typeof u&&null!=u&&0==r&&(!u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]||"map"!=u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]&&"un-occupied-area"!=u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]?u[sessionStorage.getItem("subusagetypevar")]?u=""+u[sessionStorage.getItem("subusagetypevar")]:u[sessionStorage.getItem("area")]?u=""+u[sessionStorage.getItem("area")]:u[sessionStorage.getItem("IsThisFloorSelfOccupied")]?u=""+u[sessionStorage.getItem("IsThisFloorSelfOccupied")]:u[sessionStorage.getItem("PropertyType")]?u=""+u[sessionStorage.getItem("PropertyType")]:u[sessionStorage.getItem("isResdential")]&&(u=""+u[sessionStorage.getItem("isResdential")]):u=""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]);let s=v.push;if(e&&(s=v.replace),n&&(u=l),null===u)return s(c.path+"/check");o=isNaN(u.split("/").pop())&&r&&"map"!==u?c.path+"/"+u+"/"+t:c.path+"/"+u,s(o)})(n,l,o,e)}T&&Object.keys(T).length>0&&window.location.href.includes("/info")&&"true"!==sessionStorage.getItem("docReqScreenByBack")&&(y(),d.invalidateQueries("PT_CREATE_PROPERTY"));const A=()=>{},N=()=>{};if(g)return l.createElement(t.Loader,null);S=ct,S.forEach(e=>{_=_.concat(e.body.filter(e=>!e.hideInCitizen))}),_.indexRoute="info";const O=null===(n=Digit)||void 0===n||null===(a=n.ComponentRegistryService)||void 0===a?void 0:a.getComponent("PTCheckPage"),I=null===(u=Digit)||void 0===u||null===(s=u.ComponentRegistryService)||void 0===s?void 0:s.getComponent("PTAcknowledgement");return l.createElement(i.Switch,null,_.map((e,t)=>{const{component:n,texts:o,inputs:a,key:r}=e,u="string"==typeof n?Digit.ComponentRegistryService.getComponent(n):n;return l.createElement(i.Route,{path:c.path+"/"+e.route,key:t},l.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:P,onSkip:A,t:p,formData:T,onAdd:N}))}),l.createElement(i.Route,{path:c.path+"/check"},l.createElement(O,{onSubmit:function(){try{return v.push(c.path+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:T})),l.createElement(i.Route,{path:c.path+"/acknowledgement"},l.createElement(I,{data:T,onSuccess:()=>{y(),d.invalidateQueries("PT_CREATE_PROPERTY")}})),l.createElement(i.Route,null,l.createElement(i.Redirect,{to:c.path+"/"+_.indexRoute})))},PTMyApplications:()=>{const{t:e}=o.useTranslation(),n=Digit.ULBService.getCitizenCurrentTenant(!0)||Digit.ULBService.getCurrentTenantId(),a=Digit.UserService.getUser().info;let r,u,s=window.location.href.split("/").pop();isNaN(parseInt(s))?r=4:(u=s,r=parseInt(s)+50);let d=isNaN(parseInt(s))?{limit:"4",sortOrder:"ASC",sortBy:"createdTime",offset:"0",mobileNumber:null==a?void 0:a.mobileNumber,tenantId:n}:{limit:"50",sortOrder:"ASC",sortBy:"createdTime",offset:u,tenantId:n};const{isLoading:c,data:p}=Digit.Hooks.pt.usePropertySearch({filters:d},{filters:d}),{Properties:m}=p||{};let v=(null==m?void 0:m.length)>0?null==m?void 0:m.map(e=>null==e?void 0:e.acknowldgementNumber):[],E={tenantId:n,referenceIds:v};const{isLoading:_,data:T}=Digit.Hooks.useFeedBackSearch({filters:{serviceSearchArgs:E}},{filters:{serviceSearchArgs:E},enabled:(null==v?void 0:v.length)>0,cacheTime:0});function f(t){var n,l;let o=null==T||null===(n=T.Service)||void 0===n?void 0:n.find(e=>{var n;return null==e||null===(n=e.referenceId)||void 0===n?void 0:n.includes(null==t?void 0:t.acknowldgementNumber)});return o?e("CS_CF_VIEW"):!o&&null!=t&&null!==(l=t.status)&&void 0!==l&&l.includes("ACTIVE")?e("CS_CF_RATE_US"):e("CS_CF_TRACK")}return c||_?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(t.Header,null,e("CS_TITLE_MY_APPLICATIONS")+" "+(m?"("+m.length+")":"")),l.createElement("div",null,(null==m?void 0:m.length)>0&&m.map((e,t)=>l.createElement("div",{key:t},l.createElement(pt,{application:e,tenantId:null==a?void 0:a.permanentCity,buttonLabel:f(e)}))),!(null!=m&&m.length)>0&&l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},e("PT_NO_APPLICATION_FOUND_MSG")),0!==(null==m?void 0:m.length)&&l.createElement("div",null,l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/my-applications/"+r},e("PT_LOAD_MORE_MSG")))))),l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},e("PT_TEXT_NOT_ABLE_TO_FIND_THE_APPLICATION")," ",l.createElement("span",{className:"link",style:{display:"block"}},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/new-application/info"},e("PT_COMMON_CLICK_HERE_TO_REGISTER_NEW_PROPERTY")))))},PTMyProperties:()=>{const{t:e}=o.useTranslation(),n=Digit.ULBService.getCitizenCurrentTenant(!0)||Digit.ULBService.getCurrentTenantId(),a=Digit.UserService.getUser().userInfo;let r,u,s=window.location.href.split("/").pop();isNaN(parseInt(s))?r=4:(u=s,r=parseInt(s)+50);let d=isNaN(parseInt(s))?{limit:"4",sortOrder:"ASC",sortBy:"createdTime",offset:"0",mobileNumber:null==a?void 0:a.mobileNumber,tenantId:n}:{limit:"50",sortOrder:"ASC",sortBy:"createdTime",offset:u,tenantId:n};const{isLoading:c,data:p}=Digit.Hooks.pt.usePropertySearchNew({filters:d,searchedFrom:"myPropertyCitizen"},{filters:d});if(c)return l.createElement(t.Loader,null);const{Properties:m}=p||{};return l.createElement(l.Fragment,null,l.createElement(t.Header,null,e("PT_MY_PROPERTIES_HEADER")+" "+(m?"("+m.length+")":"")),l.createElement("div",null,(null==m?void 0:m.length)>0&&m.map((e,t)=>l.createElement("div",{key:t},l.createElement(mt,{application:e}))),!(null!=m&&m.length)>0&&l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},e("PT_NO_PROP_FOUND_MSG")),0!==(null==m?void 0:m.length)&&l.createElement("div",null,l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/my-properties/"+r},e("PT_LOAD_MORE_MSG")))))),l.createElement("p",{style:{marginLeft:"16px",marginTop:"16px"}},e("PT_TEXT_NOT_ABLE_TO_FIND_THE_APPLICATION")," ",l.createElement("span",{className:"link",style:{display:"block"}},l.createElement(i.Link,{to:"/digit-ui/citizen/pt/property/new-application/info"},e("PT_COMMON_CLICK_HERE_TO_REGISTER_NEW_PROPERTY")))))},PTApplicationDetails:()=>{var e,a,r,u,s,d,c,p,m,v,_,T,f,y,S,g,P,A,N,O,I,h,C,R,b,D,L,w,M,x,U,F;const{t:B}=o.useTranslation(),{acknowledgementIds:k,tenantId:Y}=(i.useHistory(),i.useParams()),[W,j]=n.useState([]),[K,V]=n.useState(!1),[z,G]=n.useState(!1),[X,q]=n.useState(null),{data:$}=Digit.Hooks.useStore.getInitData(),{tenants:Z}=$||{},{isLoading:Q,data:J}=Digit.Hooks.pt.usePropertySearch({filters:{acknowledgementIds:k,tenantId:Y}},{filters:{acknowledgementIds:k,tenantId:Y}}),[ee,te]=n.useState(null),[ne,le]=n.useState(null);let oe={tenantId:Y,code:["PT_"+(null==J||null===(e=J.Properties)||void 0===e||null===(a=e[0])||void 0===a?void 0:a.creationReason)],module:["PT"],referenceIds:[null==J||null===(r=J.Properties)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.acknowldgementNumber]};const{data:ie}=Digit.Hooks.pt.useServiceSearchCF({filters:{serviceSearchArgs:oe}},{filters:{serviceSearchArgs:oe},enabled:!(null==J||null===(s=J.Properties)||void 0===s||null===(d=s[0])||void 0===d||!d.acknowldgementNumber),cacheTime:0}),ae=mn(J,"Properties",[]),re=mn(J,"Properties[0].propertyId",[]);let ue=ae&&ae.length>0&&ae[0]||{};const se=ue;sessionStorage.setItem("pt-property",JSON.stringify(se)),n.useMemo(()=>{var e,t,n;"ACTIVE"===(null==J||null===(e=J.Properties)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.status)&&0==z&&0==(null==ie||null===(n=ie.Service)||void 0===n?void 0:n.length)&&G(!0)},[J,ie]),n.useEffect(function(){try{const e=function(){if(k&&Y&&ue)return Promise.resolve(Digit.PaymentService.searchBill(Y,{Service:"PT.MUTATION",consumerCode:k})).then(function(e){const t=function(){if(!e.Bill.length)return Promise.resolve(Digit.PTService.ptCalculateMutation({Property:ue},Y)).then(function(e){var t;te((null==e||null===(t=e[k])||void 0===t?void 0:t.totalAmount)||B("CS_NA")),le(B("PT_MUT_BILL_ACTIVE"))});var t,n,l;te((null==e||null===(t=e.Bill[0])||void 0===t?void 0:t.totalAmount)||B("CS_NA")),le(B("PT_MUT_BILL_"+(null==e||null===(n=e.Bill[0])||void 0===n||null===(l=n.status)||void 0===l?void 0:l.toUpperCase())))}();if(t&&t.then)return t.then(function(){})})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[Y,k,ue]);const{isLoading:de,data:ce}=Digit.Hooks.pt.usePropertySearch({tenantId:Y,filters:{propertyIds:re,audit:!0}},{enabled:!0}),{data:pe,isLoading:me}=Digit.Hooks.useRecieptSearch({tenantId:Y,businessService:"PT.MUTATION",consumerCodes:k,isEmployee:!1},{enabled:!!k});if(ue.workflow||(ue.workflow={id:null,tenantId:Y,businessService:"PT.MUTATION",businessId:null==se?void 0:se.acknowldgementNumber,action:"",moduleName:"PT",state:null,comment:null,documents:null,assignes:null}),ue&&ue.owners&&ue.owners.length>0){let e=[],t=[];ue.owners.map(n=>{n.documentUid=n.documents?n.documents[0].documentUid:"NA",n.documentType=n.documents?n.documents[0].documentType:"NA","ACTIVE"==n.status?e.push(n):t.push(n)}),ue.ownersInit=t,ue.ownersTemp=e}if(ue.ownershipCategoryTemp=null==ue?void 0:ue.ownershipCategory,ue.ownershipCategoryInit="NA",null!==(c=mn(se,"Properties[0].ownershipCategory",""))&&void 0!==c&&c.startsWith("INSTITUTION")&&(ue.institutionTemp=ue.institution),ce&&Array.isArray(mn(ce,"Properties",[]))&&mn(ce,"Properties",[]).length>0){var ve,Ee;const e=mn(ce,"Properties",[]),t="ACTIVE"==ue.status?1:0,n=e.filter(e=>"ACTIVE"==e.status).sort((e,t)=>t.auditDetails.lastModifiedTime-e.auditDetails.lastModifiedTime)[t];ue.ownershipCategoryInit=null==n?void 0:n.ownershipCategory,ue.ownersInit=null==n||null===(ve=n.owners)||void 0===ve?void 0:ve.filter(e=>"ACTIVE"==e.status);const l=e.sort((e,t)=>t.auditDetails.lastModifiedTime-e.auditDetails.lastModifiedTime)[0];ue.ownersTemp=l.owners.filter(e=>"ACTIVE"==e.status),null!=ue&&null!==(Ee=ue.ownershipCategoryInit)&&void 0!==Ee&&Ee.startsWith("INSTITUTION")&&(ue.institutionInit=n.institution)}let _e=mn(ue,"ownersTemp",[]),Te=mn(ue,"ownersInit",[]),fe=(mn(ue,"institutionTemp",[]),null==ue||null===(p=ue.ownershipCategoryInit)||void 0===p?void 0:p.startsWith("INSTITUTION")),ye=mn(ue,"institutionInit",[]),Se=[];Se=null==se?void 0:se.units,Se&&Se.sort((e,t)=>{let n=e.floorNo,l=t.floorNo;return e.floorNo<0&&(n=-20*e.floorNo),t.floorNo<0&&(l=-20*t.floorNo),n>l?1:-1});let ge=[];ge=null==se?void 0:se.owners;let Pe=[];if(Pe=null==se?void 0:se.documents,Q||de)return l.createElement(t.Loader,null);let Ae,Ne=0;Ae=Se&&(null===(m=Se[0])||void 0===m?void 0:m.floorNo);const Oe=!(null==ue||!ue.creationReason||"MUTATION"!==ue.creationReason);let Ie=B("CS_NA");if(null!=ue&&null!==(v=ue.additionalDetails)&&void 0!==v&&v.documentDate){var he;const e=new Date(null==ue||null===(he=ue.additionalDetails)||void 0===he?void 0:he.documentDate),t=Digit.Utils.date.monthNames[e.getMonth()];Ie=e.getDate()+" "+t+" "+e.getFullYear()}let Ce=[];return Ce.push({label:"MUTATION"===(null==J||null===(_=J.Properties)||void 0===_||null===(T=_[0])||void 0===T?void 0:T.creationReason)?B("MT_APPLICATION"):B("PT_APPLICATION_ACKNOWLEDGMENT"),onClick:()=>function(){try{const e=se||{},t=Z.find(t=>t.code===e.tenantId);return Promise.resolve(tt({...e},t,B)).then(function(e){Digit.Utils.pdf.generate(e)})}catch(e){return Promise.reject(e)}}()}),pe&&(null==pe?void 0:pe.Payments.length)>0&&0==me&&Ce.push({label:B("MT_FEE_RECIEPT"),onClick:()=>{var e;return function(e){let{tenantId:t,payments:n,...l}=e;try{let e={filestoreIds:[null==n?void 0:n.fileStoreId]};return Promise.resolve(Digit.PaymentService.generatePdf(t,{Payments:[{...n}]},"consolidatedreceipt")).then(function(n){return e=n,Promise.resolve(Digit.PaymentService.printReciept(t,{fileStoreIds:e.filestoreIds[0]})).then(function(t){var n;window.open(t[null===(n=e)||void 0===n?void 0:n.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}({tenantId:null==pe||null===(e=pe.Payments[0])||void 0===e?void 0:e.tenantId,payments:null==pe?void 0:pe.Payments[0]})}}),"MUTATION"===(null==J||null===(f=J.Properties)||void 0===f||null===(y=f[0])||void 0===y?void 0:y.creationReason)&&"ACTIVE"===(null==J||null===(S=J.Properties)||void 0===S||null===(g=S[0])||void 0===g?void 0:g.status)&&Ce.push({label:B("MT_CERTIFICATE"),onClick:()=>function(){try{var e;return Promise.resolve(Digit.PaymentService.generatePdf(Y,{Properties:[null==J||null===(e=J.Properties)||void 0===e?void 0:e[0]]},"ptmutationcertificate")).then(function(e){return Promise.resolve(Digit.PaymentService.printReciept(Y,{fileStoreIds:e.filestoreIds[0]})).then(function(t){window.open(t[null==e?void 0:e.filestoreIds[0]],"_blank")})})}catch(e){return Promise.reject(e)}}()}),l.createElement(l.Fragment,null,l.createElement("div",null,l.createElement("div",{className:"cardHeaderWithOptions",style:{marginRight:"auto",maxWidth:"960px"}},l.createElement(t.Header,{styles:{fontSize:"32px"}},B("PT_MUTATION_APPLICATION_DETAILS")),Ce&&Ce.length>0&&l.createElement(t.MultiLink,{className:"multilinkWrapper",onHeadClick:()=>V(!K),displayOptions:K,options:Ce})),l.createElement(t.Card,null,l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:B("PT_APPLICATION_NUMBER_LABEL"),text:null==ue?void 0:ue.acknowldgementNumber}),l.createElement(t.Row,{className:"border-none",label:B("PT_SEARCHPROPERTY_TABEL_PTUID"),text:null==ue?void 0:ue.propertyId}),l.createElement(t.Row,{className:"border-none",label:B("PT_APPLICATION_CHANNEL_LABEL"),text:B("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+(null==ue?void 0:ue.channel))}),Oe&&l.createElement(l.Fragment,null,l.createElement(t.Row,{className:"border-none",label:B("PT_FEE_AMOUNT"),text:ee||B("₹0"),textStyle:{whiteSpace:"pre"}}),l.createElement(t.Row,{className:"border-none",label:B("PT_PAYMENT_STATUS"),text:ne,textStyle:{whiteSpace:"pre"}}))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},B("PT_PROPERTY_ADDRESS_SUB_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:B("PT_PROPERTY_ADDRESS_PINCODE"),text:(null==ue||null===(P=ue.address)||void 0===P?void 0:P.pincode)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_COMMON_CITY"),text:(null==ue||null===(A=ue.address)||void 0===A?void 0:A.city)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_COMMON_LOCALITY_OR_MOHALLA"),text:B(""+(null==ue||null===(N=ue.address)||void 0===N||null===(O=N.locality)||void 0===O?void 0:O.area))||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_PROPERTY_ADDRESS_STREET_NAME"),text:(null==ue||null===(I=ue.address)||void 0===I?void 0:I.street)||B("CS_NA")}),l.createElement(t.Row,Oe?{className:"border-none",label:B("PT_DOOR_OR_HOUSE"),text:(null==ue||null===(h=ue.address)||void 0===h?void 0:h.doorNo)||B("CS_NA")}:{className:"border-none",label:B("PT_PROPERTY_ADDRESS_COLONY_NAME"),text:(null==ue||null===(C=ue.address)||void 0===C?void 0:C.buildingName)||B("CS_NA")})),Oe?l.createElement(l.Fragment,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},B("PT_MUTATION_TRANSFEROR_DETAILS")),l.createElement("div",null,Array.isArray(Te)&&Te.map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,1!=Te.length&&l.createElement("span",null,B("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:B("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType.toLowerCase())||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||B("CS_NA")}))))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},B("PT_MUTATION_TRANSFEREE_DETAILS")),l.createElement("div",null,fe?Array.isArray(_e)&&_e.map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,1!=_e.length&&l.createElement("span",null,B("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:B("PT_INSTITUTION_NAME"),text:(null==ye?void 0:ye.name)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_TYPE_OF_INSTITUTION"),text:""+B(null==ye?void 0:ye.type)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_NAME_AUTHORIZED_PERSON"),text:(null==ye?void 0:ye.nameOfAuthorizedPerson)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_LANDLINE_NUMBER"),text:(null==e?void 0:e.altContactNumber)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_INSTITUTION_DESIGNATION"),text:(null==ye?void 0:ye.designation)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||B("CS_NA")})))):Array.isArray(_e)&&_e.map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,1!=_e.length&&l.createElement("span",null,B("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:B("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_COMMON_GENDER_LABEL"),text:(null==e?void 0:e.gender)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_FORM3_OWNERSHIP_TYPE"),text:""+B(null!=se&&se.ownershipCategory?"PT_OWNERSHIP_"+(null==se?void 0:se.ownershipCategory):"CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_FORM3_MOBILE_NUMBER"),text:(null==e?void 0:e.mobileNumber)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_MUTATION_AUTHORISED_EMAIL"),text:(null==e?void 0:e.emailId)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType).toLowerCase()||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||B("CS_NA")}))))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},B("PT_MUTATION_DETAILS")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:B("PT_MUTATION_PENDING_COURT"),text:(null==ue||null===(R=ue.additionalDetails)||void 0===R?void 0:R.isMutationInCourt)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_DETAILS_COURT_CASE"),text:(null==ue||null===(b=ue.additionalDetails)||void 0===b?void 0:b.caseDetails)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_PROP_UNDER_GOV_AQUISITION"),text:(null==ue||null===(D=ue.additionalDetails)||void 0===D?void 0:D.isPropertyUnderGovtPossession)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_DETAILS_GOV_AQUISITION"),text:B("CS_NA")})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},B("PT_REGISTRATION_DETAILS")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:B("PT_REASON_PROP_TRANSFER"),text:""+B(null==ue||null===(L=ue.additionalDetails)||void 0===L?void 0:L.reasonForTransfer)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_PROP_MARKET_VALUE"),text:(null==ue||null===(w=ue.additionalDetails)||void 0===w?void 0:w.marketValue)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_REG_NUMBER"),text:(null==ue||null===(M=ue.additionalDetails)||void 0===M?void 0:M.documentNumber)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_DOC_ISSUE_DATE"),text:Ie}),l.createElement(t.Row,{className:"border-none",label:B("PT_REG_DOC_VALUE"),text:(null==ue||null===(x=ue.additionalDetails)||void 0===x?void 0:x.documentValue)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_REMARKS"),text:B("CS_NA")}))):l.createElement(l.Fragment,null,l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}}," ",B("PT_PROPERTY_ASSESSMENT_DETAILS_HEADER")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:B("PT_ASSESMENT_INFO_USAGE_TYPE"),text:""+B(("RESIDENTIAL"!==(null==ue?void 0:ue.usageCategory)?"COMMON_PROPUSGTYPE_NONRESIDENTIAL_":"COMMON_PROPSUBUSGTYPE_")+(null!=ue&&null!==(U=ue.usageCategory)&&void 0!==U&&U.split(".")[1]?null==ue||null===(F=ue.usageCategory)||void 0===F?void 0:F.split(".")[1]:null==ue?void 0:ue.usageCategory))||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_COMMON_PROPERTY_TYPE"),text:""+B(E(null==ue?void 0:ue.propertyType))||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_ASSESMENT1_PLOT_SIZE"),text:(null==ue?void 0:ue.landArea)&&""+B((null==ue?void 0:ue.landArea)+" sq.ft")||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_ASSESMENT_INFO_NO_OF_FLOOR"),text:""+B(null==ue?void 0:ue.noOfFloors)||B("CS_NA")})),l.createElement("div",null,Array.isArray(Se)&&Se.length>0&&Se.map((e,n)=>{var o,i,a;return l.createElement("div",{key:n},(Ae!==(null==e?void 0:e.floorNo)?Ne=1:Ne+=1)&&1===Ne&&l.createElement(t.CardSubHeader,null,B("PROPERTYTAX_FLOOR_"+(null==e?void 0:e.floorNo))),l.createElement("div",{style:{border:"groove",padding:"7px",marginBottom:"10px"}},l.createElement(t.CardSubHeader,null,B("ES_APPLICATION_DETAILS_UNIT")," ",Ne),(Ae=null==e?void 0:e.floorNo)>-3&&l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:B("PT_ASSESSMENT_UNIT_USAGE_TYPE"),text:""+B(("RESIDENTIAL"!==(null==ue?void 0:ue.usageCategory)?"COMMON_PROPUSGTYPE_NONRESIDENTIAL_":"COMMON_PROPUSGTYPE_")+(null!=ue&&null!==(o=ue.usageCategory)&&void 0!==o&&o.split(".")[1]?null==ue||null===(i=ue.usageCategory)||void 0===i?void 0:i.split(".")[1]:null==ue?void 0:ue.usageCategory))||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_OCCUPANY_TYPE_LABEL"),text:""+B("PROPERTYTAX_OCCUPANCYTYPE_"+(null==e?void 0:e.occupancyType))||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_BUILTUP_AREA_LABEL"),text:""+((null==e||null===(a=e.constructionDetail)||void 0===a?void 0:a.builtUpArea)+" sq.ft"||B("CS_NA"))}),"RENTED"==e.occupancyType&&l.createElement(t.Row,{className:"border-none",label:B("PT_FORM2_TOTAL_ANNUAL_RENT"),text:""+((null==e?void 0:e.arv)&&"₹"+(null==e?void 0:e.arv)||B("CS_NA"))}))))})),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},B("PT_COMMON_PROPERTY_OWNERSHIP_DETAILS_HEADER")),l.createElement("div",null,Array.isArray(ge)&&ge.map((e,n)=>l.createElement("div",{key:n},l.createElement(t.CardSubHeader,null,1!=ge.length&&l.createElement("span",null,B("PT_OWNER_SUB_HEADER")," - ",n+1," ")),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",label:B("PT_COMMON_APPLICANT_NAME_LABEL"),text:(null==e?void 0:e.name)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_FORM3_GUARDIAN_NAME"),text:(null==e?void 0:e.fatherOrHusbandName)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_COMMON_GENDER_LABEL"),text:(null==e?void 0:e.gender)||B("CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_FORM3_OWNERSHIP_TYPE"),text:""+B(null!=ue&&ue.ownershipCategory?"PT_OWNERSHIP_"+(null==ue?void 0:ue.ownershipCategory):"CS_NA")}),l.createElement(t.Row,{className:"border-none",label:B("PT_FORM3_MOBILE_NUMBER"),text:null==e?void 0:e.mobileNumber}),l.createElement(t.Row,{className:"border-none",label:B("PT_MUTATION_AUTHORISED_EMAIL"),text:""+((null==e?void 0:e.emailId)||B("CS_NA"))}),l.createElement(t.Row,{className:"border-none",label:B("PT_MUTATION_TRANSFEROR_SPECIAL_CATEGORY"),text:(null==e?void 0:e.ownerType).toLowerCase()}),l.createElement(t.Row,{className:"border-none",label:B("PT_OWNERSHIP_INFO_CORR_ADDR"),text:(null==e?void 0:e.correspondenceAddress)||B("CS_NA")})))))),l.createElement(t.CardSubHeader,{style:{fontSize:"24px"}},B("PT_COMMON_DOCS")),l.createElement("div",null,Array.isArray(Pe)?Pe.length>0&&l.createElement(Et,{property:ue}):l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",text:B("PT_NO_DOCUMENTS_MSG")}))),l.createElement(H,{application:se,id:k,userType:"citizen"}),X&&l.createElement(t.Toast,{error:X.key,label:B(X.label),style:{bottom:"0px"},onClose:()=>{q(null)}})),z&&l.createElement(_t,{setpopup:G,setShowToast:q,data:J})))},PTSearchPropertyComponent:()=>{const{t:e}=o.useTranslation(),{path:t}=i.useRouteMatch(),a=n.useMemo(()=>vn.map(t=>{const n={};for(const l in t.texts)n[l]=e(t.texts[l]);return{...t,texts:n}},[vn]));return l.createElement(i.Switch,null,l.createElement(i.Route,{path:""+t,exact:!0},l.createElement(Ke,{config:a[0]})))},PTSearchResultsComponent:Ge,PTEditProperty:e=>{var a,u,s,d;const c=r.useQueryClient(),p=i.useRouteMatch(),{t:m}=o.useTranslation(),{pathname:v}=i.useLocation(),E=i.useHistory();let _=[];const[T,f,y]=Digit.Hooks.useSessionStorage("PT_CREATE_PROPERTY",{}),S=Digit.ULBService.getStateId();let{data:g,isLoading:P}=Digit.Hooks.pt.useMDMS(S,"PropertyTax","CommonFieldsConfig");Digit.ULBService.getCurrentTenantId();const A=window.location.href.split("/").pop(),N=window.location.href.split("/").pop();let I={};const h=window.location.href.includes("action=UPDATE"),C=!!window.location.href.includes("UPDATE"),{isLoading:R,data:b}=(JSON.parse(sessionStorage.getItem("pt-property")),Digit.Hooks.pt.usePropertySearch({filters:h?{propertyIds:N,isSearchInternal:!0}:{acknowledgementIds:A,isSearchInternal:!0}},{filters:h?{propertyIds:N,isSearchInternal:!0}:{acknowledgementIds:A,isSearchInternal:!0}}));function D(e,t,n,l,o){if(void 0===o&&(o=!1),"owners"===e){let n=T.owners||[];n[l]=t,f({...T,[e]:[...n]})}else f("units"===e?{...T,[e]:[...t]}:{...T,[e]:{...T[e],...t}});((e,t,n,l)=>{let o,i=v.split("/").pop(),a=i.charAt(i.length-1),r=!1;Number(parseInt(i))||"0"==i||"-1"==i?"-1"==i||"-2"==i?(i=v.slice(0,-3),i=i.split("/").pop(),r=!0):(i=v.slice(0,-2),i=i.split("/").pop(),r=!0):r=!1,isNaN(a)||(r=!0);let{nextStep:u={}}=_.find(e=>e.route===i);"object"==typeof u&&null!=u&&0!=r&&(u=u[sessionStorage.getItem("ownershipCategory")]?u[sessionStorage.getItem("ownershipCategory")]+"/"+t:u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]?""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]=="un-occupied-area"?u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]+"/"+t:""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]:u[sessionStorage.getItem("subusagetypevar")]?u[sessionStorage.getItem("subusagetypevar")]+"/"+t:u[sessionStorage.getItem("area")]?""+u[sessionStorage.getItem("area")]!="map"?u[sessionStorage.getItem("area")]+"/"+t:""+u[sessionStorage.getItem("area")]:u[sessionStorage.getItem("IsThisFloorSelfOccupied")]?u[sessionStorage.getItem("IsThisFloorSelfOccupied")]+"/"+t:u[sessionStorage.getItem("noOofBasements")]+"/"+t),"object"==typeof u&&null!=u&&0==r&&(!u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]||"map"!=u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]&&"un-occupied-area"!=u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]?u[sessionStorage.getItem("subusagetypevar")]?u=""+u[sessionStorage.getItem("subusagetypevar")]:u[sessionStorage.getItem("area")]?u=""+u[sessionStorage.getItem("area")]:u[sessionStorage.getItem("IsThisFloorSelfOccupied")]?u=""+u[sessionStorage.getItem("IsThisFloorSelfOccupied")]:u[sessionStorage.getItem("PropertyType")]?u=""+u[sessionStorage.getItem("PropertyType")]:u[sessionStorage.getItem("isResdential")]&&(u=""+u[sessionStorage.getItem("isResdential")]):u=""+u[sessionStorage.getItem("IsAnyPartOfThisFloorUnOccupied")]);let s=E.push;if(e&&(s=E.replace),n&&(u=l),null===u)return s(p.path+"/check");o=isNaN(u.split("/").pop())&&r&&"map"!==u?p.path+"/"+u+"/"+t:p.path+"/"+u,s(o)})(n,l,o,e)}sessionStorage.setItem("isEditApplication",!1),n.useEffect(()=>{var e;if(I=(null==b?void 0:b.Properties)&&b.Properties[0]&&b.Properties[0],b&&I&&(null==b||null===(e=b.Properties)||void 0===e?void 0:e.length)>0){I=null==b?void 0:b.Properties[0],h?(I.isUpdateProperty=!0,I.isEditProperty=!1):(I.isUpdateProperty=C,I.isEditProperty=!0),sessionStorage.setItem("propertyInitialObject",JSON.stringify({...I}));let e=function(e){var t,n,l,o,i,a,r,u,s,d,c,p,m,v,E,_,T,f,y,S,g,P,A,N,I,h,C,R,b,D,L,w,x,F,B,k,H;if(void 0===e&&(e={}),"BUILTUP.INDEPENDENTPROPERTY"===(null===(t=e)||void 0===t?void 0:t.propertyType)&&0==e.units.length&&(e.units=[{constructionDetail:{builtUpArea:null===(R=e)||void 0===R?void 0:R.superBuiltUpArea},floorNo:0,occupancyType:null===(b=e)||void 0===b?void 0:b.occupancyType,unitType:null===(D=e)||void 0===D?void 0:D.occupancyType,usageCategory:null===(L=e)||void 0===L?void 0:L.usageCategory}]),"INSTITUTIONALPRIVATE"===(null===(n=e)||void 0===n?void 0:n.ownershipCategory)||"INSTITUTIONALGOVERNMENT"===(null===(l=e)||void 0===l?void 0:l.ownershipCategory)){var Y,W,j,K,V,z,G,X,q,$,Z,Q,J,ee,te,ne;let t=[];var le,oe,ie,ae,re,ue,se,de;null!==(Y=e)&&void 0!==Y&&null!==(W=Y.owners[0])&&void 0!==W&&null!==(j=W.documents[0])&&void 0!==j&&null!==(K=j.documentType)&&void 0!==K&&K.includes("IDENTITYPROOF")&&(e.owners[0].documents[0].documentType={code:null===(le=e)||void 0===le||null===(oe=le.owners[0])||void 0===oe||null===(ie=oe.documents[0])||void 0===ie?void 0:ie.documentType,i18nKey:M(null===(ae=e)||void 0===ae||null===(re=ae.owners[0])||void 0===re||null===(ue=re.documents[0])||void 0===ue?void 0:ue.documentType,".","_")},t.proofIdentity=null===(se=e)||void 0===se||null===(de=se.owners[0])||void 0===de?void 0:de.documents[0]),e.owners[0].designation=null===(V=e)||void 0===V||null===(z=V.institution)||void 0===z?void 0:z.designation,e.owners[0].inistitutionName=null===(G=e)||void 0===G||null===(X=G.institution)||void 0===X?void 0:X.name,e.owners[0].name=null===(q=e)||void 0===q||null===($=q.institution)||void 0===$?void 0:$.nameOfAuthorizedPerson,e.owners[0].inistitutetype={value:null===(Z=e)||void 0===Z?void 0:Z.institution.type,code:null===(Q=e)||void 0===Q?void 0:Q.institution.type},e.owners[0].documents=t,e.owners[0].permanentAddress=null===(J=e)||void 0===J||null===(ee=J.owners[0])||void 0===ee?void 0:ee.correspondenceAddress,e.owners[0].isCorrespondenceAddress=null===(te=e)||void 0===te||null===(ne=te.owners[0])||void 0===ne?void 0:ne.isCorrespondenceAddress}else e.owners.map(e=>{let t=[];e.documents&&e.documents.map(e=>{var n,l;null!=e&&e.documentType&&"string"==typeof(null==e?void 0:e.documentType)&&null!=e&&null!==(n=e.documentType)&&void 0!==n&&n.includes("SPECIALCATEGORYPROOF")&&(e.documentType={code:null==e?void 0:e.documentType,i18nKey:M(null==e?void 0:e.documentType,".","_")},t.specialProofIdentity=e),null!=e&&e.documentType&&"string"==typeof(null==e?void 0:e.documentType)&&null!=e&&null!==(l=e.documentType)&&void 0!==l&&l.includes("IDENTITYPROOF")&&(e.documentType={code:null==e?void 0:e.documentType,i18nKey:M(null==e?void 0:e.documentType,".","_")},t.proofIdentity=e)}),e.emailId=null==e?void 0:e.emailId,e.fatherOrHusbandName=null==e?void 0:e.fatherOrHusbandName,e.isCorrespondenceAddress=null==e?void 0:e.isCorrespondenceAddress,e.mobileNumber=null==e?void 0:e.mobileNumber,e.name=null==e?void 0:e.name,e.permanentAddress=null==e?void 0:e.permanentAddress,e.gender={code:null==e?void 0:e.gender},e.ownerType={code:null==e?void 0:e.ownerType},e.relationship={code:null==e?void 0:e.relationship},e.documents=t});e.ownershipCategory={code:null===(o=e)||void 0===o?void 0:o.ownershipCategory,value:null===(i=e)||void 0===i?void 0:i.ownershipCategory},e.address.geoLocation=null!==(a=e)&&void 0!==a&&null!==(r=a.address)&&void 0!==r&&null!==(u=r.geoLocation)&&void 0!==u&&u.latitude&&null!==(s=e)&&void 0!==s&&null!==(d=s.address)&&void 0!==d&&null!==(c=d.geoLocation)&&void 0!==c&&c.longitude?{latitude:null===(w=e)||void 0===w||null===(x=w.address)||void 0===x||null===(F=x.geoLocation)||void 0===F?void 0:F.latitude,longitude:null===(B=e)||void 0===B||null===(k=B.address)||void 0===k||null===(H=k.geoLocation)||void 0===H?void 0:H.longitude}:{},e.address.pincode=null===(p=e)||void 0===p||null===(m=p.address)||void 0===m?void 0:m.pincode,e.address.city={code:null===(v=e)||void 0===v?void 0:v.tenantId,i18nKey:"TENANT_TENANTS_"+M(null===(E=e)||void 0===E?void 0:E.tenantId.toUpperCase(),".","_")},e.address.locality.i18nkey=(null===(_=e)||void 0===_?void 0:_.tenantId.replace(".","_").toUpperCase())+"_REVENUE_"+(null===(T=e)||void 0===T||null===(f=T.address)||void 0===f||null===(y=f.locality)||void 0===y?void 0:y.code);let ce=null===(S=e)||void 0===S||null===(g=S.documents)||void 0===g?void 0:g.filter(e=>{var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes("ADDRESSPROOF")});var pe,me,ve,Ee,_e,Te,fe,ye,Se,ge,Pe,Ae,Ne,Oe,Ie,he,Ce,Re,be,De,Le,we,Me,xe,Ue,Fe,Be,ke,He,Ye,We,je,Ke,Ve,ze;if(U(ce)&&(ce[0].documentType={code:null===(pe=ce[0])||void 0===pe?void 0:pe.documentType,i18nKey:M(null===(me=ce[0])||void 0===me?void 0:me.documentType,".","_")}),e.documents||(e={...e,documents:[]}),null!==(P=e)&&void 0!==P&&null!==(A=P.address)&&void 0!==A&&A.documents?e.address.documents.ProofOfAddress=ce[0]:(e.address.documents=[],e.address.documents.ProofOfAddress=ce&&Array.isArray(ce)&&ce.length>0&&ce[0]),e.documents.ProofOfAddress=ce&&Array.isArray(ce)&&ce.length>0&&ce[0],"CFC_COUNTER"===(null===(N=e)||void 0===N?void 0:N.channel)||"BUILTUP.INDEPENDENTPROPERTY"===(null===(I=e)||void 0===I?void 0:I.PropertyType)&&0==e.units.length||0==(null===(h=e)||void 0===h||null===(C=h.additionalDetails)||void 0===C?void 0:C.isRainwaterHarvesting)){if("VACANT"===(null===(ve=e)||void 0===ve?void 0:ve.propertyType))e.PropertyType={code:null===(Te=e)||void 0===Te?void 0:Te.propertyType,i18nKey:"COMMON_PROPTYPE_"+e.propertyType},e.isResdential="RESIDENTIAL"===(null===(fe=e)||void 0===fe?void 0:fe.usageCategory)?{code:"RESIDENTIAL",i18nKey:"PT_COMMON_YES"}:{code:"NONRESIDENTIAL",i18nKey:"PT_COMMON_NO"},e.usageCategoryMajor={code:null===(ye=e)||void 0===ye?void 0:ye.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(Se=e)||void 0===Se||null===(ge=Se.usageCategory)||void 0===ge?void 0:ge.split(".").pop())},e.landarea={floorarea:null===(Pe=e)||void 0===Pe?void 0:Pe.landArea};else if("BUILTUP.SHAREDPROPERTY"===(null===(Ee=e)||void 0===Ee?void 0:Ee.propertyType)){var Ge,Xe,qe,$e,Ze,Qe,Je,et,tt,nt,lt,ot,it,at,rt,ut,st,dt,ct,pt;let t=[],n=!1,l=!1,o=!1;e.isResdential="RESIDENTIAL"===(null===(Ge=e)||void 0===Ge?void 0:Ge.usageCategory)?{code:"RESIDENTIAL",i18nKey:"PT_COMMON_YES"}:{code:"NONRESIDENTIAL",i18nKey:"PT_COMMON_NO"},e.usageCategoryMajor={code:null===(Xe=e)||void 0===Xe?void 0:Xe.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(qe=e)||void 0===qe||null===($e=qe.usageCategory)||void 0===$e?void 0:$e.split(".").pop())},e.PropertyType={code:null===(Ze=e)||void 0===Ze?void 0:Ze.propertyType,i18nKey:"COMMON_PROPTYPE_BUILTUP_"+e.propertyType.split(".").pop()},e.Floorno=(null===(Qe=e)||void 0===Qe||null===(Je=Qe.units[0])||void 0===Je?void 0:Je.floorNo)<0?{i18nKey:"PROPERTYTAX_FLOOR__"+-1*(null===(et=e)||void 0===et||null===(tt=et.units[0])||void 0===tt?void 0:tt.floorNo)}:{i18nKey:"PROPERTYTAX_FLOOR_"+(null===(nt=e)||void 0===nt||null===(lt=nt.units[0])||void 0===lt?void 0:lt.floorNo)},e.Subusagetypeofrentedarea={SubUsageTypeOfRentedArea:{i18nKey:"COMMON_PROPSUBUSGTYPE_"+(null===(ot=e)||void 0===ot||null===(it=ot.units[0])||void 0===it?void 0:it.usageCategory.slice(0,null===(at=e)||void 0===at||null===(rt=at.units[0])||void 0===rt?void 0:rt.usageCategory.lastIndexOf(".")).replaceAll(".","_"))},Subusagetypeofrentedareacode:null===(ut=e)||void 0===ut||null===(st=ut.units[0])||void 0===st?void 0:st.usageCategory},(null===(dt=e)||void 0===dt?void 0:dt.units)&&(null===(ct=e)||void 0===ct||ct.units.map((i,a)=>{var r,u,s,d,c,p;if("RENTED"===(null==i?void 0:i.occupancyType)&&1==l&&i.floorNo==(null===(r=e)||void 0===r?void 0:r.units[0].floorNo)||"UNOCCUPIED"===(null==i?void 0:i.occupancyType)&&1==o&&i.floorNo==(null===(u=e)||void 0===u?void 0:u.units[0].floorNo)||"SELFOCCUPIED"===(null==i?void 0:i.occupancyType)&&1==n&&i.floorNo==(null===(s=e)||void 0===s?void 0:s.units[0].floorNo))t.includes(i)||t.push(i);else if("RENTED"===(null==i?void 0:i.occupancyType)&&i.floorNo==(null===(d=e)||void 0===d?void 0:d.units[0].floorNo)){var m;l=!0,e.Constructiondetails={RentArea:null==i||null===(m=i.constructionDetail)||void 0===m?void 0:m.builtUpArea,AnnualRent:null==i?void 0:i.arv},e.Subusagetypeofrentedarea={SubUsageTypeOfRentedArea:{i18nKey:"COMMON_PROPSUBUSGTYPE_"+(null==i?void 0:i.usageCategory.slice(0,null==i?void 0:i.usageCategory.lastIndexOf(".")).replaceAll(".","_"))},Subusagetypeofrentedareacode:null==i?void 0:i.usageCategory}}else if("UNOCCUPIED"===(null==i?void 0:i.occupancyType)&&i.floorNo==(null===(c=e)||void 0===c?void 0:c.units[0].floorNo)){var v;o=!0,e.UnOccupiedArea={UnOccupiedArea:null==i||null===(v=i.constructionDetail)||void 0===v?void 0:v.builtUpArea}}else if("SELFOCCUPIED"===(null==i?void 0:i.occupancyType)&&i.floorNo==(null===(p=e)||void 0===p?void 0:p.units[0].floorNo)){var E;n=!0,e.landarea={floorarea:null==i||null===(E=i.constructionDetail)||void 0===E?void 0:E.builtUpArea},e.subusagetype={SubUsageType:{i18nKey:"COMMON_PROPSUBUSGTYPE_"+(null==i?void 0:i.usageCategory.slice(0,null==i?void 0:i.usageCategory.lastIndexOf(".")).replaceAll(".","_"))}}}else t.includes(i)||t.push(i)})),e.selfOccupied=1==l?1==n?{i18nKey:"PT_PARTIALLY_RENTED_OUT",code:"RENTED"}:{i18nKey:"PT_FULLY_RENTED_OUT",code:"RENTED"}:{i18nKey:"PT_YES_IT_IS_SELFOCCUPIED",code:"SELFOCCUPIED"},e.IsAnyPartOfThisFloorUnOccupied=1==o?{i18nKey:"PT_COMMON_YES",code:"UNOCCUPIED"}:{i18nKey:"PT_COMMON_NO",code:"UNOCCUPIED"},e.floordetails={plotSize:null===(pt=e)||void 0===pt?void 0:pt.landArea,builtUpArea:O(e)},e.extraunitFPB=t}else if("BUILTUP.INDEPENDENTPROPERTY"===(null===(_e=e)||void 0===_e?void 0:_e.propertyType)){var mt,vt,Et,_t,Tt,ft,yt,St,gt;e.landArea={floorarea:null===(mt=e)||void 0===mt?void 0:mt.landArea},e.isResdential="RESIDENTIAL"===(null===(vt=e)||void 0===vt?void 0:vt.usageCategory)?{code:"RESIDENTIAL",i18nKey:"PT_COMMON_YES"}:{code:"NONRESIDENTIAL",i18nKey:"PT_COMMON_NO"},e.usageCategoryMajor={code:null===(Et=e)||void 0===Et?void 0:Et.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(_t=e)||void 0===_t||null===(Tt=_t.usageCategory)||void 0===Tt?void 0:Tt.split(".").pop())},e.PropertyType={code:null===(ft=e)||void 0===ft?void 0:ft.propertyType,i18nKey:"COMMON_PROPTYPE_BUILTUP_"+e.propertyType.split(".").pop()};let t,n=[],l={},o=[],i=[];e.units&&e.units.sort((e,t)=>{let n=e.floorNo,l=t.floorNo;return e.floorNo<0&&(n=-20*e.floorNo),t.floorNo<0&&(l=-20*t.floorNo),n>l?1:-1}),(null===(yt=e)||void 0===yt?void 0:yt.units)&&(null===(St=e)||void 0===St||St.units.map((a,r)=>{l={},0==a.floorNo||1==a.floorNo||2==a.floorNo||-1==a.floorNo||-2==a.floorNo?(t=a.floorNo,l=((e,t,n,l,o)=>{let i=0,a=!1,r=!1,u=!1;return t.plotSize=""+(null==e?void 0:e.landArea),(null==e?void 0:e.units)&&(null==e||e.units.map((e,s)=>{if((null==e?void 0:e.floorNo)==n&&("RENTED"===(null==e?void 0:e.occupancyType)&&1==r||"UNOCCUPIED"===(null==e?void 0:e.occupancyType)&&1==u||"SELFOCCUPIED"===(null==e?void 0:e.occupancyType)&&1==a||n>o.length))l.includes(e)||l.push(e);else if((null==e?void 0:e.floorNo)==n&&"RENTED"===(null==e?void 0:e.occupancyType)){var d,c;r=!0,t.AnnualRent=""+e.arv||"",t.RentArea=""+(null==e||null===(d=e.constructionDetail)||void 0===d?void 0:d.builtUpArea),t.SubUsageTypeOfRentedArea={i18nKey:"COMMON_PROPSUBUSGTYPE_"+(e.usageCategory.split(".")[0]+"_"+e.usageCategory.split(".")[1]+"_"+e.usageCategory.split(".").pop()).replaceAll(".","_"),Subusagetypeofrentedareacode:e.usageCategory},i+=parseInt(null==e||null===(c=e.constructionDetail)||void 0===c?void 0:c.builtUpArea)}else if((null==e?void 0:e.floorNo)==n&&"UNOCCUPIED"===(null==e?void 0:e.occupancyType)){var p,m;u=!0,t.UnOccupiedArea=""+(null==e||null===(p=e.constructionDetail)||void 0===p?void 0:p.builtUpArea),i+=parseInt(null==e||null===(m=e.constructionDetail)||void 0===m?void 0:m.builtUpArea)}else if((null==e?void 0:e.floorNo)==n&&"SELFOCCUPIED"===(null==e?void 0:e.occupancyType)){var v,E;a=!0,t.floorarea=""+(null==e||null===(v=e.constructionDetail)||void 0===v?void 0:v.builtUpArea),t.SubUsageType={i18nKey:"COMMON_PROPSUBUSGTYPE_"+(e.usageCategory.split(".")[0]+"_"+e.usageCategory.split(".")[1]+"_"+e.usageCategory.split(".").pop()).replaceAll(".","_")},i+=parseInt(null==e||null===(E=e.constructionDetail)||void 0===E?void 0:E.builtUpArea)}})),t.selfOccupied=1==u&&0==r&&0==a?"":1==r?1==a?{i18nKey:"PT_PARTIALLY_RENTED_OUT",code:"RENTED"}:{i18nKey:"PT_FULLY_RENTED_OUT",code:"RENTED"}:{i18nKey:"PT_YES_IT_IS_SELFOCCUPIED",code:"SELFOCCUPIED"},t.IsAnyPartOfThisFloorUnOccupied=1==u?{i18nKey:"PT_COMMON_YES",code:"UNOCCUPIED"}:{i18nKey:"PT_COMMON_NO",code:"UNOCCUPIED"},t.builtUpArea=""+i,t})(e,l,t,i,n),""==l.selfOccupied&&i.push(a)):i.push(a),l=={}&&i.push(a),!o.includes(a.floorNo)&&l.builtUpArea>0&&a.floorNo>-1&&a.floorNo<3&&""!==l.selfOccupied&&l!={}&&n.push(l),-1==a.floorNo&&l!={}&&""!==l.selfOccupied&&l.builtUpArea>0&&(n[-1]=l),n[-1]&&-2==a.floorNo&&!i.includes(a)?-2==a.floorNo&&l!={}&&""!==l.selfOccupied&&l.builtUpArea>0&&(n[-2]=l):n[-1]||-2!=a.floorNo||i.includes(a)||i.push(a),o.push(t)})),e.noOfFloors=3==n.length?{i18nKey:"PT_GROUND_PLUS_TWO_OPTION",code:2}:2==n.length?{i18nKey:"PT_GROUND_PLUS_ONE_OPTION",code:1}:{i18nKey:"PT_GROUND_FLOOR_OPTION",code:0},e.noOofBasements=n[-2]?{i18nKey:"PT_TWO_BASEMENT_OPTION",code:2}:n[-1]?{i18nKey:"PT_ONE_BASEMENT_OPTION",code:1}:{i18nKey:"PT_NO_BASEMENT_OPTION",code:0},e.units=null===(gt=e)||void 0===gt?void 0:gt.units.map(e=>{var t,n,l,o;return{...e,unitType:{code:"RESIDENTIAL"===(null==e?void 0:e.usageCategory)?null==e?void 0:e.usageCategory:null==e||null===(t=e.usageCategory)||void 0===t?void 0:t.split(".")[3],i18nKey:"RESIDENTIAL"===(null==e?void 0:e.usageCategory)?"PROPERTYTAX_BILLING_SLAB_"+(null==e?void 0:e.usageCategory):"PROPERTYTAX_BILLING_SLAB_"+(null==e||null===(n=e.usageCategory)||void 0===n?void 0:n.split(".")[3]),usageCategoryMinor:"RESIDENTIAL"===(null==e?void 0:e.usageCategory)?"":null==e||null===(l=e.usageCategory)||void 0===l?void 0:l.split(".")[1],usageCategorySubMinor:"RESIDENTIAL"===(null==e?void 0:e.usageCategory)?"":null==e||null===(o=e.usageCategory)||void 0===o?void 0:o.split(".")[2]}}})}}else if("VACANT"===(null===(Ae=e)||void 0===Ae||null===(Ne=Ae.additionalDetails)||void 0===Ne||null===(Oe=Ne.propertyType)||void 0===Oe?void 0:Oe.code)||"VACANT"===(null===(Ie=e)||void 0===Ie||null===(he=Ie.propertyType)||void 0===he?void 0:he.code))e.PropertyType=null===(ke=e)||void 0===ke||null===(He=ke.additionalDetails)||void 0===He?void 0:He.propertyType,e.isResdential=null===(Ye=e)||void 0===Ye||null===(We=Ye.additionalDetails)||void 0===We?void 0:We.isResdential,e.usageCategoryMajor={code:null===(je=e)||void 0===je?void 0:je.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(Ke=e)||void 0===Ke||null===(Ve=Ke.usageCategory)||void 0===Ve?void 0:Ve.split(".").pop())},e.landarea={floorarea:null===(ze=e)||void 0===ze?void 0:ze.landArea};else if("BUILTUP.SHAREDPROPERTY"===(null===(Ce=e)||void 0===Ce||null===(Re=Ce.additionalDetails)||void 0===Re||null===(be=Re.propertyType)||void 0===be?void 0:be.code)||"BUILTUP.SHAREDPROPERTY"===(null===(De=e)||void 0===De||null===(Le=De.propertyType)||void 0===Le?void 0:Le.code)){var Pt,At,Nt,Ot,It,ht,Ct,Rt,bt,Dt,Lt,wt,Mt,xt,Ut,Ft,Bt,kt,Ht,Yt,Wt,jt,Kt,Vt,zt,Gt;e.isResdential=null===(Pt=e)||void 0===Pt||null===(At=Pt.additionalDetails)||void 0===At?void 0:At.isResdential,e.usageCategoryMajor={code:null===(Nt=e)||void 0===Nt?void 0:Nt.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(Ot=e)||void 0===Ot||null===(It=Ot.usageCategory)||void 0===It?void 0:It.split(".").pop())},e.PropertyType=null===(ht=e)||void 0===ht||null===(Ct=ht.additionalDetails)||void 0===Ct?void 0:Ct.propertyType,e.Floorno=(null===(Rt=e)||void 0===Rt||null===(bt=Rt.units[0])||void 0===bt?void 0:bt.floorNo)<0?{i18nKey:"PROPERTYTAX_FLOOR__"+-1*(null===(Dt=e)||void 0===Dt||null===(Lt=Dt.units[0])||void 0===Lt?void 0:Lt.floorNo)}:{i18nKey:"PROPERTYTAX_FLOOR_"+(null===(wt=e)||void 0===wt||null===(Mt=wt.units[0])||void 0===Mt?void 0:Mt.floorNo)},e.selfOccupied=null===(xt=e)||void 0===xt||null===(Ut=xt.additionalDetails)||void 0===Ut?void 0:Ut.selfOccupied,e.Subusagetypeofrentedarea=null===(Ft=e)||void 0===Ft||null===(Bt=Ft.additionalDetails)||void 0===Bt?void 0:Bt.Subusagetypeofrentedarea,e.subusagetype=null===(kt=e)||void 0===kt||null===(Ht=kt.additionalDetails)||void 0===Ht?void 0:Ht.subusagetype,e.IsAnyPartOfThisFloorUnOccupied=null===(Yt=e)||void 0===Yt||null===(Wt=Yt.additionalDetails)||void 0===Wt?void 0:Wt.IsAnyPartOfThisFloorUnOccupied,(null===(jt=e)||void 0===jt?void 0:jt.units)&&(null===(Kt=e)||void 0===Kt||Kt.units.map((t,n)=>{var l;if("RENTED"===(null==t?void 0:t.occupancyType))e.Constructiondetails={RentArea:null==t||null===(l=t.constructionDetail)||void 0===l?void 0:l.builtUpArea,AnnualRent:null==t?void 0:t.arv};else if("UNOCCUPIED"===(null==t?void 0:t.occupancyType)){var o;e.UnOccupiedArea={UnOccupiedArea:null==t||null===(o=t.constructionDetail)||void 0===o?void 0:o.builtUpArea}}else if("SELFOCCUPIED"===(null==t?void 0:t.occupancyType)){var i;e.landarea={floorarea:null==t||null===(i=t.constructionDetail)||void 0===i?void 0:i.builtUpArea}}})),e.floordetails={plotSize:null===(Vt=e)||void 0===Vt?void 0:Vt.landArea,builtUpArea:null===(zt=e)||void 0===zt||null===(Gt=zt.additionalDetails)||void 0===Gt?void 0:Gt.builtUpArea}}else if("BUILTUP.INDEPENDENTPROPERTY"===(null===(we=e)||void 0===we||null===(Me=we.additionalDetails)||void 0===Me||null===(xe=Me.propertyType)||void 0===xe?void 0:xe.code)||"BUILTUP.INDEPENDENTPROPERTY"===(null===(Ue=e)||void 0===Ue||null===(Fe=Ue.propertyType)||void 0===Fe?void 0:Fe.code)||"BUILTUP.INDEPENDENTPROPERTY"===(null===(Be=e)||void 0===Be?void 0:Be.propertyType)){var Xt,qt,$t,Zt,Qt,Jt,en,tn,nn,ln,on,an,rn,un,sn,dn,cn,pn,mn,vn,En,_n,Tn;e.isResdential=null===(Xt=e)||void 0===Xt||null===(qt=Xt.additionalDetails)||void 0===qt?void 0:qt.isResdential,e.usageCategoryMajor={code:null===($t=e)||void 0===$t?void 0:$t.usageCategory,i18nKey:"PROPERTYTAX_BILLING_SLAB_"+(null===(Zt=e)||void 0===Zt||null===(Qt=Zt.usageCategory)||void 0===Qt?void 0:Qt.split(".").pop())},e.PropertyType=(null===(Jt=e)||void 0===Jt||null===(en=Jt.additionalDetails)||void 0===en?void 0:en.propertyType)||(null===(tn=e)||void 0===tn?void 0:tn.propertyType),e.noOfFloors=(null===(nn=e)||void 0===nn||null===(ln=nn.additionalDetails)||void 0===ln?void 0:ln.noOfFloors)||(null===(on=e)||void 0===on?void 0:on.noOfFloors),e.noOofBasements=null===(an=e)||void 0===an||null===(rn=an.additionalDetails)||void 0===rn?void 0:rn.noOofBasements,e.units=null===(un=e)||void 0===un||null===(sn=un.additionalDetails)||void 0===sn?void 0:sn.unit,e.units[0].selfOccupied=null===(dn=e)||void 0===dn||null===(cn=dn.additionalDetails)||void 0===cn||null===(pn=cn.unit[0])||void 0===pn?void 0:pn.selfOccupied,e.units[-1]=null===(mn=e)||void 0===mn||null===(vn=mn.additionalDetails)||void 0===vn?void 0:vn.basement1,e.units[-2]=null===(En=e)||void 0===En||null===(_n=En.additionalDetails)||void 0===_n?void 0:_n.basement2,e.landArea={floorarea:null===(Tn=e)||void 0===Tn?void 0:Tn.landArea}}return e}(I);f({...T,...e})}},[b]);const L=()=>{},w=()=>{};if(P||R)return l.createElement(t.Loader,null);g=ct,g.forEach(e=>{_=_.concat(e.body.filter(e=>!e.hideInCitizen))}),_.indexRoute="info";const x=null===(a=Digit)||void 0===a||null===(u=a.ComponentRegistryService)||void 0===u?void 0:u.getComponent("PTCheckPage"),F=null===(s=Digit)||void 0===s||null===(d=s.ComponentRegistryService)||void 0===d?void 0:d.getComponent("PTAcknowledgement");return l.createElement(i.Switch,null,_.map((e,t)=>{const{component:n,texts:o,inputs:a,key:r}=e,u="string"==typeof n?Digit.ComponentRegistryService.getComponent(n):n;return l.createElement(i.Route,{path:p.path+"/"+e.route,key:t},l.createElement(u,{config:{texts:o,inputs:a,key:r},onSelect:D,onSkip:L,t:m,formData:T,onAdd:w}))}),l.createElement(i.Route,{path:p.path+"/check"},l.createElement(x,{onSubmit:function(){try{return E.push(p.path+"/acknowledgement"),Promise.resolve()}catch(e){return Promise.reject(e)}},value:T})),l.createElement(i.Route,{path:p.path+"/acknowledgement"},l.createElement(F,{data:T,onSuccess:()=>{y(),c.invalidateQueries("PT_CREATE_PROPERTY"),sessionStorage.setItem("propertyInitialObject",JSON.stringify({})),sessionStorage.setItem("pt-property",JSON.stringify({}))}})),l.createElement(i.Route,null,l.createElement(i.Redirect,{to:p.path+"/"+_.indexRoute})))},PTMutateProperty:e=>{var t,a;const{t:r}=o.useTranslation(),u=i.useRouteMatch(),{pathname:s}=i.useLocation(),[d,c,p]=Digit.Hooks.useSessionStorage("PT_MUTATE_PROPERTY",{}),m=i.useHistory(),[v,E]=n.useState(!1),[_,T]=n.useState(null),{data:f}=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.pt.useMDMS(Digit.ULBService.getStateId(),"PropertyTax","MutationDocuments"));let y=[];function S(e,t,n,l,o,i){let a=s.split("/"),r=a.pop();if(null!=i&&i.nesting)for(let e=0;e<(null==i?void 0:i.nesting);e++)r=a.pop();let u=y.filter(e=>e.route===r)[0];((e,t)=>{c(n=>({...n,[e]:t}))})(e,t);let{queryParams:d}=i||{},p=d?"?"+Object.keys(d).map(e=>e+"="+d[e]).join("&"):"";if(u.nextStep){if("string"==typeof u.nextStep)n?m.replace(a.join("/")+"/"+u.nextStep+p):m.push(a.join("/")+"/"+u.nextStep+p);else if("object"==typeof u.nextStep){let e=u.nextStep[null==i?void 0:i.routeKey];n?m.replace(a.join("/")+"/"+e+p):m.push(a.join("/")+"/"+e+p)}}else E(!0)}En.forEach(e=>{y=y.concat(e.body.filter(e=>!e.hideInCitizen))}),n.useEffect(()=>{v&&g()},[v]);const g=()=>{var e,t,n,l;const o=d.searchResult.property,{additionalDetails:i,ownershipCategory:a,addressProof:r,transferReasonProof:u}=d,s=null!=a&&a.code.includes("INDIVIDUAL")?d.Owners:d.owners,c=[...s.map(e=>Object.keys(e.documents).map(t=>{const{documentType:n,fileStoreId:l}=e.documents[t];return{documentType:n.code,fileStoreId:l}})).flat(),...[r,u].map((e,t)=>{const{documentType:n,fileStoreId:l}=e;return{documentType:1===t?n.code.split(".")[2]:n.code,fileStoreId:l}})];o.owners=null==o?void 0:o.owners.filter(e=>"ACTIVE"==e.status);const p={Property:{...d.searchResult.property,creationReason:"MUTATION",owners:[...null===(e=o.owners)||void 0===e?void 0:e.map(e=>({...e,status:"INACTIVE"})),...s.map(e=>{var t,n,l,o;return{...e,documents:Object.keys(e.documents).map(t=>{const{documentType:n,fileStoreId:l}=e.documents[t];return{documentType:n.code,fileStoreId:l}}),gender:null===(t=e.gender)||void 0===t?void 0:t.code,ownerType:(null===(n=e.ownerType)||void 0===n?void 0:n.code)||"NONE",relationship:null===(l=e.relationship)||void 0===l?void 0:l.code,inistitutetype:null==e||null===(o=e.inistitutetype)||void 0===o?void 0:o.value,landlineNumber:null==e?void 0:e.altContactNumber,status:"ACTIVE"}})],additionalDetails:{...i,isMutationInCourt:null===(t=i.isMutationInCourt)||void 0===t?void 0:t.code,reasonForTransfer:null==i?void 0:i.reasonForTransfer.code,isPropertyUnderGovtPossession:i.isPropertyUnderGovtPossession.code,documentDate:new Date(null==i?void 0:i.documentDate).getTime(),marketValue:Number(null==i?void 0:i.marketValue)},ownershipCategory:a.code,documents:[...null!=o&&o.documents&&(null==o||null===(n=o.documents)||void 0===n?void 0:n.length)>0?null==o||null===(l=o.documents)||void 0===l?void 0:l.map(e=>{var t;return null!=f&&null!==(t=f.PropertyTax)&&void 0!==t&&t.MutationDocuments.some(t=>e.documentType.includes(t.code))?{...e,status:"INACTIVE"}:e}):[],...c],workflow:{action:"OPEN",businessService:"PT.MUTATION",moduleName:"PT",tenantId:o.tenantId}}};var m,v,E;null!=a&&a.code.includes("INDIVIDUAL")?delete p.Property.institution:(p.Property.institution={nameOfAuthorizedPerson:s[0].name,name:s[0].inistitutionName,designation:s[0].designation,tenantId:null==p||null===(m=p.Property)||void 0===m?void 0:m.address.tenantId,type:null===(v=s[0].inistitutetype)||void 0===v?void 0:v.value},p.Property.owners=null===(E=p.Property.owners)||void 0===E?void 0:E.map(e=>"INACTIVE"===e.status?{...e,altContactNumber:s[0].altContactNumber}:e)),T(p)};n.useEffect(()=>{_&&m.push(u.path+"/check")},[_]);const P=()=>{};y.indexRoute="search-property";const A=null===(t=Digit)||void 0===t||null===(a=t.ComponentRegistryService)||void 0===a?void 0:a.getComponent("PTAcknowledgement");return l.createElement(l.Fragment,null,l.createElement(i.Switch,null,y.map((e,t)=>{const{component:n}=e,o="string"==typeof n?Digit.ComponentRegistryService.getComponent(n):n;return l.createElement(i.Route,{path:u.path+"/"+e.route,key:t},o?l.createElement(o,{config:e,onSelect:S,onSkip:P,t:r,formData:d,clearParams:()=>p()}):l.createElement("div",null,"Component not found"))}),l.createElement(i.Route,{path:u.path+"/check"},l.createElement(_n,{onSubmit:()=>{m.push(u.path+"/acknowledgement")},value:d})),l.createElement(i.Route,{path:u.path+"/acknowledgement"},l.createElement(A,{data:_,onSuccess:()=>{p(),T(null)}})),l.createElement(i.Route,null,l.createElement(i.Redirect,{to:u.path+"/"+y.indexRoute}))))},SelectOtp:e=>{let{config:o,otp:i,onOtpChange:a,onResend:r,onSelect:u,t:s,error:d,userType:c="citizen",canSubmit:p}=e;const[m,v]=n.useState(30);!function(e,t){const l=n.useRef();n.useEffect(()=>{l.current=e},[e]),n.useEffect(()=>{if(null!==t){const e=setInterval(function(){l.current()},t);return()=>clearInterval(e)}},[t])}(()=>{v(m-1)},m>0?1e3:null);const E=()=>{r(),v(2)};return"employee"===c?l.createElement(n.Fragment,null,l.createElement(t.OTPInput,{length:6,onChange:a,value:i}),m>0?l.createElement(t.CardText,null,s("CS_RESEND_ANOTHER_OTP")+" "+m+" "+s("CS_RESEND_SECONDS")):l.createElement("p",{className:"card-text-button",onClick:E},s("CS_RESEND_OTP")),!d&&l.createElement(t.CardLabelError,null,s("CS_INVALID_OTP"))):l.createElement(t.FormStep,{onSelect:u,config:o,t:s,isDisabled:!(6===(null==i?void 0:i.length)&&p)},l.createElement(t.OTPInput,{length:6,onChange:a,value:i}),m>0?l.createElement(t.CardText,null,s("CS_RESEND_ANOTHER_OTP")+" "+m+" "+s("CS_RESEND_SECONDS")):l.createElement("p",{className:"card-text-button",onClick:E},s("CS_RESEND_OTP")),!d&&l.createElement(t.CardLabelError,null,s("CS_INVALID_OTP")))},AcknowledgementCF:e=>{var n,a,r,u,s,d,c,p,m;const{t:v}=o.useTranslation(),E=(Digit.ULBService.getCurrentTenantId(),i.useLocation()),_=(Digit.Hooks.useStore.getInitData(),window.Digit.Utils.browser.isMobile());return l.createElement("form",null,l.createElement(t.Card,{style:_?{padding:"unset"}:{}},l.createElement(wi,{t:v,data:E.state,isSuccess:!(null===(n=E.state)||void 0===n||null===(a=n.result)||void 0===a||null===(r=a.Service)||void 0===r||!r[0]),isMobile:_,isLoading:!1}),(null===(u=E.state)||void 0===u||null===(s=u.result)||void 0===s||null===(d=s.Service)||void 0===d?void 0:d[0])&&l.createElement(t.CardText,{style:{padding:"0px 10px 0px 10px"}},v("CS_CF_FEEDBACK_RESPONSE")),!(null!==(c=E.state)&&void 0!==c&&null!==(p=c.result)&&void 0!==p&&null!==(m=p.Service)&&void 0!==m&&m[0])&&l.createElement(t.CardText,null,v("CS_FILE_PROPERTY_FAILED_RESPONSE")),l.createElement("div",{style:{padding:"0px 10px 20px 10px"}},l.createElement(i.Link,{to:"/digit-ui/citizen"},l.createElement(t.SubmitBar,{label:v("CS_COMMON_GO_BACK_TO_HOME")})))))},CitizenFeedback:e=>{var a,r,u,s;let{popup:d=!1,onClose:c,setShowToast:p,data:m}=e;const{t:v}=o.useTranslation(),E=i.useHistory(),_=Digit.UserService.getUser();let{redirectedFrom:T,propertyId:f,acknowldgementNumber:y,creationReason:S,tenantId:g,locality:P}=Digit.Hooks.useQueryParams();const A=window.Digit.Utils.browser.isMobile();g=g||Digit.ULBService.getCurrentTenantId();const N=Digit.ULBService.getStateId(),{data:O,isLoading:I}=Digit.Hooks.pt.useRatingAndFeedbackMDMS.RatingAndFeedBack(N),[h,C]=n.useState(""),[R,b]=n.useState(0);if(I)return l.createElement(t.Loader,null);const D=e=>{var t,n;let l=null==O||null===(t=O.enabledScreensList)||void 0===t||null===(n=t.filter(e=>{var t,n,l;return"PT"===(null==e?void 0:e.module)&&((null==T?void 0:T.includes(null==e?void 0:e.screenfrom))||(null==e||null===(t=e.bussinessService)||void 0===t?void 0:t.includes(null==m||null===(n=m.Properties)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.creationReason)))}))||void 0===n?void 0:n[0];return"Header"===e?null==l?void 0:l.cardHeader:"Text"===e?null==l?void 0:l.cardText:void 0};return l.createElement(l.Fragment,null,l.createElement("form",null,l.createElement(t.Card,null,l.createElement("div",{style:d?{display:"flex",justifyContent:"space-between"}:{}},l.createElement(t.CardHeader,null,v(D("Header"))||v("PT_RATE_HELP_TEXT")),d&&l.createElement("span",{style:{marginTop:"8px"},onClick:()=>c(!1)},l.createElement(t.CloseSvg,null))),l.createElement(t.CardText,null,v(D("Text"),{acknowldgementNumber:y||(null==m||null===(a=m.Properties)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.acknowldgementNumber),propertyId:f||(null==m||null===(u=m.Properties)||void 0===u||null===(s=u[0])||void 0===s?void 0:s.propertyId)})||v("PT_RATE_TEXT")),l.createElement(t.Rating,{styles:{justifyContent:"center"},currentRating:R,maxRating:5,onFeedback:(e,t,n)=>{b(n)}}),0!==R&&l.createElement("div",null,l.createElement(t.CardLabel,null,v((null==O||null===(L=O.headerByRating)||void 0===L||null===(w=L.filter(e=>R>=(null==e?void 0:e.minvalue)&&R<=(null==e?void 0:e.maxvalue)))||void 0===w||null===(M=w[0])||void 0===M?void 0:M.code)||v("CS_WHAT_WENT_WRONG"))),l.createElement(t.TextArea,{name:"",minLength:"64",onChange:e=>{C(e.target.value)}}),h&&(null==h?void 0:h.length)<64&&l.createElement(t.CardLabelError,{style:{marginTop:"-20px",marginBottom:"25px"}},v("CS_MIN_LENGTH_64"))),l.createElement(t.SubmitBar,{label:v("PT_SUBMIT"),onSubmit:()=>{var e,t,n,l;let o={},i={tenantId:(null==m||null===(e=m.Properties)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.tenantId)||g,code:["PT_"+(null!=T&&T.includes("payment")?"PAYMENT":S||(null==m||null===(n=m.Properties)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.creationReason))],module:["PT"]};Digit.PTService.cfdefinitionsearch({filters:{ServiceDefinitionCriteria:i}}).then((e,t)=>{var n,l,i,a,r,u,s,v,T,S,A,N,O,I;(null==e||null===(n=e.ServiceDefinition)||void 0===n?void 0:n.length)>0&&(o={tenantId:(null==m||null===(l=m.Properties)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.tenantId)||g,serviceDefId:null==e||null===(a=e.ServiceDefinition)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.id,isActive:!0,attributes:[{attributeCode:"consumerCode",value:f||(null==m||null===(u=m.Properties)||void 0===u||null===(s=u[0])||void 0===s?void 0:s.propertyId),additionalDetails:{}},{attributeCode:"rating",value:R,additionalDetails:{}},{attributeCode:"comments",value:h,additionalDetails:{}},{attributeCode:"channel",value:"Online",additionalDetails:{}}],additionalDetails:{locality:P||(null==m||null===(v=m.Properties)||void 0===v||null===(T=v[0])||void 0===T||null===(S=T.address)||void 0===S||null===(A=S.locality)||void 0===A?void 0:A.code)||""},accountId:null==_||null===(N=_.info)||void 0===N?void 0:N.uuid},o={...o,referenceId:y||(null==m||null===(O=m.Properties)||void 0===O||null===(I=O[0])||void 0===I?void 0:I.acknowldgementNumber)},Digit.PTService.cfcreate({Service:{...o}},g).then((e,t)=>{var n;(null==e||null===(n=e.Service)||void 0===n?void 0:n.length)>0&&(d?(c(!1),p({key:!1,label:"PT_FEEDBACK_SUBMITTED_SUCCESSFULLY"})):E.push({pathname:"/digit-ui/citizen/feedback-acknowledgement",state:{rating:R,comment:h,result:e}}))}).catch(e=>{var t,n,l;p({key:"error",label:""+(null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(l=n.Errors[0])||void 0===l?void 0:l.message)})}))})},disabled:!!(h&&(null==h?void 0:h.length)<64)||!R}),!d&&l.createElement("div",{className:"link",style:A?{marginTop:"8px",width:"100%",textAlign:"center"}:{marginTop:"8px"}},l.createElement(i.Link,{to:"/digit-ui/citizen"},v("CS_GO_BACK_HOME"))))));var L,w,M},PTSelectLandmark:e=>{var o;let{t:i,config:a,onSelect:r,formData:s,userType:c}=e;const[p,m]=n.useState(),[v,E]=n.useState(""),_=[{label:"ES_NEW_APPLICATION_LOCATION_LANDMARK",type:"textarea",name:"landmark",validation:{maxLength:1024}}];function T(e){e.target.value.length>1024?E("CS_COMMON_LANDMARK_MAX_LENGTH"):(E(null),m(e.target.value),"employee"===c&&r(a.key,{...s[a.key],landmark:e.target.value}))}return n.useEffect(()=>{var e;m(null==s||null===(e=s.address)||void 0===e?void 0:e.landmark)},[null==s||null===(o=s.address)||void 0===o?void 0:o.landmark]),"employee"===c?null==_?void 0:_.map((e,n)=>l.createElement(t.LabelFieldPair,{key:n},l.createElement(t.CardLabel,{className:"card-label-smaller"},i(e.label),a.isMandatory?" * ":null),l.createElement(t.TextArea,u({className:"form-field",id:e.name,value:p,onChange:T,name:e.name||""},e.validation)))):l.createElement(l.Fragment,null,window.location.href.includes("/citizen")?l.createElement(d,{currentStep:1}):null,l.createElement(t.FormStep,{config:{...a,inputs:_},value:p,onChange:T,onSelect:e=>r(a.key,{...s[a.key],...e}),onSkip:()=>r(),t:i,forcedError:i(v)}))}},xi=e=>{let{stateCode:t,userType:o,tenants:a}=e;const{path:r,url:u}=i.useRouteMatch(),s=Digit.StoreData.getCurrentLanguage();return Digit.Services.useStore({stateCode:t,moduleCode:"PT",language:s}),Object.entries(Mi).forEach(e=>{let[t,n]=e;Digit.ComponentRegistryService.setComponent(t,n)}),Digit.SessionStorage.set("PT_TENANTS",a),n.useEffect(()=>"employee"===o&&Digit.LocalizationService.getLocale({modules:["rainmaker-"+Digit.ULBService.getCurrentTenantId()],locale:Digit.StoreData.getCurrentLanguage(),tenantId:Digit.ULBService.getCurrentTenantId()}),[]),"employee"===o?l.createElement(Xn,{path:r,url:u,userType:o}):l.createElement(ee,null)},Ui=e=>{let{matchPath:i}=e;const{t:a}=o.useTranslation(),[r,u,s]=Digit.Hooks.useSessionStorage("PT_CREATE_PROPERTY",{});n.useEffect(()=>{s()},[]);const d=[{link:i+"/property/citizen-search",i18nKey:a("PT_SEARCH_AND_PAY")},{link:"/digit-ui/citizen/payment/my-bills/PT",i18nKey:a("CS_TITLE_MY_BILLS")},{link:i+"/property/my-payments",i18nKey:a("PT_MY_PAYMENTS_HEADER")},{link:i+"/property/new-application",i18nKey:a("PT_CREATE_PROPERTY")},{link:i+"/property/my-properties",i18nKey:a("PT_MY_PROPERTIES")},{link:i+"/property/my-applications",i18nKey:a("PT_MY_APPLICATION")},{link:i+"/property/property-mutation",i18nKey:a("PT_PROPERTY_MUTATION")},{link:i+"/howItWorks",i18nKey:a("PT_HOW_IT_WORKS")},{link:i+"/faqs",i18nKey:a("PT_FAQ_S")}];return l.createElement(t.CitizenHomeCard,{header:a("ACTION_TEST_PROPERTY_TAX"),links:d,Icon:()=>l.createElement(t.PTIcon,{className:"fill-path-primary-main"})})};exports.PTComponents={PTCard:()=>{const{t:e}=o.useTranslation(),[i,a]=n.useState("-"),{data:r,isLoading:u,isFetching:s,isSuccess:d}=Digit.Hooks.useNewInboxGeneral({tenantId:Digit.ULBService.getCurrentTenantId(),ModuleCode:"PT",filters:{limit:10,offset:0,services:["PT.CREATE","PT.MUTATION","PT.UPDATE"]},config:{select:e=>({totalCount:null==e?void 0:e.totalCount,nearingSlaCount:null==e?void 0:e.nearingSlaCount}||"-"),enabled:Digit.Utils.ptAccess()}});if(n.useEffect(()=>{!s&&d&&a(r)},[s]),!Digit.Utils.ptAccess())return null;const c=[{count:u?"-":null==i?void 0:i.totalCount,label:e("ES_COMMON_INBOX"),link:"/digit-ui/employee/pt/inbox"},{label:e("ES_TITLE_NEW_REGISTRATION"),link:"/digit-ui/employee/pt/new-application",role:"PT_CEMP"},{label:e("SEARCH_PROPERTY"),link:"/digit-ui/employee/pt/search"},{label:e("ES_COMMON_APPLICATION_SEARCH"),link:"/digit-ui/employee/pt/application-search"}],p=Digit.UserService.hasAccess(["PT_CEMP"])||!1,m={Icon:l.createElement(t.PropertyHouse,null),moduleName:e("ES_TITLE_PROPERTY_TAX"),kpis:[{count:null==i?void 0:i.totalCount,label:e("ES_TITLE_INBOX"),link:"/digit-ui/employee/pt/inbox"},{count:null==i?void 0:i.nearingSlaCount,label:e("TOTAL_NEARING_SLA"),link:"/digit-ui/employee/pt/inbox"}],links:c.filter(e=>!(null!=e&&e.role)||p)};return l.createElement(t.EmployeeModuleCard,m)},PTModule:xi,PTLinks:Ui,PT_INBOX_FILTER:e=>l.createElement(Zn,e),PTEmptyResultInbox:e=>{const{t:n}=o.useTranslation(),a=i.useHistory();return l.createElement(l.Fragment,null,e.data?l.createElement(l.Fragment,null,l.createElement("div",{style:{textAlign:"center",marginTop:"50px",marginBottom:"24px"}},n("PT_NO_MATCHING_PROPERTY_FOUND")),l.createElement("div",{style:{textAlign:"center"}},l.createElement(t.SubmitBar,{onSubmit:()=>{a.push("/digit-ui/employee/pt/new-application")},label:n("PT_ADD_NEW_PROPERTY_BUTTON")}))):null)},PTInboxTableConfig:e=>({PT:{searchColumns:t=>[{Header:e("ES_INBOX_UNIQUE_PROPERTY_ID"),disableSortBy:!0,Cell:e=>{var n,o,a,r;let{row:u}=e;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:t.parentRoute+"/property-details/"+(null===(n=u.original)||void 0===n||null===(o=n.searchData)||void 0===o?void 0:o.propertyId)},null===(a=u.original)||void 0===a||null===(r=a.searchData)||void 0===r?void 0:r.propertyId)))},mobileCell:e=>{var t;return el(null==e||null===(t=e.searchData)||void 0===t?void 0:t.propertyId)}},{Header:e("ES_INBOX_OWNER_NAME"),disableSortBy:!0,Cell:e=>{var t,n,l;let{row:o}=e;const i=(null===(t=o.original)||void 0===t?void 0:t.searchData.owners)||[],a=null===(n=o.original)||void 0===n?void 0:n.searchData.status,r=null===(l=o.original)||void 0===l?void 0:l.searchData.creationReason,u=[...i.filter((e,t)=>"ACTIVE"===e.status),...i.filter((e,t)=>"ACTIVE"!==e.status)],s="INWORKFLOW"===a&&"MUTATION"===r?u.reverse():u;return Qn(""+(null==s?void 0:s[0].name))},mobileCell:e=>{var t,n;return el(null==e||null===(t=e.searchData)||void 0===t||null===(n=t.owners)||void 0===n?void 0:n[0].name)}},{Header:e("ES_INBOX_LOCALITY"),Cell:t=>{var n,l,o,i,a,r;let{row:u}=t;const s=null===(n=u.original)||void 0===n||null===(l=n.searchData)||void 0===l?void 0:l.tenantId;return Qn(e(s.replace(".","_").toUpperCase()+"_REVENUE_"+(null===(o=u.original)||void 0===o||null===(i=o.searchData)||void 0===i||null===(a=i.address)||void 0===a||null===(r=a.locality)||void 0===r?void 0:r.code)))},disableSortBy:!0,mobileCell:e=>{var t,n,l;return el(null==e||null===(t=e.searchData)||void 0===t||null===(n=t.address)||void 0===n||null===(l=n.locality)||void 0===l?void 0:l.name)}},{Header:e("ES_SEARCH_PROPERTY_STATUS"),Cell:t=>{var n,l;let{row:o}=t;return Qn(e(null===(n=o.original)||void 0===n||null===(l=n.searchData)||void 0===l?void 0:l.status))},disableSortBy:!0,mobileCell:e=>{var t;return el(null==e||null===(t=e.searchData)||void 0===t?void 0:t.status)}},{Header:e("ES_SEARCH_TAX_DUE"),Cell:e=>{var t,n;let{row:l}=e;return Qn("₹ "+(null===(t=l.original)||void 0===t||null===(n=t.searchData)||void 0===n?void 0:n.due_tax))},disableSortBy:!0,mobileCell:e=>{var t;return el("₹ "+(null==e||null===(t=e.searchData)||void 0===t?void 0:t.due_tax))}},{Header:e("ES_SEARCH_ACTION"),Cell:t=>{var n,o,a,r;let{row:u}=t;return l.createElement("div",null,(null===(n=u.original)||void 0===n||null===(o=n.searchData)||void 0===o?void 0:o.due_tax)>0&&Digit.Utils.didEmployeeHasRole("PT_CEMP")?l.createElement("span",{className:"link"},l.createElement(i.Link,{to:"/digit-ui/employee/payment/collect/PT/"+(null===(a=u.original)||void 0===a||null===(r=a.searchData)||void 0===r?void 0:r.propertyId)},e("ES_PT_COLLECT_TAX"))):null)},disableSortBy:!0}],inboxColumns:t=>[{Header:e("ES_INBOX_UNIQUE_PROPERTY_ID"),Cell:e=>{var n,o,a,r;let{row:u}=e;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:t.parentRoute+"/application-details/"+(null===(n=u.original)||void 0===n||null===(o=n.searchData)||void 0===o?void 0:o.propertyId)},null===(a=u.original)||void 0===a||null===(r=a.searchData)||void 0===r?void 0:r.propertyId)))},mobileCell:e=>{var t;return el(null==e||null===(t=e.searchData)||void 0===t?void 0:t.propertyId)}},{Header:e("ES_INBOX_OWNER"),Cell:e=>{var t,n,l;let{row:o}=e;return Qn(""+(null===(t=o.original)||void 0===t||null===(n=t.searchData)||void 0===n||null===(l=n.owners)||void 0===l?void 0:l[0].name))},mobileCell:e=>{var t,n;return el(null==e||null===(t=e.searchData)||void 0===t||null===(n=t.owners)||void 0===n?void 0:n[0].name)}},{Header:e("ES_INBOX_APPLICATION_TYPE"),Cell:t=>{var n,l;let{row:o}=t;return Qn(e(""+{"PT.CREATE":"ES_PT_NEW_PROPERTY","PT.MUTATION":"ES_PT_TRANSFER_OWNERSHIP","PT.UPDATE":"ES_PT_UPDATE_PROPERTY"}[null===(n=o.original)||void 0===n||null===(l=n.workflowData)||void 0===l?void 0:l.businessService]))},mobileCell:t=>{var n;return el(e({"PT.CREATE":"ES_PT_NEW_PROPERTY","PT.MUTATION":"ES_PT_TRANSFER_OWNERSHIP","PT.UPDATE":"ES_PT_UPDATE_PROPERTY"}[null==t||null===(n=t.workflowData)||void 0===n?void 0:n.businessService]))}},{Header:e("ES_INBOX_STATUS"),Cell:t=>{var n,l;let{row:o}=t;const i=null===(n=o.original)||void 0===n?void 0:n.workflowData;return Qn(e("ES_PT_COMMON_STATUS_"+(null==i||null===(l=i.state)||void 0===l?void 0:l.state)))},mobileCell:t=>{var n,l;return el(e("ES_PT_COMMON_STATUS_"+(null==t||null===(n=t.workflowData)||void 0===n||null===(l=n.state)||void 0===l?void 0:l.state)))}},{Header:e("ES_INBOX_SLA_DAYS_REMAINING"),accessor:"createdTime",Cell:e=>{let{row:t}=e;const n=t.original.workflowData,l=Math.round(((null==n?void 0:n.businesssServiceSla)||0)/864e5)||"-";return Jn(l)},mobileCell:e=>{var t;return Jn(Math.round(((null==e||null===(t=e.workflowData)||void 0===t?void 0:t.businesssServiceSla)||0)/864e5))}}],serviceRequestIdKey:t=>{var n,l;return null==t||null===(n=t[e("ES_INBOX_UNIQUE_PROPERTY_ID")])||void 0===n||null===(l=n.props)||void 0===l?void 0:l.children}}})},exports.PTLinks=Ui,exports.PTModule=xi;
