{"ast":null,"code":"(function (global) {\n  'use strict';\n\n  var util = newUtil();\n  var inliner = newInliner();\n  var fontFaces = newFontFaces();\n  var images = newImages();\n\n  // Default impl options\n  var defaultOptions = {\n    // Default is to fail on error, no placeholder\n    imagePlaceholder: undefined,\n    // Default cache bust is false, it will use the cache\n    cacheBust: false\n  };\n  var domtoimage = {\n    toSvg: toSvg,\n    toPng: toPng,\n    toJpeg: toJpeg,\n    toBlob: toBlob,\n    toPixelData: toPixelData,\n    impl: {\n      fontFaces: fontFaces,\n      images: images,\n      util: util,\n      inliner: inliner,\n      options: {}\n    }\n  };\n  if (typeof module !== 'undefined') module.exports = domtoimage;else global.domtoimage = domtoimage;\n\n  /**\n   * @param {Node} node - The DOM Node object to render\n   * @param {Object} options - Rendering options\n   * @param {Function} options.filter - Should return true if passed node should be included in the output\n   *          (excluding node means excluding it's children as well). Not called on the root node.\n   * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n   * @param {Number} options.width - width to be applied to node before rendering.\n   * @param {Number} options.height - height to be applied to node before rendering.\n   * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n   * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n              defaults to 1.0.\n   * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n   * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n   * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n   * */\n  function toSvg(node, options) {\n    options = options || {};\n    copyOptions(options);\n    return Promise.resolve(node).then(function (node) {\n      return cloneNode(node, options.filter, true);\n    }).then(embedFonts).then(inlineImages).then(applyOptions).then(function (clone) {\n      return makeSvgDataUri(clone, options.width || util.width(node), options.height || util.height(node));\n    });\n    function applyOptions(clone) {\n      if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n      if (options.width) clone.style.width = options.width + 'px';\n      if (options.height) clone.style.height = options.height + 'px';\n      if (options.style) Object.keys(options.style).forEach(function (property) {\n        clone.style[property] = options.style[property];\n      });\n      return clone;\n    }\n  }\n\n  /**\n   * @param {Node} node - The DOM Node object to render\n   * @param {Object} options - Rendering options, @see {@link toSvg}\n   * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n   * */\n  function toPixelData(node, options) {\n    return draw(node, options || {}).then(function (canvas) {\n      return canvas.getContext('2d').getImageData(0, 0, util.width(node), util.height(node)).data;\n    });\n  }\n\n  /**\n   * @param {Node} node - The DOM Node object to render\n   * @param {Object} options - Rendering options, @see {@link toSvg}\n   * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n   * */\n  function toPng(node, options) {\n    return draw(node, options || {}).then(function (canvas) {\n      return canvas.toDataURL();\n    });\n  }\n\n  /**\n   * @param {Node} node - The DOM Node object to render\n   * @param {Object} options - Rendering options, @see {@link toSvg}\n   * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n   * */\n  function toJpeg(node, options) {\n    options = options || {};\n    return draw(node, options).then(function (canvas) {\n      return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n    });\n  }\n\n  /**\n   * @param {Node} node - The DOM Node object to render\n   * @param {Object} options - Rendering options, @see {@link toSvg}\n   * @return {Promise} - A promise that is fulfilled with a PNG image blob\n   * */\n  function toBlob(node, options) {\n    return draw(node, options || {}).then(util.canvasToBlob);\n  }\n  function copyOptions(options) {\n    // Copy options to impl options for use in impl\n    if (typeof options.imagePlaceholder === 'undefined') {\n      domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n    } else {\n      domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n    }\n    if (typeof options.cacheBust === 'undefined') {\n      domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n    } else {\n      domtoimage.impl.options.cacheBust = options.cacheBust;\n    }\n  }\n  function draw(domNode, options) {\n    return toSvg(domNode, options).then(util.makeImage).then(util.delay(100)).then(function (image) {\n      var canvas = newCanvas(domNode);\n      canvas.getContext('2d').drawImage(image, 0, 0);\n      return canvas;\n    });\n    function newCanvas(domNode) {\n      var canvas = document.createElement('canvas');\n      canvas.width = options.width || util.width(domNode);\n      canvas.height = options.height || util.height(domNode);\n      if (options.bgcolor) {\n        var ctx = canvas.getContext('2d');\n        ctx.fillStyle = options.bgcolor;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n      }\n      return canvas;\n    }\n  }\n  function cloneNode(node, filter, root) {\n    if (!root && filter && !filter(node)) return Promise.resolve();\n    return Promise.resolve(node).then(makeNodeCopy).then(function (clone) {\n      return cloneChildren(node, clone, filter);\n    }).then(function (clone) {\n      return processClone(node, clone);\n    });\n    function makeNodeCopy(node) {\n      if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n      return node.cloneNode(false);\n    }\n    function cloneChildren(original, clone, filter) {\n      var children = original.childNodes;\n      if (children.length === 0) return Promise.resolve(clone);\n      return cloneChildrenInOrder(clone, util.asArray(children), filter).then(function () {\n        return clone;\n      });\n      function cloneChildrenInOrder(parent, children, filter) {\n        var done = Promise.resolve();\n        children.forEach(function (child) {\n          done = done.then(function () {\n            return cloneNode(child, filter);\n          }).then(function (childClone) {\n            if (childClone) parent.appendChild(childClone);\n          });\n        });\n        return done;\n      }\n    }\n    function processClone(original, clone) {\n      if (!(clone instanceof Element)) return clone;\n      return Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function () {\n        return clone;\n      });\n      function cloneStyle() {\n        copyStyle(window.getComputedStyle(original), clone.style);\n        function copyStyle(source, target) {\n          if (source.cssText) target.cssText = source.cssText;else copyProperties(source, target);\n          function copyProperties(source, target) {\n            util.asArray(source).forEach(function (name) {\n              target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));\n            });\n          }\n        }\n      }\n      function clonePseudoElements() {\n        [':before', ':after'].forEach(function (element) {\n          clonePseudoElement(element);\n        });\n        function clonePseudoElement(element) {\n          var style = window.getComputedStyle(original, element);\n          var content = style.getPropertyValue('content');\n          if (content === '' || content === 'none') return;\n          var className = util.uid();\n          clone.className = clone.className + ' ' + className;\n          var styleElement = document.createElement('style');\n          styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n          clone.appendChild(styleElement);\n          function formatPseudoElementStyle(className, element, style) {\n            var selector = '.' + className + ':' + element;\n            var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n            return document.createTextNode(selector + '{' + cssText + '}');\n            function formatCssText(style) {\n              var content = style.getPropertyValue('content');\n              return style.cssText + ' content: ' + content + ';';\n            }\n            function formatCssProperties(style) {\n              return util.asArray(style).map(formatProperty).join('; ') + ';';\n              function formatProperty(name) {\n                return name + ': ' + style.getPropertyValue(name) + (style.getPropertyPriority(name) ? ' !important' : '');\n              }\n            }\n          }\n        }\n      }\n      function copyUserInput() {\n        if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n        if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n      }\n      function fixSvg() {\n        if (!(clone instanceof SVGElement)) return;\n        clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n        if (!(clone instanceof SVGRectElement)) return;\n        ['width', 'height'].forEach(function (attribute) {\n          var value = clone.getAttribute(attribute);\n          if (!value) return;\n          clone.style.setProperty(attribute, value);\n        });\n      }\n    }\n  }\n  function embedFonts(node) {\n    return fontFaces.resolveAll().then(function (cssText) {\n      var styleNode = document.createElement('style');\n      node.appendChild(styleNode);\n      styleNode.appendChild(document.createTextNode(cssText));\n      return node;\n    });\n  }\n  function inlineImages(node) {\n    return images.inlineAll(node).then(function () {\n      return node;\n    });\n  }\n  function makeSvgDataUri(node, width, height) {\n    return Promise.resolve(node).then(function (node) {\n      node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n      return new XMLSerializer().serializeToString(node);\n    }).then(util.escapeXhtml).then(function (xhtml) {\n      return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n    }).then(function (foreignObject) {\n      return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' + foreignObject + '</svg>';\n    }).then(function (svg) {\n      return 'data:image/svg+xml;charset=utf-8,' + svg;\n    });\n  }\n  function newUtil() {\n    return {\n      escape: escape,\n      parseExtension: parseExtension,\n      mimeType: mimeType,\n      dataAsUrl: dataAsUrl,\n      isDataUrl: isDataUrl,\n      canvasToBlob: canvasToBlob,\n      resolveUrl: resolveUrl,\n      getAndEncode: getAndEncode,\n      uid: uid(),\n      delay: delay,\n      asArray: asArray,\n      escapeXhtml: escapeXhtml,\n      makeImage: makeImage,\n      width: width,\n      height: height\n    };\n    function mimes() {\n      /*\n       * Only WOFF and EOT mime types for fonts are 'real'\n       * see http://www.iana.org/assignments/media-types/media-types.xhtml\n       */\n      var WOFF = 'application/font-woff';\n      var JPEG = 'image/jpeg';\n      return {\n        'woff': WOFF,\n        'woff2': WOFF,\n        'ttf': 'application/font-truetype',\n        'eot': 'application/vnd.ms-fontobject',\n        'png': 'image/png',\n        'jpg': JPEG,\n        'jpeg': JPEG,\n        'gif': 'image/gif',\n        'tiff': 'image/tiff',\n        'svg': 'image/svg+xml'\n      };\n    }\n    function parseExtension(url) {\n      var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n      if (match) return match[1];else return '';\n    }\n    function mimeType(url) {\n      var extension = parseExtension(url).toLowerCase();\n      return mimes()[extension] || '';\n    }\n    function isDataUrl(url) {\n      return url.search(/^(data:)/) !== -1;\n    }\n    function toBlob(canvas) {\n      return new Promise(function (resolve) {\n        var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n        var length = binaryString.length;\n        var binaryArray = new Uint8Array(length);\n        for (var i = 0; i < length; i++) binaryArray[i] = binaryString.charCodeAt(i);\n        resolve(new Blob([binaryArray], {\n          type: 'image/png'\n        }));\n      });\n    }\n    function canvasToBlob(canvas) {\n      if (canvas.toBlob) return new Promise(function (resolve) {\n        canvas.toBlob(resolve);\n      });\n      return toBlob(canvas);\n    }\n    function resolveUrl(url, baseUrl) {\n      var doc = document.implementation.createHTMLDocument();\n      var base = doc.createElement('base');\n      doc.head.appendChild(base);\n      var a = doc.createElement('a');\n      doc.body.appendChild(a);\n      base.href = baseUrl;\n      a.href = url;\n      return a.href;\n    }\n    function uid() {\n      var index = 0;\n      return function () {\n        return 'u' + fourRandomChars() + index++;\n        function fourRandomChars() {\n          /* see http://stackoverflow.com/a/6248722/2519373 */\n          return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n        }\n      };\n    }\n    function makeImage(uri) {\n      return new Promise(function (resolve, reject) {\n        var image = new Image();\n        image.onload = function () {\n          resolve(image);\n        };\n        image.onerror = reject;\n        image.src = uri;\n      });\n    }\n    function getAndEncode(url) {\n      var TIMEOUT = 30000;\n      if (domtoimage.impl.options.cacheBust) {\n        // Cache bypass so we dont have CORS issues with cached images\n        // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n        url += (/\\?/.test(url) ? \"&\" : \"?\") + new Date().getTime();\n      }\n      return new Promise(function (resolve) {\n        var request = new XMLHttpRequest();\n        request.onreadystatechange = done;\n        request.ontimeout = timeout;\n        request.responseType = 'blob';\n        request.timeout = TIMEOUT;\n        request.open('GET', url, true);\n        request.send();\n        var placeholder;\n        if (domtoimage.impl.options.imagePlaceholder) {\n          var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n          if (split && split[1]) {\n            placeholder = split[1];\n          }\n        }\n        function done() {\n          if (request.readyState !== 4) return;\n          if (request.status !== 200) {\n            if (placeholder) {\n              resolve(placeholder);\n            } else {\n              fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n            }\n            return;\n          }\n          var encoder = new FileReader();\n          encoder.onloadend = function () {\n            var content = encoder.result.split(/,/)[1];\n            resolve(content);\n          };\n          encoder.readAsDataURL(request.response);\n        }\n        function timeout() {\n          if (placeholder) {\n            resolve(placeholder);\n          } else {\n            fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n          }\n        }\n        function fail(message) {\n          console.error(message);\n          resolve('');\n        }\n      });\n    }\n    function dataAsUrl(content, type) {\n      return 'data:' + type + ';base64,' + content;\n    }\n    function escape(string) {\n      return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n    }\n    function delay(ms) {\n      return function (arg) {\n        return new Promise(function (resolve) {\n          setTimeout(function () {\n            resolve(arg);\n          }, ms);\n        });\n      };\n    }\n    function asArray(arrayLike) {\n      var array = [];\n      var length = arrayLike.length;\n      for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n      return array;\n    }\n    function escapeXhtml(string) {\n      return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n    }\n    function width(node) {\n      var leftBorder = px(node, 'border-left-width');\n      var rightBorder = px(node, 'border-right-width');\n      return node.scrollWidth + leftBorder + rightBorder;\n    }\n    function height(node) {\n      var topBorder = px(node, 'border-top-width');\n      var bottomBorder = px(node, 'border-bottom-width');\n      return node.scrollHeight + topBorder + bottomBorder;\n    }\n    function px(node, styleProperty) {\n      var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n      return parseFloat(value.replace('px', ''));\n    }\n  }\n  function newInliner() {\n    var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n    return {\n      inlineAll: inlineAll,\n      shouldProcess: shouldProcess,\n      impl: {\n        readUrls: readUrls,\n        inline: inline\n      }\n    };\n    function shouldProcess(string) {\n      return string.search(URL_REGEX) !== -1;\n    }\n    function readUrls(string) {\n      var result = [];\n      var match;\n      while ((match = URL_REGEX.exec(string)) !== null) {\n        result.push(match[1]);\n      }\n      return result.filter(function (url) {\n        return !util.isDataUrl(url);\n      });\n    }\n    function inline(string, url, baseUrl, get) {\n      return Promise.resolve(url).then(function (url) {\n        return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n      }).then(get || util.getAndEncode).then(function (data) {\n        return util.dataAsUrl(data, util.mimeType(url));\n      }).then(function (dataUrl) {\n        return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n      });\n      function urlAsRegex(url) {\n        return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n      }\n    }\n    function inlineAll(string, baseUrl, get) {\n      if (nothingToInline()) return Promise.resolve(string);\n      return Promise.resolve(string).then(readUrls).then(function (urls) {\n        var done = Promise.resolve(string);\n        urls.forEach(function (url) {\n          done = done.then(function (string) {\n            return inline(string, url, baseUrl, get);\n          });\n        });\n        return done;\n      });\n      function nothingToInline() {\n        return !shouldProcess(string);\n      }\n    }\n  }\n  function newFontFaces() {\n    return {\n      resolveAll: resolveAll,\n      impl: {\n        readAll: readAll\n      }\n    };\n    function resolveAll() {\n      return readAll(document).then(function (webFonts) {\n        return Promise.all(webFonts.map(function (webFont) {\n          return webFont.resolve();\n        }));\n      }).then(function (cssStrings) {\n        return cssStrings.join('\\n');\n      });\n    }\n    function readAll() {\n      return Promise.resolve(util.asArray(document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function (rules) {\n        return rules.map(newWebFont);\n      });\n      function selectWebFontRules(cssRules) {\n        return cssRules.filter(function (rule) {\n          return rule.type === CSSRule.FONT_FACE_RULE;\n        }).filter(function (rule) {\n          return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n        });\n      }\n      function getCssRules(styleSheets) {\n        var cssRules = [];\n        styleSheets.forEach(function (sheet) {\n          try {\n            util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n          } catch (e) {\n            console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n          }\n        });\n        return cssRules;\n      }\n      function newWebFont(webFontRule) {\n        return {\n          resolve: function resolve() {\n            var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n            return inliner.inlineAll(webFontRule.cssText, baseUrl);\n          },\n          src: function () {\n            return webFontRule.style.getPropertyValue('src');\n          }\n        };\n      }\n    }\n  }\n  function newImages() {\n    return {\n      inlineAll: inlineAll,\n      impl: {\n        newImage: newImage\n      }\n    };\n    function newImage(element) {\n      return {\n        inline: inline\n      };\n      function inline(get) {\n        if (util.isDataUrl(element.src)) return Promise.resolve();\n        return Promise.resolve(element.src).then(get || util.getAndEncode).then(function (data) {\n          return util.dataAsUrl(data, util.mimeType(element.src));\n        }).then(function (dataUrl) {\n          return new Promise(function (resolve, reject) {\n            element.onload = resolve;\n            element.onerror = reject;\n            element.src = dataUrl;\n          });\n        });\n      }\n    }\n    function inlineAll(node) {\n      if (!(node instanceof Element)) return Promise.resolve(node);\n      return inlineBackground(node).then(function () {\n        if (node instanceof HTMLImageElement) return newImage(node).inline();else return Promise.all(util.asArray(node.childNodes).map(function (child) {\n          return inlineAll(child);\n        }));\n      });\n      function inlineBackground(node) {\n        var background = node.style.getPropertyValue('background');\n        if (!background) return Promise.resolve(node);\n        return inliner.inlineAll(background).then(function (inlined) {\n          node.style.setProperty('background', inlined, node.style.getPropertyPriority('background'));\n        }).then(function () {\n          return node;\n        });\n      }\n    }\n  }\n})(this);","map":{"version":3,"names":["global","util","newUtil","inliner","newInliner","fontFaces","newFontFaces","images","newImages","defaultOptions","imagePlaceholder","undefined","cacheBust","domtoimage","toSvg","toPng","toJpeg","toBlob","toPixelData","impl","options","module","exports","node","copyOptions","Promise","resolve","then","cloneNode","filter","embedFonts","inlineImages","applyOptions","clone","makeSvgDataUri","width","height","bgcolor","style","backgroundColor","Object","keys","forEach","property","draw","canvas","getContext","getImageData","data","toDataURL","quality","canvasToBlob","domNode","makeImage","delay","image","newCanvas","drawImage","document","createElement","ctx","fillStyle","fillRect","root","makeNodeCopy","cloneChildren","processClone","HTMLCanvasElement","original","children","childNodes","length","cloneChildrenInOrder","asArray","parent","done","child","childClone","appendChild","Element","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyStyle","window","getComputedStyle","source","target","cssText","copyProperties","name","setProperty","getPropertyValue","getPropertyPriority","element","clonePseudoElement","content","className","uid","styleElement","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","map","formatProperty","join","HTMLTextAreaElement","innerHTML","value","HTMLInputElement","setAttribute","SVGElement","SVGRectElement","attribute","getAttribute","resolveAll","styleNode","inlineAll","XMLSerializer","serializeToString","escapeXhtml","xhtml","foreignObject","svg","escape","parseExtension","mimeType","dataAsUrl","isDataUrl","resolveUrl","getAndEncode","mimes","WOFF","JPEG","url","match","exec","extension","toLowerCase","search","binaryString","atob","split","binaryArray","Uint8Array","i","charCodeAt","Blob","type","baseUrl","doc","implementation","createHTMLDocument","base","head","a","body","href","index","fourRandomChars","Math","random","pow","toString","slice","uri","reject","Image","onload","onerror","src","TIMEOUT","test","Date","getTime","request","XMLHttpRequest","onreadystatechange","ontimeout","timeout","responseType","open","send","placeholder","readyState","status","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","message","console","error","string","replace","ms","arg","setTimeout","arrayLike","array","push","leftBorder","px","rightBorder","scrollWidth","topBorder","bottomBorder","scrollHeight","styleProperty","parseFloat","URL_REGEX","shouldProcess","readUrls","inline","get","dataUrl","urlAsRegex","RegExp","nothingToInline","urls","readAll","webFonts","all","webFont","cssStrings","styleSheets","getCssRules","selectWebFontRules","rules","newWebFont","cssRules","rule","CSSRule","FONT_FACE_RULE","sheet","bind","e","log","webFontRule","parentStyleSheet","newImage","inlineBackground","HTMLImageElement","background","inlined"],"sources":["D:/wamp64/www/UPYOG-Project/Test-UPYOG/UPYOG/frontend/micro-ui/web/micro-ui-internals/node_modules/dom-to-image/src/dom-to-image.js"],"sourcesContent":["(function (global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof module !== 'undefined')\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n            .then(function (node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function (clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function (property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function (canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if(typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if(typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function (image) {\n                var canvas = newCanvas(domNode);\n                canvas.getContext('2d').drawImage(image, 0, 0);\n                return canvas;\n            });\n\n        function newCanvas(domNode) {\n            var canvas = document.createElement('canvas');\n            canvas.width = options.width || util.width(domNode);\n            canvas.height = options.height || util.height(domNode);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function (clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function (clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function (child) {\n                    done = done\n                        .then(function () {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function (childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) target.cssText = source.cssText;\n                    else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function (name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function (element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    clone.className = clone.className + ' ' + className;\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function (attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function (cssText) {\n                var styleNode = document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function () {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function (node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function (xhtml) {\n                return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n            })\n            .then(function (foreignObject) {\n                return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                    foreignObject + '</svg>';\n            })\n            .then(function (svg) {\n                return 'data:image/svg+xml;charset=utf-8,' + svg;\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function (resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function (resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function () {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            return new Promise(function (resolve, reject) {\n                var image = new Image();\n                image.onload = function () {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if(domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function (resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if(domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if(split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if(placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function () {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if(placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function (arg) {\n                return new Promise(function (resolve) {\n                    setTimeout(function () {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function (url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function (url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function (dataUrl) {\n                    return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n                });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function (urls) {\n                    var done = Promise.resolve(string);\n                    urls.forEach(function (url) {\n                        done = done.then(function (string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n                .then(function (webFonts) {\n                    return Promise.all(\n                        webFonts.map(function (webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function (cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function (rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function (rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function (rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function (sheet) {\n                    try {\n                        util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                    } catch (e) {\n                        console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function () {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function (data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function (dataUrl) {\n                        return new Promise(function (resolve, reject) {\n                            element.onload = resolve;\n                            element.onerror = reject;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function () {\n                    if (node instanceof HTMLImageElement)\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function (child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function (inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function () {\n                        return node;\n                    });\n            }\n        }\n    }\n})(this);\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}